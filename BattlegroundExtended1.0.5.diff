From f7ecd65d9371d8b7801fdbf490f62cb24f730f13 Mon Sep 17 00:00:00 2001
From: Grenat (Discord: Grenat#5220)
Date: Wed, 11 May 2022 22:26:05 -0700
Subject: [PATCH] Battleground Extended 1.05

---
 conf/battle/battleground.conf                 |   42 +
 conf/groups.yml                               |    5 +
 conf/maps_athena.conf                         |  .26 +-
 db/map_index.txt                              |   27 +
 npc/battleground/bg_bomberman.txt             |  872 +++++
 npc/battleground/bg_common.txt                | 1375 +++++---
 npc/battleground/bg_conquest.txt              | 2848 +++++++++++++++++
 npc/battleground/bg_double_inferno.txt        |  274 ++
 .../bg_flavius_capture_the_flag.txt           |  454 +++
 npc/battleground/bg_flavius_death_match.txt   |  251 ++
 npc/battleground/bg_flavius_stone_control.txt | 1031 ++++++
 npc/battleground/bg_offi_flavius.txt          |  624 ++++
 npc/battleground/bg_offi_kvm.txt              |  407 +++
 npc/battleground/bg_offi_tierra.txt           |  855 +++++
 npc/battleground/bg_poring_ball.txt           |  602 ++++
 npc/battleground/bg_rush.txt                  |  823 +++++
 npc/battleground/bg_tierra_bossnia.txt        |  320 ++
 npc/battleground/bg_tierra_domination.txt     |  626 ++++
 npc/battleground/bg_tierra_eye_of_storm.txt   |  699 ++++
 npc/mapflag/battleground.txt                  |    7 +-
 npc/re/scripts_athena.conf                    |    2 +-
 npc/scripts_athena.conf                       |   29 +-
 src/common/mmo.hpp                            |    3 +
 src/config/core.hpp                           |    4 +
 src/map/atcommand.cpp                         |  223 ++
 src/map/battle.cpp                            |   14 +
 src/map/battle.hpp                            |   14 +
 src/map/battleground.cpp                      |  528 ++-
 src/map/battleground.hpp                      |   50 +
 src/map/buyingstore.cpp                       |   11 +
 src/map/clif.cpp                              |  431 ++-
 src/map/clif.hpp                              |   16 +
 src/map/map.cpp                               |   14 +-
 src/map/map.hpp                               |   13 +
 src/map/npc.hpp                               |    4 +
 src/map/pc.cpp                                |   56 +
 src/map/pc.hpp                                |   14 +
 src/map/script.cpp                            |  577 ++++
 src/map/script.hpp                            |    8 +
 src/map/script_constants.hpp                  |   17 +
 src/map/skill.cpp                             |  115 +-
 src/map/storage.cpp                           |   11 +
 src/map/trade.cpp                             |   11 +
 src/map/unit.cpp                              |   11 +
 src/map/vending.cpp                           |   15 +
 48 files changed, 15383 insertions(+), 586 deletions(-)
 create mode 100644 npc/battleground/bg_bomberman.txt
 create mode 100644 npc/battleground/bg_conquest.txt
 create mode 100644 npc/battleground/bg_double_inferno.txt
 create mode 100644 npc/battleground/bg_flavius_capture_the_flag.txt
 create mode 100644 npc/battleground/bg_flavius_death_match.txt
 create mode 100644 npc/battleground/bg_flavius_stone_control.txt
 create mode 100644 npc/battleground/bg_offi_flavius.txt
 create mode 100644 npc/battleground/bg_offi_kvm.txt
 create mode 100644 npc/battleground/bg_offi_tierra.txt
 create mode 100644 npc/battleground/bg_poring_ball.txt
 create mode 100644 npc/battleground/bg_rush.txt
 create mode 100644 npc/battleground/bg_tierra_bossnia.txt
 create mode 100644 npc/battleground/bg_tierra_domination.txt
 create mode 100644 npc/battleground/bg_tierra_eye_of_storm.txt

diff --git a/conf/battle/battleground.conf b/conf/battle/battleground.conf
index 05537ea85..26a412538 100644
--- a/conf/battle/battleground.conf
+++ b/conf/battle/battleground.conf
@@ -34,3 +34,45 @@ bg_update_interval: 1000
 // Before a player is warped into a Battleground from the Battleground Queue,
 // check to see if the player's current map has MF_NOWARP.
 bgqueue_nowarp_mapflag: no
+
+//========================================
+// Battleground eAmod
+//========================================
+
+// Enable/Disable Extended BG
+bg_eAmod_mode: 1
+
+// Only allow to join queues from maps with Town mapflag. If not, players can join the BG queue everywhere, except from Battlegrounds maps. Note 1.
+bg_queue_onlytowns: 1
+
+// Time in seconds to consider a idle character on BG. Characters on Idle mode can be kicked out of BG with @reportafk. Set 0 to disable.
+bg_idle_announce: 45
+
+// Time in seconds to kick a idle character from BG if idle. They will be warped to their respawn positions. Set 0 to disable.
+bg_idle_autokick: 90
+
+// Does the @reportafk command to kick AFK players from your BG team are limited to the Team Leader only? Note 1.
+bg_reportafk_leaderonly: 1
+
+// @order command behavior
+// 0 - Display "Team Leader" as source
+// 1 - Display "Character's Name" as source
+bg_order_behavior: 1
+
+// Balance the team.
+bg_queue2team_balanced: 1
+
+// Rates as BG rewards (badges) are given. Note 3
+bg_reward_rates: 100
+
+// Reserved Char ID for battleground Items. Default value is 999996
+bg_reserved_char_id: 999996
+
+// Reserved Char ID for items usables only on WoE or GvG maps.
+woe_reserved_char_id: 999997
+
+// Allow/Deny trade BG consumables between players, gstorage (Note 1)
+bg_can_trade: 1
+
+// Deny Double Login on Battleground (IP Based)) (Note 1)
+bg_double_login: 0
\ No newline at end of file
diff --git a/conf/groups.yml b/conf/groups.yml
index 542513213..3ba3cd3b5 100644
--- a/conf/groups.yml
+++ b/conf/groups.yml
@@ -61,6 +61,11 @@ Body:
     Level: 0
     Commands:
       # Informational commands
+      reportafk: true
+      order: true
+      listenbg: true
+      bgskill: true
+      leader: true
       commands: true
       charcommands: true
       help: true
diff --git a/conf/maps_athena.conf b/conf/maps_athena.conf
index ee90ed2bc..5a0071b09 100644
--- a/conf/maps_athena.conf
+++ b/conf/maps_athena.conf
@@ -1486,2 +1486,28 @@ map: tur_d04ia
 //------------------------- Clone Maps ---------------------------
 //------------------------- Extra Maps ---------------------------
+map: bat_a03
+map: bat_a04
+map: bat_a05
+map: bat_b03
+map: bat_b04
+map: bat_b05
+map: bat_c04
+map: bat_c05
+map: bat_c06
+map: bat_c07
+map: bat_c08
+map: schg_cas06
+map: schg_cas07
+map: schg_cas08
+map: arug_cas06
+map: arug_cas07
+map: arug_cas08
+map: rush_cas01
+map: rush_cas02
+map: rush_cas03
+map: rush_cas04
+map: region_8
+map: bg_ball
+map: bomberman
+map: bg_bomber
+map: bg_bomber2
\ No newline at end of file
diff --git a/db/map_index.txt b/db/map_index.txt
index f65ed26eb..d45296c16 100644
--- a/db/map_index.txt
+++ b/db/map_index.txt
@@ -1147,3 +1147,30 @@ wolfvill
 //======================================================================================
 // - Other/Extra maps -
 //======================================================================================
+
+bat_a03
+bat_a04
+bat_a05
+bat_b03
+bat_b04
+bat_b05
+bat_c04
+bat_c05
+bat_c06
+bat_c07
+bat_c08
+schg_cas06
+schg_cas07
+schg_cas08
+arug_cas06
+arug_cas07
+arug_cas08
+rush_cas01
+rush_cas02
+rush_cas03
+rush_cas04
+region_8
+bg_ball
+bomberman
+bg_bomber
+bg_bomber2
\ No newline at end of file
diff --git a/npc/battleground/bg_bomberman.txt b/npc/battleground/bg_bomberman.txt
new file mode 100644
index 000000000..c1bbd5b2b
--- /dev/null
+++ b/npc/battleground/bg_bomberman.txt
@@ -0,0 +1,872 @@
+//===== rAthena Script =======================================
+//= Bomberman BG
+//===== By: ==================================================
+//= Grenat
+//===== Description: ===========================================
+//= Adapted version of Bomberman for Ragnarok Online.
+//===== Additional Comments: =================================
+//= 2.0 New version and updated for the latest rAthena [Grenat]
+//=     Originally made from the free release of Key
+//=    *Supports now multiple amount of maps
+//=    *Speed UP added
+//= 2.1 Speed UP bonus SC_SPEEDUP1 instead of pccalcevent which
+//=     no long exist on the latest rathena [Grenat]
+//============================================================
+
+//==============================================================
+//= Mapflags
+//==============================================================
+bomberman	mapflag	battleground	2
+bomberman	mapflag	nomemo
+bomberman	mapflag	noteleport
+bomberman	mapflag	nobranch
+bomberman	mapflag	nopenalty
+bomberman	mapflag	nozenypenalty
+bomberman	mapflag	noexppenalty
+bomberman	mapflag	nomobloot
+bomberman	mapflag	nodrop
+bomberman	mapflag	noskill
+bomberman	mapflag	nowarp
+bomberman	mapflag	nowarpto
+bomberman	mapflag	novending
+bomberman	mapflag	notrade
+bomberman	mapflag	hidemobhpbar
+bomberman	mapflag	nosave	SavePoint
+bg_bomber	mapflag	battleground	2
+bg_bomber	mapflag	nomemo
+bg_bomber	mapflag	noteleport
+bg_bomber	mapflag	nobranch
+bg_bomber	mapflag	nopenalty
+bg_bomber	mapflag	nozenypenalty
+bg_bomber	mapflag	noexppenalty
+bg_bomber	mapflag	nomobloot
+bg_bomber	mapflag	nodrop
+bg_bomber	mapflag	noskill
+bg_bomber	mapflag	nowarp
+bg_bomber	mapflag	nowarpto
+bg_bomber	mapflag	novending
+bg_bomber	mapflag	notrade
+bg_bomber	mapflag	hidemobhpbar
+bg_bomber	mapflag	nosave	SavePoint
+bg_bomber2	mapflag	battleground	2
+bg_bomber2	mapflag	nomemo
+bg_bomber2	mapflag	noteleport
+bg_bomber2	mapflag	nobranch
+bg_bomber2	mapflag	nopenalty
+bg_bomber2	mapflag	nozenypenalty
+bg_bomber2	mapflag	noexppenalty
+bg_bomber2	mapflag	nomobloot
+bg_bomber2	mapflag	nodrop
+bg_bomber2	mapflag	noskill
+bg_bomber2	mapflag	nowarp
+bg_bomber2	mapflag	nowarpto
+bg_bomber2	mapflag	novending
+bg_bomber2	mapflag	notrade
+bg_bomber2	mapflag	hidemobhpbar
+bg_bomber2	mapflag	nosave	SavePoint
+
+//==============================================================
+//= Bomb item scripts.
+//==============================================================
+
+function	script	bomb_summon	{
+	getmapxy .@map$, .@x, .@y;
+	if(.@map$ == "bomberman") .@map = 1;
+	else if(.@map$ == "bg_bomber") .@map = 2;
+	else if(.@map$ == "bg_bomber2") .@map = 3;
+	else end;
+	// Check if event is on
+	if ( ! getd("$@BBM_RUN"+.@map+"") )
+		end ;
+	// Check if registered
+	if ( getvariableofnpc(getd(".PlayerList"+.@map+"[0]"),""+.@map+"Bomb#core") != getcharid(3) &&
+		getvariableofnpc(getd(".PlayerList"+.@map+"[1]"),""+.@map+"Bomb#core") != getcharid(3) &&
+		getvariableofnpc(getd(".PlayerList"+.@map+"[2]"),""+.@map+"Bomb#core") != getcharid(3) &&
+		getvariableofnpc(getd(".PlayerList"+.@map+"[3]"),""+.@map+"Bomb#core") != getcharid(3) )
+		end;
+	// Maximum Bomb to put at the same time
+	if ( @BBM_spawn > ( (countitem($@ID_DELAY_DOWN) > 7) ? 7 : countitem($@ID_DELAY_DOWN) ) )
+		end ;
+
+	@BBM_spawn ++;
+	sc_start SC_SPEEDUP1,6000,countitem($@ID_SPEED_UP)*10;
+
+	// Collect a valid Bomb and trigger it
+	for ( set .@i, 1; .@i < 42; set .@i, .@i+1 )
+		if ( ! (getd("$@BBM_RESERVED"+.@map+"") & (1 << .@i)) )
+		{
+			setd("$@BBM_RESERVED"+.@map+""),  getd("$@BBM_RESERVED"+.@map+"") | 1 << .@i ;
+			setd("$@BBM_NAME"+.@map+"["+.@i+"]"), getcharid(3);
+			moveNPC ""+.@map+"Bomb#"+.@i, .@x, .@y;
+			setwall getd("$@BombRMAP"+.@map+"$"), .@x, .@y, 1, 4, 0, "BBM"+.@map+"_"+.@x+"-"+.@y;
+			initnpctimer ""+.@map+"Bomb#"+.@i;
+			return 1;
+		}
+	return 0;
+}
+
+//==============================================================
+//= Main Script.
+//==============================================================
+bomberman,0,0,4	script	1Bomb#core	-1,{
+
+	function do_init;          // Initialisation des variables + map
+	function resetplayervar;   // Clean/Initialise les variables des joueurs
+	function build_explosion;  // Prépare une explosion
+	function do_explosion;     // Fait l'explosion
+	function ExploseBombin;    // Explosion en Chaîne
+	function isPlayerin;       // Retourne 1 si une personne est trouvée sur <x>,<y>
+	function checkplayerinarea;// Fait une action sur les joueurs dans une zone
+	function setmapflaglist;   // Function raccourcie de setmapflag
+	function build_arena;      // Construit la map
+	function destroy_arena;    // Main function pour détruire l'arene
+	function destroy_xy;       // Sub function pour détruire une rangée
+	function rewardend;        // Rewards and end
+	function onemoregame;	   // Launch another round
+
+	// Spawn bomb
+	OnPush:
+		.@map = atoi(strnpcinfo(1));
+		// Check item "bomb"
+		if ( ! countitem($@ID_BOMB_KICK) )
+			end;
+
+		// Bug if we don't stop it
+		npcstop;
+
+		getmapxy .@map$, .@x, .@y ;
+		getmapxy .@map$, .@x_, .@y_, BL_NPC ;
+
+		// Long range hack
+		if ( distance(.@x, .@y, .@x_, .@y_) > 2 ) {
+			message strcharinfo(0), "You must be a square away to be able to push the Bomb !";
+			end;
+		}
+
+		// Block diagonal movement
+		if ( (.@x!=.@x_)^(.@y!=.@y_) ) {
+			set .@dist_x, ( .@x_ - .@x ) ;
+			set .@dist_y, ( .@y_ - .@y ) ;
+
+			// Check max range where the bomb can go without meeting obstacles
+			do {
+				set .@case,.@case+1;
+				set .@futur_x, .@dist_x * .@case + .@x_;
+				set .@futur_y, .@dist_y * .@case + .@y_;
+			} while( checkcell(getd("$@BombRMAP"+.@map+"$"), .@futur_x ,.@futur_y ,cell_chkpass) );
+
+			// In case the bomb meets a wall
+			if ( .@case-1 ) {
+				// Removed blocking wall, Bomb movement, visual effect.
+				delwall "BBM"+.@map+"_"+.@x_+"-"+.@y_;
+				set .@futur_x, .@dist_x * (.@case-1) + .@x_;
+				set .@futur_y, .@dist_y * (.@case-1) + .@y_;
+				soundeffectall "bomberman_kick.wav",0,strnpcinfo(4);
+				npcwalkto .@futur_x, .@futur_y ;
+				specialeffect(53);
+
+				// Stop the Bomb if someone is in the way (player or Bomb or wall)
+				do {
+					setd ".BBM"+.@map+"_XY_"+.@x_+"-"+.@y_ , 0;
+					getmapxy .@map$, .@x_, .@y_, BL_NPC;
+					setd ".BBM"+.@map+"_XY_"+.@x_+"-"+.@y_ , atoi(strnpcinfo(2));
+
+					set .@look_x, .@dist_x*2  + .@x_;
+					set .@look_y, .@dist_y*2  + .@y_;
+
+					if ( isPlayerin(.@look_x,.@look_y) || getd(".BBM"+.@map+"_XY_"+.@look_x+"-"+.@look_y) )
+					{
+						setd ".BBM"+.@map+"_XY_"+.@x_+"-"+.@y_ , 0;
+						npcstop;
+
+						// movenpc to correct a visual bug square
+						set .@x, .@dist_x+.@x_;
+						set .@y, .@dist_y+.@y_;
+						movenpc strnpcinfo(0), .@x , .@y ;
+
+						setwall getd("$@BombRMAP"+.@map+"$"), .@x, .@y, 1, 4, 0, "BBM"+.@map+"_"+.@x+"-"+.@y;
+						setd ".BBM"+.@map+"_XY_"+.@x+"-"+.@y , atoi(strnpcinfo(2));
+						break;
+
+					}
+					sleep(30);
+				} while( .@futur_x!=.@x_ || .@futur_y!=.@y_ );
+			}
+		}
+		end;
+
+	// Préparation du jeu.
+	OnStart:
+		.@map = atoi(strnpcinfo(1));
+		if(.@map == 1) setarray .@pos[0],25,42,35,32,25,32,35,42;
+		else if(.@map == 2) setarray .@pos[0],141,164,155,164,155,150,141,150;
+		else if(.@map == 3) setarray .@pos[0],94,85,106,85,106,73,94,73;
+		deletearray getd(".PlayerList"+.@map+"[0]"), getarraysize(getd(".PlayerList"+.@map+""));
+
+		do_init();
+
+		deletearray $@arenamembers[0],getarraysize($@arenamembers);
+		bg_get_data(getd("$@bomberman"+.@map+"1"),1);
+		setd(".PlayerList"+.@map+"[0]"), $@arenamembers[0];
+		setd(".PlayerList"+.@map+"[1]"), $@arenamembers[1];
+		setpcblock PCBLOCK_ATTACK,1,$@arenamembers[0];
+		if($@arenamembers[1]) setpcblock PCBLOCK_ATTACK,1,$@arenamembers[1];
+		deletearray $@arenamembers[0],getarraysize($@arenamembers);
+		bg_get_data(getd("$@bomberman"+.@map+"2"),1);
+		setd(".PlayerList"+.@map+"[2]"), $@arenamembers[0];
+		setd(".PlayerList"+.@map+"[3]"), $@arenamembers[1];
+		setpcblock PCBLOCK_ATTACK,1,$@arenamembers[0];
+		if($@arenamembers[1]) setpcblock PCBLOCK_ATTACK,1,$@arenamembers[1];
+		for( .@i = 0; .@i < getarraysize(getd(".PlayerList"+.@map+"")); .@i++ )
+			if(getd(".PlayerList"+.@map+"["+.@i+"]"))
+				warpchar getd("$@BombRMAP"+.@map+"$"),.@pos[.@i*2],.@pos[.@i*2+1], getcharid(0,rid2name(getd(".PlayerList"+.@map+"["+.@i+"]")));
+		setd("$@BBM_RUN"+.@map+""), 1;
+		setd("$@BBM_DESTROY"+.@map+""), 0;
+		setd("$@score_bomber"+.@map+"_red"),0;
+		setd("$@score_bomber"+.@map+"_blue"),0;
+		setd("$@BomberRound"+.@map+""),0;
+
+		resetplayervar(1);  // Initialisation des variables + items
+		build_arena();      // Construction de la map
+		initnpctimer;       // Début du timer
+		sleep 800;
+		soundeffectall "bomberman_intro.wav",0,strnpcinfo(4);
+		sleep 1500;
+		bg_reserve strnpcinfo(4),true;
+		end;
+
+	// Debug.
+	OnDebug:
+		do_init();
+		end;
+	// Explosion en chaîne !
+	OnExplose:
+		specialeffect( .EXPLOSION_EFFECT ) ;
+		soundeffectall "bomberman_explode.wav",0,strnpcinfo(4);
+		end;
+	// Invulnérabilité qui prend fin.
+	OnInvincibleEnd:
+		set @BBM_INVINCIBLE, 0;
+		end;
+	// Initialisation du jeu.
+	OnInit:
+		if(compare(strnpcinfo(0),"bomb")) {
+			setnpcdisplay( strnpcinfo(0), strnpcinfo(0), 1904, 1 );
+			npcspeed 110;
+		}
+		do_init();
+		end;
+
+	// Dire que la Bomb se trouve à <x>,<y>.
+	// (erreur fixed)
+	OnTimer1:
+		soundeffectall "bomberman_bomb.wav",0,strnpcinfo(4);
+		if( strnpcinfo(2) != "core" ) {
+			getmapxy .@map$, .@x, .@y, BL_NPC;
+			setd ".BBM"+atoi(strnpcinfo(1))+"_XY_"+.@x+"-"+.@y , atoi(strnpcinfo(2));
+		}
+		end;
+
+	// Vibration sur la Bomb.
+	OnTimer1000: OnTimer2000:
+		if( strnpcinfo(2) != "core" )
+			specialeffect( 458 ) ;
+		end;
+
+	// Explosion de la Bomb.
+	OnTimer3000: OnComboExplose:
+		.@map = atoi(strnpcinfo(1));
+		if( strnpcinfo(2) != "core" ) {
+			if ( attachrid(getd("$@BBM_NAME"+.@map+"["+atoi(strnpcinfo(2))+"]")) ) {
+				set @BBM_spawn, @BBM_spawn > 0 ? @BBM_spawn-1 : 0 ;
+				detachrid;
+			}
+			stopnpctimer;
+			getmapxy .@map$, .@x, .@y, BL_NPC;
+			setd ".BBM"+.@map+"_XY_"+.@x+"-"+.@y , 0;
+			specialeffect( .EXPLOSION_EFFECT ) ;
+			soundeffectall "bomberman_explode.wav",0,strnpcinfo(4);
+			build_explosion(.@x,.@y);
+			if ( getd("$@BBM_RESERVED"+.@map+"") & (1 << atoi(strnpcinfo(2))) )
+				setd("$@BBM_RESERVED"+.@map+""),  getd("$@BBM_RESERVED"+.@map+"") - (1 << atoi(strnpcinfo(2))) ;
+			setd("$@BBM_NAME"+.@map+"["+atoi(strnpcinfo(2))+"]"), 0;
+		}
+		end;
+
+	// Fin du main timer, destruction de l'arêne.
+	OnTimer300000:
+		destroy_arena();
+		resetplayervar();
+		do_init();
+		end ;
+
+	// When someone leaves
+	OnBombermanQuit:
+		//sc_end SC_TIMERDOWN;
+		cutin "",255;
+		setpcblock PCBLOCK_ATTACK,0;
+		bg_desert;
+		end;
+
+	function do_init {
+		// Configurations
+		set .BBM_BARRIERE_ID1   , 20403;	// Mob ID barriers Map 1
+		set .BBM_BARRIERE_ID2   , 20404;	// Mob ID barriers Map 2
+		set .BBM_BARRIERE_ID3   , 20405;	// Mob ID barriers Map 3
+		set .BBM_BARRIERE_SIZE1   , 0;		// Mob Size barriers Map 1
+		set .BBM_BARRIERE_SIZE2   , 1;		// Mob Size barriers Map 2
+		set .BBM_BARRIERE_SIZE3   , 0;		// Mob Size barriers Map 3
+		set .EXPLOSION_EFFECT   , 634;		// Visual effect ID of bomb explosion
+		set .ZONE_EXPLOSION     , 1;		// explosion range (1 case autour donc 3*3)
+		set .game_over          , 3;		// Amount of time dead before le player to leave the scene
+		set .chance_drop	, 65;		// pourcentage chance to obtain an item
+		set $@ID_BOMB_BOX       , 8968;		// Item ID Bomb
+		set $@ID_BOMB_KICK      , 8969;		// Item ID Bomb Kick
+		set $@ID_INCR_EXPL      , 8970;		// Item ID Fire UP
+		set $@ID_DELAY_DOWN     , 8971;		// Item ID Bomb UP
+		set $@ID_SPEED_UP	, 8972;		// Item ID Speed UP
+		set $@BombRMAP1$	, "bomberman";	// Map 1 : Zombie/Halloween map
+		set $@BombRMAP2$	, "bg_bomber";	// Map 2 : Xmas theme
+		set $@BombRMAP3$	, "bg_bomber2";	// Map 3 : Prontera/Urbain style
+		setarray .arena_settings1[0], 24, 31 ;		// <x>,<y> from bottom west of arena
+		setarray .arena_settings2[0], 140, 149 ;	// <x>,<y> from bottom west of arena
+		setarray .arena_settings3[0], 93, 72 ;		// <x>,<y> from bottom west of arena
+		setarray .dead_respawn1[0], 33, 29 ;		// <x>,<y> of respawn for those who are game over
+		setarray .dead_respawn2[0], 148, 148 ;		// <x>,<y> of respawn for those who are game over
+		setarray .dead_respawn3[0], 90, 79 ;		// <x>,<y> of respawn for those who are game over
+		setarray .lenght1, 11 ; 			// lenght of the 1st map
+		setarray .lenght2, 15 ; 			// lenght of the 2nd map
+		setarray .lenght3, 13 ; 			// lenght of the 3rd map
+		killmonster strnpcinfo(4), "All";
+		cleanmap strnpcinfo(4);
+		stopnpctimer;
+	}
+
+	function setmapflaglist {
+		for( set .@i,1; getarg(.@i,-1)+1; set .@i, .@i+1 )
+			setmapflag getarg(0),getarg(.@i);
+	}
+
+	function build_explosion {
+		.@map = atoi(strnpcinfo(1));
+		npcstop;
+
+		// Explosion zone
+		if ( attachrid(getd("$@BBM_NAME"+.@map+"["+atoi(strnpcinfo(2))+"]")) )
+		{
+			set .@ZONE_EXPLOSION, countitem($@ID_INCR_EXPL)+1 > 6 ? 6 : countitem($@ID_INCR_EXPL)+1 ;
+			detachrid;
+		}
+		else
+			set .@ZONE_EXPLOSION, 1 ;
+
+		// Moving the npc before explosion (infinity loop if misplaced).
+		moveNPC strnpcinfo(0), 0, 0;
+
+		// Explosion on ourselves
+		do_explosion(getarg(0),getarg(1));
+
+		setarray .@matrix[0], 0,  1, 1,  0, 0, -1, -1, 0;
+
+		// Zone explosion
+		for ( set .@face,0; .@face<4; set .@face, .@face+1)
+			for ( set .@zone,1; .@zone<=.@ZONE_EXPLOSION; set .@zone,.@zone+1 )
+			{
+				set .@x, getarg(0) + .@matrix[.@face*2] * .@zone ;
+				set .@y, getarg(1) + .@matrix[.@face*2+1] * .@zone ;
+				if( checkcell(getd("$@BombRMAP"+.@map+"$"),.@x,.@y,cell_chkpass) )
+				{
+					do_explosion(.@x,.@y);
+					continue;
+//				} else if ( mobcount(getd("$@BombRMAP"+.@map+"$"),""+.@map+"Bomb#core::OnBBM"+.@map+"_"+.@x+"-"+.@y) || getd(".BBM"+.@map+"_XY_"+.@x+"-"+.@y) )
+				} else if ( getareaunits(BL_MOB,getd("$@BombRMAP"+.@map+"$"),.@x,.@y,.@x,.@y) || getd(".BBM"+.@map+"_XY_"+.@x+"-"+.@y) )
+					do_explosion(.@x,.@y);
+				break;
+			}
+	}
+
+	function do_explosion {
+
+		.@map = atoi(strnpcinfo(1));
+		set .@x, getarg(0) ;
+		set .@y, getarg(1) ;
+
+		// Création de l'explosion.
+		moveNPC "Explosion"+.@map+"#BBM", .@x, .@y;
+		donpcevent "Explosion"+.@map+"#BBM::OnExplose";
+		if(checkwall("BBM"+.@map+"_"+.@x+"-"+.@y)) delwall "BBM"+.@map+"_"+.@x+"-"+.@y;
+		if(.@x) cleanarea getd("$@BombRMAP"+.@map+"$"),.@x,.@y,.@x,.@y;
+		// Item Drops
+//		if ( mobcount(getd("$@BombRMAP"+.@map+"$"),""+.@map+"Bomb#core::OnBBM"+.@map+"_"+.@x+"-"+.@y) )
+		if( getareaunits(BL_MOB,getd("$@BombRMAP"+.@map+"$"),.@x,.@y,.@x,.@y,.@array) )
+		{
+			unitkill .@array[0];
+//			killmonster getd("$@BombRMAP"+.@map+"$"), ""+.@map+"Bomb#core::OnBBM"+.@map+"_"+.@x+"-"+.@y;
+
+			// 1/2 chance de spam item
+			if ( rand(0,100) <= .chance_drop ) {
+				//18%
+				if( set(.@r, rand(1,100)) < 18 )
+					makeitem $@ID_BOMB_KICK, 1, getd("$@BombRMAP"+.@map+"$"), .@x, .@y ;
+				//29%
+				else if ( .@r < 47 )
+					makeitem $@ID_INCR_EXPL, 1, getd("$@BombRMAP"+.@map+"$"), .@x, .@y ;
+				//24%
+				else if ( .@r < 71 )
+					makeitem $@ID_SPEED_UP, 1, getd("$@BombRMAP"+.@map+"$"), .@x, .@y ;
+				//29%
+				else
+					makeitem $@ID_DELAY_DOWN, 1, getd("$@BombRMAP"+.@map+"$"), .@x, .@y ;
+			}
+		}
+		else
+			checkplayerinarea( .@x, .@y, 1 );
+
+		// Explosion en chaine.
+		ExploseBombin(.@x,.@y, atoi(strnpcinfo(2)));
+
+	}
+
+	function checkplayerinarea {
+
+		.@map = atoi(strnpcinfo(1));
+		set .@x, getarg(0);
+		set .@y, getarg(1);
+		set .@malus, getarg(2);
+
+		// For all players...
+		for( set .@i,0; .@i<getarraysize(getd(".PlayerList"+.@map+"")); set .@i, .@i+1 ) {
+
+			// ... that are online and on the map...
+			if( attachrid(getd(".PlayerList"+.@map+"["+.@i+"]")) ) {
+				getmapxy .@map$, .@x_, .@y_, BL_PC, rid2name(getd(".PlayerList"+.@map+"["+.@i+"]"));
+
+				// ... that are in the explosion and not invincible...
+				if( .@map$ == getd("$@BombRMAP"+.@map+"$") && !distance(.@x,.@y,.@x_,.@y_) ) {
+
+					if ( @BBM_INVINCIBLE &&  ! getarg(3,0) )
+						continue;
+
+					// ... dégâts + effets
+					set @BBM_HIT, @BBM_HIT+.@malus;
+					specialeffect2( 372 );
+					soundeffectall "bomberman_audience.wav",0,strnpcinfo(4);
+
+					// Gain pts for the other team
+					if(bg_teamid()) setd("$@score_bomber"+.@map+"_blue"),getd("$@score_bomber"+.@map+"_blue")+1;
+					else setd("$@score_bomber"+.@map+"_red"),getd("$@score_bomber"+.@map+"_red")+1;
+					bg_updatescore strnpcinfo(4),getd("$@score_bomber"+.@map+"_blue"),getd("$@score_bomber"+.@map+"_red");
+
+					// too much dead => game over
+					if ( @BBM_HIT >= .game_over )
+					{
+						// Delete player from array
+						deletearray getd(".PlayerList"+.@map+"["+.@i+"]"), 1 ;
+						set .@i, .@i-1;
+
+						// Clean var + items.
+						set @BBM_spawn, 0;
+						set @BBM_HIT, 0;
+						set @BBM_INVINCIBLE, 0;
+						set @BBM_HIT, 0;
+						set @ZONE_EXPLOSION, 0;
+						set @BBM_DELAY, 0;
+						delitem $@ID_INCR_EXPL , countitem($@ID_INCR_EXPL) ;
+						delitem $@ID_BOMB_BOX  , countitem($@ID_BOMB_BOX)  ;
+						delitem $@ID_DELAY_DOWN, countitem($@ID_DELAY_DOWN);
+						delitem $@ID_BOMB_KICK , countitem($@ID_BOMB_KICK) ;
+						delitem $@ID_SPEED_UP , countitem($@ID_SPEED_UP) ;
+						atcommand "@size 0";
+						//sc_end SC_TIMERDOWN;
+						cutin "",255;
+						setpcblock PCBLOCK_ATTACK,0;
+
+						// No players left on the map, end
+						if(getmapunits(BL_PC,.@map$) < 2)
+							rewardend();
+
+						warp .@map$,getd(".dead_respawn"+.@map+"[0]"),getd(".dead_respawn"+.@map+"[1]");
+
+						// Not enough players, winner is here
+						if ( getarraysize(getd(".PlayerList"+.@map+"")) < 2 ) {
+							announce "[Bomberman] "+ rid2name(getd(".PlayerList"+.@map+"[0]")) + " just won this round ! 1 more point for this team !",bc_area, 0xffbbaa;
+							if(getcharid(4,rid2name(getd(".PlayerList"+.@map+"[0]"))) == getd("$@bomberman"+.@map+"1"))
+								setd("$@score_bomber"+.@map+"_blue"),getd("$@score_bomber"+.@map+"_blue")+1;
+							else
+								setd("$@score_bomber"+.@map+"_red"),getd("$@score_bomber"+.@map+"_red")+1;
+							bg_updatescore strnpcinfo(4),getd("$@score_bomber"+.@map+"_blue"),getd("$@score_bomber"+.@map+"_red");
+							if(getd("$@BBM_DESTROY"+.@map+"") || getd("$@BomberRound"+.@map+"") > 1)
+								rewardend();
+							else
+								onemoregame();
+						}
+					} else {
+						// Début de l'invulnérabilité de 4 secondes.
+						specialeffect2(120);
+						set @BBM_INVINCIBLE, 1;
+						addtimer 4000, strnpcinfo(0)+"::OnInvincibleEnd";
+					}
+				}
+				detachrid;
+			} else {
+				// Delete Player
+				deletearray getd(".PlayerList"+.@map+"["+.@i+"]"), 1 ;
+				.@i -= 1;
+			}
+		}
+	}
+
+	function resetplayervar {
+
+		.@map = atoi(strnpcinfo(1));
+		// For all players...
+		for( .@i = 0; .@i<getarraysize(getd(".PlayerList"+.@map+"")); .@i++ ) {
+			// ... online...
+			if( attachrid(getd(".PlayerList"+.@map+"["+.@i+"]")) ) {
+				// Clean var + items
+				set @BBM_INVINCIBLE, 0;
+				set @BBM_HIT, 0;
+				set @BBM_spawn, 0;
+				delitem $@ID_INCR_EXPL , countitem($@ID_INCR_EXPL) ;
+				delitem $@ID_BOMB_BOX  , countitem($@ID_BOMB_BOX)  ;
+				delitem $@ID_DELAY_DOWN, countitem($@ID_DELAY_DOWN);
+				delitem $@ID_BOMB_KICK , countitem($@ID_BOMB_KICK) ;
+				delitem $@ID_SPEED_UP , countitem($@ID_SPEED_UP) ;
+
+				if ( getarg(0,0) ){
+					set @BBM_DELAY, 3;
+					atcommand "@size 1";
+					set @ZONE_EXPLOSION, .ZONE_EXPLOSION;
+					getitem $@ID_BOMB_BOX,1;
+					//sc_start SC_TIMERDOWN,301000,300;
+				} else {
+					set @ZONE_EXPLOSION, 0;
+					set @BBM_DELAY, 0;
+					bg_desert;
+					//sc_end SC_TIMERDOWN;
+					cutin "",255;
+					setpcblock PCBLOCK_ATTACK,0;
+					warp "bat_room",154,150;
+					atcommand "@size 0";
+				}
+
+				detachrid;
+			} else {
+				// Delete Player
+				deletearray getd(".PlayerList"+.@map+"["+.@i+"]"), 1 ;
+				.@i -= 1;
+			}
+		}
+	}
+
+	function build_arena {
+		.@map = atoi(strnpcinfo(1));
+		for( set .@x,0; .@x<=getd(".lenght"+.@map+"")+1; set .@x,.@x+1 )
+		{
+			set .@x_, getd(".arena_settings"+.@map+"[0]")+.@x;
+			for( set .@y,0; .@y<=getd(".lenght"+.@map+"")+1; set .@y, .@y+1 )
+			{
+
+				set .@y_, getd(".arena_settings"+.@map+"[1]")+.@y;
+
+				// Check if there is a monster/wall
+				if(checkwall("BBM"+.@map+"_"+.@x_+"-"+.@y_)) delwall "BBM"+.@map+"_"+.@x_+"-"+.@y_;
+				killmonster getd("$@BombRMAP"+.@map+"$"), ""+.@map+"Bomb#core::OnBBM"+.@map+"_"+.@x_+"-"+.@y_;
+
+				// Pas de murs
+				if ( checkcell(getd("$@BombRMAP"+.@map+"$"),.@x_,.@y_,cell_chkpass) )
+				{
+					// Une chance sur deux de spam un mur.
+					if ( rand(2) )
+					{
+						 // zone d'apparition, pas de spam.
+						if ( ( .@x < 3 && (.@y < 3 || .@y > 9 ) ) || ( .@x > 9 && ( .@y < 3 || .@y > 9) ) )
+							continue;
+						monster getd("$@BombRMAP"+.@map+"$"), .@x_, .@y_, "", getd(".BBM_BARRIERE_ID"+.@map+""), 1, strnpcinfo(0)+"::OnBBM"+.@map+"_"+.@x_+"-"+.@y_, getd(".BBM_BARRIERE_SIZE"+.@map+""), AI_BOMB;
+						setwall getd("$@BombRMAP"+.@map+"$"), .@x_, .@y_, 1, 4, 0, "BBM"+.@map+"_"+.@x_+"-"+.@y_;
+					}
+				}
+			}
+		}
+	}
+
+	function isPlayerin {
+		.@map = atoi(strnpcinfo(1));
+		for( set .@i,0; .@i<getarraysize(getd(".PlayerList"+.@map+"")); set .@i, .@i+1 ) {
+			if( attachrid(getd(".PlayerList"+.@map+"["+.@i+"]")) ) {
+				getmapxy .@map$, .@x, .@y, BL_PC, rid2name(getd(".PlayerList"+.@map+"["+.@i+"]"));
+				if( .@map$ == getd("$@BombRMAP"+.@map+"$") && !distance(.@x,.@y,getarg(0),getarg(1)) )
+					return 1;
+			} else {
+				deletearray getd(".PlayerList"+.@map+"["+.@i+"]"), 1 ;
+				.@i -= 1;
+			}
+		}
+		return 0;
+	}
+
+	function ExploseBombin {
+		.@map = atoi(strnpcinfo(1));
+		if ( set(.@npc,getd(".BBM"+.@map+"_XY_"+getarg(0)+"-"+getarg(1))) ){
+			donpcevent .@map+"Bomb#"+.@npc+"::OnComboExplose";
+		}
+	}
+
+	function destroy_xy {
+		.@map = atoi(strnpcinfo(1));
+		for(
+			set .@i, getarg(0);
+			(getarg(0) < getarg(1) ? .@i<=getarg(1) : .@i>=getarg(1)) ;
+			set .@i,.@i+1 *( getarg(0) < getarg(1) ? 1 : -1 )
+		){
+			set .@x, getd(".arena_settings"+.@map+"[0]")+.@i;
+			for(
+				set .@j, getarg(2);
+				(getarg(2) < getarg(3) ? .@j<=getarg(3) : .@j>=getarg(3)) ;
+				set .@j,.@j+1 *( getarg(2) < getarg(3) ? 1 : -1 )
+			){
+				set .@y, getd(".arena_settings"+.@map+"[1]")+.@j;
+				if ( mobcount(getd("$@BombRMAP"+.@map+"$"),""+.@map+"Bomb#core::OnBBM"+.@map+"_"+.@x+"-"+.@y) ){
+					killmonster getd("$@BombRMAP"+.@map+"$"), ""+.@map+"Bomb#core::OnBBM"+.@map+"_"+.@x+"-"+.@y;
+					delwall "BBM"+.@map+"_"+.@x+"-"+.@y;
+				}
+				if(checkcell(getd("$@BombRMAP"+.@map+"$"),.@x,.@y,cell_chkpass)){
+					monster getd("$@BombRMAP"+.@map+"$"), .@x, .@y, "", getd(".BBM_BARRIERE_ID"+.@map+""), 1, "", getd(".BBM_BARRIERE_SIZE"+.@map+""), AI_BOMB;
+					setwall getd("$@BombRMAP"+.@map+"$"), .@x, .@y, 1, 4, 0, "BBM"+.@map+"_"+.@x+"-"+.@y;
+				}
+
+				cleanarea getd("$@BombRMAP"+.@map+"$"),.@x,.@y,.@x,.@y;
+				checkplayerinarea(.@x,.@y,3,1);
+				if (  ! getd("$@BBM_DESTROY"+.@map+"") )
+					return 1;
+
+				sleep(100);
+			}
+		}
+	}
+
+	function destroy_arena {
+		soundeffectall "bomberman_timeup.wav",0,strnpcinfo(4);
+		.@map = atoi(strnpcinfo(1));
+		setd("$@BBM_DESTROY"+.@map+""), 1;
+		for( .@i = 0; .@i<5; .@i++) {
+			destroy_xy(1+1*.@i,(getd(".lenght"+.@map+"")-(1*.@i)),getd(".lenght"+.@map+"")-1*.@i,getd(".lenght"+.@map+"")-1*.@i);
+			destroy_xy(getd(".lenght"+.@map+"")-1*.@i,getd(".lenght"+.@map+"")-1*.@i,(getd(".lenght"+.@map+"")-1)-1*.@i,1+1*.@i);
+			destroy_xy((getd(".lenght"+.@map+"")-1)-1*.@i,1+1*.@i,1+1*.@i,1+1*.@i);
+			destroy_xy(1+1*.@i,1+1*.@i,2+1*.@i,(getd(".lenght"+.@map+"")-1)-1*.@i);
+		}
+		bg_reserve strnpcinfo(4), true;
+		sleep 10000;
+		rewardend();
+	}
+
+	function rewardend {
+		.@map = atoi(strnpcinfo(1));
+		if(getd("$@score_bomber"+.@map+"_red") < getd("$@score_bomber"+.@map+"_blue")) {
+			mapannounce strnpcinfo(4),"[Bomberman] The Blue team has the most points !",0xffbbaa;
+			callfunc "BG_get_Rewards",getd("$@bomberman"+.@map+"1"),7829,3;
+			callfunc "BG_ranking",getd("$@bomberman"+.@map+"1"),BG_BOMBERMAN,1;
+			callfunc "BG_ranking",getd("$@bomberman"+.@map+"2"),BG_BOMBERMAN,0;
+		} else if(getd("$@score_bomber"+.@map+"_blue") < getd("$@score_bomber"+.@map+"_red")) {
+			mapannounce strnpcinfo(4),"[Bomberman] The Red team has the most points !",0xffbbaa;
+			callfunc "BG_get_Rewards",getd("$@bomberman"+.@map+"2"),7829,3;
+			callfunc "BG_ranking",getd("$@bomberman"+.@map+"2"),BG_BOMBERMAN,1;
+			callfunc "BG_ranking",getd("$@bomberman"+.@map+"1"),BG_BOMBERMAN,0;
+		} else {
+			mapannounce strnpcinfo(4),"[Bomberman] DRAW !!",0xffbbaa;
+			callfunc "BG_get_Rewards",getd("$@bomberman"+.@map+"1"),7829,1;
+			callfunc "BG_get_Rewards",getd("$@bomberman"+.@map+"2"),7829,1;
+		}
+		setd("$@BBM_RUN"+.@map+""), 0;
+		setd("$@score_bomber"+.@map+"_blue"),0;
+		setd("$@score_bomber"+.@map+"_red"),0;
+		playBGMall "182",strnpcinfo(4);
+		soundeffectall "bomberman_end.wav",0,strnpcinfo(4);
+		sleep 4000;
+		resetplayervar();
+		killmonster strnpcinfo(4), "All";
+		cleanmap strnpcinfo(4);
+		bg_reserve strnpcinfo(4), true;
+		mapwarp strnpcinfo(4),"bat_room",154,150;
+		if(getd("$@bomberman"+.@map+"1")) { bg_destroy getd("$@bomberman"+.@map+"1"); setd("$@bomberman"+.@map+"1"),0; }
+		if(getd("$@bomberman"+.@map+"2")) { bg_destroy getd("$@bomberman"+.@map+"2"); setd("$@bomberman"+.@map+"2"),0; }
+		bg_unbook strnpcinfo(4);
+		do_init();
+		if ( getarg(3,0) ){
+			setd(".BBM_DESTROY"+.@map+""),0;
+			return;
+		}
+	}
+
+	function onemoregame {
+		playBGMall "182",strnpcinfo(4);
+		soundeffectall "bomberman_end.wav",0,strnpcinfo(4);
+		sleep 3500;
+		.@map = atoi(strnpcinfo(1));
+		setd("$@BomberRound"+.@map+""),getd("$@BomberRound"+.@map+"")+1;
+		if(.@map == 1) setarray .@pos[0],25,42,35,32,25,32,35,42;
+		else if(.@map == 2) setarray .@pos[0],141,164,155,164,155,150,141,150;
+		else if(.@map == 3) setarray .@pos[0],94,85,106,85,106,73,94,73;
+		deletearray getd(".PlayerList"+.@map+"[0]"), getarraysize(getd(".PlayerList"+.@map+""));
+		killmonster strnpcinfo(4), "All";
+		cleanmap strnpcinfo(4);
+
+		deletearray $@arenamembers[0],getarraysize($@arenamembers);
+		bg_get_data(getd("$@bomberman"+.@map+"1"),1);
+		setd(".PlayerList"+.@map+"[0]"), $@arenamembers[0];
+		setd(".PlayerList"+.@map+"[1]"), $@arenamembers[1];
+		setpcblock PCBLOCK_ATTACK,1,$@arenamembers[0];
+		if($@arenamembers[1]) setpcblock PCBLOCK_ATTACK,1,$@arenamembers[1];
+		deletearray $@arenamembers[0],getarraysize($@arenamembers);
+		bg_get_data(getd("$@bomberman"+.@map+"2"),1);
+		setd(".PlayerList"+.@map+"[2]"), $@arenamembers[0];
+		setd(".PlayerList"+.@map+"[3]"), $@arenamembers[1];
+		setpcblock PCBLOCK_ATTACK,1,$@arenamembers[0];
+		if($@arenamembers[1]) setpcblock PCBLOCK_ATTACK,1,$@arenamembers[1];
+		for( .@i = 0; .@i < getarraysize(getd(".PlayerList"+.@map+"")); .@i++ )
+			if(getd(".PlayerList"+.@map+"["+.@i+"]"))
+				warpchar getd("$@BombRMAP"+.@map+"$"),.@pos[.@i*2],.@pos[.@i*2+1], getcharid(0,rid2name(getd(".PlayerList"+.@map+"["+.@i+"]")));
+
+		resetplayervar(1);  // Initialisation des variables + items
+		build_arena();      // Construction de la map
+		sleep 300;
+		soundeffectall "bomberman_intro.wav",0,strnpcinfo(4);
+		sleep 2000;
+		playBGMall "M81",strnpcinfo(4);
+	}
+}
+
+//==============================================================
+//= Duplicates
+//==============================================================
+bg_bomber,0,0,4	duplicate(1Bomb#core)	2Bomb#core	139
+bg_bomber2,0,0,4	duplicate(1Bomb#core)	3Bomb#core	139
+
+bomberman,0,0,4	duplicate(1Bomb#core)	Explosion1#BBM	139
+bomberman,0,0,4	duplicate(1Bomb#core)	1Bomb#1	1904
+bomberman,0,0,4	duplicate(1Bomb#core)	1Bomb#2	1904
+bomberman,0,0,4	duplicate(1Bomb#core)	1Bomb#3	1904
+bomberman,0,0,4	duplicate(1Bomb#core)	1Bomb#4	1904
+bomberman,0,0,4	duplicate(1Bomb#core)	1Bomb#5	1904
+bomberman,0,0,4	duplicate(1Bomb#core)	1Bomb#6	1904
+bomberman,0,0,4	duplicate(1Bomb#core)	1Bomb#7	1904
+bomberman,0,0,4	duplicate(1Bomb#core)	1Bomb#8	1904
+bomberman,0,0,4	duplicate(1Bomb#core)	1Bomb#9	1904
+bomberman,0,0,4	duplicate(1Bomb#core)	1Bomb#10	1904
+bomberman,0,0,4	duplicate(1Bomb#core)	1Bomb#11	1904
+bomberman,0,0,4	duplicate(1Bomb#core)	1Bomb#12	1904
+bomberman,0,0,4	duplicate(1Bomb#core)	1Bomb#13	1904
+bomberman,0,0,4	duplicate(1Bomb#core)	1Bomb#14	1904
+bomberman,0,0,4	duplicate(1Bomb#core)	1Bomb#15	1904
+bomberman,0,0,4	duplicate(1Bomb#core)	1Bomb#16	1904
+bomberman,0,0,4	duplicate(1Bomb#core)	1Bomb#17	1904
+bomberman,0,0,4	duplicate(1Bomb#core)	1Bomb#18	1904
+bomberman,0,0,4	duplicate(1Bomb#core)	1Bomb#19	1904
+bomberman,0,0,4	duplicate(1Bomb#core)	1Bomb#20	1904
+bomberman,0,0,4	duplicate(1Bomb#core)	1Bomb#21	1904
+bomberman,0,0,4	duplicate(1Bomb#core)	1Bomb#22	1904
+bomberman,0,0,4	duplicate(1Bomb#core)	1Bomb#23	1904
+bomberman,0,0,4	duplicate(1Bomb#core)	1Bomb#24	1904
+bomberman,0,0,4	duplicate(1Bomb#core)	1Bomb#25	1904
+bomberman,0,0,4	duplicate(1Bomb#core)	1Bomb#26	1904
+bomberman,0,0,4	duplicate(1Bomb#core)	1Bomb#27	1904
+bomberman,0,0,4	duplicate(1Bomb#core)	1Bomb#28	1904
+bomberman,0,0,4	duplicate(1Bomb#core)	1Bomb#29	1904
+bomberman,0,0,4	duplicate(1Bomb#core)	1Bomb#30	1904
+bomberman,0,0,4	duplicate(1Bomb#core)	1Bomb#31	1904
+bomberman,0,0,4	duplicate(1Bomb#core)	1Bomb#32	1904
+bomberman,0,0,4	duplicate(1Bomb#core)	1Bomb#33	1904
+bomberman,0,0,4	duplicate(1Bomb#core)	1Bomb#34	1904
+bomberman,0,0,4	duplicate(1Bomb#core)	1Bomb#35	1904
+bomberman,0,0,4	duplicate(1Bomb#core)	1Bomb#36	1904
+bomberman,0,0,4	duplicate(1Bomb#core)	1Bomb#37	1904
+bomberman,0,0,4	duplicate(1Bomb#core)	1Bomb#38	1904
+bomberman,0,0,4	duplicate(1Bomb#core)	1Bomb#39	1904
+bomberman,0,0,4	duplicate(1Bomb#core)	1Bomb#40	1904
+bomberman,0,0,4	duplicate(1Bomb#core)	1Bomb#41	1904
+
+bg_bomber,0,0,4	duplicate(2Bomb#core)	Explosion2#BBM	139
+bg_bomber,0,0,4	duplicate(2Bomb#core)	2Bomb#1	1904
+bg_bomber,0,0,4	duplicate(2Bomb#core)	2Bomb#2	1904
+bg_bomber,0,0,4	duplicate(2Bomb#core)	2Bomb#3	1904
+bg_bomber,0,0,4	duplicate(2Bomb#core)	2Bomb#4	1904
+bg_bomber,0,0,4	duplicate(2Bomb#core)	2Bomb#5	1904
+bg_bomber,0,0,4	duplicate(2Bomb#core)	2Bomb#6	1904
+bg_bomber,0,0,4	duplicate(2Bomb#core)	2Bomb#7	1904
+bg_bomber,0,0,4	duplicate(2Bomb#core)	2Bomb#8	1904
+bg_bomber,0,0,4	duplicate(2Bomb#core)	2Bomb#9	1904
+bg_bomber,0,0,4	duplicate(2Bomb#core)	2Bomb#10	1904
+bg_bomber,0,0,4	duplicate(2Bomb#core)	2Bomb#11	1904
+bg_bomber,0,0,4	duplicate(2Bomb#core)	2Bomb#12	1904
+bg_bomber,0,0,4	duplicate(2Bomb#core)	2Bomb#13	1904
+bg_bomber,0,0,4	duplicate(2Bomb#core)	2Bomb#14	1904
+bg_bomber,0,0,4	duplicate(2Bomb#core)	2Bomb#15	1904
+bg_bomber,0,0,4	duplicate(2Bomb#core)	2Bomb#16	1904
+bg_bomber,0,0,4	duplicate(2Bomb#core)	2Bomb#17	1904
+bg_bomber,0,0,4	duplicate(2Bomb#core)	2Bomb#18	1904
+bg_bomber,0,0,4	duplicate(2Bomb#core)	2Bomb#19	1904
+bg_bomber,0,0,4	duplicate(2Bomb#core)	2Bomb#20	1904
+bg_bomber,0,0,4	duplicate(2Bomb#core)	2Bomb#21	1904
+bg_bomber,0,0,4	duplicate(2Bomb#core)	2Bomb#22	1904
+bg_bomber,0,0,4	duplicate(2Bomb#core)	2Bomb#23	1904
+bg_bomber,0,0,4	duplicate(2Bomb#core)	2Bomb#24	1904
+bg_bomber,0,0,4	duplicate(2Bomb#core)	2Bomb#25	1904
+bg_bomber,0,0,4	duplicate(2Bomb#core)	2Bomb#26	1904
+bg_bomber,0,0,4	duplicate(2Bomb#core)	2Bomb#27	1904
+bg_bomber,0,0,4	duplicate(2Bomb#core)	2Bomb#28	1904
+bg_bomber,0,0,4	duplicate(2Bomb#core)	2Bomb#29	1904
+bg_bomber,0,0,4	duplicate(2Bomb#core)	2Bomb#30	1904
+bg_bomber,0,0,4	duplicate(2Bomb#core)	2Bomb#31	1904
+bg_bomber,0,0,4	duplicate(2Bomb#core)	2Bomb#32	1904
+bg_bomber,0,0,4	duplicate(2Bomb#core)	2Bomb#33	1904
+bg_bomber,0,0,4	duplicate(2Bomb#core)	2Bomb#34	1904
+bg_bomber,0,0,4	duplicate(2Bomb#core)	2Bomb#35	1904
+bg_bomber,0,0,4	duplicate(2Bomb#core)	2Bomb#36	1904
+bg_bomber,0,0,4	duplicate(2Bomb#core)	2Bomb#37	1904
+bg_bomber,0,0,4	duplicate(2Bomb#core)	2Bomb#38	1904
+bg_bomber,0,0,4	duplicate(2Bomb#core)	2Bomb#39	1904
+bg_bomber,0,0,4	duplicate(2Bomb#core)	2Bomb#40	1904
+bg_bomber,0,0,4	duplicate(2Bomb#core)	2Bomb#41	1904
+
+bg_bomber2,0,0,4	duplicate(3Bomb#core)	Explosion3#BBM	139
+bg_bomber2,0,0,4	duplicate(3Bomb#core)	3Bomb#1	1904
+bg_bomber2,0,0,4	duplicate(3Bomb#core)	3Bomb#2	1904
+bg_bomber2,0,0,4	duplicate(3Bomb#core)	3Bomb#3	1904
+bg_bomber2,0,0,4	duplicate(3Bomb#core)	3Bomb#4	1904
+bg_bomber2,0,0,4	duplicate(3Bomb#core)	3Bomb#5	1904
+bg_bomber2,0,0,4	duplicate(3Bomb#core)	3Bomb#6	1904
+bg_bomber2,0,0,4	duplicate(3Bomb#core)	3Bomb#7	1904
+bg_bomber2,0,0,4	duplicate(3Bomb#core)	3Bomb#8	1904
+bg_bomber2,0,0,4	duplicate(3Bomb#core)	3Bomb#9	1904
+bg_bomber2,0,0,4	duplicate(3Bomb#core)	3Bomb#10	1904
+bg_bomber2,0,0,4	duplicate(3Bomb#core)	3Bomb#11	1904
+bg_bomber2,0,0,4	duplicate(3Bomb#core)	3Bomb#12	1904
+bg_bomber2,0,0,4	duplicate(3Bomb#core)	3Bomb#13	1904
+bg_bomber2,0,0,4	duplicate(3Bomb#core)	3Bomb#14	1904
+bg_bomber2,0,0,4	duplicate(3Bomb#core)	3Bomb#15	1904
+bg_bomber2,0,0,4	duplicate(3Bomb#core)	3Bomb#16	1904
+bg_bomber2,0,0,4	duplicate(3Bomb#core)	3Bomb#17	1904
+bg_bomber2,0,0,4	duplicate(3Bomb#core)	3Bomb#18	1904
+bg_bomber2,0,0,4	duplicate(3Bomb#core)	3Bomb#19	1904
+bg_bomber2,0,0,4	duplicate(3Bomb#core)	3Bomb#20	1904
+bg_bomber2,0,0,4	duplicate(3Bomb#core)	3Bomb#21	1904
+bg_bomber2,0,0,4	duplicate(3Bomb#core)	3Bomb#22	1904
+bg_bomber2,0,0,4	duplicate(3Bomb#core)	3Bomb#23	1904
+bg_bomber2,0,0,4	duplicate(3Bomb#core)	3Bomb#24	1904
+bg_bomber2,0,0,4	duplicate(3Bomb#core)	3Bomb#25	1904
+bg_bomber2,0,0,4	duplicate(3Bomb#core)	3Bomb#26	1904
+bg_bomber2,0,0,4	duplicate(3Bomb#core)	3Bomb#27	1904
+bg_bomber2,0,0,4	duplicate(3Bomb#core)	3Bomb#28	1904
+bg_bomber2,0,0,4	duplicate(3Bomb#core)	3Bomb#29	1904
+bg_bomber2,0,0,4	duplicate(3Bomb#core)	3Bomb#30	1904
+bg_bomber2,0,0,4	duplicate(3Bomb#core)	3Bomb#31	1904
+bg_bomber2,0,0,4	duplicate(3Bomb#core)	3Bomb#32	1904
+bg_bomber2,0,0,4	duplicate(3Bomb#core)	3Bomb#33	1904
+bg_bomber2,0,0,4	duplicate(3Bomb#core)	3Bomb#34	1904
+bg_bomber2,0,0,4	duplicate(3Bomb#core)	3Bomb#35	1904
+bg_bomber2,0,0,4	duplicate(3Bomb#core)	3Bomb#36	1904
+bg_bomber2,0,0,4	duplicate(3Bomb#core)	3Bomb#37	1904
+bg_bomber2,0,0,4	duplicate(3Bomb#core)	3Bomb#38	1904
+bg_bomber2,0,0,4	duplicate(3Bomb#core)	3Bomb#39	1904
+bg_bomber2,0,0,4	duplicate(3Bomb#core)	3Bomb#40	1904
+bg_bomber2,0,0,4	duplicate(3Bomb#core)	3Bomb#41	1904
\ No newline at end of file
diff --git a/npc/battleground/bg_common.txt b/npc/battleground/bg_common.txt
index 7b6bd2470..94c0e31bd 100644
--- a/npc/battleground/bg_common.txt
+++ b/npc/battleground/bg_common.txt
@@ -1,101 +1,356 @@
-//===== rAthena Script ======================================= 
-//= BattleGround System - Common NPCs
-//===== By: ================================================== 
-//= ????, L0ne_W0lf
-//===== Current Version: ===================================== 
-//= 1.5
-//===== Compatible With: ===================================== 
-//= rAthena Project
-//===== Description: ========================================= 
-//= [Official Conversion]
-//= Battleground NPCs:
-//= - Generals and Aides
-//= - Battleground Warper
-//= - Kafra and Repairman.
-//= - GM Management NPC
-//= - Badge Exchanger (Tierra and Flavius)
-//===== Additional Comments: ================================= 
-//= 1.0 First Version.
-//= 1.1 Updated several NPCs to Official.
-//= 1.2 Updated Repairman NPC
-//= 1.3 Optimized "Erundek" NPC. [Euphy]
-//= 1.4 Added GM management function. [Euphy]
-//= 1.5 Added VIP features and created a reward function. [Euphy]
+//===== rAthena Script =======================================
+//= Battleground Extended +
+//===== By: ==================================================
+//= eAmod / Grenat
+//===== Description: =========================================
+//= Battleground Extended + scripts.
+//===== Additional Comments: =================================
+//= Adaptation for rAthena 2020.
+//= This is a free release.
+//= Please do NOT take ownership.
+//= The original author will always stay eAmod,
+//= It would be a disgrace claiming it's yours and making
+//= money out of it. [Grenat]
+//= 1.1 - Ranking system added [Grenat]
+//= 1.2 - @bginfo listing all BGs currently going on [Grenat]
+//= 1.3 - Rotation system added [Grenat]
+//= 1.4 - Small fixes on rewards and pckillevent [Grenat]
 //============================================================
 
-// Generals
 //============================================================
-bat_room,161,158,3	script	Gen. Guillaume's Aide#01	419,{ end; }
-bat_room,161,160,3	script	Gen. Guillaume's Aide#03	419,{ end; }
+// = Map Flags
+//============================================================
+bat_room	mapflag	nomemo
+bat_room	mapflag	nowarpto
+bat_room	mapflag	nobranch
+bat_room	mapflag	nopenalty
+bat_room	mapflag	noteleport
+bat_room	mapflag	nosave	SavePoint
 
-bat_room,160,141,3	script	Prince Croix	416,{
-	cutin "bat_crua1",2;
-	mes "[Prince Croix]";
-	mes "Wise adventurer, why don't you lend us your power for victory?";
+
+//============================================================
+// = Configuration
+//============================================================
+-	script	BG_config	-1,{
+	end;
+
+	//=======================================================
+	//= Main Config
+	//=======================================================
+OnInit:
+	set .HappyHourRates, getbattleflag("bg_reward_rates") + 60;	//Happy Hour +60% rewards
+	bindatcmd "joinbg",strnpcinfo(3)+"::OnAtcommand1";		//Join Battle Room
+	bindatcmd "leavebg",strnpcinfo(3)+"::OnAtcommand2";		//Leave Battle Room
+	bindatcmd "bginfo",strnpcinfo(3)+"::OnAtcommand3";		//Knowing which BGs are running and how many players
+	bindatcmd "bghappyhourstart","BG_config::OnClock1800",99,99;	//Start Happy Hour
+	bindatcmd "bghappyhourstop","BG_config::OnClock1900",99,99;	//Stop Happy Hour
+	bindatcmd "startbg","BG_config::OnStart",99,99;		//Start a Battleground
+	end;
+
+	//=======================================================
+	//= BG Rotation
+	//=======================================================
+OnStart:
+	awake "BG_config";
+	mes "Select a Battleground.";
+	.@type = select("- Capture the Flag:- Death Match:- Stone Control:- Bossnia:- Domination:- Eye of Storm:- Double Inferno:- Conquest:- Rush");
+	close2;
+OnClock0030: OnClock0130: OnClock0230: OnClock0330: OnClock0430: OnClock0530: OnClock0630: OnClock0730: OnClock0830: OnClock0930: OnClock1030: OnClock1130:
+OnClock1230: OnClock1330: OnClock1430: OnClock1530: OnClock1630: OnClock1730: OnClock1830: OnClock1930: OnClock2030: OnClock2130: OnClock2230: OnClock2330:
+	if(!.@type)
+		.@type = rand(1,9);
+	do {
+		switch (.@type) {
+			case 1: .@currentbg$ = "Capture The Flag"; break;
+			case 2: .@currentbg$ = "Death Match"; break;
+			case 3: .@currentbg$ = "Stone Control"; break;
+			case 4: .@currentbg$ = "Bossnia"; break;
+			case 5: .@currentbg$ = "Domination"; break;
+			case 6: .@currentbg$ = "Eye of Storm"; break;
+			case 7: .@currentbg$ = "Double Inferno"; break;
+			case 8: .@currentbg$ = "Conquest"; break;
+			case 9: .@currentbg$ = "Rush"; break;
+		}
+	} while ( $@currentbg$ != "" && $@currentbg$ == .@currentbg$);
+	for(.@i = 3; .@i > 0; .@i--) {
+		announce "[Battleground]: "+.@currentbg$+" will start in "+.@i+" minute"+((.@i > 1)?"s":"")+".",bc_all,0xccff00;
+		sleep 60000;
+	}
+	$@currentbg$ = .@currentbg$;
+	bg_create2 ((.@type < 7)?"() ":"")+.@currentbg$;
+	end;
+
+	//=======================================================
+	//= BG Happy Hours
+	//=======================================================
+OnClock1000:
+OnClock1200:
+OnClock1800:
+OnClock2000:
+	announce "Battleground Happy Hour has begun",0,0x00FF00;
+	setbattleflag "bg_reward_rates",.HappyHourRates; // Happy hour Rate
+	end;
+OnClock1100:
+OnClock1300:
+OnClock1900:
+OnClock2100:
+	announce "Battleground Happy Hour is over",0,0x00BFFF;
+	setbattleflag "bg_reward_rates",getbattleflag("bg_reward_rates"); // Back to Normal Rates
+	end;
+
+	//==================================================
+	//= Battleground Kill Count
+	//==================================================
+OnPCKillEvent:
+	if(bg_teamid() >= 0) {
+		bg_kill getcharid(3);
+		callfunc "check_bg_get_rank",strcharinfo(3),convertpcinfo(killedrid,CPC_CHAR);
+	}
+	end;
+
+	//=======================================================
+	// = Commands:
+	// NO Need to TP to the battlefield.
+	// BG Queue System is doing it with Join_Active_Event (db/battleground.yml)
+	//=======================================================
+OnAtcommand1:
+	if($@currentbg$ != "")
+		bg_join((bg_get_data($@currentbgteam1,1) > bg_get_data($@currentbgteam2,1)) ? $@currentbgteam2 : $@currentbgteam1);
+	else
+		dispbottom "No battleground is currently running.";
+	end;
+OnAtcommand2:
+	if (getbattleflag("feature.bgqueue"))
+		bg_desert;
+	else
+		bg_leave;
+	end;
+OnAtcommand3:
+	dispbottom "Battleground Extended : (Score: Blue/Red)";
+	if($@BG10) dispbottom "[Capture the Flag] : ON - "+getmapusers("bat_b02")+" Player(s) (Score: "+$@score_capture_blue+"/"+$@score_capture_red+" - "+(900-((getnpctimer(0,"Flavius_CTF")/1000)))+" sec left)",0xccff00;
+	else if(.@n = getqueuecount("bat_b02")) dispbottom "[Capture the Flag] : OFF - "+.@n+" Player(s) on the waiting list.",0xFFA500;
+	else dispbottom "[Death Match] : OFF - 0 players on the waiting list.",0x9966cc;
+	if($@BG14) dispbottom "[Death Match] : ON - "+getmapusers("bat_b03")+" Player(s) (Score: "+$@score_deathmatch_blue+"/"+$@score_deathmatch_red+" - "+(900-((getnpctimer(0,"Flavius_TD")/1000)))+" sec left)",0xccff00;
+	else if(.@n = getqueuecount("bat_b03")) dispbottom "[Death Match] : In Progress - "+.@n+" Player(s) on the waiting list.",0xFFA500;
+	else dispbottom "[Death Match] : OFF - 0 players on the waiting list.",0x9966cc;
+	if($@BG12) dispbottom "[Stone Control] : ON - "+getmapusers("bat_b04")+" Player(s) (Score: "+$@score_stonecontrol_blue+"/"+$@score_stonecontrol_red+" - "+(900-((getnpctimer(0,"Flavius_SC")/1000)))+" sec left)",0xccff00;
+	else if(.@n = getqueuecount("bat_b04")) dispbottom "[Stone Control] : In Progress - "+.@n+" Player(s) on the waiting list.",0xFFA500;
+	else dispbottom "[Stone Control] : OFF - 0 players on the waiting list.",0x9966cc;
+	if($@FlaviusBG1) dispbottom "[Flavius] : ON - "+getmapusers("bat_b01")+" Player(s) (Score: "+$@Croix_ScoreBG1+"/"+$@Guill_ScoreBG1+" - "+(1900-((getnpctimer(0,"countdown#bat_b01")/1000)))+" sec left)",0xccff00;
+	else if(.@n = getqueuecount("bat_b01")) dispbottom "[Flavius] : In Progress - "+.@n+" Player(s) on the waiting list.",0xFFA500;
+	else dispbottom "[Flavius] : OFF - 0 players on the waiting list.",0x9966cc;
+	if($@KvM02BG) dispbottom "[KVM] : ON - "+getmapusers("bat_c02")+" Player(s) ("+(360-((getnpctimer(0,"KvM02_BG")/1000)))+" sec left)",0xccff00;
+	else if(.@n = getqueuecount("bat_c02")) dispbottom "[KVM] : In Progress - "+.@n+" Player(s) on the waiting list.",0xFFA500;
+	else dispbottom "[KVM] : OFF - 0 players on the waiting list.",0x9966cc;
+	if($@TierraBG1) dispbottom "[Tierra] : ON - "+getmapusers("bat_a01")+" Player(s) ("+(1830-((getnpctimer(0,"countdown#bat_a01")/1000)))+" sec left)",0xccff00;
+	else if(.@n = getqueuecount("bat_a01")) dispbottom "[Tierra] : In Progress - "+.@n+" Player(s) on the waiting list.",0xFFA500;
+	else dispbottom "[Tierra] : OFF - 0 players on the waiting list.",0x9966cc;
+	if($@BG16) dispbottom "[Bossnia] : ON - "+getmapusers("bat_a03")+" Player(s) (Score: "+$@score_bossnia_blue+"/"+$@score_bossnia_red+" - "+(900-((getnpctimer(0,"Tierra_Boss")/1000)))+" sec left)",0xccff00;
+	else if(.@n = getqueuecount("bat_a03")) dispbottom "[Bossnia] : In Progress - "+.@n+" Player(s) on the waiting list.",0xFFA500;
+	else dispbottom "[Bossnia] : OFF - 0 players on the waiting list.",0x9966cc;
+	if($@BG17) dispbottom "[Domination] : ON - "+getmapusers("bat_a04")+" Player(s) (Score: "+$@score_domination_blue+"/"+$@score_domination_red+")",0xccff00;
+	else if(.@n = getqueuecount("bat_a04")) dispbottom "[Domination] : In Progress - "+.@n+" Player(s) on the waiting list.",0xFFA500;
+	else dispbottom "[Domination] : OFF - 0 players on the waiting list.",0x9966cc;
+	if($@BG18) dispbottom "[Eye of Storm] : ON - "+getmapusers("bat_a02")+" Player(s) (Score: "+$@score_eyeofstorm_blue+"/"+$@score_eyeofstorm_red+")",0xccff00;
+	else if(.@n = getqueuecount("bat_a02")) dispbottom "[Eye of Storm] : In Progress - "+.@n+" Player(s) on the waiting list.",0xFFA500;
+	else dispbottom "[Eye of Storm] : OFF - 0 players on the waiting list.",0x9966cc;
+	if($@BG15) dispbottom "[Rush] : ON - "+getmapusers("rush_cas01")+" Player(s) (Score: "+$@score_rush_blue+"/"+$@score_rush_red+" - "+(420-((getnpctimer(0,"Rush")/1000)))+" sec left)",0xccff00;
+	else if(.@n = getqueuecount("rush_cas01")) dispbottom "[Rush] : In Progress - "+.@n+" Player(s) on the waiting list.",0xFFA500;
+	else dispbottom "[Rush] : OFF - 0 players on the waiting list.",0x9966cc;
+	if($@BG15a) dispbottom "[Rush] : ON - "+getmapusers("rush_cas02")+" Player(s) (Score: "+$@score_rush_blue1+"/"+$@score_rush_red1+" - "+(420-((getnpctimer(0,"Rush1")/1000)))+" sec left)",0xccff00;
+	else if(.@n = getqueuecount("rush_cas02")) dispbottom "[Rush] : In Progress - "+.@n+" Player(s) on the waiting list.",0xFFA500;
+	else dispbottom "[Rush] : OFF - 0 players on the waiting list.",0x9966cc;
+	if($@BG15b) dispbottom "[Rush] : ON - "+getmapusers("rush_cas03")+" Player(s) (Score: "+$@score_rush_blue2+"/"+$@score_rush_red2+" - "+(420-((getnpctimer(0,"Rush2")/1000)))+" sec left)",0xccff00;
+	else if(.@n = getqueuecount("rush_cas03")) dispbottom "[Rush] : In Progress - "+.@n+" Player(s) on the waiting list.",0xFFA500;
+	else dispbottom "[Rush] : OFF - 0 players on the waiting list.",0x9966cc;
+	if($@BG15c) dispbottom "[Rush] : ON - "+getmapusers("rush_cas04")+" Player(s) (Score: "+$@score_rush_blue3+"/"+$@score_rush_red3+" - "+(420-((getnpctimer(0,"Rush3")/1000)))+" sec left)",0xccff00;
+	else if(.@n = getqueuecount("rush_cas04")) dispbottom "[Rush] : In Progress - "+.@n+" Player(s) on the waiting list.",0xFFA500;
+	else dispbottom "[Rush] : OFF - 0 players on the waiting list.",0x9966cc;
+	if($@BG11) dispbottom "[Conquest] : ON - "+getmapusers("schg_cas06")+" Player(s) ("+(360-((getnpctimer(0,"Conquest")/1000)))+" sec left)",0xccff00;
+	else if(.@n = getqueuecount("schg_cas06")) dispbottom "[Conquest] : In Progress - "+.@n+" Player(s) on the waiting list.",0xFFA500;
+	else dispbottom "[Conquest] : OFF - 0 players on the waiting list.",0x9966cc;
+	if($@BG11b) dispbottom "[Conquest] : ON - "+getmapusers("schg_cas07")+" Player(s) ("+(360-((getnpctimer(0,"Conquest1")/1000)))+" sec left)",0xccff00;
+	else if(.@n = getqueuecount("schg_cas07")) dispbottom "[Conquest] : In Progress - "+.@n+" Player(s) on the waiting list.",0xFFA500;
+	else dispbottom "[Conquest] : OFF - 0 players on the waiting list.",0x9966cc;
+	if($@BG11c) dispbottom "[Conquest] : ON - "+getmapusers("schg_cas08")+" Player(s) ("+(360-((getnpctimer(0,"Conquest2")/1000)))+" sec left)",0xccff00;
+	else if(.@n = getqueuecount("schg_cas08")) dispbottom "[Conquest] : In Progress - "+.@n+" Player(s) on the waiting list.",0xFFA500;
+	else dispbottom "[Conquest] : OFF - 0 players on the waiting list.",0x9966cc;
+	if($@BG11d) dispbottom "[Conquest] : ON - "+getmapusers("arug_cas06")+" Player(s) ("+(360-((getnpctimer(0,"Conquest3")/1000)))+" sec left)",0xccff00;
+	else if(.@n = getqueuecount("arug_cas06")) dispbottom "[Conquest] : In Progress - "+.@n+" Player(s) on the waiting list.",0xFFA500;
+	else dispbottom "[Conquest] : OFF - 0 players on the waiting list.",0x9966cc;
+	if($@BG11e) dispbottom "[Conquest] : ON - "+getmapusers("arug_cas07")+" Player(s) ("+(360-((getnpctimer(0,"Conquest4")/1000)))+" sec left)",0xccff00;
+	else if(.@n = getqueuecount("arug_cas07")) dispbottom "[Conquest] : In Progress - "+.@n+" Player(s) on the waiting list.",0xFFA500;
+	else dispbottom "[Conquest] : OFF - 0 players on the waiting list.",0x9966cc;
+	if($@BG11f) dispbottom "[Conquest] : ON - "+getmapusers("arug_cas08")+" Player(s) ("+(360-((getnpctimer(0,"Conquest5")/1000)))+" sec left)",0xccff00;
+	else if(.@n = getqueuecount("arug_cas08")) dispbottom "[Conquest] : In Progress - "+.@n+" Player(s) on the waiting list.",0xFFA500;
+	else dispbottom "[Conquest] : OFF - 0 players on the waiting list.",0x9966cc;
+	if($@BG19) dispbottom "[Double Inferno] : ON - "+getmapusers("region_8")+" Player(s) (Score: "+$@score_inferno_blue+"/"+$@score_inferno_red+" - "+(900-((getnpctimer(0,"Tierra_TI")/1000)))+" sec left)",0xccff00;
+	else if(.@n = getqueuecount("region_8")) dispbottom "[Double Inferno] : In Progress - "+.@n+" Player(s) on the waiting list.",0xFFA500;
+	else dispbottom "[Double Inferno] : OFF - 0 players on the waiting list.",0x9966cc;
+	if($@BG20) dispbottom "[Poring Ball] : ON - "+getmapusers("bg_ball")+" Player(s) (Score: "+$@score_poring_blue+"/"+$@score_poring_red+" - "+(900-((getnpctimer(0,"Poringball_Config")/1000)))+" sec left)",0xccff00;
+	else if(.@n = getqueuecount("bg_ball")) dispbottom "[Poring Ball] : In Progress - "+.@n+" Player(s) on the waiting list.",0xFFA500;
+	else dispbottom "[Poring Ball] : OFF - 0 players on the waiting list.",0x9966cc;
+	if(getd("$@bomberman21")) dispbottom "[Bomberman Ice] : ON - "+getmapusers("bg_bomber")+" Player(s) (Score: "+$@score_bomber2_blue+"/"+$@score_bomber2_red+" - "+(320-((getnpctimer(0,"2Bomb#core")/1000)))+" sec left)",0xccff00;
+	else if(.@n = getqueuecount("bg_bomber")) dispbottom "[Bomberman Ice] : In Progress - "+.@n+" Player(s) on the waiting list.",0xFFA500;
+	else dispbottom "[Bomberman Ice] : OFF - 0 players on the waiting list.",0x9966cc;
+	if(getd("$@bomberman31")) dispbottom "[Bomberman Village] : ON - "+getmapusers("bg_bomber2")+" Player(s) (Score: "+$@score_bomber3_blue+"/"+$@score_bomber3_red+" - "+(320-((getnpctimer(0,"3Bomb#core")/1000)))+" sec left)",0xccff00;
+	else if(.@n = getqueuecount("bg_bomber2")) dispbottom "[Bomberman Village] : In Progress - "+.@n+" Player(s) on the waiting list.",0xFFA500;
+	else dispbottom "[Bomberman Village] : OFF - 0 players on the waiting list.",0x9966cc;
+	if(getd("$@bomberman11")) dispbottom "[Bomberman Cemetery] : ON - "+getmapusers("bomberman")+" Player(s) (Score: "+$@score_bomber1_blue+"/"+$@score_bomber1_red+" - "+(320-((getnpctimer(0,"1Bomb#core")/1000)))+" sec left)",0xccff00;
+	else if(.@n = getqueuecount("bomberman")) dispbottom "[Bomberman Cemetry] : In Progress - "+.@n+" Player(s) on the waiting list.",0xFFA500;
+	else dispbottom "[Bomberman Cemetry] : OFF - 0 players on the waiting list.",0x9966cc;
+	end;
+}
+
+//==================================================
+//= Battleground Kicked Out
+//==================================================
+-	script	OnPCLeaveBG	-1,{
+OnPCLeaveBG:
+	if(countitem("Blue_Skull")) delitem "Blue_Skull",countitem("Blue_Skull");
+	if(countitem("Red_Skull")) delitem "Red_Skull",countitem("Red_Skull");
+	if(countitem("Green_Skull")) delitem "Green_Skull",countitem("Green_Skull");
+	if(countitem("Bomb")) delitem "Bomb",countitem("Bomb");
+	if(countitem("Bomb_Kick")) delitem "Bomb_Kick",countitem("Bomb_Kick");
+	if(countitem("Fire_UP")) delitem "Fire_UP",countitem("Fire_UP");
+	if(countitem("Bomb_UP")) delitem "Bomb_UP",countitem("Bomb_UP");
+	if(countitem("Speed_UP")) delitem "Speed_UP",countitem("Speed_UP");
+	if(countitem("SKILL_SHOOT")) delitem "SKILL_SHOOT",countitem("SKILL_SHOOT");
+	if(countitem("SKILL_PUSH")) delitem "SKILL_PUSH",countitem("SKILL_PUSH");
+	set @BBM_spawn, 0; set @BBM_HIT, 0; set @BBM_INVINCIBLE, 0; set @BBM_HIT, 0; set @ZONE_EXPLOSION, 0; set @BBM_DELAY, 0;
+//	sc_end SC_TIMERDOWN;
+	cutin "",255;
+	setpcblock PCBLOCK_ATTACK,0;
+	atcommand "@size 0";
+	end;
+}
+
+//============================================================
+//= Recruiter/Information scripts.
+//============================================================
+-	script	BG_Register	FAKE_NPC,{
+	mes "[^FFA500Battle Recruiter^000000]";
+	mes "This is the Battleground Information service.";
 	next;
-	switch(select("What's the reason for the Battle?:Tell me about General Guillaume")) {
+	if(strcharinfo(4) == "prontera") .@warp$ = "Warp to Battle Room";
+	switch(select("^FFA500Battleground Arenas^000000",.@warp$)) {
 	case 1:
-		cutin "bat_crua2",2;
-		mes "[Prince Croix]";
-		mes "Maroll's great king, Marcel Marollo VII, is very sick lately.";
-		mes "His Majesty has declared that he will be leaving the future of Maroll to me or the 3rd prince, General Guillaume.";
+		mes "[^FFA500Battle Recruiter^000000]";
+		mes "Battlegrounds Arena are different kinds of games where Teams fight for victory.";
 		next;
-		mes "[Prince Croix]";
-		mes "General Guillaume may have an advantage in this battle as he is the great general of Maroll, but that doesn't automatically mean he'll win.";
-		mes "I want to win this battle so that I can bring prosperity to the people of Maroll. They've suffered enough from war...";
-		next;
-		switch(select("Yes, I want to join you.:End Conversation")) {
-		case 1:
-			cutin "bat_crua1",2;
-			mes "[Prince Croix]";
-			mes "Thank you so much. I feel like I can win with the help of adventurers like you.";
-			mes "Now, please go downstairs and join your comrades in sharpening their skills to fight the enemy!";
-			break;
-		case 2:
-			mes "[Prince Croix]";
-			mes "For Maroll!";
-			break;
-		}
-		break;
+			mes "[^FFA500Battle Recruiter^000000]";
+			mes "Tell me... what battleground you don't understand?";
+			next;
+			switch(select("Capture the Flag:Team DeathMatch:Stone Control:Eye of Storm:Bossnia:Domination:Triple Inferno:Conquest:Rush:Poring Ball:Bomberman")) {
+			case 1:
+				mes "[^FFA500Battle Recruiter^000000]";
+				mes "The objective of the Flavius Battle CTF is to score 3 points before your enemy, by capture their Flag.";
+				next;
+				mes "[^FFA500Battle Recruiter^000000]";
+				mes "To capture a Flag you need to take the enemy flag, and bring it to your base flag.";
+				next;
+				mes "[^FFA500Battle Recruiter^000000]";
+				mes "If your base flag is captured too, you need to kill the flag carrier and take the flag back to your base.";
+				break;
+			case 2:
+				mes "[^FFA500Battle Recruiter^000000]";
+				mes "Kill all the enemy players to let their Team without points.";
+				mes "Protect our army.";
+				break;
+			case 3:
+				mes "[^FFA500Battle Recruiter^000000]";
+				mes "Take the Stones in the middle of the battlefield and put in on your base, in the Stone Points.";
+				next;
+				mes "[^FFA500Battle Recruiter^000000]";
+				mes "Each Stone will give points to your team. First team reach 99 points wins the game.";
+				next;
+				mes "[^FFA500Battle Recruiter^000000]";
+				mes "Protect your stones from to be captured by the enemy.";
+				break;
+			case 4:
+				mes "[^FFA500Battle Recruiter^000000]";
+				mes "There are two bases, North and South which teams can capture by holding position on the Base more than the other team.";
+				next;
+				mes "[^FFA500Battle Recruiter^000000]";
+				mes "Each base will give you points each 5 seconds of Domination. If your Team control both bases the amount of points increases.";
+				next;
+				mes "[^FFA500Battle Recruiter^000000]";
+				mes "To get aditional points, in the middle there is a Flag spawn, capture it and put it on any of your team Bases.";
+				next;
+				mes "[^FFA500Battle Recruiter^000000]";
+				mes "The first Team reach 99 points wins the match.";
+				break;
+			case 5:
+				mes "[^FFA500Battle Recruiter^000000]";
+				mes "Attack the enemy base and destroy each MVP Guardian. To do damage to the guardian your team must capture the Balance Flag in the middle base.";
+				next;
+				mes "[^FFA500Battle Recruiter^000000]";
+				mes "Each team have 5 guardian to be protected or killed.";
+				break;
+			case 6:
+				mes "[^FFA500Battle Recruiter^000000]";
+				mes "There are three bases, North, Center and South which teams can capture by holding position on the Base more than the other team.";
+				next;
+				mes "[^FFA500Battle Recruiter^000000]";
+				mes "Each base will give you points each 5 seconds of Domination.";
+				next;
+				mes "[^FFA500Battle Recruiter^000000]";
+				mes "The first Team reach 99 points wins the match.";
+				break;
+			case 7:
+				mes "[^FFA500Battle Recruiter^000000]";
+				mes "There are 2 teams in the battlefield, your team and the opposite enemies.";
+				next;
+				mes "[^FFA500Battle Recruiter^000000]";
+				mes "Kill the enemy players, collect the skulls and bring them to the Sacrifice Totem to win points.";
+				next;
+				mes "[^FFA500Battle Recruiter^000000]";
+				mes "You can collect your own team skulls and bring then to your Sacrifice Totem to avoid other teams to score but it won't count as points.";
+				next;
+				mes "[^FFA500Battle Recruiter^000000]";
+				mes "If you get killed all your skulls will be drop to the floor, including your own skull. First Team to get 80 points wins the battle.";
+				break;
+			case 8:
+				mes "[^FFA500Battle Recruiter^000000]";
+				mes "If you are Attacking, destroy the enemy defenses and it's Flag.";
+				next;
+				mes "[^FFA500Battle Recruiter^000000]";
+				mes "If you are Defending, protect your castle defenses and the Flag.";
+				break;
+			case 9:
+				mes "[^FFA500Battle Recruiter^000000]";
+				mes "Fight to capture the Castle and organize your team to defend it.";
+				next;
+				mes "[^FFA500Battle Recruiter^000000]";
+				mes "If you fail on the first capture, kill the defender and take it for your team.";
+				break;
+			case 10:
+				mes "[^FFA500Battle Recruiter^000000]";
+				mes "It is a soccer game, a poring (the ball) will be in the middle of the field. The match lasts 5min. The team that has the most goals win the game.";
+				close;
+			case 11:
+				mes "[^FFA500Battle Recruiter^000000]";
+				mes "The classic game specially made in Ragnarok Online. The goal is to defeat the enemies by putting bombs that will explode on them. It is a 2vs2 version of the game.";
+				close;
+			}
+		close;
 	case 2:
-		cutin "bat_crua2",2;
-		mes "[Prince Croix]";
-		mes "The 3rd Prince Guillaume is the great general of Maroll.";
-		mes "It's a waste of time to explain to you how great a leader or warlord he is, since he commands the great military power of Maroll.";
-		next;
-		mes "[Prince Croix]";
-		mes "Unfortunately, there's something he and his followers are unaware of:";
-		mes "Do the people of Maroll really want them to spend so much money on military power?";
-		mes "We have suffered enough from wars.";
-		mes "I believe weapons aren't the best way to bring prosperity to a nation.";
-		next;
-		mes "[Prince Croix]";
-		mes "I do not wish to shed blood, but I have no choice but to fight for the possibility of peace and for the sake of my people.";
-		next;
-		switch(select("Yes, I want to join you.:End Conversation")) {
-		case 1:
-			cutin "bat_crua1",2;
-			mes "[Prince Croix]";
-			mes "Thank you so much. I feel like I can win with the help of adventurers like you.";
-			mes "Now, please go downstairs and join your comrades in sharpening their skills to fight the enemy!";
-			break;
-		case 2:
-			mes "[Prince Croix]";
-			mes "For Maroll!";
-			break;
-		}
-		break;
+		mes "[^FFA500Battle Recruiter^000000]";
+		mes "May the War God bless you.";
+		close2;
+		warp "bat_room",155,150;
+		end;
 	}
-	close2;
-	cutin "bat_crua1",255;
-	cutin "bat_crua2",255;
 	end;
 }
 
-bat_room,161,140,3	script	Prince Croix's Aide#01	415,{ end; }
-bat_room,161,142,3	script	Prince Croix's Aide#02	415,{ end; }
+prontera,123,83,3	duplicate(BG_Register)	Battle Information#prt	4_F_JOB_KNIGHT
+bat_room,159,164,4	duplicate(BG_Register)	Battle Recruiter#batroom	4_F_JOB_KNIGHT
 
-bat_room,160,159,3	script	General Guillaume	420,{
+//============================================================
+//= General Guillaume scripts.
+//============================================================
+bat_room,160,159,3	script	General Guillaume	4_M_KY_KIYOM,{
 	cutin "bat_kiyom2",2;
 	mes "[General Guillaume]";
 	mes "Hot-blooded adventurer, we need your ability to win this battle.";
@@ -173,217 +428,419 @@ bat_room,160,159,3	script	General Guillaume	420,{
 	end;
 }
 
-// Flags
 //============================================================
-//bat_room,140,160,3	script	Guillaume Base#roomflag1	973,{ end; }
-//bat_room,167,160,3	script	Guillaume Base#roomflag2	973,{ end; }
-//bat_room,140,139,3	script	Croix Base#roomflag1	974,{ end; }
-//bat_room,167,139,3	script	Croix Base#roomflag2	974,{ end; }
-
-// BattleGround Warper
+//= General Croix scripts.
 //============================================================
-bat_room,148,150,5	script	Teleporter#Battlefield	124,{
-	mes "[Teleporter]";
-	mes "Do you wish to leave the battlefield? Use my services to return to town.";
+bat_room,160,140,3	script	Prince Croix	4_M_CRU_CRUA,{
+	cutin "bat_crua1",2;
+	mes "[Prince Croix]";
+	mes "Wise adventurer, why don't you lend us your power for victory?";
 	next;
-	switch(select("Leave:Don't Leave")) {
+	switch(select("What's the reason for the Battle?:Tell me about General Guillaume")) {
 	case 1:
-		mes "[Teleporter]";
-		switch(bat_return) {
-		default:
+		cutin "bat_crua2",2;
+		mes "[Prince Croix]";
+		mes "Maroll's great king, Marcel Marollo VII, is very sick lately.";
+		mes "His Majesty has declared that he will be leaving the future of Maroll to me or the 3rd prince, General Guillaume.";
+		next;
+		mes "[Prince Croix]";
+		mes "General Guillaume may have an advantage in this battle as he is the great general of Maroll, but that doesn't automatically mean he'll win.";
+		mes "I want to win this battle so that I can bring prosperity to the people of Maroll. They've suffered enough from war...";
+		next;
+		switch(select("Yes, I want to join you.:End Conversation")) {
 		case 1:
-			setarray .@mapname$[0],"Prontera.","prontera";
-			setarray .@xy[0],116,72;
+			cutin "bat_crua1",2;
+			mes "[Prince Croix]";
+			mes "Thank you so much. I feel like I can win with the help of adventurers like you.";
+			mes "Now, please go downstairs and join your comrades in sharpening their skills to fight the enemy!";
 			break;
 		case 2:
-			setarray .@mapname$[0],"Morocc Ruins.","moc_ruins";
-			setarray .@xy[0],152,48;
-			break;
-		case 3:
-			setarray .@mapname$[0],"Al De Baran.","aldebaran";
-			setarray .@xy[0],168,112;
-			break;
-		case 4:
-			setarray .@mapname$[0],"Geffen.","geffen";
-			setarray .@xy[0],120,39;
-			break;
-		case 5:
-			setarray .@mapname$[0],"Payon.","payon";
-			setarray .@xy[0],161,58;
-			break;
-		case 6:
-			setarray .@mapname$[0],"Lighthalzen.","lighthalzen";
-			setarray .@xy[0],159,93;
+			mes "[Prince Croix]";
+			mes "For Maroll!";
 			break;
-		case 7:
-			setarray .@mapname$[0],"Rachel.","rachel";
-			setarray .@xy[0],115,124;
+		}
+		break;
+	case 2:
+		cutin "bat_crua2",2;
+		mes "[Prince Croix]";
+		mes "The 3rd Prince Guillaume is the great general of Maroll.";
+		mes "It's a waste of time to explain to you how great a leader or warlord he is, since he commands the great military power of Maroll.";
+		next;
+		mes "[Prince Croix]";
+		mes "Unfortunately, there's something he and his followers are unaware of:";
+		mes "Do the people of Maroll really want them to spend so much money on military power?";
+		mes "We have suffered enough from wars.";
+		mes "I believe weapons aren't the best way to bring prosperity to a nation.";
+		next;
+		mes "[Prince Croix]";
+		mes "I do not wish to shed blood, but I have no choice but to fight for the possibility of peace and for the sake of my people.";
+		next;
+		switch(select("Yes, I want to join you.:End Conversation")) {
+		case 1:
+			cutin "bat_crua1",2;
+			mes "[Prince Croix]";
+			mes "Thank you so much. I feel like I can win with the help of adventurers like you.";
+			mes "Now, please go downstairs and join your comrades in sharpening their skills to fight the enemy!";
 			break;
-		case 8:
-			setarray .@mapname$[0],"Morocc.","morocc";
-			setarray .@xy[0],156,46;
+		case 2:
+			mes "[Prince Croix]";
+			mes "For Maroll!";
 			break;
 		}
-		mes "You will be sent back to "+.@mapname$[0]+".";
-		close2;
-		warp .@mapname$[1],.@xy[0],.@xy[1];
 		break;
-	case 2:
-		mes "[Teleporter]";
-		mes "I'll be here whenever you're in need of my services.";
-		close;
 	}
+	close2;
+	cutin "bat_crua1",255;
+	cutin "bat_crua2",255;
 	end;
 }
+bat_room,161,141,3	script	Prince Croix's Aid::bat_aid	4_M_CRU_HEAD,{ end; }
+bat_room,161,139,3	duplicate(bat_aid)	Prince Croix's Aid::bat_aid2	4_M_CRU_HEAD
+bat_room,161,160,3	duplicate(bat_aid)	General Guillaume's Aid::bat_aid3	4_M_KY_HEAD
+bat_room,161,158,3	duplicate(bat_aid)	General Guillaume's Aid::bat_aid4	4_M_KY_HEAD
 
--	script	Maroll Battle Recruiter::BatRecruit	728,{
-	mes "[Maroll Battle Recruiter]";
-	mes "Good day, adventurer.";
-	mes "I'm a knight from a far country called Maroll Kingdom.";
-	next;
-	mes "[Maroll Battle Recruiter]";
-	mes "The two princes of the kingdom are now battling for the throne of Maroll, and are in need of experienced soldiers like you.";
-	mes "How would you like to lend your power to one of the princes in the Maroll Kingdom?";
+//============================================================
+//= Flag for duplication scripts.
+//============================================================
+-	script	Base Flag#bg	FAKE_NPC,{ end; }
+
+//============================================================
+//= Exit scripts.
+//============================================================
+bat_room,148,150,4	script	Teleporter#bat	4_F_TELEPORTER,{
+	mes "[Teleporter]";
+	mes "Do you wish to leave the battlefield? Use my service to return to town.";
 	next;
-	switch(select("Join:Don't Join")) {
-	case 1:
-		mes "[Maroll Battle Recruiter]";
-		mes "May the war god bless you.";
-		close2;
-		getmapxy(.@mapname$,.@x,.@y,BL_NPC);
-		if (.@mapname$ == "prontera")
-			set bat_return,1;
-		else if (.@mapname$ == "moc_ruins")
-			set bat_return,2;
-		else if (.@mapname$ == "aldebaran")
-			set bat_return,3;
-		else if (.@mapname$ == "geffen")
-			set bat_return,4;
-		else if (.@mapname$ == "payon")
-			set bat_return,5;
-		else if (.@mapname$ == "lighthalzen")
-			set bat_return,6;
-		else if (.@mapname$ == "rachel")
-			set bat_return,7;
-		else if (.@mapname$ == "morocc")
-			set bat_return,8;
-		else
-			set bat_return,1;
-		warp "bat_room",154,150;
-		break;
-	case 2:
-		mes "[Maroll Battle Recruiter]";
-		mes "I'll always be stationed here for more soldiers. Feel free to come back whenever you're interested.";
+	if (select("Leave:Don't Leave") == 2) {
+		mes "[Teleporter]";
+		mes "I'll be here whenever you're in need of my service.";
 		close;
 	}
+	set .@spoint$, getsavepoint(0);
+	set .@x, getsavepoint(1);
+	set .@y, getsavepoint(2);
+	mes "[Teleporter]";
+	mes "You will be sent back to " + .@spoint$ + ".";
+	close2;
+	warp .@spoint$, .@x, .@y;
 	end;
 }
 
-prontera,123,83,3	duplicate(BatRecruit)	Maroll Battle Recruiter::BatRecruit1	728
-moc_ruins,75,162,3	duplicate(BatRecruit)	Maroll Battle Recruiter::BatRecruit2	728
-aldebaran,146,109,3	duplicate(BatRecruit)	Maroll Battle Recruiter::BatRecruit3	728
-geffen,109,66,3	duplicate(BatRecruit)	Maroll Battle Recruiter::BatRecruit4	728
-payon,189,105,3	duplicate(BatRecruit)	Maroll Battle Recruiter::BatRecruit5	728
-lighthalzen,153,86,5	duplicate(BatRecruit)	Maroll Battle Recruiter::BatRecruit6	728
-rachel,149,138,3	duplicate(BatRecruit)	Maroll Battle Recruiter::BatRecruit7	728
-
-// Additional warps
-// Empty
-bat_room,57,81,0	warp	bat1	1,1,bat_room,154,149
-bat_room,57,90,0	warp	bat2	1,1,bat_room,154,149
-// Empty
-bat_room,85,81,0	warp	bat5	1,1,bat_room,154,149
-bat_room,85,90,0	warp	bat6	1,1,bat_room,154,149
-// Free BG
-bat_room,113,81,0	warp	bat9	1,1,bat_room,154,149
-bat_room,113,90,0	warp	bat10	1,1,bat_room,154,149
-// Free BG
-bat_room,141,81,0	warp	bat13	1,1,bat_room,154,149
-bat_room,141,90,0	warp	bat14	1,1,bat_room,154,149
-// Free BG
-bat_room,169,81,0	warp	bat17	1,1,bat_room,154,149
-bat_room,169,90,0	warp	bat18	1,1,bat_room,154,149
-// Free BG
-bat_room,197,81,0	warp	bat21	1,1,bat_room,154,149
-bat_room,197,90,0	warp	bat22	1,1,bat_room,154,149
-// Free BG
-bat_room,225,81,0	warp	bat25	1,1,bat_room,154,149
-bat_room,225,90,0	warp	bat26	1,1,bat_room,154,149
-// Empty
-bat_room,253,81,0	warp	bat29	1,1,bat_room,154,149
-bat_room,253,90,0	warp	bat30	1,1,bat_room,154,149
-// Empty
-bat_room,253,220,0	warp	bat31	1,1,bat_room,154,149
-bat_room,253,211,0	warp	bat32	1,1,bat_room,154,149
-
-// Kafra
+//============================================================
+//= Kafra scripts.
 //============================================================
 bat_room,148,147,4	script	Kafra Staff::kaf_bat	861,{
 	cutin "kafra_09",2;
 	callfunc "F_Kafra",0,2,1,150,0;
 }
 
-// Repairman
+//============================================================
+//= Repairman scripts.
 //============================================================
 bat_room,138,144,4	script	Repairman#bg	86,{
 	callfunc "repairmain","Repairman";
 	end;
 }
 
-// GM Management NPC
+// ===========================================================
+// Healer
+// ===========================================================
+-	script	Therapist in battle#bg::BGHeal	4_F_SISTER,{
+	mes "[Therapist in battle]";
+	mes "Just close your eyes, and take a deep breathe.";
+	mes "You can be free from pain.";
+	specialeffect 312;
+	percentheal 100,100;
+	specialeffect2 37;
+	specialeffect2 42;
+	sc_start SC_BLESSING,300000,10,10000;
+	sc_start SC_INCREASEAGI,300000,10,10000;
+	repairall;
+	close2;
+	openstorage;
+	end;
+}
+
 //============================================================
-bat_room,1,151,3	script	Switch#batgnd	81,{
-	set .@i, callfunc("F_GM_NPC",1854,0);
-	if (.@i == -1) {
-		mes "The command has been cancelled.";
-		close;
-	} else if (.@i == 0) {
-		end;
-	} else {
-		mes "May I help you?";
-		next;
-		switch(select("Close Battlefield:Open Battlefield:Reset a01:Reset b01:Reset a02:Reset b02")) {
-		case 1:
-			disablenpc "Tierra Gorge Officer#01a";
-			disablenpc "Tierra Gorge Officer#02a";
-			disablenpc "Tierra Gorge Officer#01b";
-			disablenpc "Tierra Gorge Officer#02b";
-			disablenpc "Flavius Officer#01a";
-			disablenpc "Flavius Officer#01b";
-			disablenpc "Flavius Officer#02a";
-			disablenpc "Flavius Officer#02b";
-			break;
-		case 2:
-			enablenpc "Tierra Gorge Officer#01a";
-			enablenpc "Tierra Gorge Officer#02a";
-			enablenpc "Tierra Gorge Officer#01b";
-			enablenpc "Tierra Gorge Officer#02b";
-			enablenpc "Flavius Officer#01a";
-			enablenpc "Flavius Officer#01b";
-			enablenpc "Flavius Officer#02a";
-			enablenpc "Flavius Officer#02b";
-			break;
-		case 3:
-			donpcevent "start#bat_a01::OnEnable";
-			break;
-		case 4:
-			donpcevent "start#bat_b01::OnEnable";
-			break;
-		case 5:
-			donpcevent "start#bat_a02::OnEnable";
-			break;
-		case 6:
-			donpcevent "start#bat_b02::OnEnable";
-			break;
+//= Function Rewards scripts.
+//============================================================
+function	script	BG_get_Rewards	{
+	deletearray $@arenamembers[0],getarraysize($@arenamembers);
+	bg_get_data(getarg(0),1);
+	.@quantity = getarg(2) * getbattleflag("bg_reward_rates") / 100;
+	for( .@i = 0; .@i < getarraysize($@arenamembers); .@i++ )
+		getitem getarg(1),getarg(2),$@arenamembers[.@i];
+	return;
+}
+
+
+//============================================================
+//= Function Ranking scripts.
+//============================================================
+function	script	BG_ranking	{
+	deletearray $@arenamembers[0],getarraysize($@arenamembers);
+	bg_get_data(getarg(0),1);
+	for( .@i = 0; .@i < getarraysize($@arenamembers); .@i++ ) {
+		.@id = convertpcinfo($@arenamembers[.@i],CPC_CHAR);
+		.@name$ = convertpcinfo($@arenamembers[.@i],CPC_NAME);
+		switch(getarg(1)) {
+			case BG_BOMBERMAN:
+				query_sql( "SELECT * FROM ranking_bg_bomber WHERE `Char_ID` = '"+.@id+"'", .@CharID, .@Name$, .@Kills, .@Deaths, .@Victory, .@Defeat);
+				if(.@id == .@CharID) {
+					if(getarg(2))
+						query_sql("UPDATE `ranking_bg_bomber` SET `Victory` = '"+(.@Victory+1)+"' WHERE `Char_ID` = '"+.@id+"'");
+					else
+						query_sql("UPDATE `ranking_bg_bomber` SET `Defeat` = '"+(.@Defeat+1)+"' WHERE `Char_ID` = '"+.@id+"'");
+				} else {
+					if(getarg(2))
+						query_sql("INSERT INTO `ranking_bg_bomber` (`Char_ID`,`PlayerName`,`Kills`,`Deaths`,`Victory`,`Defeat`) VALUES ('"+.@id+"', '"+.@name$+"', '"+.@Kills+"', '"+.@Deaths+"', '"+(.@Victory+1)+"', '"+.@Defeat+"')");
+					else
+						query_sql("INSERT INTO `ranking_bg_bomber` (`Char_ID`,`PlayerName`,`Kills`,`Deaths`,`Victory`,`Defeat`) VALUES ('"+.@id+"', '"+.@name$+"', '"+.@Kills+"', '"+.@Deaths+"', '"+.@Victory+"', '"+(.@Defeat+1)+"')");
+				}
+				break;
+			case BG_CONQUEST:
+				query_sql( "SELECT * FROM ranking_bg_conquest WHERE `Char_ID` = '"+.@id+"'", .@CharID, .@Name$, .@Kills, .@Deaths, .@Victory, .@Defeat);
+				if(.@id == .@CharID) {
+					if(getarg(2))
+						query_sql("UPDATE `ranking_bg_conquest` SET `Victory` = '"+(.@Victory+1)+"' WHERE `Char_ID` = '"+.@id+"'");
+					else
+						query_sql("UPDATE `ranking_bg_conquest` SET `Defeat` = '"+(.@Defeat+1)+"' WHERE `Char_ID` = '"+.@id+"'");
+				} else {
+					if(getarg(2))
+						query_sql("INSERT INTO `ranking_bg_conquest` (`Char_ID`,`PlayerName`,`Kills`,`Deaths`,`Victory`,`Defeat`) VALUES ('"+.@id+"', '"+.@name$+"', '"+.@Kills+"', '"+.@Deaths+"', '"+(.@Victory+1)+"', '"+.@Defeat+"')");
+					else
+						query_sql("INSERT INTO `ranking_bg_conquest` (`Char_ID`,`PlayerName`,`Kills`,`Deaths`,`Victory`,`Defeat`) VALUES ('"+.@id+"', '"+.@name$+"', '"+.@Kills+"', '"+.@Deaths+"', '"+.@Victory+"', '"+(.@Defeat+1)+"')");
+				}
+				break;
+			case BG_INFERNO:
+				query_sql( "SELECT * FROM ranking_bg_inferno WHERE `Char_ID` = '"+.@id+"'", .@CharID, .@Name$, .@Kills, .@Deaths, .@Victory, .@Defeat);
+				if(.@id == .@CharID) {
+					if(getarg(2))
+						query_sql("UPDATE `ranking_bg_inferno` SET `Victory` = '"+(.@Victory+1)+"' WHERE `Char_ID` = '"+.@id+"'");
+					else
+						query_sql("UPDATE `ranking_bg_inferno` SET `Defeat` = '"+(.@Defeat+1)+"' WHERE `Char_ID` = '"+.@id+"'");
+				} else {
+					if(getarg(2))
+						query_sql("INSERT INTO `ranking_bg_inferno` (`Char_ID`,`PlayerName`,`Kills`,`Deaths`,`Victory`,`Defeat`) VALUES ('"+.@id+"', '"+.@name$+"', '"+.@Kills+"', '"+.@Deaths+"', '"+(.@Victory+1)+"', '"+.@Defeat+"')");
+					else
+						query_sql("INSERT INTO `ranking_bg_inferno` (`Char_ID`,`PlayerName`,`Kills`,`Deaths`,`Victory`,`Defeat`) VALUES ('"+.@id+"', '"+.@name$+"', '"+.@Kills+"', '"+.@Deaths+"', '"+.@Victory+"', '"+(.@Defeat+1)+"')");
+				}
+				break;
+			case BG_CAPTUREFLAG:
+				query_sql( "SELECT * FROM ranking_bg_captureflag WHERE `Char_ID` = '"+.@id+"'", .@CharID, .@Name$, .@Kills, .@Deaths, .@Victory, .@Defeat);
+				if(.@id == .@CharID) {
+					if(getarg(2))
+						query_sql("UPDATE `ranking_bg_captureflag` SET `Victory` = '"+(.@Victory+1)+"' WHERE `Char_ID` = '"+.@id+"'");
+					else
+						query_sql("UPDATE `ranking_bg_captureflag` SET `Defeat` = '"+(.@Defeat+1)+"' WHERE `Char_ID` = '"+.@id+"'");
+				} else {
+					if(getarg(2))
+						query_sql("INSERT INTO `ranking_bg_captureflag` (`Char_ID`,`PlayerName`,`Kills`,`Deaths`,`Victory`,`Defeat`) VALUES ('"+.@id+"', '"+.@name$+"', '"+.@Kills+"', '"+.@Deaths+"', '"+(.@Victory+1)+"', '"+.@Defeat+"')");
+					else
+						query_sql("INSERT INTO `ranking_bg_captureflag` (`Char_ID`,`PlayerName`,`Kills`,`Deaths`,`Victory`,`Defeat`) VALUES ('"+.@id+"', '"+.@name$+"', '"+.@Kills+"', '"+.@Deaths+"', '"+.@Victory+"', '"+(.@Defeat+1)+"')");
+				}
+				break;
+			case BG_DEATHMATCH:
+				query_sql( "SELECT * FROM ranking_bg_deathmatch WHERE `Char_ID` = '"+.@id+"'", .@CharID, .@Name$, .@Kills, .@Deaths, .@Victory, .@Defeat);
+				if(.@id == .@CharID) {
+					if(getarg(2))
+						query_sql("UPDATE `ranking_bg_deathmatch` SET `Victory` = '"+(.@Victory+1)+"' WHERE `Char_ID` = '"+.@id+"'");
+					else
+						query_sql("UPDATE `ranking_bg_deathmatch` SET `Defeat` = '"+(.@Defeat+1)+"' WHERE `Char_ID` = '"+.@id+"'");
+				} else {
+					if(getarg(2))
+						query_sql("INSERT INTO `ranking_bg_deathmatch` (`Char_ID`,`PlayerName`,`Kills`,`Deaths`,`Victory`,`Defeat`) VALUES ('"+.@id+"', '"+.@name$+"', '"+.@Kills+"', '"+.@Deaths+"', '"+(.@Victory+1)+"', '"+.@Defeat+"')");
+					else
+						query_sql("INSERT INTO `ranking_bg_deathmatch` (`Char_ID`,`PlayerName`,`Kills`,`Deaths`,`Victory`,`Defeat`) VALUES ('"+.@id+"', '"+.@name$+"', '"+.@Kills+"', '"+.@Deaths+"', '"+.@Victory+"', '"+(.@Defeat+1)+"')");
+				}
+				break;
+			case BG_STONECONTROL:
+				query_sql( "SELECT * FROM ranking_bg_stonecontrol WHERE `Char_ID` = '"+.@id+"'", .@CharID, .@Name$, .@Kills, .@Deaths, .@Victory, .@Defeat);
+				if(.@id == .@CharID) {
+					if(getarg(2))
+						query_sql("UPDATE `ranking_bg_stonecontrol` SET `Victory` = '"+(.@Victory+1)+"' WHERE `Char_ID` = '"+.@id+"'");
+					else
+						query_sql("UPDATE `ranking_bg_stonecontrol` SET `Defeat` = '"+(.@Defeat+1)+"' WHERE `Char_ID` = '"+.@id+"'");
+				} else {
+					if(getarg(2))
+						query_sql("INSERT INTO `ranking_bg_stonecontrol` (`Char_ID`,`PlayerName`,`Kills`,`Deaths`,`Victory`,`Defeat`) VALUES ('"+.@id+"', '"+.@name$+"', '"+.@Kills+"', '"+.@Deaths+"', '"+(.@Victory+1)+"', '"+.@Defeat+"')");
+					else
+						query_sql("INSERT INTO `ranking_bg_stonecontrol` (`Char_ID`,`PlayerName`,`Kills`,`Deaths`,`Victory`,`Defeat`) VALUES ('"+.@id+"', '"+.@name$+"', '"+.@Kills+"', '"+.@Deaths+"', '"+.@Victory+"', '"+(.@Defeat+1)+"')");
+				}
+				break;
+			case BG_FLAVIUS:
+				query_sql( "SELECT * FROM ranking_bg_flavius WHERE `Char_ID` = '"+.@id+"'", .@CharID, .@Name$, .@Kills, .@Deaths, .@Victory, .@Defeat);
+				if(.@id == .@CharID) {
+					if(getarg(2))
+						query_sql("UPDATE `ranking_bg_flavius` SET `Victory` = '"+(.@Victory+1)+"' WHERE `Char_ID` = '"+.@id+"'");
+					else
+						query_sql("UPDATE `ranking_bg_flavius` SET `Defeat` = '"+(.@Defeat+1)+"' WHERE `Char_ID` = '"+.@id+"'");
+				} else {
+					if(getarg(2))
+						query_sql("INSERT INTO `ranking_bg_flavius` (`Char_ID`,`PlayerName`,`Kills`,`Deaths`,`Victory`,`Defeat`) VALUES ('"+.@id+"', '"+.@name$+"', '"+.@Kills+"', '"+.@Deaths+"', '"+(.@Victory+1)+"', '"+.@Defeat+"')");
+					else
+						query_sql("INSERT INTO `ranking_bg_flavius` (`Char_ID`,`PlayerName`,`Kills`,`Deaths`,`Victory`,`Defeat`) VALUES ('"+.@id+"', '"+.@name$+"', '"+.@Kills+"', '"+.@Deaths+"', '"+.@Victory+"', '"+(.@Defeat+1)+"')");
+				}
+				break;
+			case BG_KVM:
+				query_sql( "SELECT * FROM ranking_bg_kvm WHERE `Char_ID` = '"+.@id+"'", .@CharID, .@Name$, .@Kills, .@Deaths, .@Victory, .@Defeat);
+				if(.@id == .@CharID) {
+					if(getarg(2))
+						query_sql("UPDATE `ranking_bg_kvm` SET `Victory` = '"+(.@Victory+1)+"' WHERE `Char_ID` = '"+.@id+"'");
+					else
+						query_sql("UPDATE `ranking_bg_kvm` SET `Defeat` = '"+(.@Defeat+1)+"' WHERE `Char_ID` = '"+.@id+"'");
+				} else {
+					if(getarg(2))
+						query_sql("INSERT INTO `ranking_bg_kvm` (`Char_ID`,`PlayerName`,`Kills`,`Deaths`,`Victory`,`Defeat`) VALUES ('"+.@id+"', '"+.@name$+"', '"+.@Kills+"', '"+.@Deaths+"', '"+(.@Victory+1)+"', '"+.@Defeat+"')");
+					else
+						query_sql("INSERT INTO `ranking_bg_kvm` (`Char_ID`,`PlayerName`,`Kills`,`Deaths`,`Victory`,`Defeat`) VALUES ('"+.@id+"', '"+.@name$+"', '"+.@Kills+"', '"+.@Deaths+"', '"+.@Victory+"', '"+(.@Defeat+1)+"')");
+				}
+				break;
+			case BG_TIERRA:
+				query_sql( "SELECT * FROM ranking_bg_tierra WHERE `Char_ID` = '"+.@id+"'", .@CharID, .@Name$, .@Kills, .@Deaths, .@Victory, .@Defeat);
+				if(.@id == .@CharID) {
+					if(getarg(2))
+						query_sql("UPDATE `ranking_bg_tierra` SET `Victory` = '"+(.@Victory+1)+"' WHERE `Char_ID` = '"+.@id+"'");
+					else
+						query_sql("UPDATE `ranking_bg_tierra` SET `Defeat` = '"+(.@Defeat+1)+"' WHERE `Char_ID` = '"+.@id+"'");
+				} else {
+					if(getarg(2))
+						query_sql("INSERT INTO `ranking_bg_tierra` (`Char_ID`,`PlayerName`,`Kills`,`Deaths`,`Victory`,`Defeat`) VALUES ('"+.@id+"', '"+.@name$+"', '"+.@Kills+"', '"+.@Deaths+"', '"+(.@Victory+1)+"', '"+.@Defeat+"')");
+					else
+						query_sql("INSERT INTO `ranking_bg_tierra` (`Char_ID`,`PlayerName`,`Kills`,`Deaths`,`Victory`,`Defeat`) VALUES ('"+.@id+"', '"+.@name$+"', '"+.@Kills+"', '"+.@Deaths+"', '"+.@Victory+"', '"+(.@Defeat+1)+"')");
+				}
+				break;
+			case BG_PECORACER:
+				query_sql( "SELECT * FROM ranking_bg_pecoracer WHERE `Char_ID` = '"+.@id+"'", .@CharID, .@Name$, .@Kills, .@Deaths, .@Victory, .@Defeat);
+				if(.@id == .@CharID) {
+					if(getarg(2))
+						query_sql("UPDATE `ranking_bg_pecoracer` SET `Victory` = '"+(.@Victory+1)+"' WHERE `Char_ID` = '"+.@id+"'");
+					else
+						query_sql("UPDATE `ranking_bg_pecoracer` SET `Defeat` = '"+(.@Defeat+1)+"' WHERE `Char_ID` = '"+.@id+"'");
+				} else {
+					if(getarg(2))
+						query_sql("INSERT INTO `ranking_bg_pecoracer` (`Char_ID`,`PlayerName`,`Kills`,`Deaths`,`Victory`,`Defeat`) VALUES ('"+.@id+"', '"+.@name$+"', '"+.@Kills+"', '"+.@Deaths+"', '"+(.@Victory+1)+"', '"+.@Defeat+"')");
+					else
+						query_sql("INSERT INTO `ranking_bg_pecoracer` (`Char_ID`,`PlayerName`,`Kills`,`Deaths`,`Victory`,`Defeat`) VALUES ('"+.@id+"', '"+.@name$+"', '"+.@Kills+"', '"+.@Deaths+"', '"+.@Victory+"', '"+(.@Defeat+1)+"')");
+				}
+				break;
+			case BG_PORINGBALL:
+				query_sql( "SELECT * FROM ranking_bg_poringball WHERE `Char_ID` = '"+.@id+"'", .@CharID, .@Name$, .@Kills, .@Deaths, .@Victory, .@Defeat);
+				if(.@id == .@CharID) {
+					if(getarg(2))
+						query_sql("UPDATE `ranking_bg_poringball` SET `Victory` = '"+(.@Victory+1)+"' WHERE `Char_ID` = '"+.@id+"'");
+					else
+						query_sql("UPDATE `ranking_bg_poringball` SET `Defeat` = '"+(.@Defeat+1)+"' WHERE `Char_ID` = '"+.@id+"'");
+				} else {
+					if(getarg(2))
+						query_sql("INSERT INTO `ranking_bg_poringball` (`Char_ID`,`PlayerName`,`Kills`,`Deaths`,`Victory`,`Defeat`) VALUES ('"+.@id+"', '"+.@name$+"', '"+.@Kills+"', '"+.@Deaths+"', '"+(.@Victory+1)+"', '"+.@Defeat+"')");
+					else
+						query_sql("INSERT INTO `ranking_bg_poringball` (`Char_ID`,`PlayerName`,`Kills`,`Deaths`,`Victory`,`Defeat`) VALUES ('"+.@id+"', '"+.@name$+"', '"+.@Kills+"', '"+.@Deaths+"', '"+.@Victory+"', '"+(.@Defeat+1)+"')");
+				}
+				break;
+			case BG_RUSH:
+				query_sql( "SELECT * FROM ranking_bg_rush WHERE `Char_ID` = '"+.@id+"'", .@CharID, .@Name$, .@Kills, .@Deaths, .@Victory, .@Defeat);
+				if(.@id == .@CharID) {
+					if(getarg(2))
+						query_sql("UPDATE `ranking_bg_rush` SET `Victory` = '"+(.@Victory+1)+"' WHERE `Char_ID` = '"+.@id+"'");
+					else
+						query_sql("UPDATE `ranking_bg_rush` SET `Defeat` = '"+(.@Defeat+1)+"' WHERE `Char_ID` = '"+.@id+"'");
+				} else {
+					if(getarg(2))
+						query_sql("INSERT INTO `ranking_bg_rush` (`Char_ID`,`PlayerName`,`Kills`,`Deaths`,`Victory`,`Defeat`) VALUES ('"+.@id+"', '"+.@name$+"', '"+.@Kills+"', '"+.@Deaths+"', '"+(.@Victory+1)+"', '"+.@Defeat+"')");
+					else
+						query_sql("INSERT INTO `ranking_bg_rush` (`Char_ID`,`PlayerName`,`Kills`,`Deaths`,`Victory`,`Defeat`) VALUES ('"+.@id+"', '"+.@name$+"', '"+.@Kills+"', '"+.@Deaths+"', '"+.@Victory+"', '"+(.@Defeat+1)+"')");
+				}
+				break;
+			case BG_BOSSNIA:
+				query_sql( "SELECT * FROM ranking_bg_bossnia WHERE `Char_ID` = '"+.@id+"'", .@CharID, .@Name$, .@Kills, .@Deaths, .@Victory, .@Defeat);
+				if(.@id == .@CharID) {
+					if(getarg(2))
+						query_sql("UPDATE `ranking_bg_bossnia` SET `Victory` = '"+(.@Victory+1)+"' WHERE `Char_ID` = '"+.@id+"'");
+					else
+						query_sql("UPDATE `ranking_bg_bossnia` SET `Defeat` = '"+(.@Defeat+1)+"' WHERE `Char_ID` = '"+.@id+"'");
+				} else {
+					if(getarg(2))
+						query_sql("INSERT INTO `ranking_bg_bossnia` (`Char_ID`,`PlayerName`,`Kills`,`Deaths`,`Victory`,`Defeat`) VALUES ('"+.@id+"', '"+.@name$+"', '"+.@Kills+"', '"+.@Deaths+"', '"+(.@Victory+1)+"', '"+.@Defeat+"')");
+					else
+						query_sql("INSERT INTO `ranking_bg_bossnia` (`Char_ID`,`PlayerName`,`Kills`,`Deaths`,`Victory`,`Defeat`) VALUES ('"+.@id+"', '"+.@name$+"', '"+.@Kills+"', '"+.@Deaths+"', '"+.@Victory+"', '"+(.@Defeat+1)+"')");
+				}
+				break;
+			case BG_DOMINATION:
+				query_sql( "SELECT * FROM ranking_bg_domination WHERE `Char_ID` = '"+.@id+"'", .@CharID, .@Name$, .@Kills, .@Deaths, .@Victory, .@Defeat);
+				if(.@id == .@CharID) {
+					if(getarg(2))
+						query_sql("UPDATE `ranking_bg_domination` SET `Victory` = '"+(.@Victory+1)+"' WHERE `Char_ID` = '"+.@id+"'");
+					else
+						query_sql("UPDATE `ranking_bg_domination` SET `Defeat` = '"+(.@Defeat+1)+"' WHERE `Char_ID` = '"+.@id+"'");
+				} else {
+					if(getarg(2))
+						query_sql("INSERT INTO `ranking_bg_domination` (`Char_ID`,`PlayerName`,`Kills`,`Deaths`,`Victory`,`Defeat`) VALUES ('"+.@id+"', '"+.@name$+"', '"+.@Kills+"', '"+.@Deaths+"', '"+(.@Victory+1)+"', '"+.@Defeat+"')");
+					else
+						query_sql("INSERT INTO `ranking_bg_domination` (`Char_ID`,`PlayerName`,`Kills`,`Deaths`,`Victory`,`Defeat`) VALUES ('"+.@id+"', '"+.@name$+"', '"+.@Kills+"', '"+.@Deaths+"', '"+.@Victory+"', '"+(.@Defeat+1)+"')");
+				}
+				break;
+			case BG_EYEOFSTORM:
+				query_sql( "SELECT * FROM ranking_bg_eyeofstorm WHERE `Char_ID` = '"+.@id+"'", .@CharID, .@Name$, .@Kills, .@Deaths, .@Victory, .@Defeat);
+				if(.@id == .@CharID) {
+					if(getarg(2))
+						query_sql("UPDATE `ranking_bg_eyeofstorm` SET `Victory` = '"+(.@Victory+1)+"' WHERE `Char_ID` = '"+.@id+"'");
+					else
+						query_sql("UPDATE `ranking_bg_eyeofstorm` SET `Defeat` = '"+(.@Defeat+1)+"' WHERE `Char_ID` = '"+.@id+"'");
+				} else {
+					if(getarg(2))
+						query_sql("INSERT INTO `ranking_bg_eyeofstorm` (`Char_ID`,`PlayerName`,`Kills`,`Deaths`,`Victory`,`Defeat`) VALUES ('"+.@id+"', '"+.@name$+"', '"+.@Kills+"', '"+.@Deaths+"', '"+(.@Victory+1)+"', '"+.@Defeat+"')");
+					else
+						query_sql("INSERT INTO `ranking_bg_eyeofstorm` (`Char_ID`,`PlayerName`,`Kills`,`Deaths`,`Victory`,`Defeat`) VALUES ('"+.@id+"', '"+.@name$+"', '"+.@Kills+"', '"+.@Deaths+"', '"+.@Victory+"', '"+(.@Defeat+1)+"')");
+				}
+				break;
 		}
-		mes "Complete";
-		close;
 	}
+	return;
+}
+function	script	check_bg_get_rank	{
+	.@charid = getarg(1);
+	if(getarg(0) == "region_8") {	// Double Inferno
+		query_sql "INSERT INTO `ranking_bg_inferno` ( `Char_ID`, `PlayerName`,`Kills`,`Deaths`,`Victory`,`Defeat` ) VALUES ( "+ getcharid(0) +", '"+ escape_sql( strcharinfo(0) ) +"', 1, 0, 0, 0 ) ON DUPLICATE KEY UPDATE `Kills` = `Kills` +1;";
+		query_sql "INSERT INTO `ranking_bg_inferno` ( `Char_ID`, `PlayerName`,`Kills`,`Deaths`,`Victory`,`Defeat` ) VALUES ( "+ .@charid +", '"+ escape_sql( strcharinfo(0,.@charid) ) +"', 0, 1, 0, 0 ) ON DUPLICATE KEY UPDATE `Deaths` = `Deaths` +1;";
+	} else if(getarg(0) == "bat_b02") {	// Capture the Flag
+		query_sql "INSERT INTO `ranking_bg_captureflag` ( `Char_ID`, `PlayerName`,`Kills`,`Deaths`,`Victory`,`Defeat` ) VALUES ( "+ getcharid(0) +", '"+ escape_sql( strcharinfo(0) ) +"', 1, 0, 0, 0 ) ON DUPLICATE KEY UPDATE `Kills` = `Kills` +1;";
+		query_sql "INSERT INTO `ranking_bg_captureflag` ( `Char_ID`, `PlayerName`,`Kills`,`Deaths`,`Victory`,`Defeat` ) VALUES ( "+ .@charid +", '"+ escape_sql( strcharinfo(0,.@charid) ) +"', 0, 1, 0, 0 ) ON DUPLICATE KEY UPDATE `Deaths` = `Deaths` +1;";
+	} else if(getarg(0) == "bat_b03") {	// Death Match
+		query_sql "INSERT INTO `ranking_bg_deathmatch` ( `Char_ID`, `PlayerName`,`Kills`,`Deaths`,`Victory`,`Defeat` ) VALUES ( "+ getcharid(0) +", '"+ escape_sql( strcharinfo(0) ) +"', 1, 0, 0, 0 ) ON DUPLICATE KEY UPDATE `Kills` = `Kills` +1;";
+		query_sql "INSERT INTO `ranking_bg_deathmatch` ( `Char_ID`, `PlayerName`,`Kills`,`Deaths`,`Victory`,`Defeat` ) VALUES ( "+ .@charid +", '"+ escape_sql( strcharinfo(0,.@charid) ) +"', 0, 1, 0, 0 ) ON DUPLICATE KEY UPDATE `Deaths` = `Deaths` +1;";
+	} else if(getarg(0) == "bat_b04") {	// Stone Control
+		query_sql "INSERT INTO `ranking_bg_stonecontrol` ( `Char_ID`, `PlayerName`,`Kills`,`Deaths`,`Victory`,`Defeat` ) VALUES ( "+ getcharid(0) +", '"+ escape_sql( strcharinfo(0) ) +"', 1, 0, 0, 0 ) ON DUPLICATE KEY UPDATE `Kills` = `Kills` +1;";
+		query_sql "INSERT INTO `ranking_bg_stonecontrol` ( `Char_ID`, `PlayerName`,`Kills`,`Deaths`,`Victory`,`Defeat` ) VALUES ( "+ .@charid +", '"+ escape_sql( strcharinfo(0,.@charid) ) +"', 0, 1, 0, 0 ) ON DUPLICATE KEY UPDATE `Deaths` = `Deaths` +1;";
+	} else if(getarg(0) == "bg_ball") {	// Poring Ball
+		query_sql "INSERT INTO `ranking_bg_poringball` ( `Char_ID`, `PlayerName`,`Kills`,`Deaths`,`Victory`,`Defeat` ) VALUES ( "+ getcharid(0) +", '"+ escape_sql( strcharinfo(0) ) +"', 1, 0, 0, 0 ) ON DUPLICATE KEY UPDATE `Kills` = `Kills` +1;";
+		query_sql "INSERT INTO `ranking_bg_poringball` ( `Char_ID`, `PlayerName`,`Kills`,`Deaths`,`Victory`,`Defeat` ) VALUES ( "+ .@charid +", '"+ escape_sql( strcharinfo(0,.@charid) ) +"', 0, 1, 0, 0 ) ON DUPLICATE KEY UPDATE `Deaths` = `Deaths` +1;";
+	} else if(getarg(0) == "bat_a03") {	// Bossnia
+		query_sql "INSERT INTO `ranking_bg_bossnia` ( `Char_ID`, `PlayerName`,`Kills`,`Deaths`,`Victory`,`Defeat` ) VALUES ( "+ getcharid(0) +", '"+ escape_sql( strcharinfo(0) ) +"', 1, 0, 0, 0 ) ON DUPLICATE KEY UPDATE `Kills` = `Kills` +1;";
+		query_sql "INSERT INTO `ranking_bg_bossnia` ( `Char_ID`, `PlayerName`,`Kills`,`Deaths`,`Victory`,`Defeat` ) VALUES ( "+ .@charid +", '"+ escape_sql( strcharinfo(0,.@charid) ) +"', 0, 1, 0, 0 ) ON DUPLICATE KEY UPDATE `Deaths` = `Deaths` +1;";
+	} else if(getarg(0) == "bat_a04") {	// Domination
+		query_sql "INSERT INTO `ranking_bg_domination` ( `Char_ID`, `PlayerName`,`Kills`,`Deaths`,`Victory`,`Defeat` ) VALUES ( "+ getcharid(0) +", '"+ escape_sql( strcharinfo(0) ) +"', 1, 0, 0, 0 ) ON DUPLICATE KEY UPDATE `Kills` = `Kills` +1;";
+		query_sql "INSERT INTO `ranking_bg_domination` ( `Char_ID`, `PlayerName`,`Kills`,`Deaths`,`Victory`,`Defeat` ) VALUES ( "+ .@charid +", '"+ escape_sql( strcharinfo(0,.@charid) ) +"', 0, 1, 0, 0 ) ON DUPLICATE KEY UPDATE `Deaths` = `Deaths` +1;";
+	} else if(getarg(0) == "bat_a02") {	// Eye of Storm
+		query_sql "INSERT INTO `ranking_bg_eyeofstorm` ( `Char_ID`, `PlayerName`,`Kills`,`Deaths`,`Victory`,`Defeat` ) VALUES ( "+ getcharid(0) +", '"+ escape_sql( strcharinfo(0) ) +"', 1, 0, 0, 0 ) ON DUPLICATE KEY UPDATE `Kills` = `Kills` +1;";
+		query_sql "INSERT INTO `ranking_bg_eyeofstorm` ( `Char_ID`, `PlayerName`,`Kills`,`Deaths`,`Victory`,`Defeat` ) VALUES ( "+ .@charid +", '"+ escape_sql( strcharinfo(0,.@charid) ) +"', 0, 1, 0, 0 ) ON DUPLICATE KEY UPDATE `Deaths` = `Deaths` +1;";
+	} else if(getarg(0) == "rush_cas01" || getarg(0) == "rush_cas02" || getarg(0) == "rush_cas03" || getarg(0) == "rush_cas04" ) {	// Rush
+		query_sql "INSERT INTO `ranking_bg_rush` ( `Char_ID`, `PlayerName`,`Kills`,`Deaths`,`Victory`,`Defeat` ) VALUES ( "+ getcharid(0) +", '"+ escape_sql( strcharinfo(0) ) +"', 1, 0, 0, 0 ) ON DUPLICATE KEY UPDATE `Kills` = `Kills` +1;";
+		query_sql "INSERT INTO `ranking_bg_rush` ( `Char_ID`, `PlayerName`,`Kills`,`Deaths`,`Victory`,`Defeat` ) VALUES ( "+ .@charid +", '"+ escape_sql( strcharinfo(0,.@charid) ) +"', 0, 1, 0, 0 ) ON DUPLICATE KEY UPDATE `Deaths` = `Deaths` +1;";
+	} else if(getarg(0) == "bomberman" || getarg(0) == "bg_bomber" || getarg(0) == "bg_bomber2") {
+		query_sql "INSERT INTO `ranking_bg_bomber` ( `Char_ID`, `PlayerName`,`Kills`,`Deaths`,`Victory`,`Defeat` ) VALUES ( "+ getcharid(0) +", '"+ escape_sql( strcharinfo(0) ) +"', 1, 0, 0, 0 ) ON DUPLICATE KEY UPDATE `Kills` = `Kills` +1;";
+		query_sql "INSERT INTO `ranking_bg_bomber` ( `Char_ID`, `PlayerName`,`Kills`,`Deaths`,`Victory`,`Defeat` ) VALUES ( "+ .@charid +", '"+ escape_sql( strcharinfo(0,.@charid) ) +"', 0, 1, 0, 0 ) ON DUPLICATE KEY UPDATE `Deaths` = `Deaths` +1;";
+	} else if(getarg(0) == "schg_cas06" || getarg(0) == "schg_cas07" || getarg(0) == "schg_cas08" || getarg(0) == "arug_cas06" || getarg(0) == "arug_cas07" || getarg(0) == "arug_cas08") {
+		query_sql "INSERT INTO `ranking_bg_conquest` ( `Char_ID`, `PlayerName`,`Kills`,`Deaths`,`Victory`,`Defeat` ) VALUES ( "+ getcharid(0) +", '"+ escape_sql( strcharinfo(0) ) +"', 1, 0, 0, 0 ) ON DUPLICATE KEY UPDATE `Kills` = `Kills` +1;";
+		query_sql "INSERT INTO `ranking_bg_conquest` ( `Char_ID`, `PlayerName`,`Kills`,`Deaths`,`Victory`,`Defeat` ) VALUES ( "+ .@charid +", '"+ escape_sql( strcharinfo(0,.@charid) ) +"', 0, 1, 0, 0 ) ON DUPLICATE KEY UPDATE `Deaths` = `Deaths` +1;";
+	}
+	return;
 }
 
-// Badges Exchange
 //============================================================
-bat_room,160,150,3	script	Erundek	109,{
+//= Rewards scripts.
+//============================================================
+bat_room,160,150,3	script	Erundek	4_M_MANAGER,{
 	if (checkweight(1201,1) == 0) {
 		mes "- Wait a minute !! -";
 		mes "- Currently you're carrying -";
@@ -396,135 +853,135 @@ bat_room,160,150,3	script	Erundek	109,{
 	mes "Do you have the battlefield badges?";
 	mes "I can exchange Bravery Badges and Valor Badges for reward items.";
 	next;
-	switch(select("Exchange Badges:Check the Catalog")) {
-	case 1:
-		mes "[Erundek]";
-		mes "Which type of items would you like to exchange?";
-		mes "To check more information about the reward items, please use our ^3131FFCatalog^000000.";
-		next;
-		switch(select("Weapon:Armor:Accessory:Consumable")) {
+	switch(select("Exchange Badges", "Check the Catalog")) {
 		case 1:
 			mes "[Erundek]";
-			mes "You chose ^3131FFWeapon^000000.";
-			mes "The following weapons are available for exchange with the battlefield badges.";
-			mes "Please note that items for ^3131FFBravery Badges are indicated as (BB)^000000, and ^3131FFValor Badges as (VB)^000000.";
-			next;
-			switch(select("Dagger/OneSword/TwoSword/TwoSpear:Staff/Mace/TwoAxe/Shuriken:Bow/Katar/Music/Whip:Book/Knuckle:Revolver/Rifle/Gatling/Shotgun/Launcher")) {
-			case 1:
-				mes "[Erundek]";
-				mes "The following items are available in the ^3131FFDagger, One-Handed Sword, Two-Handed Sword, and Two-Handed Spear^000000 category.";
-				next;
-				setarray .@Weapons[0],13036,7828,13037,7829,13411,7828,13410,7829,1183,7828,1184,7829,1425,7828,1482,7829;
-				break;
-			case 2:
-				mes "[Erundek]";
-				mes "The following items are available in the ^3131FFStaff / Mace / Two-Handed Axe / Huuma Shuriken^000000 category.";
-				next;
-				setarray .@Weapons[0],1632,7828,1633,7829,1634,7828,1635,7829,1543,7828,1542,7829,1380,7828,1379,7829,13305,7828,13306,7829;
-				break;
-			case 3:
-				mes "[Erundek]";
-				mes "The following weapons are available in the ^3131FFBow / Katar / Musical Instrument / Whip^000000 category.";
-				next;
-				setarray .@Weapons[0],1739,7828,1738,7829,1279,7828,1280,7829,1924,7828,1923,7829,1978,7828,1977,7829;
-				break;
-			case 4:
-				mes "[Erundek]";
-				mes "The following weapons are available in the ^3131FFBook / Knuckle^000000 category.";
-				next;
-				setarray .@Weapons[0],1574,7828,1575,7829,1824,7828,1823,7829;
-				break;
-			case 5:
-				mes "[Erundek]";
-				mes "The following weapons are available in the ^3131FFRevolver / Rifle / Gatling Gun / Shotgun / Grenade Launcher^000000 category.";
-				next;
-				setarray .@Weapons[0],13108,7828,13171,7829,13172,7828,13173,7829,13174,7829;
-				break;
-			}
-			set .@menu$,"";
-			for(set .@i,0; .@i<getarraysize(.@Weapons); set .@i,.@i+2)
-				set .@menu$, .@menu$+getitemname(.@Weapons[.@i])+((.@Weapons[.@i+1]==7828)?"(BB)":"(VB)")+":";
-			set .@i, (select(.@menu$)-1)*2;
-			set .@type$, ((.@Weapons[.@i+1]==7828)?"(BB)":"(VB)");
-			mes "[Erundek]";
-			mes "You chose ^3131FF"+getitemname(.@Weapons[.@i])+.@type$+"^000000.";
-			mes "You can exchange for this item with ^FF0000100 "+getitemname(.@Weapons[.@i+1])+"^000000.";
-			mes "Would you like to exchange?";
+			mes "Which type of items would you like to exchange?";
+			mes "To check more information about the reward items, please use our ^3131FFCatalog^000000.";
 			next;
-			switch(select("Do not exchange:Exchange")) {
-			case 1:
-				break;
-			case 2:
-				mes "[Erundek]";
-				mes "Would you like to spend ^FF0000100 "+getitemname(.@Weapons[.@i+1])+"^000000 and receive a ^3131FF"+getitemname(.@Weapons[.@i])+.@type$+"^000000?";
-				next;
-				mes "[Erundek]";
-				mes "Remember, Battleground Reward Items are ^FF0000Character Bound^000000. Are you sure you want this item?";
-				next;
-				switch(select("Yes:No")) {
+			switch(select("Weapon", "Armor", "Accessory", "Consumable")) {
 				case 1:
 					mes "[Erundek]";
-					if (countitem(.@Weapons[.@i+1]) >= 100) {
-						mes "Thank you for exchanging.";
-						delitem .@Weapons[.@i+1],100;
-						getitem .@Weapons[.@i],1;
+					mes "You chose ^3131FFWeapon^000000.";
+					mes "The following weapons are available for exchange with the battlefield badges.";
+					mes "Please note that items for ^3131FFBravery Badges are indicated as (BB)^000000, and ^3131FFValor Badges as (VB)^000000.";
+					next;
+					switch(select("Dagger/OneSword/TwoSword/TwoSpear", "Staff/Mace/TwoAxe/Shuriken", "Bow/Katar/Music/Whip", "Book/Knuckle", "Revolver/Rifle/Gatling/Shotgun/Launcher")) {
+						case 1:
+							mes "[Erundek]";
+							mes "The following items are available in the ^3131FFDagger, One-Handed Sword, Two-Handed Sword, and Two-Handed Spear^000000 category.";
+							next;
+							setarray .@Weapons[0],13036,7828,13037,7829,13411,7828,13410,7829,1183,7828,1184,7829,1425,7828,1482,7829;
+							break;
+						case 2:
+							mes "[Erundek]";
+							mes "The following items are available in the ^3131FFStaff / Mace / Two-Handed Axe / Huuma Shuriken^000000 category.";
+							next;
+							setarray .@Weapons[0],1632,7828,1633,7829,1634,7828,1635,7829,1543,7828,1542,7829,1380,7828,1379,7829,13305,7828,13306,7829;
+							break;
+						case 3:
+							mes "[Erundek]";
+							mes "The following weapons are available in the ^3131FFBow / Katar / Musical Instrument / Whip^000000 category.";
+							next;
+							setarray .@Weapons[0],1739,7828,1738,7829,1279,7828,1280,7829,1924,7828,1923,7829,1978,7828,1977,7829;
+							break;
+						case 4:
+							mes "[Erundek]";
+							mes "The following weapons are available in the ^3131FFBook / Knuckle^000000 category.";
+							next;
+							setarray .@Weapons[0],1574,7828,1575,7829,1824,7828,1823,7829;
+							break;
+						case 5:
+							mes "[Erundek]";
+							mes "The following weapons are available in the ^3131FFRevolver / Rifle / Gatling Gun / Shotgun / Grenade Launcher^000000 category.";
+							next;
+							setarray .@Weapons[0],13108,7828,13171,7829,13172,7828,13173,7829,13174,7829;
+							break;
 					}
-					else mes "I'm sorry, but you don't have enough badges to exchange.";
+					.@menu$ = "";
+					for (.@i = 0; .@i < getarraysize(.@Weapons); .@i += 2)
+						.@menu$ += getitemname(.@Weapons[.@i])+((.@Weapons[.@i+1]==7828)?"(BB)":"(VB)")+":";
+					.@i = (select(.@menu$)-1)*2;
+					.@type$ = ((.@Weapons[.@i+1]==7828)?"(BB)":"(VB)");
+					mes "[Erundek]";
+					mes "You chose ^3131FF"+getitemname(.@Weapons[.@i])+.@type$+"^000000.";
+					mes "You can exchange for this item with ^FF0000100 "+getitemname(.@Weapons[.@i+1])+"^000000.";
+					mes "Would you like to exchange?";
+					next;
+					switch(select("Do not exchange", "Exchange")) {
+						case 1:
+							break;
+						case 2:
+							mes "[Erundek]";
+							mes "Would you like to spend ^FF0000100 "+getitemname(.@Weapons[.@i+1])+"^000000 and receive a ^3131FF"+getitemname(.@Weapons[.@i])+.@type$+"^000000?";
+							next;
+							mes "[Erundek]";
+							mes "Remember, Battleground Reward Items are ^FF0000Character Bound^000000. Are you sure you want this item?";
+							next;
+							switch(select("Yes", "No")) {
+							case 1:
+								mes "[Erundek]";
+								if (countitem(.@Weapons[.@i+1]) >= 100) {
+									mes "Thank you for exchanging.";
+									delitem .@Weapons[.@i+1],100;
+									getitem .@Weapons[.@i],1;
+								}
+								else mes "I'm sorry, but you don't have enough badges to exchange.";
+								close;
+							case 2:
+								break;
+							}
+							break;
+					}
+					mes "[Erundek]";
+					mes "Do you need more time to check the items?";
 					close;
 				case 2:
+					mes "[Erundek]";
+					mes "You chose ^3131FFArmor^000000.";
+					mes "The following armors are available for exchange with the battlefield badges.";
+					next;
+					switch(select("Garments / Shoes", "Armor")) {
+						case 1:
+							setarray .@items[0],2538,50,2539,50,2540,50,2435,50,2436,50,2437,50;
+							break;
+						case 2:
+							setarray .@items[0],2376,80,2377,80,2378,80,2379,80,2380,80,2381,80,2382,80;
+							break;
+						}
+					break;
+				case 3:
+					mes "[Erundek]";
+					mes "You chose ^3131FFAccessory^000000.";
+					mes "You can exchange the Medal of Honors with your Badges according to the job classes, as follows:";
+					next;
+					setarray .@items[0],2733,500,2720,500,2721,500,2722,500,2723,500,2724,500,2725,500;
+					.@menu1$ = "Gunslinger:Swordman/Taekwon Master:Thief:Acolyte:Magician:Archer:Merchant";
+					break;
+				case 4:
+					mes "[Erundek]";
+					mes "You chose ^3131FFConsumable^000000.";
+					mes "The following consumable items are available for exchange with the battlefield badges:";
+					next;
+					setarray .@items[0],12269,10,12270,10,12271,5,12272,10,12273,10;
 					break;
-				}
-				break;
-			}
-			mes "[Erundek]";
-			mes "Do you need more time to check the items?";
-			close;
-		case 2:
-			mes "[Erundek]";
-			mes "You chose ^3131FFArmor^000000.";
-			mes "The following armors are available for exchange with the battlefield badges.";
-			next;
-			switch(select("Garments / Shoes:Armor")) {
-			case 1:
-				setarray .@Items[0],2538,50,2539,50,2540,50,2435,50,2436,50,2437,50;
-				break;
-			case 2:
-				setarray .@Items[0],2376,80,2377,80,2378,80,2379,80,2380,80,2381,80,2382,80;
-				break;
 			}
 			break;
-		case 3:
-			mes "[Erundek]";
-			mes "You chose ^3131FFAccessory^000000.";
-			mes "You can exchange the Medal of Honors with your Badges according to the job classes, as follows:";
-			next;
-			setarray .@Items[0],2733,500,2720,500,2721,500,2722,500,2723,500,2724,500,2725,500;
-			set .@menu1$,"Gunslinger:Swordman/Taekwon Master:Thief:Acolyte:Magician:Archer:Merchant";
-			break;
-		case 4:
+		case 2:
 			mes "[Erundek]";
-			mes "You chose ^3131FFConsumable^000000.";
-			mes "The following consumable items are available for exchange with the battlefield badges:";
-			next;
-			setarray .@Items[0],12269,10,12270,10,12271,5,12272,10,12273,10;
-			break;
-		}
-		break;
-	case 2:
-		mes "[Erundek]";
-		mes "We have many items, so please take a look and purchase deliberately.";
-		close2;
-		readbook 11010,1;
-		end;
+			mes "We have many items, so please take a look and purchase deliberately.";
+			close2;
+			readbook 11010,1;
+			end;
 	}
-	set .@menu$,"";
-	if (.@menu1$ != "") set .@menu$, .@menu1$;
-	else for(set .@i,0; .@i<getarraysize(.@Items); set .@i,.@i+2)
-		set .@menu$, .@menu$+getitemname(.@Items[.@i])+":";
-	set .@i, (select(.@menu$)-1)*2;
+	.@menu$ = "";
+	if (.@menu1$ != "") .@menu$ = .@menu1$;
+	else for (.@i = 0; .@i < getarraysize(.@items); .@i += 2)
+		.@menu$ += getitemname(.@items[.@i])+":";
+	.@i = (select(.@menu$)-1)*2;
 	mes "[Erundek]";
-	mes "You chose ^3131FF"+getitemname(.@Items[.@i])+"^000000.";
-	switch(.@Items[.@i]) {
+	mes "You chose ^3131FF"+getitemname(.@items[.@i])+"^000000.";
+	switch(.@items[.@i]) {
 		case 2720: mes "This item is for Swordman and Taekwon Master Class only."; break;
 		case 2721: mes "This item is for Thief Class only."; break;
 		case 2722: mes "This item is for Acolyte Class only."; break;
@@ -534,94 +991,114 @@ bat_room,160,150,3	script	Erundek	109,{
 		case 2733: mes "This item is for Gunslinger only."; break;
 		default: break;
 	}
-	mes "You can exchange for this item with ^FF0000"+.@Items[.@i+1]+" "+getitemname(7828)+" or "+.@Items[.@i+1]+" "+getitemname(7829)+"^000000.";
+	mes "You can exchange for this item with ^FF0000"+.@items[.@i+1]+" "+getitemname(7828)+" or "+.@items[.@i+1]+" "+getitemname(7829)+"^000000.";
 	mes "Would you like to exchange?";
 	next;
-	switch(select("Do not exchange:Exchange")) {
-	case 1:
-		mes "[Erundek]";
-		mes "Do you need more time to check the items?";
-		break;
-	case 2:
-		mes "[Erundek]";
-		mes "Which Badge do you want to exchange?";
-		mes "You need ^3131FF"+.@Items[.@i+1]+" Badges^000000 to exchange.";
-		next;
-		if (.@item[0] < 12269 || .@item[0] > 12273 ) {
+	switch(select("Do not exchange", "Exchange")) {
+		case 1:
+			mes "[Erundek]";
+			mes "Do you need more time to check the items?";
+			break;
+		case 2:
 			mes "[Erundek]";
-			mes "Remember, Battleground Reward Items are ^FF0000Character Bound^000000. Are you sure you want this item?";
+			mes "Which Badge do you want to exchange?";
+			mes "You need ^3131FF"+.@items[.@i+1]+" Badges^000000 to exchange.";
 			next;
-		}
-		set .@j, select("Bravery Badge:Valor Badge:Cancel");
-		mes "[Erundek]";
-		if (.@j == 3) {
-			mes "You cancelled the exchange.";
+			if (.@item[0] < 12269 || .@item[0] > 12273) {
+				mes "[Erundek]";
+				mes "Remember, Battleground Reward Items are ^FF0000Character Bound^000000. Are you sure you want this item?";
+				next;
+			}
+			.@j = select("Bravery Badge", "Valor Badge", "Cancel");
+			mes "[Erundek]";
+			if (.@j == 3) {
+				mes "You cancelled the exchange.";
+				break;
+			}
+			.@cost = ((.@j==1)?7828:7829);
+			if (countitem(.@cost) >= .@items[.@i+1]) {
+				mes "Thank you for exchanging.";
+				delitem .@cost, .@items[.@i+1];
+				getitem .@items[.@i],1;
+			}
+			else mes "You do not have enough "+getitemname(.@cost)+"s.";
 			break;
-		}
-		set .@cost, ((.@j==1)?7828:7829);
-		if (countitem(.@cost) >= .@Items[.@i+1]) {
-			mes "Thank you for exchanging.";
-			delitem .@cost, .@Items[.@i+1];
-			getitem .@Items[.@i],1;
-		}
-		else mes "You do not have enough "+getitemname(.@cost)+"s.";
-		break;
 	}
 	close;
 }
 
-// Badge Reward Function
-//============================================================
-function	script	F_BG_Badge	{
-	.@team$ = getarg(1);
-	.@bg_type$ = getarg(2);
-
-	if (.@bg_type$ == "Tierra") {
-		set .@badge,7828; //BF_Badge1
-		set .@amount_win,3;
-		set .@amount_lose,1;
-	} else if (.@bg_type$ == "Flavius") {
-		set .@badge,7829; //BF_Badge2
-		set .@amount_win,9;
-		set .@amount_lose,3;
-	} else
-		return;
+bat_room,160,148,3	script	Telma	701,{
+	mes "[Telma]";
+	mes "Welcome, mighty warrior.";
+	mes "Do you need supplies for your battles?";
+	mes "I can exchange supplies for your badges...";
+	next;
+
+	switch(select("35 Condensed White Potion:20 Condensed Blue Potion:1 Poison Bottle:10 Fire Bottle:10 Acid Bottle:10 Plant Bottle:20 Marine Sphere Bottle:5 Glistening Coat:15 Yellow Gemstone:15 Red Gemstone:15 Blue Gemstone:5 Speed Potion:10 Cobweb")) {
+		case 1:		callsub S_BuyConsumableBG,547,35;	// Condensed White Potion
+		case 2:		callsub S_BuyConsumableBG,11572,20;	// Blue Potion
+		case 3:		callsub S_BuyConsumableBG,678,1;	// Poison Bottle
+		case 4:		callsub S_BuyConsumableBG,7135,10;	// Fire Bottle
+		case 5:		callsub S_BuyConsumableBG,7136,10;	// Acid Bottle
+		case 6:		callsub S_BuyConsumableBG,7137,10;	// Plant Bottle
+		case 7:		callsub S_BuyConsumableBG,7138,20;	// Marine Sphere Bottle
+		case 8:		callsub S_BuyConsumableBG,7139,5;	// Glistening Coat
+		case 9:		callsub S_BuyConsumableBG,715,15;	// Yellow Gemstone
+		case 10:	callsub S_BuyConsumableBG,716,15;	// Red Gemstone
+		case 11:	callsub S_BuyConsumableBG,717,30;	// Blue Gemstone
+		case 12:	callsub S_BuyConsumableBG,12016,5;	// Speed Potion
+		case 13:	callsub S_BuyConsumableBG,1025,10;	// Cobweb
+	}
+	end;
 
-	if (getarg(0) == 1) {
-		set .@amount, .@amount_win;
-		if (.@team$ == "Guillaume") {
-			mes "[Axl Rose]";
-			mes "Blessed Guillaume!";
-		} else if (.@team$ == "Croix") {
-			mes "[Swandery]";
-			mes "Blessed Croix!";
-		}
-		mes "Let's enjoy our glorious victory!";
-		mes strcharinfo(0)+", it's a sign reflecting victory.";
+S_BuyConsumableBG:
+	set .@item_id, getarg(0);
+	set .@amt, getarg(1);
+
+	mes "[Telma]";
+	mes "How many sets of ^0000FF"+ .@amt +" "+ getitemname(.@item_id) +"s^000000 do you want?";
+	mes "1 = "+ .@amt   +" supplies = 1 badge";
+	mes "2 = "+ .@amt*2 +" supplies = 2 badges";
+	mes "3 = "+ .@amt*3 +" supplies = 3 badges";
+	mes "4 = "+ .@amt*4 +" supplies = 4 badges";
+	mes "5 = "+ .@amt*5 +" supplies = 5 badges";
+	mes "etc..";
+	next;
+	input .@sets;
+	mes "[Telma]";
+	if (.@sets < 1) {
+		mes "Enter a positive amount, greater than zero.";
+		close;
+	}
+	mes "So you want ^0000FF"+ (.@amt*.@sets) +" "+ getitemname(.@item_id) +"s^000000...";
+	mes "It will cost you "+ .@sets +" badge(s)...";
+	next;
+	switch(select("Give her "+ .@sets +" Valor Badge(s)")) {
+		case 1: set .@badge,7829; set .@cost,1; break;
+	}
+	mes "[Telma]";
+	if (countitem(.@badge) < (.@cost*.@sets)) {
+		mes "You do not have enough ^FF0000"+getitemname(.@badge)+"s^000000 to buy "+(.@amt*.@sets)+" "+getitemname(.@item_id)+"s.";
+	} else if (!checkweight(.@item_id, .@amt*.@sets)) {
+		mes "You are overweight or have too many items in your inventory.";
 	} else {
-		set .@amount, .@amount_lose;
-		if (.@team$ == "Guillaume") {
-			mes "[Axl Rose]";
-			mes "You lost, but you're dedicated to this battle.";
-			mes "This is a reward for your great dedication by Guillaume Marollo!";
-			mes "Just take this defeat as a lesson, and next time you will definitely win.";
-		} else if (.@team$ == "Croix") {
-			mes "[Swandery]";
-			mes "Oh, "+strcharinfo(0)+" Don't be sad.";
-			mes "Even though we didn't win, we did our best.";
-			mes "This is a Royal gift from Croix, and please don't forget this battle. We will win the next one.";
-		}
+		delitem .@badge, .@cost*.@sets;
+		getitem .@item_id,(.@amt*.@sets);
+		mes "Here are your: ^0000FF"+(.@amt*.@sets)+" "+getitemname(.@item_id)+"s^000000!";
 	}
-	close2;
-
-	// If the VIP system is enabled, VIP players receive an extra 2 badges.
-	if (VIP_SCRIPT && vip_status(VIP_STATUS_ACTIVE))
-		set .@amount, .@amount+2;
-
-	set .@medal_gap, 500 - countitem(.@badge);
-	if (.@medal_gap >= .@amount)
-		getitem .@badge,.@amount;
-	else
-		getitem .@badge,.@medal_gap;
-	return;
+	close;
 }
+
+//============================================================
+// = Rewards Shops
+// = Create your own shop !
+// = ID , Value
+// = Example : 6376,512:10,513:10;
+// = 6376 = KVM Badge required, 512 = Apple, 10 = Badge Quantity required
+//============================================================
+//bat_room,162,155,2	script	Malebolgia#1 	115,{ callshop "BF_Badge1",1; end; OnInit: waitingroom "BG Exchange Shop",0,"",1; end; }
+//bat_room,160,152,2	script	Hishigi 	116,{ callshop "BGBadge",1; end; OnInit: waitingroom "KVM Exchange Shop",0,"",1; end; }
+//bat_room,162,146,2	script	Yang Xia#1 	117,{ callshop "BF_Badge2",1; end; OnInit: waitingroom "Valor Exchange Shop",0,"",1; end; }
+//-	itemshop	BGBadge	-1,6376,512:10,513:10;			// KVM Badge
+//-	itemshop	BF_Badge1	-1,7828,512:10,513:10;		// Bravery Badge
+//-	itemshop	BF_Badge2	-1,7829,512:10,513:10;		// Valor Badge
\ No newline at end of file
diff --git a/npc/battleground/bg_conquest.txt b/npc/battleground/bg_conquest.txt
new file mode 100644
index 000000000..a26dce437
--- /dev/null
+++ b/npc/battleground/bg_conquest.txt
@@ -0,0 +1,2848 @@
+//===== rAthena Script =======================================
+//= Battleground Extended + : Conquest
+//===== By: ==================================================
+//= eAmod / Grenat
+//===== Description: =========================================
+//= Battleground Extended + scripts.
+//===== Additional Comments: =================================
+//= Adaptation for rAthena 2020.
+//= This is a free release.
+//= Please do NOT take ownership.
+//= The original author will always stay eAmod,
+//= It would be a disgrace claiming it's yours and making
+//= money out of it. [Grenat]
+//============================================================
+
+// ===========================================================
+// Configuration Conquest 1
+// ===========================================================
+-	script	Conquest	FAKE_NPC,{
+	end;
+
+OnInit:
+	// Cementery Walls
+	setwall "schg_cas06",291,376,8,0,0,"conquest_wall_a";
+	setwall "schg_cas06",268,376,8,0,0,"conquest_wall_b";
+	setwall "schg_cas07",93,301,21,0,0,"conquest_wall_c";
+	setwall "schg_cas07",110,301,21,0,0,"conquest_wall_d";
+	setwall "schg_cas08",84,43,6,6,0,"conquest_wall_e";
+	setwall "schg_cas08",26,43,6,6,0,"conquest_wall_f";
+	setwall "arug_cas06",121,353,10,0,0,"conquest_wall_g";
+	setwall "arug_cas06",25,377,10,6,0,"conquest_wall_h";
+	setwall "arug_cas07",291,335,7,6,0,"conquest_wall_i1";
+	setwall "arug_cas07",300,335,6,6,0,"conquest_wall_j1";
+	setwall "arug_cas07",291,312,7,6,0,"conquest_wall_i2";
+	setwall "arug_cas07",300,312,4,6,0,"conquest_wall_j2";
+	setwall "arug_cas08",317,150,8,0,0,"conquest_wall_k";
+	setwall "arug_cas08",326,150,8,0,0,"conquest_wall_l";
+	set .Index,-1;
+	end;
+
+OnTeam1Quit:
+OnTeam2Quit:
+	bg_desert;
+	end;
+OnTeam1Active:
+	warp .Castle$,.DX,.DY; // Flag Respawn - Emperium
+	end;
+OnTeam2Active:
+	warp .Castle$,.AX,.AY; // Castle Entrance
+	end;
+
+OnReady:
+	set .Castle$,"schg_cas06";
+	set .DX,120; set .DY,290; set .AX,119; set .AY,  8;
+	bg_reserve .Castle$;
+	set $@BG11,1;
+	initnpctimer;
+	initnpctimer "Conquest_Respawn";
+	set .Score, 0;
+	announce "[Battleground]: Conquest has just began !",bc_all,0xccff00;
+
+	switch(rand(2)) {
+		case 1:
+			set .Defender, $@BG11_Team1;
+			set .Atacker, $@BG11_Team2;
+			break;
+		case 0:
+			set .Defender, $@BG11_Team2;
+			set .Atacker, $@BG11_Team1;
+			break;
+	}
+	// =========================================================================
+	// Build Structures
+	// =========================================================================
+			setwall .Castle$,114,48,13,6,0,"conq_RL00";
+			setwall .Castle$,114,51,13,6,1,"conq_RL01";
+			setwall .Castle$,114,154,13,6,1,"conq_RL02";
+			setwall .Castle$,116,241,11,6,1,"conq_RL03";
+
+			bg_monster .Defender,.Castle$,115,49," ",1906,"Conquest::OnBarricade0";
+			bg_monster .Defender,.Castle$,117,49," ",1906,"Conquest::OnBarricade0";
+			bg_monster .Defender,.Castle$,119,49," ",1906,"Conquest::OnBarricade0";
+			bg_monster .Defender,.Castle$,121,49," ",1906,"Conquest::OnBarricade0";
+			bg_monster .Defender,.Castle$,123,49," ",1906,"Conquest::OnBarricade0";
+			bg_monster .Defender,.Castle$,125,49," ",1906,"Conquest::OnBarricade0";
+
+			bg_monster .Defender,.Castle$,115,50," ",1906,"Conquest::OnBarricade1";
+			bg_monster .Defender,.Castle$,117,50," ",1906,"Conquest::OnBarricade1";
+			bg_monster .Defender,.Castle$,119,50," ",1906,"Conquest::OnBarricade1";
+			bg_monster .Defender,.Castle$,121,50," ",1906,"Conquest::OnBarricade1";
+			bg_monster .Defender,.Castle$,123,50," ",1906,"Conquest::OnBarricade1";
+			bg_monster .Defender,.Castle$,125,50," ",1906,"Conquest::OnBarricade1";
+
+			bg_monster .Defender,.Castle$,115,153," ",1906,"Conquest::OnBarricade2";
+			bg_monster .Defender,.Castle$,117,153," ",1906,"Conquest::OnBarricade2";
+			bg_monster .Defender,.Castle$,119,153," ",1906,"Conquest::OnBarricade2";
+			bg_monster .Defender,.Castle$,121,153," ",1906,"Conquest::OnBarricade2";
+			bg_monster .Defender,.Castle$,123,153," ",1906,"Conquest::OnBarricade2";
+			bg_monster .Defender,.Castle$,125,153," ",1906,"Conquest::OnBarricade2";
+
+			bg_monster .Defender,.Castle$,116,240," ",1906,"Conquest::OnBarricade3";
+			bg_monster .Defender,.Castle$,118,240," ",1906,"Conquest::OnBarricade3";
+			bg_monster .Defender,.Castle$,120,240," ",1906,"Conquest::OnBarricade3";
+			bg_monster .Defender,.Castle$,122,240," ",1906,"Conquest::OnBarricade3";
+
+			bg_monster .Defender,.Castle$,27,35,"1st Guardian Stone",20400,"Conquest::OnGuardianStone1";
+			bg_monster .Defender,.Castle$,207,75,"2st Guardian Stone",20401,"Conquest::OnGuardianStone2";
+
+			bg_monster .Defender,.Castle$,120,272,"Emperium",20402,"Conquest::OnEmperium";
+	set .Stone, 2;
+	set .Wall1, 6;
+	set .Wall2, 6;
+	set .Wall3, 4;
+	// ======================================
+	donpceventall("OnEmblemConquest");
+	sleep 2100;
+	bg_warp .Defender,.Castle$,.DX,.DY; // Flag Respawn - Emperium
+	bg_warp .Atacker,.Castle$,.AX,.AY; // Castle Entrance
+	sleep 4000;
+	mapannounce .Castle$,bg_get_data(.Atacker,3) + " : Move on warriors!! Let's capture this Castle!!",1,bg_get_data(.Atacker,4);
+	sleep 4000;
+	mapannounce .Castle$,bg_get_data(.Defender,3) + " : Protect the Castle and it's defenses to all cost!!",1,bg_get_data(.Defender,4);
+	end;
+
+OnGuardianStone1:
+	set .Stone, .Stone - 1;
+	set .Score, .Score + 1;
+	if (.Stone > 0) mapannounce .Castle$,"1st Guardian Stone has fallen - 6 minutes to destroy the 2nd",1,0xFFA500;
+	donpcevent "Conquest::OnCheckGStone";
+	end;
+
+OnGuardianStone2:
+	set .Stone, .Stone - 1;
+	set .Score, .Score + 1;
+	if (.Stone > 0) mapannounce .Castle$,"2nd Guardian Stone has fallen - 6 minutes to destroy the 1st",1,0xFFA500;
+	donpcevent "Conquest::OnCheckGStone";
+	end;
+
+OnCheckGStone:
+	initnpctimer;
+	if (.Stone < 1) {
+		mapannounce .Castle$,"Both Guardian Stones has fallen - 6 minutes to destroy the 1st Fortress Gate",1,0xFFA500;
+		killmonster .Castle$,"Conquest::OnBarricade0";
+		delwall "conq_RL00";
+	}
+	end;
+
+OnBarricade0:
+	end;
+
+OnBarricade1:
+	if(set(.Wall1,.Wall1 - 1) < 1) {
+		initnpctimer; // Restart Timer
+		mapannounce .Castle$,"1st Fortress Gate has fallen - 6 minutes to destroy the 2nd",1,0xFFA500;
+		set .Score, .Score + 1;
+		delwall "conq_RL01";
+	}
+	end;
+OnBarricade2:
+	if (set(.Wall2,.Wall2 - 1) < 1) {
+		initnpctimer; // Restart Timer
+		mapannounce .Castle$,"2nd Fortress Gate has fallen - 6 minutes to destroy the 3rd",1,0xFFA500;
+		set .Score, .Score + 1;
+		delwall "conq_RL02";
+	}
+	end;
+OnBarricade3:
+	if(set(.Wall3,.Wall3 - 1) < 1) {
+		initnpctimer; // Restart Timer
+		mapannounce .Castle$,"3rd Fortress Gate has fallen - 6 minutes to destroy the Emperium",1,0xFFA500;
+		set .Score, .Score + 1;
+		delwall "conq_RL03";
+	}
+	end;
+
+OnTimer60000:
+	mapannounce .Castle$,"Battle of Conquest will ends in 5 minutes",1,0xFFA500;
+	end;
+
+OnTimer300000:
+	mapannounce .Castle$,"Battle of Conquest will ends in 1 minute",1,0xFFA500;
+	end;
+
+OnEmperium:
+	set .Score, .Score + 1;
+	mapannounce .Castle$,"The " + bg_get_data(.Atacker,2) + " army has won the Battle and captured the Castle!!",1,bg_get_data(.Atacker,4);
+	donpcevent "Conquest::OnMatchEnd";
+	end;
+
+OnTimer360000:
+	mapannounce .Castle$,"The " + bg_get_data(.Defender,2) + " army has won the Battle and protected the Castle!!",1,bg_get_data(.Defender,4);
+	donpcevent "Conquest::OnMatchEnd";
+	end;
+
+OnMatchEnd:
+	stopnpctimer;
+	stopnpctimer "Conquest_Respawn";
+	killmonster .Castle$,"Conquest::OnBarricade0";
+	killmonster .Castle$,"Conquest::OnBarricade1";
+	killmonster .Castle$,"Conquest::OnBarricade2";
+	killmonster .Castle$,"Conquest::OnBarricade3";
+	killmonster .Castle$,"Conquest::OnGuardianStone1";
+	killmonster .Castle$,"Conquest::OnGuardianStone2";
+	killmonster .Castle$,"Conquest::OnEmperium";
+	set $@BG11, 2;
+
+	// =======================================================
+	// Team Rewards
+	// =======================================================
+	if (.Score >= 6 ) { // Emperium Taken
+		callfunc "BG_get_Rewards",.Atacker,7828,20;
+		callfunc "BG_get_Rewards",.Defender,7828,5;
+		callfunc "BG_ranking",.Atacker,BG_CONQUEST,1;
+		callfunc "BG_ranking",.Defender,BG_CONQUEST,0;
+	} else {
+		callfunc "BG_get_Rewards",.Atacker,7828,1;
+		callfunc "BG_get_Rewards",.Defender,7828,5;
+		callfunc "BG_ranking",.Atacker,BG_CONQUEST,0;
+		callfunc "BG_ranking",.Defender,BG_CONQUEST,1;
+	}
+	// =======================================================
+	set .Score, 0;
+	sleep 5000;
+	$@BG11 = 0;
+	mapwarp .Castle$,"bat_room",154,150;
+	if($@BG11_Team1) { bg_destroy $@BG11_Team1; $@BG11_Team1 = 0; }
+	if($@BG11_Team2) { bg_destroy $@BG11_Team2; $@BG11_Team2 = 0; }
+	bg_unbook .Castle$;
+	if(checkwall("conq_RL00")) delwall "conq_RL00";
+	if(checkwall("conq_RL01")) delwall "conq_RL01";
+	if(checkwall("conq_RL02")) delwall "conq_RL02";
+	if(checkwall("conq_RL03")) delwall "conq_RL03";
+	end;
+}
+-	script	Conquest1	FAKE_NPC,{
+	end;
+
+OnTeam1Quit:
+OnTeam2Quit:
+	bg_desert;
+	end;
+OnTeam1Active:
+	warp .Castle$,.DX,.DY; // Flag Respawn - Emperium
+	end;
+OnTeam2Active:
+	warp .Castle$,.AX,.AY; // Castle Entrance
+	end;
+
+OnReady:
+	//if( $@BG11b )
+	//	end;
+
+	set .Castle$,"schg_cas07";
+	set .DX,136; set .DY,188; set .AX,339; set .AY, 78;
+	bg_reserve .Castle$;
+	set $@BG11b,1;
+	initnpctimer;
+	initnpctimer "Conquest_Respawn1";
+	set .Score, 0;
+	announce "[Battleground]: Conquest has just began !",0;
+
+	switch(rand(2)) {
+		case 1:
+			set .Defender, $@BG11b_Team1;
+			set .Atacker, $@BG11b_Team2;
+			break;
+		case 0:
+			set .Defender, $@BG11b_Team2;
+			set .Atacker, $@BG11b_Team1;
+			break;
+	}
+	// =========================================================================
+	// Build Structures
+	// =========================================================================
+			setwall .Castle$,290,98,8,0,0,"conq_RL00";
+			setwall .Castle$,279,98,8,0,1,"conq_RL01";
+			setwall .Castle$,230,213,6,0,1,"conq_RL02";
+			setwall .Castle$,160,141,6,6,1,"conq_RL03";
+
+			bg_monster .Defender,.Castle$,289,98," ",1906,"Conquest1::OnBarricade0";
+			bg_monster .Defender,.Castle$,289,100," ",1906,"Conquest1::OnBarricade0";
+			bg_monster .Defender,.Castle$,289,102," ",1906,"Conquest1::OnBarricade0";
+			bg_monster .Defender,.Castle$,289,104," ",1906,"Conquest1::OnBarricade0";
+
+			bg_monster .Defender,.Castle$,280,98," ",1906,"Conquest1::OnBarricade1";
+			bg_monster .Defender,.Castle$,280,100," ",1906,"Conquest1::OnBarricade1";
+			bg_monster .Defender,.Castle$,280,102," ",1906,"Conquest1::OnBarricade1";
+			bg_monster .Defender,.Castle$,281,99," ",1906,"Conquest1::OnBarricade1";
+			bg_monster .Defender,.Castle$,281,101," ",1906,"Conquest1::OnBarricade1";
+			bg_monster .Defender,.Castle$,281,103," ",1906,"Conquest1::OnBarricade1";
+
+			bg_monster .Defender,.Castle$,231,214," ",1906,"Conquest1::OnBarricade2";
+			bg_monster .Defender,.Castle$,231,216," ",1906,"Conquest1::OnBarricade2";
+			bg_monster .Defender,.Castle$,231,218," ",1906,"Conquest1::OnBarricade2";
+			bg_monster .Defender,.Castle$,232,213," ",1906,"Conquest1::OnBarricade2";
+			bg_monster .Defender,.Castle$,232,215," ",1906,"Conquest1::OnBarricade2";
+			bg_monster .Defender,.Castle$,232,217," ",1906,"Conquest1::OnBarricade2";
+
+			bg_monster .Defender,.Castle$,160,140," ",1906,"Conquest1::OnBarricade3";
+			bg_monster .Defender,.Castle$,162,140," ",1906,"Conquest1::OnBarricade3";
+			bg_monster .Defender,.Castle$,164,140," ",1906,"Conquest1::OnBarricade3";
+			bg_monster .Defender,.Castle$,166,140," ",1906,"Conquest1::OnBarricade3";
+
+			bg_monster .Defender,.Castle$,231,58,"1st Guardian Stone",20400,"Conquest1::OnGuardianStone1";
+			bg_monster .Defender,.Castle$,335,230,"2nd Guardian Stone",20401,"Conquest1::OnGuardianStone2";
+
+			bg_monster .Defender,.Castle$,162,193,"Emperium",20402,"Conquest1::OnEmperium";
+	set .Stone, 2;
+	set .Wall1, 6;
+	set .Wall2, 6;
+	set .Wall3, 4;
+	// ======================================
+	donpceventall("OnEmblemConquest");
+	sleep 2100;
+	bg_warp .Defender,.Castle$,.DX,.DY; // Flag Respawn - Emperium
+	bg_warp .Atacker,.Castle$,.AX,.AY; // Castle Entrance
+	sleep 4000;
+	mapannounce .Castle$,bg_get_data(.Atacker,3) + " : Move on warriors!! Let's capture this Castle!!",1,bg_get_data(.Atacker,4);
+	sleep 4000;
+	mapannounce .Castle$,bg_get_data(.Defender,3) + " : Protect the Castle and it's defenses to all cost!!",1,bg_get_data(.Defender,4);
+	end;
+
+OnGuardianStone1:
+	set .Stone, .Stone - 1;
+	set .Score, .Score + 1;
+	if (.Stone > 0) mapannounce .Castle$,"1st Guardian Stone has fallen - 6 minutes to destroy the 2nd",1,0xFFA500;
+	donpcevent "Conquest1::OnCheckGStone";
+	end;
+
+OnGuardianStone2:
+	set .Stone, .Stone - 1;
+	set .Score, .Score + 1;
+	if (.Stone > 0) mapannounce .Castle$,"2nd Guardian Stone has fallen - 6 minutes to destroy the 1st",1,0xFFA500;
+	donpcevent "Conquest1::OnCheckGStone";
+	end;
+
+OnCheckGStone:
+	initnpctimer;
+	if (.Stone < 1) {
+		mapannounce .Castle$,"Both Guardian Stones has fallen - 6 minutes to destroy the 1st Fortress Gate",1,0xFFA500;
+		killmonster .Castle$,"Conquest1::OnBarricade0";
+		delwall "conq_RL00";
+	}
+	end;
+
+OnBarricade0:
+	end;
+
+OnBarricade1:
+	if(set(.Wall1,.Wall1 - 1) < 1) {
+		initnpctimer; // Restart Timer
+		mapannounce .Castle$,"1st Fortress Gate has fallen - 6 minutes to destroy the 2nd",1,0xFFA500;
+		set .Score, .Score + 1;
+		delwall "conq_RL01";
+	}
+	end;
+OnBarricade2:
+	if (set(.Wall2,.Wall2 - 1) < 1) {
+		initnpctimer; // Restart Timer
+		mapannounce .Castle$,"2nd Fortress Gate has fallen - 6 minutes to destroy the 3rd",1,0xFFA500;
+		set .Score, .Score + 1;
+		delwall "conq_RL02";
+	}
+	end;
+OnBarricade3:
+	if(set(.Wall3,.Wall3 - 1) < 1) {
+		initnpctimer; // Restart Timer
+		mapannounce .Castle$,"3rd Fortress Gate has fallen - 6 minutes to destroy the Emperium",1,0xFFA500;
+		set .Score, .Score + 1;
+		delwall "conq_RL03";
+	}
+	end;
+
+OnTimer60000:
+	mapannounce .Castle$,"Battle of Conquest will ends in 5 minutes",1,0xFFA500;
+	end;
+
+OnTimer300000:
+	mapannounce .Castle$,"Battle of Conquest will ends in 1 minute",1,0xFFA500;
+	end;
+
+OnEmperium:
+	set .Score, .Score + 1;
+	mapannounce .Castle$,"The " + bg_get_data(.Atacker,2) + " army has won the Battle and captured the Castle!!",1,bg_get_data(.Atacker,4);
+	donpcevent "Conquest1::OnMatchEnd";
+	end;
+
+OnTimer360000:
+	mapannounce .Castle$,"The " + bg_get_data(.Defender,2) + " army has won the Battle and protected the Castle!!",1,bg_get_data(.Defender,4);
+	donpcevent "Conquest1::OnMatchEnd";
+	end;
+
+OnMatchEnd:
+	stopnpctimer;
+	stopnpctimer "Conquest_Respawn1";
+	killmonster .Castle$,"Conquest1::OnBarricade0";
+	killmonster .Castle$,"Conquest1::OnBarricade1";
+	killmonster .Castle$,"Conquest1::OnBarricade2";
+	killmonster .Castle$,"Conquest1::OnBarricade3";
+	killmonster .Castle$,"Conquest1::OnGuardianStone1";
+	killmonster .Castle$,"Conquest1::OnGuardianStone2";
+	killmonster .Castle$,"Conquest1::OnEmperium";
+	set $@BG11, 2;
+
+	// =======================================================
+	// Team Rewards
+	// =======================================================
+	if (.Score >= 6 ) { // Emperium Taken
+		callfunc "BG_get_Rewards",.Atacker,7828,20;
+		callfunc "BG_get_Rewards",.Defender,7828,5;
+		callfunc "BG_ranking",.Atacker,BG_CONQUEST,1;
+		callfunc "BG_ranking",.Defender,BG_CONQUEST,0;
+	} else {
+		callfunc "BG_get_Rewards",.Atacker,7828,5;
+		callfunc "BG_get_Rewards",.Defender,7828,20;
+		callfunc "BG_ranking",.Atacker,BG_CONQUEST,0;
+		callfunc "BG_ranking",.Defender,BG_CONQUEST,1;
+	}
+
+	// =======================================================
+	set .Score, 0;
+	sleep 5000;
+	$@BG11 = 0;
+	mapwarp .Castle$,"bat_room",154,150;
+	if(.Atacker) { bg_destroy .Atacker; $@BG11_Team1 = 0; }
+	if(.Defender) { bg_destroy .Defender; $@BG11_Team2 = 0; }
+	bg_unbook .Castle$;
+	if(checkwall("conq_RL00")) delwall "conq_RL00";
+	if(checkwall("conq_RL01")) delwall "conq_RL01";
+	if(checkwall("conq_RL02")) delwall "conq_RL02";
+	if(checkwall("conq_RL03")) delwall "conq_RL03";
+	end;
+}
+
+-	script	Conquest2	FAKE_NPC,{
+	end;
+
+OnTeam1Quit:
+OnTeam2Quit:
+	bg_desert;
+	end;
+OnTeam1Active:
+	warp .Castle$,.DX,.DY; // Flag Respawn - Emperium
+	end;
+OnTeam2Active:
+	warp .Castle$,.AX,.AY; // Castle Entrance
+	end;
+
+OnReady:
+	//if( $@BG11c )
+	//	end;
+
+	set .Castle$,"schg_cas08";
+	set .DX,308; set .DY,208; set .AX,337; set .AY,330;
+	bg_reserve .Castle$;
+	set $@BG11c,1;
+	initnpctimer;
+	initnpctimer "Conquest_Respawn2";
+	set .Score, 0;
+	announce "[Battleground]: Conquest has just began !",0;
+
+	switch(rand(2)) {
+		case 1:
+			set .Defender, $@BG11c_Team1;
+			set .Atacker, $@BG11c_Team2;
+			break;
+		case 0:
+			set .Defender, $@BG11c_Team2;
+			set .Atacker, $@BG11c_Team1;
+			break;
+	}
+	// =========================================================================
+	// Build Structures
+	// =========================================================================
+			setwall .Castle$,326,301,6,6,0,"conq_RL00";
+			setwall .Castle$,325,277,8,6,1,"conq_RL01";
+			setwall .Castle$,200,230,8,0,1,"conq_RL02";
+			setwall .Castle$,285,198,8,0,1,"conq_RL03";
+
+			bg_monster .Defender,.Castle$,326,300," ",1906,"Conquest2::OnBarricade0";
+			bg_monster .Defender,.Castle$,328,300," ",1906,"Conquest2::OnBarricade0";
+			bg_monster .Defender,.Castle$,330,300," ",1906,"Conquest2::OnBarricade0";
+
+			bg_monster .Defender,.Castle$,326,278," ",1906,"Conquest2::OnBarricade1";
+			bg_monster .Defender,.Castle$,328,278," ",1906,"Conquest2::OnBarricade1";
+			bg_monster .Defender,.Castle$,330,278," ",1906,"Conquest2::OnBarricade1";
+			bg_monster .Defender,.Castle$,327,279," ",1906,"Conquest2::OnBarricade1";
+			bg_monster .Defender,.Castle$,329,279," ",1906,"Conquest2::OnBarricade1";
+			bg_monster .Defender,.Castle$,331,279," ",1906,"Conquest2::OnBarricade1";
+
+			bg_monster .Defender,.Castle$,201,231," ",1906,"Conquest2::OnBarricade2";
+			bg_monster .Defender,.Castle$,201,233," ",1906,"Conquest2::OnBarricade2";
+			bg_monster .Defender,.Castle$,201,235," ",1906,"Conquest2::OnBarricade2";
+			bg_monster .Defender,.Castle$,202,232," ",1906,"Conquest2::OnBarricade2";
+			bg_monster .Defender,.Castle$,202,234," ",1906,"Conquest2::OnBarricade2";
+			bg_monster .Defender,.Castle$,202,236," ",1906,"Conquest2::OnBarricade2";
+
+			bg_monster .Defender,.Castle$,284,199," ",1906,"Conquest2::OnBarricade3";
+			bg_monster .Defender,.Castle$,284,201," ",1906,"Conquest2::OnBarricade3";
+			bg_monster .Defender,.Castle$,284,203," ",1906,"Conquest2::OnBarricade3";
+			bg_monster .Defender,.Castle$,284,205," ",1906,"Conquest2::OnBarricade3";
+
+			bg_monster .Defender,.Castle$,242,309,"1st Guardian Stone",20400,"Conquest2::OnGuardianStone1";
+			bg_monster .Defender,.Castle$,376,251,"2nd Guardian Stone",20401,"Conquest2::OnGuardianStone2";
+
+			bg_monster .Defender,.Castle$,338,202,"Emperium",20402,"Conquest2::OnEmperium";
+	set .Stone, 2;
+	set .Wall1, 6;
+	set .Wall2, 6;
+	set .Wall3, 4;
+	// ======================================
+	donpceventall("OnEmblemConquest");
+	sleep 2100;
+	bg_warp .Defender,.Castle$,.DX,.DY; // Flag Respawn - Emperium
+	bg_warp .Atacker,.Castle$,.AX,.AY; // Castle Entrance
+	sleep 4000;
+	mapannounce .Castle$,bg_get_data(.Atacker,3) + " : Move on warriors!! Let's capture this Castle!!",1,bg_get_data(.Atacker,4);
+	sleep 4000;
+	mapannounce .Castle$,bg_get_data(.Defender,3) + " : Protect the Castle and it's defenses to all cost!!",1,bg_get_data(.Defender,4);
+	end;
+
+OnGuardianStone1:
+	set .Stone, .Stone - 1;
+	set .Score, .Score + 1;
+	if (.Stone > 0) mapannounce .Castle$,"1st Guardian Stone has fallen - 6 minutes to destroy the 2nd",1,0xFFA500;
+	donpcevent "Conquest2::OnCheckGStone";
+	end;
+
+OnGuardianStone2:
+	set .Stone, .Stone - 1;
+	set .Score, .Score + 1;
+	if (.Stone > 0) mapannounce .Castle$,"2nd Guardian Stone has fallen - 6 minutes to destroy the 1st",1,0xFFA500;
+	donpcevent "Conquest2::OnCheckGStone";
+	end;
+
+OnCheckGStone:
+	initnpctimer;
+	if (.Stone < 1) {
+		mapannounce .Castle$,"Both Guardian Stones has fallen - 6 minutes to destroy the 1st Fortress Gate",1,0xFFA500;
+		killmonster .Castle$,"Conquest2::OnBarricade0";
+		delwall "conq_RL00";
+	}
+	end;
+
+OnBarricade0:
+	end;
+
+OnBarricade1:
+	if(set(.Wall1,.Wall1 - 1) < 1) {
+		initnpctimer; // Restart Timer
+		mapannounce .Castle$,"1st Fortress Gate has fallen - 6 minutes to destroy the 2nd",1,0xFFA500;
+		set .Score, .Score + 1;
+		delwall "conq_RL01";
+	}
+	end;
+OnBarricade2:
+	if (set(.Wall2,.Wall2 - 1) < 1) {
+		initnpctimer; // Restart Timer
+		mapannounce .Castle$,"2nd Fortress Gate has fallen - 6 minutes to destroy the 3rd",1,0xFFA500;
+		set .Score, .Score + 1;
+		delwall "conq_RL02";
+	}
+	end;
+OnBarricade3:
+	if(set(.Wall3,.Wall3 - 1) < 1) {
+		initnpctimer; // Restart Timer
+		mapannounce .Castle$,"3rd Fortress Gate has fallen - 6 minutes to destroy the Emperium",1,0xFFA500;
+		set .Score, .Score + 1;
+		delwall "conq_RL03";
+	}
+	end;
+
+OnTimer60000:
+	mapannounce .Castle$,"Battle of Conquest will ends in 5 minutes",1,0xFFA500;
+	end;
+
+OnTimer300000:
+	mapannounce .Castle$,"Battle of Conquest will ends in 1 minute",1,0xFFA500;
+	end;
+
+OnEmperium:
+	set .Score, .Score + 1;
+	mapannounce .Castle$,"The " + bg_get_data(.Atacker,2) + " army has won the Battle and captured the Castle!!",1,bg_get_data(.Atacker,4);
+	donpcevent "Conquest2::OnMatchEnd";
+	end;
+
+OnTimer360000:
+	mapannounce .Castle$,"The " + bg_get_data(.Defender,2) + " army has won the Battle and protected the Castle!!",1,bg_get_data(.Defender,4);
+	donpcevent "Conquest2::OnMatchEnd";
+	end;
+
+OnMatchEnd:
+	stopnpctimer;
+	stopnpctimer "Conquest_Respawn2";
+	killmonster .Castle$,"Conquest2::OnBarricade0";
+	killmonster .Castle$,"Conquest2::OnBarricade1";
+	killmonster .Castle$,"Conquest2::OnBarricade2";
+	killmonster .Castle$,"Conquest2::OnBarricade3";
+	killmonster .Castle$,"Conquest2::OnGuardianStone1";
+	killmonster .Castle$,"Conquest2::OnGuardianStone2";
+	killmonster .Castle$,"Conquest2::OnEmperium";
+	set $@BG11, 2;
+
+	// =======================================================
+	// Team Rewards
+	// =======================================================
+	if (.Score >= 6 ) { // Emperium Taken
+		callfunc "BG_get_Rewards",.Atacker,7828,20;
+		callfunc "BG_get_Rewards",.Defender,7828,5;
+		callfunc "BG_ranking",.Atacker,BG_CONQUEST,1;
+		callfunc "BG_ranking",.Defender,BG_CONQUEST,0;
+	} else {
+		callfunc "BG_get_Rewards",.Atacker,7828,5;
+		callfunc "BG_get_Rewards",.Defender,7828,20;
+		callfunc "BG_ranking",.Atacker,BG_CONQUEST,0;
+		callfunc "BG_ranking",.Defender,BG_CONQUEST,1;
+	}
+
+	// =======================================================
+	set .Score, 0;
+	sleep 5000;
+	$@BG11 = 0;
+	mapwarp .Castle$,"bat_room",154,150;
+	if(.Atacker) { bg_destroy .Atacker; $@BG11_Team1 = 0; }
+	if(.Defender) { bg_destroy .Defender; $@BG11_Team2 = 0; }
+	bg_unbook .Castle$;
+	if(checkwall("conq_RL00")) delwall "conq_RL00";
+	if(checkwall("conq_RL01")) delwall "conq_RL01";
+	if(checkwall("conq_RL02")) delwall "conq_RL02";
+	if(checkwall("conq_RL03")) delwall "conq_RL03";
+	end;
+}
+
+
+-	script	Conquest3	FAKE_NPC,{
+	end;
+
+OnTeam1Quit:
+OnTeam2Quit:
+	bg_desert;
+	end;
+OnTeam1Active:
+	warp .Castle$,.DX,.DY; // Flag Respawn - Emperium
+	end;
+OnTeam2Active:
+	warp .Castle$,.AX,.AY; // Castle Entrance
+	end;
+
+OnReady:
+	//if( $@BG11d )
+	//	end;
+
+	set .Castle$,"arug_cas06";
+	set .DX, 67; set .DY,193; set .AX,275; set .AY, 93;
+	bg_reserve .Castle$;
+	set $@BG11d,1;
+	initnpctimer;
+	initnpctimer "Conquest_Respawn3";
+	set .Score, 0;
+	announce "[Battleground]: Conquest has just began !",0;
+
+	switch(rand(2)) {
+		case 1:
+			set .Defender, $@BG11d_Team1;
+			set .Atacker, $@BG11d_Team2;
+			break;
+		case 0:
+			set .Defender, $@BG11d_Team2;
+			set .Atacker, $@BG11d_Team1;
+			break;
+	}
+	// =========================================================================
+	// Build Structures
+	// =========================================================================
+			setwall .Castle$,238,74,8,6,0,"conq_RL00";
+			setwall .Castle$,239,53,8,6,1,"conq_RL01";
+			setwall .Castle$,107,124,6,6,1,"conq_RL02";
+			setwall .Castle$,84,171,8,6,1,"conq_RL03";
+
+			bg_monster .Defender,.Castle$,239,73," ",1906,"Conquest3::OnBarricade0";
+			bg_monster .Defender,.Castle$,241,73," ",1906,"Conquest3::OnBarricade0";
+			bg_monster .Defender,.Castle$,243,73," ",1906,"Conquest3::OnBarricade0";
+			bg_monster .Defender,.Castle$,245,73," ",1906,"Conquest3::OnBarricade0";
+
+			bg_monster .Defender,.Castle$,239,55," ",1906,"Conquest3::OnBarricade1";
+			bg_monster .Defender,.Castle$,241,55," ",1906,"Conquest3::OnBarricade1";
+			bg_monster .Defender,.Castle$,243,55," ",1906,"Conquest3::OnBarricade1";
+			bg_monster .Defender,.Castle$,240,54," ",1906,"Conquest3::OnBarricade1";
+			bg_monster .Defender,.Castle$,242,54," ",1906,"Conquest3::OnBarricade1";
+			bg_monster .Defender,.Castle$,244,54," ",1906,"Conquest3::OnBarricade1";
+
+			bg_monster .Defender,.Castle$,107,122," ",1906,"Conquest3::OnBarricade2";
+			bg_monster .Defender,.Castle$,109,122," ",1906,"Conquest3::OnBarricade2";
+			bg_monster .Defender,.Castle$,111,122," ",1906,"Conquest3::OnBarricade2";
+			bg_monster .Defender,.Castle$,108,123," ",1906,"Conquest3::OnBarricade2";
+			bg_monster .Defender,.Castle$,110,123," ",1906,"Conquest3::OnBarricade2";
+			bg_monster .Defender,.Castle$,112,123," ",1906,"Conquest3::OnBarricade2";
+
+			bg_monster .Defender,.Castle$,84,170," ",1906,"Conquest3::OnBarricade3";
+			bg_monster .Defender,.Castle$,86,170," ",1906,"Conquest3::OnBarricade3";
+			bg_monster .Defender,.Castle$,88,170," ",1906,"Conquest3::OnBarricade3";
+			bg_monster .Defender,.Castle$,90,170," ",1906,"Conquest3::OnBarricade3";
+
+			bg_monster .Defender,.Castle$,210,234,"1st Guardian Stone",20400,"Conquest3::OnGuardianStone1";
+			bg_monster .Defender,.Castle$,308,189,"2nd Guardian Stone",20401,"Conquest3::OnGuardianStone2";
+
+			bg_monster .Defender,.Castle$,87,219,"Emperium",20402,"Conquest3::OnEmperium";
+	set .Stone, 2;
+	set .Wall1, 6;
+	set .Wall2, 6;
+	set .Wall3, 4;
+	// ======================================
+	donpceventall("OnEmblemConquest");
+	sleep 2100;
+	bg_warp .Defender,.Castle$,.DX,.DY; // Flag Respawn - Emperium
+	bg_warp .Atacker,.Castle$,.AX,.AY; // Castle Entrance
+	sleep 4000;
+	mapannounce .Castle$,bg_get_data(.Atacker,3) + " : Move on warriors!! Let's capture this Castle!!",1,bg_get_data(.Atacker,4);
+	sleep 4000;
+	mapannounce .Castle$,bg_get_data(.Defender,3) + " : Protect the Castle and it's defenses to all cost!!",1,bg_get_data(.Defender,4);
+	end;
+
+OnGuardianStone1:
+	set .Stone, .Stone - 1;
+	set .Score, .Score + 1;
+	if (.Stone > 0) mapannounce .Castle$,"1st Guardian Stone has fallen - 6 minutes to destroy the 2nd",1,0xFFA500;
+	donpcevent "Conquest3::OnCheckGStone";
+	end;
+
+OnGuardianStone2:
+	set .Stone, .Stone - 1;
+	set .Score, .Score + 1;
+	if (.Stone > 0) mapannounce .Castle$,"2nd Guardian Stone has fallen - 6 minutes to destroy the 1st",1,0xFFA500;
+	donpcevent "Conquest3::OnCheckGStone";
+	end;
+
+OnCheckGStone:
+	initnpctimer;
+	if (.Stone < 1) {
+		mapannounce .Castle$,"Both Guardian Stones has fallen - 6 minutes to destroy the 1st Fortress Gate",1,0xFFA500;
+		killmonster .Castle$,"Conquest3::OnBarricade0";
+		delwall "conq_RL00";
+	}
+	end;
+
+OnBarricade0:
+	end;
+
+OnBarricade1:
+	if(set(.Wall1,.Wall1 - 1) < 1) {
+		initnpctimer; // Restart Timer
+		mapannounce .Castle$,"1st Fortress Gate has fallen - 6 minutes to destroy the 2nd",1,0xFFA500;
+		set .Score, .Score + 1;
+		delwall "conq_RL01";
+	}
+	end;
+OnBarricade2:
+	if (set(.Wall2,.Wall2 - 1) < 1) {
+		initnpctimer; // Restart Timer
+		mapannounce .Castle$,"2nd Fortress Gate has fallen - 6 minutes to destroy the 3rd",1,0xFFA500;
+		set .Score, .Score + 1;
+		delwall "conq_RL02";
+	}
+	end;
+OnBarricade3:
+	if(set(.Wall3,.Wall3 - 1) < 1) {
+		initnpctimer; // Restart Timer
+		mapannounce .Castle$,"3rd Fortress Gate has fallen - 6 minutes to destroy the Emperium",1,0xFFA500;
+		set .Score, .Score + 1;
+		delwall "conq_RL03";
+	}
+	end;
+
+OnTimer60000:
+	mapannounce .Castle$,"Battle of Conquest will ends in 5 minutes",1,0xFFA500;
+	end;
+
+OnTimer300000:
+	mapannounce .Castle$,"Battle of Conquest will ends in 1 minute",1,0xFFA500;
+	end;
+
+OnEmperium:
+	set .Score, .Score + 1;
+	mapannounce .Castle$,"The " + bg_get_data(.Atacker,2) + " army has won the Battle and captured the Castle!!",1,bg_get_data(.Atacker,4);
+	donpcevent "Conquest3::OnMatchEnd";
+	end;
+
+OnTimer360000:
+	mapannounce .Castle$,"The " + bg_get_data(.Defender,2) + " army has won the Battle and protected the Castle!!",1,bg_get_data(.Defender,4);
+	donpcevent "Conquest3::OnMatchEnd";
+	end;
+
+OnMatchEnd:
+	stopnpctimer;
+	stopnpctimer "Conquest_Respawn3";
+	killmonster .Castle$,"Conquest3::OnBarricade0";
+	killmonster .Castle$,"Conquest3::OnBarricade1";
+	killmonster .Castle$,"Conquest3::OnBarricade2";
+	killmonster .Castle$,"Conquest3::OnBarricade3";
+	killmonster .Castle$,"Conquest3::OnGuardianStone1";
+	killmonster .Castle$,"Conquest3::OnGuardianStone2";
+	killmonster .Castle$,"Conquest3::OnEmperium";
+	set $@BG11, 2;
+
+	// =======================================================
+	// Team Rewards
+	// =======================================================
+	if (.Score >= 6 ) { // Emperium Taken
+		callfunc "BG_get_Rewards",.Atacker,7828,20;
+		callfunc "BG_get_Rewards",.Defender,7828,5;
+		callfunc "BG_ranking",.Atacker,BG_CONQUEST,1;
+		callfunc "BG_ranking",.Defender,BG_CONQUEST,0;
+	} else {
+		callfunc "BG_get_Rewards",.Atacker,7828,5;
+		callfunc "BG_get_Rewards",.Defender,7828,20;
+		callfunc "BG_ranking",.Atacker,BG_CONQUEST,0;
+		callfunc "BG_ranking",.Defender,BG_CONQUEST,1;
+	}
+	// =======================================================
+	set .Score, 0;
+	sleep 5000;
+	$@BG11 = 0;
+	mapwarp .Castle$,"bat_room",154,150;
+	if(.Atacker) { bg_destroy .Atacker; $@BG11_Team1 = 0; }
+	if(.Defender) { bg_destroy .Defender; $@BG11_Team2 = 0; }
+	bg_unbook .Castle$;
+	if(checkwall("conq_RL00")) delwall "conq_RL00";
+	if(checkwall("conq_RL01")) delwall "conq_RL01";
+	if(checkwall("conq_RL02")) delwall "conq_RL02";
+	if(checkwall("conq_RL03")) delwall "conq_RL03";
+	end;
+}
+
+
+-	script	Conquest4	FAKE_NPC,{
+	end;
+
+OnTeam1Quit:
+OnTeam2Quit:
+	bg_desert;
+	end;
+OnTeam1Active:
+	warp .Castle$,.DX,.DY; // Flag Respawn - Emperium
+	end;
+OnTeam2Active:
+	warp .Castle$,.AX,.AY; // Castle Entrance
+	end;
+
+OnReady:
+	//if( $@BG11e )
+	//	end;
+
+	set .Castle$,"arug_cas07";
+	set .DX, 43; set .DY,256; set .AX,139; set .AY, 31;
+	bg_reserve .Castle$;
+	set $@BG11e,1;
+	initnpctimer;
+	initnpctimer "Conquest_Respawn4";
+	set .Score, 0;
+	announce "[Battleground]: Conquest has just began !",0;
+
+	switch(rand(2)) {
+		case 1:
+			set .Defender, $@BG11e_Team1;
+			set .Atacker, $@BG11e_Team2;
+			break;
+		case 0:
+			set .Defender, $@BG11e_Team2;
+			set .Atacker, $@BG11e_Team1;
+			break;
+	}
+	// =========================================================================
+	// Build Structures
+	// =========================================================================
+			setwall .Castle$,136,136,8,6,0,"conq_RL00";
+			setwall .Castle$,150,223,12,6,1,"conq_RL01";
+			setwall .Castle$,125,342,8,0,1,"conq_RL02";
+			setwall .Castle$,38,314,12,6,1,"conq_RL03";
+
+			bg_monster .Defender,.Castle$,137,137," ",1906,"Conquest4::OnBarricade0";
+			bg_monster .Defender,.Castle$,139,137," ",1906,"Conquest4::OnBarricade0";
+			bg_monster .Defender,.Castle$,141,137," ",1906,"Conquest4::OnBarricade0";
+			bg_monster .Defender,.Castle$,143,137," ",1906,"Conquest4::OnBarricade0";
+
+			bg_monster .Defender,.Castle$,151,222," ",1906,"Conquest4::OnBarricade1";
+			bg_monster .Defender,.Castle$,153,222," ",1906,"Conquest4::OnBarricade1";
+			bg_monster .Defender,.Castle$,155,222," ",1906,"Conquest4::OnBarricade1";
+			bg_monster .Defender,.Castle$,157,222," ",1906,"Conquest4::OnBarricade1";
+			bg_monster .Defender,.Castle$,159,222," ",1906,"Conquest4::OnBarricade1";
+			bg_monster .Defender,.Castle$,161,222," ",1906,"Conquest4::OnBarricade1";
+
+			bg_monster .Defender,.Castle$,126,343," ",1906,"Conquest4::OnBarricade2";
+			bg_monster .Defender,.Castle$,126,345," ",1906,"Conquest4::OnBarricade2";
+			bg_monster .Defender,.Castle$,126,347," ",1906,"Conquest4::OnBarricade2";
+			bg_monster .Defender,.Castle$,127,344," ",1906,"Conquest4::OnBarricade2";
+			bg_monster .Defender,.Castle$,127,346," ",1906,"Conquest4::OnBarricade2";
+			bg_monster .Defender,.Castle$,127,348," ",1906,"Conquest4::OnBarricade2";
+
+			bg_monster .Defender,.Castle$,40,315," ",1906,"Conquest4::OnBarricade3";
+			bg_monster .Defender,.Castle$,42,315," ",1906,"Conquest4::OnBarricade3";
+			bg_monster .Defender,.Castle$,44,315," ",1906,"Conquest4::OnBarricade3";
+			bg_monster .Defender,.Castle$,46,315," ",1906,"Conquest4::OnBarricade3";
+
+			bg_monster .Defender,.Castle$,33,168,"1st Guardian Stone",20400,"Conquest4::OnGuardianStone1";
+			bg_monster .Defender,.Castle$,245,168,"2nd Guardian Stone",20401,"Conquest4::OnGuardianStone2";
+
+			bg_monster .Defender,.Castle$,89,256,"Emperium",20402,"Conquest4::OnEmperium";
+	set .Stone, 2;
+	set .Wall1, 6;
+	set .Wall2, 6;
+	set .Wall3, 4;
+	// ======================================
+	donpceventall("OnEmblemConquest");
+	sleep 2100;
+	bg_warp .Defender,.Castle$,.DX,.DY; // Flag Respawn - Emperium
+	bg_warp .Atacker,.Castle$,.AX,.AY; // Castle Entrance
+	sleep 4000;
+	mapannounce .Castle$,bg_get_data(.Atacker,3) + " : Move on warriors!! Let's capture this Castle!!",1,bg_get_data(.Atacker,4);
+	sleep 4000;
+	mapannounce .Castle$,bg_get_data(.Defender,3) + " : Protect the Castle and it's defenses to all cost!!",1,bg_get_data(.Defender,4);
+	end;
+
+OnGuardianStone1:
+	set .Stone, .Stone - 1;
+	set .Score, .Score + 1;
+	if (.Stone > 0) mapannounce .Castle$,"1st Guardian Stone has fallen - 6 minutes to destroy the 2nd",1,0xFFA500;
+	donpcevent "Conquest4::OnCheckGStone";
+	end;
+
+OnGuardianStone2:
+	set .Stone, .Stone - 1;
+	set .Score, .Score + 1;
+	if (.Stone > 0) mapannounce .Castle$,"2nd Guardian Stone has fallen - 6 minutes to destroy the 1st",1,0xFFA500;
+	donpcevent "Conquest4::OnCheckGStone";
+	end;
+
+OnCheckGStone:
+	initnpctimer;
+	if (.Stone < 1) {
+		mapannounce .Castle$,"Both Guardian Stones has fallen - 6 minutes to destroy the 1st Fortress Gate",1,0xFFA500;
+		killmonster .Castle$,"Conquest4::OnBarricade0";
+		delwall "conq_RL00";
+	}
+	end;
+
+OnBarricade0:
+	end;
+
+OnBarricade1:
+	if(set(.Wall1,.Wall1 - 1) < 1) {
+		initnpctimer; // Restart Timer
+		mapannounce .Castle$,"1st Fortress Gate has fallen - 6 minutes to destroy the 2nd",1,0xFFA500;
+		set .Score, .Score + 1;
+		delwall "conq_RL01";
+	}
+	end;
+OnBarricade2:
+	if (set(.Wall2,.Wall2 - 1) < 1) {
+		initnpctimer; // Restart Timer
+		mapannounce .Castle$,"2nd Fortress Gate has fallen - 6 minutes to destroy the 3rd",1,0xFFA500;
+		set .Score, .Score + 1;
+		delwall "conq_RL02";
+	}
+	end;
+OnBarricade3:
+	if(set(.Wall3,.Wall3 - 1) < 1) {
+		initnpctimer; // Restart Timer
+		mapannounce .Castle$,"3rd Fortress Gate has fallen - 6 minutes to destroy the Emperium",1,0xFFA500;
+		set .Score, .Score + 1;
+		delwall "conq_RL03";
+	}
+	end;
+
+OnTimer60000:
+	mapannounce .Castle$,"Battle of Conquest will ends in 5 minutes",1,0xFFA500;
+	end;
+
+OnTimer300000:
+	mapannounce .Castle$,"Battle of Conquest will ends in 1 minute",1,0xFFA500;
+	end;
+
+OnEmperium:
+	set .Score, .Score + 1;
+	mapannounce .Castle$,"The " + bg_get_data(.Atacker,2) + " army has won the Battle and captured the Castle!!",1,bg_get_data(.Atacker,4);
+	donpcevent "Conquest4::OnMatchEnd";
+	end;
+
+OnTimer360000:
+	mapannounce .Castle$,"The " + bg_get_data(.Defender,2) + " army has won the Battle and protected the Castle!!",1,bg_get_data(.Defender,4);
+	donpcevent "Conquest4::OnMatchEnd";
+	end;
+
+OnMatchEnd:
+	stopnpctimer;
+	stopnpctimer "Conquest_Respawn4";
+	killmonster .Castle$,"Conquest4::OnBarricade0";
+	killmonster .Castle$,"Conquest4::OnBarricade1";
+	killmonster .Castle$,"Conquest4::OnBarricade2";
+	killmonster .Castle$,"Conquest4::OnBarricade3";
+	killmonster .Castle$,"Conquest4::OnGuardianStone1";
+	killmonster .Castle$,"Conquest4::OnGuardianStone2";
+	killmonster .Castle$,"Conquest4::OnEmperium";
+	set $@BG11, 2;
+
+	// =======================================================
+	// Team Rewards
+	// =======================================================
+	if (.Score >= 6 ) { // Emperium Taken
+		callfunc "BG_get_Rewards",.Atacker,7828,20;
+		callfunc "BG_get_Rewards",.Defender,7828,5;
+		callfunc "BG_ranking",.Atacker,BG_CONQUEST,1;
+		callfunc "BG_ranking",.Defender,BG_CONQUEST,0;
+	} else {
+		callfunc "BG_get_Rewards",.Atacker,7828,5;
+		callfunc "BG_get_Rewards",.Defender,7828,20;
+		callfunc "BG_ranking",.Atacker,BG_CONQUEST,0;
+		callfunc "BG_ranking",.Defender,BG_CONQUEST,1;
+	}
+
+	// =======================================================
+	set .Score, 0;
+	sleep 5000;
+	$@BG11 = 0;
+	mapwarp .Castle$,"bat_room",154,150;
+	if(.Atacker) { bg_destroy .Atacker; $@BG11_Team1 = 0; }
+	if(.Defender) { bg_destroy .Defender; $@BG11_Team2 = 0; }
+	bg_unbook .Castle$;
+	if(checkwall("conq_RL00")) delwall "conq_RL00";
+	if(checkwall("conq_RL01")) delwall "conq_RL01";
+	if(checkwall("conq_RL02")) delwall "conq_RL02";
+	if(checkwall("conq_RL03")) delwall "conq_RL03";
+	end;
+}
+
+-	script	Conquest5	FAKE_NPC,{
+	end;
+
+OnTeam1Quit:
+OnTeam2Quit:
+	bg_desert;
+	end;
+OnTeam1Active:
+	warp .Castle$,.DX,.DY; // Flag Respawn - Emperium
+	end;
+OnTeam2Active:
+	warp .Castle$,.AX,.AY; // Castle Entrance
+	end;
+
+OnReady:
+	//if( $@BG11f )
+	//	end;
+
+	set .Castle$,"arug_cas08";
+	set .CX,330; set .CY,154; set .DX,121; set .DY,318; set .AX,141; set .AY, 45;
+	bg_reserve .Castle$;
+	set $@BG11f,1;
+	initnpctimer;
+	initnpctimer "Conquest_Respawn5";
+	set .Score, 0;
+	announce "[Battleground]: Conquest has just began !",0;
+
+	switch(rand(2)) {
+		case 1:
+			set .Defender, $@BG11f_Team1;
+			set .Atacker, $@BG11f_Team2;
+			break;
+		case 0:
+			set .Defender, $@BG11f_Team2;
+			set .Atacker, $@BG11f_Team1;
+			break;
+	}
+	// =========================================================================
+	// Build Structures
+	// =========================================================================
+			setwall .Castle$,138,110,8,6,0,"conq_RL00";
+			setwall .Castle$,139,158,6,6,1,"conq_RL01";
+			setwall .Castle$,138,210,8,6,1,"conq_RL02";
+			setwall .Castle$,138,263,8,6,1,"conq_RL03";
+
+			bg_monster .Defender,.Castle$,139,111," ",1906,"Conquest5::OnBarricade0";
+			bg_monster .Defender,.Castle$,141,111," ",1906,"Conquest5::OnBarricade0";
+			bg_monster .Defender,.Castle$,143,111," ",1906,"Conquest5::OnBarricade0";
+			bg_monster .Defender,.Castle$,145,111," ",1906,"Conquest5::OnBarricade0";
+
+			bg_monster .Defender,.Castle$,140,157," ",1906,"Conquest5::OnBarricade1";
+			bg_monster .Defender,.Castle$,142,157," ",1906,"Conquest5::OnBarricade1";
+			bg_monster .Defender,.Castle$,144,157," ",1906,"Conquest5::OnBarricade1";
+			bg_monster .Defender,.Castle$,139,156," ",1906,"Conquest5::OnBarricade1";
+			bg_monster .Defender,.Castle$,141,156," ",1906,"Conquest5::OnBarricade1";
+			bg_monster .Defender,.Castle$,143,156," ",1906,"Conquest5::OnBarricade1";
+
+			bg_monster .Defender,.Castle$,140,209," ",1906,"Conquest5::OnBarricade2";
+			bg_monster .Defender,.Castle$,142,209," ",1906,"Conquest5::OnBarricade2";
+			bg_monster .Defender,.Castle$,144,209," ",1906,"Conquest5::OnBarricade2";
+			bg_monster .Defender,.Castle$,139,208," ",1906,"Conquest5::OnBarricade2";
+			bg_monster .Defender,.Castle$,141,208," ",1906,"Conquest5::OnBarricade2";
+			bg_monster .Defender,.Castle$,143,208," ",1906,"Conquest5::OnBarricade2";
+
+			bg_monster .Defender,.Castle$,139,262," ",1906,"Conquest5::OnBarricade3";
+			bg_monster .Defender,.Castle$,141,262," ",1906,"Conquest5::OnBarricade3";
+			bg_monster .Defender,.Castle$,143,262," ",1906,"Conquest5::OnBarricade3";
+			bg_monster .Defender,.Castle$,145,262," ",1906,"Conquest5::OnBarricade3";
+
+			bg_monster .Defender,.Castle$,65,171,"1st Guardian Stone",20400,"Conquest5::OnGuardianStone1";
+			bg_monster .Defender,.Castle$,212,149,"2nd Guardian Stone",20401,"Conquest5::OnGuardianStone2";
+
+			bg_monster .Defender,.Castle$,141,293,"Emperium",20402,"Conquest5::OnEmperium";
+	set .Stone, 2;
+	set .Wall1, 6;
+	set .Wall2, 6;
+	set .Wall3, 4;
+	// ======================================
+	donpceventall("OnEmblemConquest");
+	sleep 2100;
+	bg_warp .Defender,.Castle$,.DX,.DY; // Flag Respawn - Emperium
+	bg_warp .Atacker,.Castle$,.AX,.AY; // Castle Entrance
+	sleep 4000;
+	mapannounce .Castle$,bg_get_data(.Atacker,3) + " : Move on warriors!! Let's capture this Castle!!",1,bg_get_data(.Atacker,4);
+	sleep 4000;
+	mapannounce .Castle$,bg_get_data(.Defender,3) + " : Protect the Castle and it's defenses to all cost!!",1,bg_get_data(.Defender,4);
+	end;
+
+OnGuardianStone1:
+	set .Stone, .Stone - 1;
+	set .Score, .Score + 1;
+	if (.Stone > 0) mapannounce .Castle$,"1st Guardian Stone has fallen - 6 minutes to destroy the 2nd",1,0xFFA500;
+	donpcevent "Conquest5::OnCheckGStone";
+	end;
+
+OnGuardianStone2:
+	set .Stone, .Stone - 1;
+	set .Score, .Score + 1;
+	if (.Stone > 0) mapannounce .Castle$,"2nd Guardian Stone has fallen - 6 minutes to destroy the 1st",1,0xFFA500;
+	donpcevent "Conquest5::OnCheckGStone";
+	end;
+
+OnCheckGStone:
+	initnpctimer;
+	if (.Stone < 1) {
+		mapannounce .Castle$,"Both Guardian Stones has fallen - 6 minutes to destroy the 1st Fortress Gate",1,0xFFA500;
+		killmonster .Castle$,"Conquest5::OnBarricade0";
+		delwall "conq_RL00";
+	}
+	end;
+
+OnBarricade0:
+	end;
+
+OnBarricade1:
+	if(set(.Wall1,.Wall1 - 1) < 1) {
+		initnpctimer; // Restart Timer
+		mapannounce .Castle$,"1st Fortress Gate has fallen - 6 minutes to destroy the 2nd",1,0xFFA500;
+		set .Score, .Score + 1;
+		delwall "conq_RL01";
+	}
+	end;
+OnBarricade2:
+	if (set(.Wall2,.Wall2 - 1) < 1) {
+		initnpctimer; // Restart Timer
+		mapannounce .Castle$,"2nd Fortress Gate has fallen - 6 minutes to destroy the 3rd",1,0xFFA500;
+		set .Score, .Score + 1;
+		delwall "conq_RL02";
+	}
+	end;
+OnBarricade3:
+	if(set(.Wall3,.Wall3 - 1) < 1) {
+		initnpctimer; // Restart Timer
+		mapannounce .Castle$,"3rd Fortress Gate has fallen - 6 minutes to destroy the Emperium",1,0xFFA500;
+		set .Score, .Score + 1;
+		delwall "conq_RL03";
+	}
+	end;
+
+OnTimer60000:
+	mapannounce .Castle$,"Battle of Conquest will ends in 5 minutes",1,0xFFA500;
+	end;
+
+OnTimer300000:
+	mapannounce .Castle$,"Battle of Conquest will ends in 1 minute",1,0xFFA500;
+	end;
+
+OnEmperium:
+	set .Score, .Score + 1;
+	mapannounce .Castle$,"The " + bg_get_data(.Atacker,2) + " army has won the Battle and captured the Castle!!",1,bg_get_data(.Atacker,4);
+	donpcevent "Conquest5::OnMatchEnd";
+	end;
+
+OnTimer360000:
+	mapannounce .Castle$,"The " + bg_get_data(.Defender,2) + " army has won the Battle and protected the Castle!!",1,bg_get_data(.Defender,4);
+	donpcevent "Conquest5::OnMatchEnd";
+	end;
+
+OnMatchEnd:
+	stopnpctimer;
+	stopnpctimer "Conquest_Respawn5";
+	killmonster .Castle$,"Conquest5::OnBarricade0";
+	killmonster .Castle$,"Conquest5::OnBarricade1";
+	killmonster .Castle$,"Conquest5::OnBarricade2";
+	killmonster .Castle$,"Conquest5::OnBarricade3";
+	killmonster .Castle$,"Conquest5::OnGuardianStone1";
+	killmonster .Castle$,"Conquest5::OnGuardianStone2";
+	killmonster .Castle$,"Conquest5::OnEmperium";
+	set $@BG11, 2;
+
+	// =======================================================
+	// Team Rewards
+	// =======================================================
+	if (.Score >= 6 ) { // Emperium Taken
+		callfunc "BG_get_Rewards",.Atacker,7828,20;
+		callfunc "BG_get_Rewards",.Defender,7828,5;
+		callfunc "BG_ranking",.Atacker,BG_CONQUEST,1;
+		callfunc "BG_ranking",.Defender,BG_CONQUEST,0;
+	} else {
+		callfunc "BG_get_Rewards",.Atacker,7828,5;
+		callfunc "BG_get_Rewards",.Defender,7828,20;
+		callfunc "BG_ranking",.Atacker,BG_CONQUEST,0;
+		callfunc "BG_ranking",.Defender,BG_CONQUEST,1;
+	}
+	// =======================================================
+	set .Score, 0;
+	sleep 5000;
+	$@BG11 = 0;
+	mapwarp .Castle$,"bat_room",154,150;
+	if(.Atacker) { bg_destroy .Atacker; $@BG11_Team1 = 0; }
+	if(.Defender) { bg_destroy .Defender; $@BG11_Team2 = 0; }
+	bg_unbook .Castle$;
+	if(checkwall("conq_RL00")) delwall "conq_RL00";
+	if(checkwall("conq_RL01")) delwall "conq_RL01";
+	if(checkwall("conq_RL02")) delwall "conq_RL02";
+	if(checkwall("conq_RL03")) delwall "conq_RL03";
+	end;
+}
+
+//============================================================
+// = Respawn
+//============================================================
+-	script	Conquest_Respawn	FAKE_NPC,{
+	end;
+
+OnTimer24000:
+	mapannounce getvariableofnpc(.Castle$,"Conquest"),"-- Reinforcements entering the Battle of Conquest --",1,0xFFA500;
+	end;
+
+OnTimer25000:
+	set .@Castle$,getvariableofnpc(.Castle$,"Conquest");
+	set .@DX,getvariableofnpc(.DX,"Conquest");
+	set .@DY,getvariableofnpc(.DY,"Conquest");
+	set .@AX,getvariableofnpc(.AX,"Conquest");
+	set .@AY,getvariableofnpc(.AY,"Conquest");
+
+	// schg_cas01 ========================================================================
+			areapercentheal .@Castle$,260,376,267,383,100,100;
+			areapercentheal .@Castle$,292,376,299,383,100,100;
+			if ($@BG11_Team1 == getvariableofnpc(.Defender,"Conquest")) {
+				areawarp .@Castle$,260,376,267,383,.@Castle$,.@DX,.@DY;
+				areawarp .@Castle$,292,376,299,383,.@Castle$,.@AX,.@AY;
+			} else {
+				areawarp .@Castle$,260,376,267,383,.@Castle$,.@AX,.@AY;
+				areawarp .@Castle$,292,376,299,383,.@Castle$,.@DX,.@DY;
+			}
+
+	initnpctimer;
+	end;
+}
+-	script	Conquest_Respawn1	FAKE_NPC,{
+	end;
+
+OnTimer24000:
+	mapannounce getvariableofnpc(.Castle$,"Conquest1"),"-- Reinforcements entering the Battle of Conquest --",1,0xFFA500;
+	end;
+
+OnTimer25000:
+	set .@Castle$,getvariableofnpc(.Castle$,"Conquest1");
+	set .@DX,getvariableofnpc(.DX,"Conquest1");
+	set .@DY,getvariableofnpc(.DY,"Conquest1");
+	set .@AX,getvariableofnpc(.AX,"Conquest1");
+	set .@AY,getvariableofnpc(.AY,"Conquest1");
+
+	// schg_cas02 ========================================================================
+			areapercentheal .@Castle$,80,301,92,321,100,100;
+			areapercentheal .@Castle$,111,301,123,321,100,100;
+			if ($@BG11b_Team1 == getvariableofnpc(.Defender,"Conquest1")) {
+				areawarp .@Castle$,80,301,92,321,.@Castle$,.@DX,.@DY;
+				areawarp .@Castle$,111,301,123,321,.@Castle$,.@AX,.@AY;
+			} else {
+				areawarp .@Castle$,80,301,92,321,.@Castle$,.@AX,.@AY;
+				areawarp .@Castle$,111,301,123,321,.@Castle$,.@DX,.@DY;
+			}
+
+	initnpctimer;
+	end;
+}
+-	script	Conquest_Respawn2	FAKE_NPC,{
+	end;
+
+OnTimer24000:
+	mapannounce getvariableofnpc(.Castle$,"Conquest2"),"-- Reinforcements entering the Battle of Conquest --",1,0xFFA500;
+	end;
+
+OnTimer25000:
+	set .@Castle$,getvariableofnpc(.Castle$,"Conquest2");
+	set .@DX,getvariableofnpc(.DX,"Conquest2");
+	set .@DY,getvariableofnpc(.DY,"Conquest2");
+	set .@AX,getvariableofnpc(.AX,"Conquest2");
+	set .@AY,getvariableofnpc(.AY,"Conquest2");
+
+	// schg_cas03 ========================================================================
+			areapercentheal .@Castle$,18,44,33,55,100,100;
+			areapercentheal .@Castle$,82,44,97,55,100,100;
+			if ($@BG11c_Team1 == getvariableofnpc(.Defender,"Conquest2")) {
+				areawarp .@Castle$,18,44,33,55,.@Castle$,.@DX,.@DY;
+				areawarp .@Castle$,82,44,97,55,.@Castle$,.@AX,.@AY;
+			} else {
+				areawarp .@Castle$,18,44,33,55,.@Castle$,.@AX,.@AY;
+				areawarp .@Castle$,82,44,97,55,.@Castle$,.@DX,.@DY;
+			}
+
+	initnpctimer;
+	end;
+}
+-	script	Conquest_Respawn3	FAKE_NPC,{
+	end;
+
+OnTimer24000:
+	mapannounce getvariableofnpc(.Castle$,"Conquest3"),"-- Reinforcements entering the Battle of Conquest --",1,0xFFA500;
+	end;
+
+OnTimer25000:
+	set .@Castle$,getvariableofnpc(.Castle$,"Conquest3");
+	set .@DX,getvariableofnpc(.DX,"Conquest3");
+	set .@DY,getvariableofnpc(.DY,"Conquest3");
+	set .@AX,getvariableofnpc(.AX,"Conquest3");
+	set .@AY,getvariableofnpc(.AY,"Conquest3");
+
+	// arug_cas01 ========================================================================
+			areapercentheal .@Castle$,26,378,33,385,100,100;
+			areapercentheal .@Castle$,122,354,129,361,100,100;
+			if ($@BG11d_Team1 == getvariableofnpc(.Defender,"Conquest3")) {
+				areawarp .@Castle$,26,378,33,385,.@Castle$,.@DX,.@DY;
+				areawarp .@Castle$,122,354,129,361,.@Castle$,.@AX,.@AY;
+			} else {
+				areawarp .@Castle$,26,378,33,385,.@Castle$,.@AX,.@AY;
+				areawarp .@Castle$,122,354,129,361,.@Castle$,.@DX,.@DY;
+			}
+
+	initnpctimer;
+	end;
+}
+-	script	Conquest_Respawn4	FAKE_NPC,{
+	end;
+
+OnTimer24000:
+	mapannounce getvariableofnpc(.Castle$,"Conquest4"),"-- Reinforcements entering the Battle of Conquest --",1,0xFFA500;
+	end;
+
+OnTimer25000:
+	set .@Castle$,getvariableofnpc(.Castle$,"Conquest4");
+	set .@DX,getvariableofnpc(.DX,"Conquest4");
+	set .@DY,getvariableofnpc(.DY,"Conquest4");
+	set .@AX,getvariableofnpc(.AX,"Conquest4");
+	set .@AY,getvariableofnpc(.AY,"Conquest4");
+
+	// arug_cas02 ========================================================================
+			areapercentheal .@Castle$,291,336,304,342,100,100;
+			areapercentheal .@Castle$,291,305,304,311,100,100;
+			if ($@BG11e_Team1 == getvariableofnpc(.Defender,"Conquest4")) {
+				areawarp .@Castle$,291,336,304,342,.@Castle$,.@DX,.@DY;
+				areawarp .@Castle$,291,305,304,311,.@Castle$,.@AX,.@AY;
+			} else {
+				areawarp .@Castle$,291,336,304,342,.@Castle$,.@AX,.@AY;
+				areawarp .@Castle$,291,305,304,311,.@Castle$,.@DX,.@DY;
+			}
+
+	initnpctimer;
+	end;
+}
+-	script	Conquest_Respawn5	FAKE_NPC,{
+	end;
+
+OnTimer24000:
+	mapannounce getvariableofnpc(.Castle$,"Conquest5"),"-- Reinforcements entering the Battle of Conquest --",1,0xFFA500;
+	end;
+
+OnTimer25000:
+	set .@Castle$,getvariableofnpc(.Castle$,"Conquest5");
+	set .@DX,getvariableofnpc(.DX,"Conquest5");
+	set .@DY,getvariableofnpc(.DY,"Conquest5");
+	set .@AX,getvariableofnpc(.AX,"Conquest5");
+	set .@AY,getvariableofnpc(.AY,"Conquest5");
+
+	// arug_cas02 ========================================================================
+			areapercentheal .@Castle$,291,336,304,342,100,100;
+			areapercentheal .@Castle$,291,305,304,311,100,100;
+			if ($@BG11e_Team1 == getvariableofnpc(.Defender,"Conquest5")) {
+				areawarp .@Castle$,291,336,304,342,.@Castle$,.@DX,.@DY;
+				areawarp .@Castle$,291,305,304,311,.@Castle$,.@AX,.@AY;
+			} else {
+				areawarp .@Castle$,291,336,304,342,.@Castle$,.@AX,.@AY;
+				areawarp .@Castle$,291,305,304,311,.@Castle$,.@DX,.@DY;
+			}
+
+	initnpctimer;
+	end;
+}
+
+//============================================================
+// = Healer
+//============================================================
+schg_cas06,260,383,5	duplicate(BGHeal)	Therapist in battle#cq1	4_F_SISTER
+schg_cas06,299,383,3	duplicate(BGHeal)	Therapist in battle#cq2	4_F_SISTER
+schg_cas07,86,315,5	duplicate(BGHeal)	Therapist in battle#cq3	4_F_SISTER
+schg_cas07,117,315,3	duplicate(BGHeal)	Therapist in battle#cq4	4_F_SISTER
+schg_cas08,23,50,6	duplicate(BGHeal)	Therapist in battle#cq5	4_F_SISTER
+schg_cas08,92,50,4	duplicate(BGHeal)	Therapist in battle#cq6	4_F_SISTER
+arug_cas06,26,385,5	duplicate(BGHeal)	Therapist in battle#cq7	4_F_SISTER
+arug_cas06,122,361,5	duplicate(BGHeal)	Therapist in battle#cq8	4_F_SISTER
+arug_cas07,304,342,3	duplicate(BGHeal)	Therapist in battle#cq9	4_F_SISTER
+arug_cas07,304,305,1	duplicate(BGHeal)	Therapist in battle#cq0	4_F_SISTER
+arug_cas08,310,154,6	duplicate(BGHeal)	Therapist in battle#cqa	4_F_SISTER
+arug_cas08,333,154,4	duplicate(BGHeal)	Therapist in battle#cqb	4_F_SISTER
+
+// Flags schg_cas06
+// *********************************************************************
+
+schg_cas06,106,302,0	script	LF-01#schg_cas06	HIDDEN_NPC,{
+	if (getcharid(4) == getvariableofnpc(.Defender,"Conquest")) {
+		mes "^3355FFThis is the Stronghold";
+		mes "Teleport Service. Please";
+		mes "choose a destination";
+		mes "within the stronghold.^000000";
+		switch(select("First Gate House:Second Gate House:Cancel")) {
+			case 1:
+				warp "schg_cas06",19,26;
+				end;
+			case 2:
+				warp "schg_cas06",219,90;
+				end;
+			case 3:
+				close;
+		}
+	}
+	end;
+}
+
+schg_cas06,109,302,0	script	LF-02#schg_cas06	HIDDEN_NPC,{
+	if (getcharid(4) == getvariableofnpc(.Defender,"Conquest")) {
+		mes "^3355FFThis is the Stronghold";
+		mes "Teleport Service. Please";
+		mes "choose a destination";
+		mes "within the stronghold.^000000";
+		switch(select("Defense Area 1-1:Defense Area 1-2:Cancel")) {
+			case 1:
+				warp "schg_cas06",89,43;
+				end;
+			case 2:
+				warp "schg_cas06",141,45;
+				end;
+			case 3:
+				close;
+		}
+	}
+	end;
+}
+
+schg_cas06,112,302,0	script	LF-03#schg_cas06	HIDDEN_NPC,{
+	if (getcharid(4) == getvariableofnpc(.Defender,"Conquest")) {
+		mes "^3355FFThis is the Stronghold";
+		mes "Teleport Service. Please";
+		mes "choose a destination";
+		mes "within the stronghold.^000000";
+		switch(select("Defense Area 2-1:Defense Area 2-2:Cancel")) {
+			case 1:
+				warp "schg_cas06",137,54;
+				end;
+			case 2:
+				warp "schg_cas06",102,54;
+				end;
+			case 3:
+				close;
+		}
+	}
+	end;
+}
+
+schg_cas06,115,302,0	script	LF-04#schg_cas06	HIDDEN_NPC,{
+	if (getcharid(4) == getvariableofnpc(.Defender,"Conquest")) {
+		mes "^3355FFThis is the Stronghold";
+		mes "Teleport Service. Please";
+		mes "choose a destination";
+		mes "within the stronghold.^000000";
+		switch(select("Defense Area 2-3:Defense Area 2-4:Cancel")) {
+			case 1:
+				warp "schg_cas06",94,147;
+				end;
+			case 2:
+				warp "schg_cas06",163,140;
+				end;
+			case 3:
+				close;
+		}
+	}
+	end;
+}
+
+schg_cas06,118,302,0	script	LF-05#schg_cas06	HIDDEN_NPC,{
+	if (getcharid(4) == getvariableofnpc(.Defender,"Conquest")) {
+		mes "^3355FFThis is the Stronghold";
+		mes "Teleport Service. Please";
+		mes "choose a destination";
+		mes "within the stronghold.^000000";
+		switch(select("Defense Area 2-3:Defense Area 2-4:Cancel")) {
+			case 1:
+				warp "schg_cas06",87,220;
+				end;
+			case 2:
+				warp "schg_cas06",151,220;
+				end;
+			case 3:
+				close;
+		}
+	}
+	end;
+}
+
+schg_cas06,121,302,0	script	LF-06#schg_cas06	HIDDEN_NPC,{
+	if (getcharid(4) == getvariableofnpc(.Defender,"Conquest")) {
+		mes "^3355FFThis is the Stronghold";
+		mes "Teleport Service. Please";
+		mes "choose a destination";
+		mes "within the stronghold.^000000";
+		switch(select("Defense Area 3-1:Defense Area 3-2:Cancel")) {
+			case 1:
+				warp "schg_cas06",100,242;
+				end;
+			case 2:
+				warp "schg_cas06",136,242;
+				end;
+			case 3:
+				close;
+		}
+	}
+	end;
+}
+
+schg_cas06,124,302,0	script	LF-07#schg_cas06	HIDDEN_NPC,{
+	if (getcharid(4) == getvariableofnpc(.Defender,"Conquest")) {
+		mes "^3355FFThis is the Stronghold";
+		mes "Teleport Service. Please";
+		mes "choose a destination";
+		mes "within the stronghold.^000000";
+		switch(select("Center 1 Area:Center 2 Area:Cancel")) {
+			case 1:
+				warp "schg_cas06",120,168;
+				end;
+			case 2:
+				warp "schg_cas06",119,211;
+				end;
+			case 3:
+				close;
+		}
+	}
+	end;
+}
+
+schg_cas06,127,302,0	script	LF-08#schg_cas06	HIDDEN_NPC,{
+	if (getcharid(4) == getvariableofnpc(.Defender,"Conquest")) {
+		mes "^3355FFThis is the Stronghold";
+		mes "Teleport Service. Please";
+		mes "choose a destination";
+		mes "within the stronghold.^000000";
+		switch(select("Area 1-1:Area 2-1:Area 3-1:Cancel")) {
+			case 1:
+				warp "schg_cas06",89,43;
+				end;
+			case 2:
+				warp "schg_cas06",94,147;
+				end;
+			case 3:
+				warp "schg_cas06",100,242;
+				end;
+			case 4:
+				close;
+		}
+	}
+	end;
+}
+
+schg_cas06,130,302,0	script	LF-09#schg_cas06	HIDDEN_NPC,{
+	if (getcharid(4) == getvariableofnpc(.Defender,"Conquest")) {
+		mes "^3355FFThis is the Stronghold";
+		mes "Teleport Service. Please";
+		mes "choose a destination";
+		mes "within the stronghold.^000000";
+		switch(select("Area 1-2:Area 2-3:Area 3-2:Cancel")) {
+			case 1:
+				warp "schg_cas06",141,45;
+				end;
+			case 2:
+				warp "schg_cas06",163,140;
+				end;
+			case 3:
+				warp "schg_cas06",136,243;
+				end;
+			case 4:
+				close;
+		}
+	}
+	end;
+}
+
+schg_cas06,17,45,0	script	Castle#LF_sc06_1::LF_sc06_1	HIDDEN_NPC,{
+	if (getcharid(4) == getvariableofnpc(.Defender,"Conquest")) {
+		mes "^3355FFThis is the Stronghold";
+		mes "Teleport Service. Would";
+		mes "you like to teleport to";
+		mes "the Flag Center?^000000";
+		switch(select("Teleport:Cancel")) {
+			case 1:
+				warp "schg_cas06",120,290;
+				end;
+			case 2:
+				close;
+		}
+	}
+	end;
+
+OnEmblemConquest:
+	if( $@BG11 != 0 )
+		flagemblembg getvariableofnpc(.Defender,"Conquest"),1;
+	end;
+}
+
+schg_cas06,207,95,0	duplicate(LF_sc06_1)	Castle#LF_sc06_2	HIDDEN_NPC
+schg_cas06,99,77,0	duplicate(LF_sc06_1)	Castle#LF_sc06_5	HIDDEN_NPC
+schg_cas06,140,77,0	duplicate(LF_sc06_1)	Castle#LF_sc06_6	HIDDEN_NPC
+schg_cas06,112,212,0	duplicate(LF_sc06_1)	Castle#LF_sc06_9	HIDDEN_NPC
+schg_cas06,127,212,0	duplicate(LF_sc06_1)	Castle#LF_sc06_10	HIDDEN_NPC
+schg_cas06,113,238,0	duplicate(LF_sc06_1)	Castle#LF_sc06_11	HIDDEN_NPC
+schg_cas06,126,238,0	duplicate(LF_sc06_1)	Castle#LF_sc06_12	HIDDEN_NPC
+schg_cas06,95,247,0	duplicate(LF_sc06_1)	Castle#LF_sc06_13	HIDDEN_NPC
+schg_cas06,144,247,0	duplicate(LF_sc06_1)	Castle#LF_sc06_14	HIDDEN_NPC
+
+schg_cas06,111,46,4	script	Castle#LF_sc06_3::LF_sc06_2	GUILD_FLAG,{
+	if (getcharid(4) == getvariableofnpc(.Defender,"Conquest")) {
+		mes "^3355FFThis is the Stronghold";
+		mes "Teleport Service. Would";
+		mes "you like to teleport to";
+		mes "the Flag Center?^000000";
+		switch(select("Teleport:Cancel")) {
+			case 1:
+				warp "schg_cas06",120,290;
+				end;
+			case 2:
+				close;
+		}
+	}
+	end;
+
+OnEmblemConquest:
+	if( $@BG11 != 0 )
+		flagemblembg getvariableofnpc(.Defender,"Conquest"),1;
+	end;
+}
+
+schg_cas06,129,46,4	duplicate(LF_sc06_2)	Castle#LF_sc06_4	GUILD_FLAG
+schg_cas06,109,150,4	duplicate(LF_sc06_2)	Castle#LF_sc06_7	GUILD_FLAG
+schg_cas06,130,150,4	duplicate(LF_sc06_2)	Castle#LF_sc06_8	GUILD_FLAG
+
+//============================================================
+// = Flags
+//============================================================
+schg_cas07,143,198,0	script	LF-01#schg_cas07	HIDDEN_NPC,{
+	if (getcharid(4) == getvariableofnpc(.Defender,"Conquest")) {
+		mes "^3355FFThis is the Stronghold";
+		mes "Teleport Service. Please";
+		mes "choose a destination";
+		mes "within the stronghold.^000000";
+		switch(select("First Gate House:Second Gate House:Cancel")) {
+			case 1:
+				warp "schg_cas07",235,44;
+				end;
+			case 2:
+				warp "schg_cas07",302,233;
+				end;
+			case 3:
+				close;
+		}
+	}
+	end;
+}
+
+schg_cas07,143,202,0	script	LF-02#schg_cas07	HIDDEN_NPC,{
+	if (getcharid(4) == getvariableofnpc(.Defender,"Conquest")) {
+		mes "^3355FFThis is the Stronghold";
+		mes "Teleport Service. Please";
+		mes "choose a destination";
+		mes "within the stronghold.^000000";
+		switch(select("Defense area 1-1:Defense area 1-2:Cancel")) {
+			case 1:
+				warp "schg_cas07",317,83;
+				end;
+			case 2:
+				warp "schg_cas07",359,83;
+				end;
+			case 3:
+				close;
+		}
+	}
+	end;
+}
+
+schg_cas07,143,206,0	script	LF-03#schg_cas07	HIDDEN_NPC,{
+	if (getcharid(4) == getvariableofnpc(.Defender,"Conquest")) {
+		mes "^3355FFThis is the Stronghold";
+		mes "Teleport Service. Please";
+		mes "choose a destination";
+		mes "within the stronghold.^000000";
+		switch(select("Defense area 2-1:Defense area 2-2:Cancel")) {
+			case 1:
+				warp "schg_cas07",283,79;
+				end;
+			case 2:
+				warp "schg_cas07",280,122;
+				end;
+			case 3:
+				close;
+		}
+	}
+	end;
+}
+
+schg_cas07,145,208,0	script	LF-04#schg_cas07	HIDDEN_NPC,{
+	if (getcharid(4) == getvariableofnpc(.Defender,"Conquest")) {
+		mes "^3355FFThis is the Stronghold";
+		mes "Teleport Service. Please";
+		mes "choose a destination";
+		mes "within the stronghold.^000000";
+		switch(select("Defense area 3-1:Defense area 3-2:Cancel")) {
+			case 1:
+				warp "schg_cas07",215,110;
+				end;
+			case 2:
+				warp "schg_cas07",255,215;
+				end;
+			case 3:
+				close;
+		}
+	}
+	end;
+}
+
+schg_cas07,180,208,0	script	LF-05#schg_cas07	HIDDEN_NPC,{
+	if (getcharid(4) == getvariableofnpc(.Defender,"Conquest")) {
+		mes "^3355FFThis is the Stronghold";
+		mes "Teleport Service. Please";
+		mes "choose a destination";
+		mes "within the stronghold.^000000";
+		switch(select("Center 1 Area:Center 2 Area:Cancel")) {
+			case 1:
+				warp "schg_cas07",338,153;
+				end;
+			case 2:
+				warp "schg_cas07",213,226;
+				end;
+			case 3:
+				close;
+		}
+	}
+	end;
+}
+
+schg_cas07,182,206,0	script	LF-06#schg_cas07	HIDDEN_NPC,{
+	if (getcharid(4) == getvariableofnpc(.Defender,"Conquest")) {
+		mes "^3355FFThis is the Stronghold";
+		mes "Teleport Service. Please";
+		mes "choose a destination";
+		mes "within the stronghold.^000000";
+		switch(select("Defense area 1-1:Defense area 2-1:Defense area 3-1:Cancel")) {
+			case 1:
+				warp "schg_cas07",317,83;
+				end;
+			case 2:
+				warp "schg_cas07",283,79;
+				end;
+			case 3:
+				warp "schg_cas07",215,110;
+				end;
+			case 4:
+				close;
+		}
+	}
+	end;
+}
+
+schg_cas07,182,202,0	script	LF-07#schg_cas07	HIDDEN_NPC,{
+	if (getcharid(4) == getvariableofnpc(.Defender,"Conquest")) {
+		mes "^3355FFThis is the Stronghold";
+		mes "Teleport Service. Please";
+		mes "choose a destination";
+		mes "within the stronghold.^000000";
+		switch(select("Area 1-2:Area 2-2:Area 3-2:Cancel")) {
+			case 1:
+				warp "schg_cas07",359,83;
+				end;
+			case 2:
+				warp "schg_cas07",280,122;
+				end;
+			case 3:
+				warp "schg_cas07",255,215;
+				end;
+			case 4:
+				close;
+		}
+	}
+	end;
+}
+
+schg_cas07,235,222,0	script	Andlangr#LF_sc07_1::LF_sc07_1	HIDDEN_NPC,{
+	if (getcharid(4) == getvariableofnpc(.Defender,"Conquest")) {
+		mes "^3355FFThis is the Stronghold";
+		mes "Teleport Service. Would";
+		mes "you like to teleport to";
+		mes "the Emperium Center?^000000";
+		switch(select("Teleport:Cancel")) {
+			case 1:
+				warp "schg_cas07",136,188;
+				end;
+			case 2:
+				close;
+		}
+	}
+	end;
+
+OnEmblemConquest:
+	if( $@BG11 != 0 )
+		flagemblembg getvariableofnpc(.Defender,"Conquest"),1;
+	end;
+}
+
+schg_cas07,157,136,0	duplicate(LF_sc07_1)	Andlangr#LF_sc07_2	HIDDEN_NPC
+schg_cas07,168,136,4	duplicate(LF_sc07_1)	Andlangr#LF_sc07_3	HIDDEN_NPC
+schg_cas07,320,232,4	duplicate(LF_sc07_1)	Andlangr#LF_sc07_4	HIDDEN_NPC
+schg_cas07,295,109,0	duplicate(LF_sc07_1)	Andlangr#LF_sc07_5	HIDDEN_NPC
+schg_cas07,295,92,0	duplicate(LF_sc07_1)	Andlangr#LF_sc07_6	HIDDEN_NPC
+schg_cas07,285,90,4	duplicate(LF_sc07_1)	Andlangr#LF_sc07_7	HIDDEN_NPC
+schg_cas07,285,190,4	duplicate(LF_sc07_1)	Andlangr#LF_sc07_8	HIDDEN_NPC
+schg_cas07,238,66,0	duplicate(LF_sc07_1)	Andlangr#LF_sc07_9	HIDDEN_NPC
+schg_cas07,230,45,0	duplicate(LF_sc07_1)	Andlangr#LF_sc07_10	HIDDEN_NPC
+schg_cas07,233,120,0	duplicate(LF_sc07_1)	Andlangr#LF_sc07_11	HIDDEN_NPC
+schg_cas07,247,120,0	duplicate(LF_sc07_1)	Andlangr#LF_sc07_12	HIDDEN_NPC
+schg_cas07,261,162,0	duplicate(LF_sc07_1)	Andlangr#LF_sc07_13	HIDDEN_NPC
+schg_cas07,244,162,0	duplicate(LF_sc07_1)	Andlangr#LF_sc07_14	HIDDEN_NPC
+schg_cas07,235,207,0	duplicate(LF_sc07_1)	Andlangr#LF_sc07_15	HIDDEN_NPC
+
+schg_cas08,346,211,0	script	LF-01#schg_cas08	HIDDEN_NPC,{
+	if (getcharid(4) == getvariableofnpc(.Defender,"Conquest")) {
+		mes "^3355FFThis is the Stronghold";
+		mes "Teleport Service. Please";
+		mes "choose a destination";
+		mes "within the stronghold.^000000";
+		switch(select("First Gate House:Second Gate House:Cancel")) {
+			case 1:
+				warp "schg_cas08",262,323;
+				end;
+			case 2:
+				warp "schg_cas08",378,263;
+				end;
+			case 3:
+				close;
+		}
+	}
+	end;
+}
+
+schg_cas08,346,207,0	script	LF-02#schg_cas08	HIDDEN_NPC,{
+	if (getcharid(4) == getvariableofnpc(.Defender,"Conquest")) {
+		mes "^3355FFThis is the Stronghold";
+		mes "Teleport Service. Please";
+		mes "choose a destination";
+		mes "within the stronghold.^000000";
+		switch(select("Center 1 Area:Cancel")) {
+			case 1:
+				warp "schg_cas08",306,320;
+				end;
+			case 2:
+				close;
+		}
+	}
+	end;
+}
+
+schg_cas08,346,203,0	script	LF-03#schg_cas08	HIDDEN_NPC,{
+	if (getcharid(4) == getvariableofnpc(.Defender,"Conquest")) {
+		mes "^3355FFThis is the Stronghold";
+		mes "Teleport Service. Please";
+		mes "choose a destination";
+		mes "within the stronghold.^000000";
+		switch(select("Defense area 2-1:Defense area 2-2:Cancel")) {
+			case 1:
+				warp "schg_cas08",309,292;
+				end;
+			case 2:
+				warp "schg_cas08",348,292;
+				end;
+			case 3:
+				close;
+		}
+	}
+	end;
+}
+
+schg_cas08,346,199,0	script	LF-04#schg_cas08	HIDDEN_NPC,{
+	if (getcharid(4) == getvariableofnpc(.Defender,"Conquest")) {
+		mes "^3355FFThis is the Stronghold";
+		mes "Teleport Service. Please";
+		mes "choose a destination";
+		mes "within the stronghold.^000000";
+		switch(select("Center 2 Area:Cancel")) {
+			case 1:
+				warp "schg_cas08",266,263;
+				end;
+			case 2:
+				close;
+		}
+	}
+	end;
+}
+
+schg_cas08,346,195,0	script	LF-05#schg_cas08	HIDDEN_NPC,{
+	if (getcharid(4) == getvariableofnpc(.Defender,"Conquest")) {
+		mes "^3355FFThis is the Stronghold";
+		mes "Teleport Service. Please";
+		mes "choose a destination";
+		mes "within the stronghold.^000000";
+		switch(select("Defense Area 3-1:Defense Area 3-2:Cancel")) {
+			case 1:
+				warp "schg_cas08",226,220;
+				end;
+			case 2:
+				warp "schg_cas08",185,249;
+				end;
+			case 3:
+				close;
+		}
+	}
+	end;
+}
+
+schg_cas08,346,191,0	script	LF-06#schg_cas08	HIDDEN_NPC,{
+	if (getcharid(4) == getvariableofnpc(.Defender,"Conquest")) {
+		mes "^3355FFThis is the Stronghold";
+		mes "Teleport Service. Please";
+		mes "choose a destination";
+		mes "within the stronghold.^000000";
+		switch(select("Center 3 Area:Cancel")) {
+			case 1:
+				warp "schg_cas08",271,226;
+				end;
+			case 2:
+				close;
+		}
+	}
+	end;
+}
+
+schg_cas08,301,213,0	script	LF-07#schg_cas08	HIDDEN_NPC,{
+	if (getcharid(4) == getvariableofnpc(.Defender,"Conquest")) {
+		mes "^3355FFThis is the Stronghold";
+		mes "Teleport Service. Please";
+		mes "choose a destination";
+		mes "within the stronghold.^000000";
+		switch(select("Area 1-2:Area 2-2:Area 3-2:Cancel")) {
+			case 1:
+				warp "schg_cas08",262,323;
+				end;
+			case 2:
+				warp "schg_cas08",378,263;
+				end;
+			case 3:
+				warp "schg_cas08",306,320;
+				end;
+			case 4:
+				close;
+		}
+	}
+	end;
+}
+
+schg_cas08,301,209,0	script	LF-08#schg_cas08	HIDDEN_NPC,{
+	if (getcharid(4) == getvariableofnpc(.Defender,"Conquest")) {
+		mes "^3355FFThis is the Stronghold";
+		mes "Teleport Service. Please";
+		mes "choose a destination";
+		mes "within the stronghold.^000000";
+		switch(select("Area 2-1:Area 2-2:Center 2 Area:Cancel")) {
+			case 1:
+				warp "schg_cas08",309,292;
+				end;
+			case 2:
+				warp "schg_cas08",348,292;
+				end;
+			case 3:
+				warp "schg_cas08",326,263;
+				end;
+			case 4:
+				close;
+		}
+	}
+	end;
+}
+
+schg_cas08,301,194,0	script	LF-09#schg_cas08	HIDDEN_NPC,{
+	if (getcharid(4) == getvariableofnpc(.Defender,"Conquest")) {
+		mes "^3355FFThis is the Stronghold";
+		mes "Teleport Service. Please";
+		mes "choose a destination";
+		mes "within the stronghold.^000000";
+		switch(select("Area 3-1:Area 3-2:Center 3 Area:Cancel")) {
+			case 1:
+				warp "schg_cas08",226,220;
+				end;
+			case 2:
+				warp "schg_cas08",185,249;
+				end;
+			case 3:
+				warp "schg_cas08",271,226;
+				end;
+			case 4:
+				close;
+		}
+	}
+	end;
+}
+
+schg_cas08,335,305,0	script	Vidblainn#LF_sc08_1::LF_sc08_1	HIDDEN_NPC,{
+	if (getcharid(4) == getvariableofnpc(.Defender,"Conquest")) {
+		mes "^3355FFThis is the Stronghold";
+		mes "Teleport Service. Would";
+		mes "you like to teleport to";
+		mes "the Emperium Center?^000000";
+		switch(select("Teleport:Cancel")) {
+			case 1:
+				warp "schg_cas08",308,202;
+				end;
+			case 2:
+				close;
+		}
+	}
+	end;
+
+OnEmblemConquest:
+	if( $@BG11 != 0)
+		flagemblembg getvariableofnpc(.Defender,"Conquest"),1;
+	end;
+}
+
+schg_cas08,322,305,0	duplicate(LF_sc08_1)	Vidblainn#LF_sc08_2	HIDDEN_NPC
+schg_cas08,352,248,0	duplicate(LF_sc08_1)	Vidblainn#LF_sc08_3	HIDDEN_NPC
+schg_cas08,320,283,0	duplicate(LF_sc08_1)	Vidblainn#LF_sc08_4	HIDDEN_NPC
+schg_cas08,337,283,0	duplicate(LF_sc08_1)	Vidblainn#LF_sc08_5	HIDDEN_NPC
+schg_cas08,233,320,0	duplicate(LF_sc08_1)	Vidblainn#LF_sc08_6	HIDDEN_NPC
+schg_cas08,207,239,0	duplicate(LF_sc08_1)	Vidblainn#LF_sc08_7	HIDDEN_NPC
+schg_cas08,207,228,0	duplicate(LF_sc08_1)	Vidblainn#LF_sc08_8	HIDDEN_NPC
+schg_cas08,266,206,0	duplicate(LF_sc08_1)	Vidblainn#LF_sc08_9	HIDDEN_NPC
+schg_cas08,266,197,0	duplicate(LF_sc08_1)	Vidblainn#LF_sc08_10	HIDDEN_NPC
+
+schg_cas08,283,206,2	script	Vidblainn#LF_sc08_11::LF_sc08_2	GUILD_FLAG,{
+	if (getcharid(4) == getvariableofnpc(.Defender,"Conquest")) {
+		mes "^3355FFThis is the Stronghold";
+		mes "Teleport Service. Would";
+		mes "you like to teleport to";
+		mes "the Emperium Center?^000000";
+		switch(select("Teleport:Cancel")) {
+			case 1:
+				warp "schg_cas08",308,202;
+				end;
+			case 2:
+				close;
+		}
+	}
+	end;
+
+OnEmblemConquest:
+	if( $@BG11 != 0 )
+		flagemblembg getvariableofnpc(.Defender,"Conquest"),1;
+	end;
+}
+
+schg_cas08,283,197,2	duplicate(LF_sc08_2)	Vidblainn#LF_sc08_12	GUILD_FLAG
+schg_cas08,332,323,6	duplicate(LF_sc08_2)	Vidblainn#LF_sc08_13	GUILD_FLAG
+schg_cas08,343,323,2	duplicate(LF_sc08_2)	Vidblainn#LF_sc08_14	GUILD_FLAG
+
+
+arug_cas06,74,232,0	script	LF-01#arug_cas06	HIDDEN_NPC,{
+	if (getcharid(4) == getvariableofnpc(.Defender,"Conquest")) {
+		mes "^3355FFThis is the Stronghold";
+		mes "Teleport Service. Please";
+		mes "choose a destination";
+		mes "within the stronghold.^000000";
+		switch(select("First Gate House:Second Gate House:Cancel")) {
+			case 1:
+				warp "arug_cas06",158,237;
+				end;
+			case 2:
+				warp "arug_cas06",297,248;
+				end;
+			case 3:
+				close;
+		}
+	}
+	end;
+}
+
+arug_cas06,77,232,0	script	LF-02#arug_cas06	HIDDEN_NPC,{
+	if (getcharid(4) == getvariableofnpc(.Defender,"Conquest")) {
+		mes "^3355FFThis is the Stronghold";
+		mes "Teleport Service. Please";
+		mes "choose a destination";
+		mes "within the stronghold.^000000";
+		switch(select("Defense Area 1-1:Defense Area 1-2:Cancel")) {
+			case 1:
+				warp "arug_cas06",197,144;
+				end;
+			case 2:
+				warp "arug_cas06",245,103;
+				end;
+			case 3:
+				close;
+		}
+	}
+	end;
+}
+
+arug_cas06,80,232,0	script	LF-03#arug_cas06	HIDDEN_NPC,{
+	if (getcharid(4) == getvariableofnpc(.Defender,"Conquest")) {
+		mes "^3355FFThis is the Stronghold";
+		mes "Teleport Service. Please";
+		mes "choose a destination";
+		mes "within the stronghold.^000000";
+		switch(select("Defense Area 2-1:Defense Area 2-2:Cancel")) {
+			case 1:
+				warp "arug_cas06",256,35;
+				end;
+			case 2:
+				warp "arug_cas06",186,26;
+				end;
+			case 3:
+				close;
+		}
+	}
+	end;
+}
+
+arug_cas06,83,232,0	script	LF-04#arug_cas06	HIDDEN_NPC,{
+	if (getcharid(4) == getvariableofnpc(.Defender,"Conquest")) {
+		mes "^3355FFThis is the Stronghold";
+		mes "Teleport Service. Please";
+		mes "choose a destination";
+		mes "within the stronghold.^000000";
+		switch(select("Defense Area 2-3:Defense Area 2-4:Cancel")) {
+			case 1:
+				warp "arug_cas06",146,65;
+				end;
+			case 2:
+				warp "arug_cas06",176,111;
+				end;
+			case 3:
+				close;
+		}
+	}
+	end;
+}
+
+arug_cas06,86,232,0	script	LF-05#arug_cas06	HIDDEN_NPC,{
+	if (getcharid(4) == getvariableofnpc(.Defender,"Conquest")) {
+		mes "^3355FFThis is the Stronghold";
+		mes "Teleport Service. Please";
+		mes "choose a destination";
+		mes "within the stronghold.^000000";
+		switch(select("Defense Area 3-1:Defense Area 3-2:Cancel")) {
+			case 1:
+				warp "arug_cas06",94,126;
+				end;
+			case 2:
+				warp "arug_cas06",126,126;
+				end;
+			case 3:
+				close;
+		}
+	}
+	end;
+}
+
+arug_cas06,89,232,0	script	LF-06#arug_cas06	HIDDEN_NPC,{
+	if (getcharid(4) == getvariableofnpc(.Defender,"Conquest")) {
+		mes "^3355FFThis is the Stronghold";
+		mes "Teleport Service. Please";
+		mes "choose a destination";
+		mes "within the stronghold.^000000";
+		switch(select("Defense Area 3-3:Defense Area 3-4:Cancel")) {
+			case 1:
+				warp "arug_cas06",68,171;
+				end;
+			case 2:
+				warp "arug_cas06",105,182;
+				end;
+			case 3:
+				close;
+		}
+	}
+	end;
+}
+
+arug_cas06,92,232,0	script	LF-07#arug_cas06	HIDDEN_NPC,{
+	if (getcharid(4) == getvariableofnpc(.Defender,"Conquest")) {
+		mes "^3355FFThis is the Stronghold";
+		mes "Teleport Service. Please";
+		mes "choose a destination";
+		mes "within the stronghold.^000000";
+		switch(select("Gate House Fork:Cancel")) {
+			case 1:
+				warp "arug_cas06",233,130;
+				end;
+			case 2:
+				close;
+		}
+	}
+	end;
+}
+
+arug_cas06,95,232,0	script	LF-08#arug_cas06	HIDDEN_NPC,{
+	if (getcharid(4) == getvariableofnpc(.Defender,"Conquest")) {
+		mes "^3355FFThis is the Stronghold";
+		mes "Teleport Service. Please";
+		mes "choose a destination";
+		mes "within the stronghold.^000000";
+		switch(select("Area 1-1:Area 2-1:Area 3-1:Cancel")) {
+			case 1:
+				warp "arug_cas06",197,144;
+				end;
+			case 2:
+				warp "arug_cas06",256,35;
+				end;
+			case 3:
+				warp "arug_cas06",146,65;
+				end;
+			case 4:
+				close;
+		}
+	}
+	end;
+}
+
+arug_cas06,98,232,0	script	LF-09#arug_cas06	HIDDEN_NPC,{
+	if (getcharid(4) == getvariableofnpc(.Defender,"Conquest")) {
+		mes "^3355FFThis is the Stronghold";
+		mes "Teleport Service. Please";
+		mes "choose a destination";
+		mes "within the stronghold.^000000";
+		switch(select("Area 1-2:Area 2-2:Area 3-3:Cancel")) {
+			case 1:
+				warp "arug_cas06",245,103;
+				end;
+			case 2:
+				warp "arug_cas06",186,26;
+				end;
+			case 3:
+				warp "arug_cas06",68,171;
+				end;
+			case 4:
+				close;
+		}
+	}
+	end;
+}
+
+arug_cas06,72,176,0	script	Mardol#LF_ar06_1::LF_ar06_1	HIDDEN_NPC,{
+	if (getcharid(4) == getvariableofnpc(.Defender,"Conquest")) {
+		mes "^3355FFThis is the Stronghold";
+		mes "Teleport Service. Would";
+		mes "you like to teleport to";
+		mes "the Emperium Center?^000000";
+		switch(select("Teleport:Cancel")) {
+			case 1:
+				warp "arug_cas06",67,193;
+				end;
+			case 2:
+				close;
+		}
+	}
+	end;
+
+OnEmblemConquest:
+	if( $@BG11 != 0 )
+		flagemblembg getvariableofnpc(.Defender,"Conquest"),1;
+	end;
+}
+
+arug_cas06,103,186,0	duplicate(LF_ar06_1)	Mardol#LF_ar06_2	HIDDEN_NPC,{
+arug_cas06,150,102,0	duplicate(LF_ar06_1)	Mardol#LF_ar06_4	HIDDEN_NPC
+arug_cas06,208,68,0	duplicate(LF_ar06_1)	Mardol#LF_ar06_5	HIDDEN_NPC
+arug_cas06,249,52,0	duplicate(LF_ar06_1)	Mardol#LF_ar06_6	HIDDEN_NPC
+arug_cas06,234,76,0	duplicate(LF_ar06_1)	Mardol#LF_ar06_7	HIDDEN_NPC
+arug_cas06,249,76,0	duplicate(LF_ar06_1)	Mardol#LF_ar06_8	HIDDEN_NPC
+arug_cas06,204,142,0	duplicate(LF_ar06_1)	Mardol#LF_ar06_9	HIDDEN_NPC
+arug_cas06,183,244,0	duplicate(LF_ar06_1)	Mardol#LF_ar06_10	HIDDEN_NPC
+arug_cas06,292,219,0	duplicate(LF_ar06_1)	Mardol#LF_ar06_11	HIDDEN_NPC
+
+arug_cas06,92,126,4	script	Mardol#LF_ar06_3::LF_ar06_2	HIDDEN_NPC,{
+	if (getcharid(4) == getvariableofnpc(.Defender,"Conquest")) {
+		mes "^3355FFThis is the Stronghold";
+		mes "Teleport Service. Would";
+		mes "you like to teleport to";
+		mes "the Emperium Center?^000000";
+		switch(select("Teleport:Cancel")) {
+			case 1:
+				warp "arug_cas06",67,193;
+				end;
+			case 2:
+				close;
+		}
+	}
+	end;
+
+OnEmblemConquest:
+	if( $@BG11 != 0 )
+		flagemblembg getvariableofnpc(.Defender,"Conquest"),1;
+	end;
+}
+
+arug_cas06,127,126,4	duplicate(LF_ar06_2)	Mardol#LF_ar06_3	HIDDEN_NPC
+arug_cas06,102,120,4	duplicate(LF_ar06_2)	Mardol#LF_ar06_12	GUILD_FLAG
+arug_cas06,117,120,4	duplicate(LF_ar06_2)	Mardol#LF_ar06_13	GUILD_FLAG
+arug_cas06,233,140,4	duplicate(LF_ar06_2)	Mardol#LF_ar06_14	GUILD_FLAG
+
+
+arug_cas07,98,270,0	script	LF-01#arug_cas07	HIDDEN_NPC,{
+	if (getcharid(4) == getvariableofnpc(.Defender,"Conquest")) {
+		mes "^3355FFThis is the Stronghold";
+		mes "Teleport Service. Please";
+		mes "choose a destination";
+		mes "within the stronghold.^000000";
+		switch(select("First Gate House:Second Gate House:Cancel")) {
+			case 1:
+				warp "arug_cas07",10,187;
+				end;
+			case 2:
+				warp "arug_cas07",268,187;
+				end;
+			case 3:
+				close;
+		}
+	}
+	end;
+}
+
+arug_cas07,98,266,0	script	LF-02#arug_cas07	HIDDEN_NPC,{
+	if (getcharid(4) == getvariableofnpc(.Defender,"Conquest")) {
+		mes "^3355FFThis is the Stronghold";
+		mes "Teleport Service. Please";
+		mes "choose a destination";
+		mes "within the stronghold.^000000";
+		switch(select("Defense Area 1-1:Defense Area 1-2:Cancel")) {
+			case 1:
+				warp "arug_cas07",66,31;
+				end;
+			case 2:
+				warp "arug_cas07",212,31;
+				end;
+			case 3:
+				close;
+		}
+	}
+	end;
+}
+
+arug_cas07,98,262,0	script	LF-03#arug_cas07	HIDDEN_NPC,{
+	if (getcharid(4) == getvariableofnpc(.Defender,"Conquest")) {
+		mes "^3355FFThis is the Stronghold";
+		mes "Teleport Service. Please";
+		mes "choose a destination";
+		mes "within the stronghold.^000000";
+		switch(select("Defense Area 1-3:Defense Area 1-4:Cancel")) {
+			case 1:
+				warp "arug_cas07",90,120;
+				end;
+			case 2:
+				warp "arug_cas07",188,119;
+				end;
+			case 3:
+				close;
+		}
+	}
+	end;
+}
+
+arug_cas07,98,258,0	script	LF-04#arug_cas07	HIDDEN_NPC,{
+	if (getcharid(4) == getvariableofnpc(.Defender,"Conquest")) {
+		mes "^3355FFThis is the Stronghold";
+		mes "Teleport Service. Please";
+		mes "choose a destination";
+		mes "within the stronghold.^000000";
+		switch(select("Defense Area 2-1:Defense Area 2-2:Cancel")) {
+			case 1:
+				warp "arug_cas07",119,183;
+				end;
+			case 2:
+				warp "arug_cas07",159,183;
+				end;
+			case 3:
+				close;
+		}
+	}
+	end;
+}
+
+arug_cas07,98,253,0	script	LF-05#arug_cas07	HIDDEN_NPC,{
+	if (getcharid(4) == getvariableofnpc(.Defender,"Conquest")) {
+		mes "^3355FFThis is the Stronghold";
+		mes "Teleport Service. Please";
+		mes "choose a destination";
+		mes "within the stronghold.^000000";
+		switch(select("Defense Area 2-3:Defense Area 2-4:Cancel")) {
+			case 1:
+				warp "arug_cas07",156,324;
+				end;
+			case 2:
+				warp "arug_cas07",174,372;
+				end;
+			case 3:
+				close;
+		}
+	}
+	end;
+}
+
+arug_cas07,98,249,0	script	LF-06#arug_cas07	HIDDEN_NPC,{
+	if (getcharid(4) == getvariableofnpc(.Defender,"Conquest")) {
+		mes "^3355FFThis is the Stronghold";
+		mes "Teleport Service. Please";
+		mes "choose a destination";
+		mes "within the stronghold.^000000";
+		switch(select("Defense Area 3-1:Defense Area 3-2:Cancel")) {
+			case 1:
+				warp "arug_cas07",28,325;
+				end;
+			case 2:
+				warp "arug_cas07",57,325;
+				end;
+			case 3:
+				close;
+		}
+	}
+	end;
+}
+
+arug_cas07,98,245,0	script	LF-07#arug_cas07	HIDDEN_NPC,{
+	if (getcharid(4) == getvariableofnpc(.Defender,"Conquest")) {
+		mes "^3355FFThis is the Stronghold";
+		mes "Teleport Service. Please";
+		mes "choose a destination";
+		mes "within the stronghold.^000000";
+		switch(select("Center 2nd Area:Center 3rd Area:Cancel")) {
+			case 1:
+				warp "arug_cas07",156,263;
+				end;
+			case 2:
+				warp "arug_cas07",43,354;
+				end;
+			case 3:
+				close;
+		}
+	}
+	end;
+}
+
+arug_cas07,216,92,0	script	Cyr#LF_ar07_1::LF_ar07_1	HIDDEN_NPC,{
+	if (getcharid(4) == getvariableofnpc(.Defender,"Conquest")) {
+		mes "^3355FFThis is the Stronghold";
+		mes "Teleport Service. Would";
+		mes "you like to teleport to";
+		mes "the Emperium Center?^000000";
+		switch(select("Teleport:Cancel")) {
+			case 1:
+				warp "arug_cas07",43,256;
+				end;
+			case 2:
+				close;
+		}
+	}
+	end;
+
+OnEmblemConquest:
+	if( $@BG11 != 0 )
+		flagemblembg getvariableofnpc(.Defender,"Conquest"),1;
+	end;
+}
+
+arug_cas07,63,92,0	duplicate(LF_ar07_1)	Cyr#LF_ar07_2	HIDDEN_NPC
+arug_cas07,127,133,4	duplicate(LF_ar07_1)	Cyr#LF_ar07_3	HIDDEN_NPC
+arug_cas07,152,133,4	duplicate(LF_ar07_1)	Cyr#LF_ar07_4	HIDDEN_NPC
+arug_cas07,149,218,0	duplicate(LF_ar07_1)	Cyr#LF_ar07_5	HIDDEN_NPC
+arug_cas07,162,218,0	duplicate(LF_ar07_1)	Cyr#LF_ar07_6	HIDDEN_NPC
+arug_cas07,128,350,0	duplicate(LF_ar07_1)	Cyr#LF_ar07_7	HIDDEN_NPC
+arug_cas07,128,341,0	duplicate(LF_ar07_1)	Cyr#LF_ar07_8	HIDDEN_NPC
+arug_cas07,49,317,0	duplicate(LF_ar07_1)	Cyr#LF_ar07_9	HIDDEN_NPC
+arug_cas07,30,317,0	duplicate(LF_ar07_1)	Cyr#LF_ar07_10	HIDDEN_NPC
+arug_cas07,9,190,0	duplicate(LF_ar07_1)	Cyr#LF_ar07_11	HIDDEN_NPC
+arug_cas07,271,190,0	duplicate(LF_ar07_1)	Cyr#LF_ar07_12	HIDDEN_NPC
+
+arug_cas07,129,178,4	script	Cyr#LF_ar07_13::LF_ar07_2	GUILD_FLAG,{
+	if (getcharid(4) == getvariableofnpc(.Defender,"Conquest")) {
+		mes "^3355FFThis is the Stronghold";
+		mes "Teleport Service. Would";
+		mes "you like to teleport to";
+		mes "the Emperium Center?^000000";
+		switch(select("Teleport:Cancel")) {
+			case 1:
+				warp "arug_cas07",43,256;
+				end;
+			case 2:
+				close;
+		}
+	}
+	end;
+
+OnEmblemConquest:
+	if( $@BG11 != 0 )
+		flagemblembg getvariableofnpc(.Defender,"Conquest"),1;
+	end;
+}
+
+arug_cas07,149,178,4	duplicate(LF_ar07_2)	Cyr#LF_ar07_14	GUILD_FLAG
+arug_cas07,132,38,4	duplicate(LF_ar07_2)	Cyr#LF_ar07_15	GUILD_FLAG
+arug_cas07,147,38,4	duplicate(LF_ar07_2)	Cyr#LF_ar07_16	GUILD_FLAG
+
+
+arug_cas08,122,314,0	script	LF-01#arug_cas08	HIDDEN_NPC,{
+	if (getcharid(4) == getvariableofnpc(.Defender,"Conquest")) {
+		mes "^3355FFThis is the Stronghold";
+		mes "Teleport Service. Please";
+		mes "choose a destination";
+		mes "within the stronghold.^000000";
+		switch(select("First Gate House:Second Gate House:Cancel")) {
+			case 1:
+				warp "arug_cas08",84,158;
+				end;
+			case 2:
+				warp "arug_cas08",197,136;
+				end;
+			case 3:
+				close;
+		}
+	}
+	end;
+}
+
+arug_cas08,125,314,0	script	LF-02#arug_cas08	HIDDEN_NPC,{
+	if (getcharid(4) == getvariableofnpc(.Defender,"Conquest")) {
+		mes "^3355FFThis is the Stronghold";
+		mes "Teleport Service. Please";
+		mes "choose a destination";
+		mes "within the stronghold.^000000";
+		switch(select("Defense Area 1-1:Defense Area 1-2:Cancel")) {
+			case 1:
+				warp "arug_cas08",65,94;
+				end;
+			case 2:
+				warp "arug_cas08",211,97;
+				end;
+			case 3:
+				close;
+		}
+	}
+	end;
+}
+
+arug_cas08,128,314,0	script	LF-03#arug_cas08	HIDDEN_NPC,{
+	if (getcharid(4) == getvariableofnpc(.Defender,"Conquest")) {
+		mes "^3355FFThis is the Stronghold";
+		mes "Teleport Service. Please";
+		mes "choose a destination";
+		mes "within the stronghold.^000000";
+		switch(select("Defense Area 1-3:Defense Area 1-4:Cancel")) {
+			case 1:
+				warp "arug_cas08",112,73;
+				end;
+			case 2:
+				warp "arug_cas08",171,73;
+				end;
+			case 3:
+				close;
+		}
+	}
+	end;
+}
+
+arug_cas08,131,314,0	script	LF-04#arug_cas08	HIDDEN_NPC,{
+	if (getcharid(4) == getvariableofnpc(.Defender,"Conquest")) {
+		mes "^3355FFThis is the Stronghold";
+		mes "Teleport Service. Please";
+		mes "choose a destination";
+		mes "within the stronghold.^000000";
+		switch(select("Defense Area 2-1:Defense Area 2-2:Cancel")) {
+			case 1:
+				warp "arug_cas08",112,152;
+				end;
+			case 2:
+				warp "arug_cas08",172,152;
+				end;
+			case 3:
+				close;
+		}
+	}
+	end;
+}
+
+arug_cas08,134,314,0	script	LF-05#arug_cas08	HIDDEN_NPC,{
+	if (getcharid(4) == getvariableofnpc(.Defender,"Conquest")) {
+		mes "^3355FFThis is the Stronghold";
+		mes "Teleport Service. Please";
+		mes "choose a destination";
+		mes "within the stronghold.^000000";
+		switch(select("Defense Area 2-3:Defense Area 2-4:Cancel")) {
+			case 1:
+				warp "arug_cas08",120,186;
+				end;
+			case 2:
+				warp "arug_cas08",162,186;
+				end;
+			case 3:
+				close;
+		}
+	}
+	end;
+}
+
+arug_cas08,149,314,0	script	LF-06#arug_cas08	HIDDEN_NPC,{
+	if (getcharid(4) == getvariableofnpc(.Defender,"Conquest")) {
+		mes "^3355FFThis is the Stronghold";
+		mes "Teleport Service. Please";
+		mes "choose a destination";
+		mes "within the stronghold.^000000";
+		switch(select("Defense Area 3-1:Defense Area 3-2:Cancel")) {
+			case 1:
+				warp "arug_cas08",116,235;
+				end;
+			case 2:
+				warp "arug_cas08",164,235;
+				end;
+			case 3:
+				close;
+		}
+	}
+	end;
+}
+
+arug_cas08,152,314,0	script	LF-07#arug_cas08	HIDDEN_NPC,{
+	if (getcharid(4) == getvariableofnpc(.Defender,"Conquest")) {
+		mes "^3355FFThis is the Stronghold";
+		mes "Teleport Service. Please";
+		mes "choose a destination";
+		mes "within the stronghold.^000000";
+		switch(select("Defense Area 1-1:Defense Area 2-1:Defense Area 3-1:Cancel")) {
+			case 1:
+				warp "arug_cas08",65,94;
+				end;
+			case 2:
+				warp "arug_cas08",112,152;
+				end;
+			case 3:
+				warp "arug_cas08",116,235;
+				end;
+			case 4:
+				close;
+		}
+	}
+	end;
+}
+
+arug_cas08,155,314,0	script	LF-08#arug_cas08	HIDDEN_NPC,{
+	if (getcharid(4) == getvariableofnpc(.Defender,"Conquest")) {
+		mes "^3355FFThis is the Stronghold";
+		mes "Teleport Service. Please";
+		mes "choose a destination";
+		mes "within the stronghold.^000000";
+		switch(select("Defense Area 1-2:Defense Area 2-2:Defense Area 3-2:Cancel")) {
+			case 1:
+				warp "arug_cas08",211,97;
+				end;
+			case 2:
+				warp "arug_cas08",172,152;
+				end;
+			case 3:
+				warp "arug_cas08",164,235;
+				end;
+			case 4:
+				close;
+		}
+	}
+	end;
+}
+
+arug_cas08,158,314,0	script	LF-09#arug_cas08	HIDDEN_NPC,{
+	if (getcharid(4) == getvariableofnpc(.Defender,"Conquest")) {
+		mes "^3355FFThis is the Stronghold";
+		mes "Teleport Service. Please";
+		mes "choose a destination";
+		mes "within the stronghold.^000000";
+		switch(select("Defense Area 1-4:Defense Area 2-4:Cancel")) {
+			case 1:
+				warp "arug_cas08",171,73;
+				end;
+			case 2:
+				warp "arug_cas08",162,186;
+				end;
+			case 3:
+				close;
+		}
+	}
+	end;
+}
+
+arug_cas08,45,158,0	script	Horn#LF_ar08_01::LF_ar08_01	HIDDEN_NPC,{
+	if (getcharid(4) == getvariableofnpc(.Defender,"Conquest")) {
+		mes "^3355FFThis is the Stronghold";
+		mes "Teleport Service. Would";
+		mes "you like to teleport to";
+		mes "the Emperium Center?^000000";
+		switch(select("Teleport:Cancel")) {
+			case 1:
+				warp "arug_cas08",121,318;
+				end;
+			case 2:
+				close;
+		}
+	}
+	end;
+
+OnEmblemConquest:
+	if( $@BG11 != 0 )
+		flagemblembg getvariableofnpc(.Defender,"Conquest"),1;
+	end;
+}
+
+arug_cas08,226,156,0	duplicate(LF_ar08_01)	Horn#LF_ar08_01	HIDDEN_NPC
+arug_cas08,134,62,4	duplicate(LF_ar08_01)	Horn#LF_ar08_02	HIDDEN_NPC
+arug_cas08,149,62,4	duplicate(LF_ar08_01)	Horn#LF_ar08_03	HIDDEN_NPC
+arug_cas08,123,154,0	duplicate(LF_ar08_01)	Horn#LF_ar08_04	HIDDEN_NPC
+arug_cas08,160,154,0	duplicate(LF_ar08_01)	Horn#LF_ar08_05	HIDDEN_NPC
+arug_cas08,135,205,0	duplicate(LF_ar08_01)	Horn#LF_ar08_06	HIDDEN_NPC
+arug_cas08,148,205,0	duplicate(LF_ar08_01)	Horn#LF_ar08_07	HIDDEN_NPC
+arug_cas08,134,260,0	duplicate(LF_ar08_01)	Horn#LF_ar08_08	HIDDEN_NPC
+
+arug_cas08,148,103,4	script	Horn#LF_ar08_10::LF_ar08_02	GUILD_FLAG,{
+	if (getcharid(4) == getvariableofnpc(.Defender,"Conquest")) {
+		mes "^3355FFThis is the Stronghold";
+		mes "Teleport Service. Would";
+		mes "you like to teleport to";
+		mes "the Emperium Center?^000000";
+		switch(select("Teleport:Cancel")) {
+			case 1:
+				warp "arug_cas08",121,318;
+				end;
+			case 2:
+				close;
+		}
+	}
+	end;
+
+OnEmblemConquest:
+	if( $@BG11 != 0 )
+		flagemblembg getvariableofnpc(.Defender,"Conquest"),1;
+	end;
+}
+
+arug_cas08,135,103,4	duplicate(LF_ar08_02)	Horn#LF_ar08_11	GUILD_FLAG
+arug_cas08,63,51,7	duplicate(LF_ar08_02)	Horn#LF_ar08_12	GUILD_FLAG
+arug_cas08,214,51,1	duplicate(LF_ar08_02)	Horn#LF_ar08_13	GUILD_FLAG
+
+// MapFlags
+// *********************************************************************
+
+schg_cas06	mapflag	battleground
+schg_cas06	mapflag	nomemo
+schg_cas06	mapflag	nosave	SavePoint
+schg_cas06	mapflag	noteleport
+schg_cas06	mapflag	nowarp
+schg_cas06	mapflag	nowarpto
+schg_cas06	mapflag	noreturn
+schg_cas06	mapflag	nobranch
+schg_cas06	mapflag	nopenalty
+schg_cas06	mapflag	bg_consume
+
+schg_cas07	mapflag	battleground
+schg_cas07	mapflag	nomemo
+schg_cas07	mapflag	nosave	SavePoint
+schg_cas07	mapflag	noteleport
+schg_cas07	mapflag	nowarp
+schg_cas07	mapflag	nowarpto
+schg_cas07	mapflag	noreturn
+schg_cas07	mapflag	nobranch
+schg_cas07	mapflag	nopenalty
+schg_cas07	mapflag	bg_consume
+
+schg_cas08	mapflag	battleground
+schg_cas08	mapflag	nomemo
+schg_cas08	mapflag	nosave	SavePoint
+schg_cas08	mapflag	noteleport
+schg_cas08	mapflag	nowarp
+schg_cas08	mapflag	nowarpto
+schg_cas08	mapflag	noreturn
+schg_cas08	mapflag	nobranch
+schg_cas08	mapflag	nopenalty
+schg_cas08	mapflag	bg_consume
+
+arug_cas06	mapflag	battleground
+arug_cas06	mapflag	nomemo
+arug_cas06	mapflag	nosave	SavePoint
+arug_cas06	mapflag	noteleport
+arug_cas06	mapflag	nowarp
+arug_cas06	mapflag	nowarpto
+arug_cas06	mapflag	noreturn
+arug_cas06	mapflag	nobranch
+arug_cas06	mapflag	nopenalty
+arug_cas06	mapflag	bg_consume
+
+arug_cas07	mapflag	battleground
+arug_cas07	mapflag	nomemo
+arug_cas07	mapflag	nosave	SavePoint
+arug_cas07	mapflag	noteleport
+arug_cas07	mapflag	nowarp
+arug_cas07	mapflag	nowarpto
+arug_cas07	mapflag	noreturn
+arug_cas07	mapflag	nobranch
+arug_cas07	mapflag	nopenalty
+arug_cas07	mapflag	bg_consume
+
+arug_cas08	mapflag	battleground
+arug_cas08	mapflag	nomemo
+arug_cas08	mapflag	nosave	SavePoint
+arug_cas08	mapflag	noteleport
+arug_cas08	mapflag	nowarp
+arug_cas08	mapflag	nowarpto
+arug_cas08	mapflag	noreturn
+arug_cas08	mapflag	nobranch
+arug_cas08	mapflag	nopenalty
+arug_cas08	mapflag	bg_consume
diff --git a/npc/battleground/bg_double_inferno.txt b/npc/battleground/bg_double_inferno.txt
new file mode 100644
index 000000000..906d73163
--- /dev/null
+++ b/npc/battleground/bg_double_inferno.txt
@@ -0,0 +1,274 @@
+//===== rAthena Script =======================================
+//= Battleground Extended + : Double Inferno
+//===== By: ==================================================
+//= eAmod / Grenat
+//===== Description: =========================================
+//= Battleground Extended + scripts.
+//===== Additional Comments: =================================
+//= Adaptation for rAthena 2020.
+//= This is a free release.
+//= Please do NOT take ownership.
+//= The original author will always stay eAmod,
+//= It would be a disgrace claiming it's yours and making
+//= money out of it. [Grenat]
+//============================================================
+
+// ===========================================================
+// Configuration
+// ===========================================================
+-	script	Tierra_TI	-1,{
+	end;
+
+OnInit:
+	setwall "region_8",27,52,8,0,0,"ti_wall_a";
+	setwall "region_8",20,52,8,0,0,"ti_wall_a2";
+	setwall "region_8",72,46,8,0,0,"ti_wall_b";
+	setwall "region_8",79,46,8,0,0,"ti_wall_b2";
+	end;
+
+OnTeam1Quit:
+OnTeam2Quit:
+OnTeam3Quit:
+	bg_desert;
+	end;
+OnTeam1Active:
+	warp "region_8",29,49;
+	end;
+OnTeam2Active:
+	warp "region_8",70,50;
+	end;
+
+OnTeam1Die:
+OnTeam2Die:
+OnTeam3Die:
+	if ($@BG19 == 1) {
+		// Killed Position
+		getmapxy .@m$, .@x, .@y;
+		set .@Bid, getcharid(4);
+		// Current Skulls
+		set .@id8965,countitem(8965);
+		set .@id8966,countitem(8966);
+		set .@id8967,countitem(8967);
+		// Remove Skulls
+		if (.@id8965) delitem 8965,.@id8965;
+		if (.@id8966) delitem 8966,.@id8966;
+		if (.@id8967) delitem 8967,.@id8967;
+		// Drop Skulls
+		if (.@id8965) makeitem 8965,.@id8965,"region_8",.@x,.@y;
+		if (.@id8966) makeitem 8966,.@id8966,"region_8",.@x,.@y;
+		if (.@id8967) makeitem 8967,.@id8967,"region_8",.@x,.@y;
+		// Drop a New Skull
+		if (.@Bid == $@BG19_Team1)
+			makeitem 8965,1,"region_8",.@x,.@y;
+		else if (.@Bid == $@BG19_Team2)
+			makeitem 8966,1,"region_8",.@x,.@y;
+		else if (.@Bid == $@BG19_Team3)
+			makeitem 8967,1,"region_8",.@x,.@y;
+	}
+	end;
+
+OnReady:
+	announce "[Battleground]: Double Inferno has just began ! (@joinbg to join)",bc_all,0xccff00;
+	set $@BG19,1;
+	initnpctimer;
+	$@score_inferno_red = 0;
+	$@score_inferno_blue = 0;
+	donpceventall "OnEmblemTI";
+	bg_warp $@BG19_Team1,"region_8",29,49;
+	bg_warp $@BG19_Team2,"region_8",70,50;
+	bg_warp $@BG19_Team3,"region_8",49,70;
+	donpcevent "#gti_respawn::OnBGStart";
+	donpcevent "#cti_respawn::OnBGStart";
+	donpcevent "#tti_respawn::OnBGStart";
+	sleep 2000;
+	bg_team_reveal $@BG19_Team1;
+	bg_team_reveal $@BG19_Team2;
+	end;
+
+OnValidateScore:
+	if (!$@BG19)
+		end;
+	if($@score_inferno_red >= 80 || $@score_inferno_blue >= 80)
+		donpcevent "Tierra_TI::OnMatchEnd";
+	end;
+
+OnTimer600000:
+	mapannounce "region_8","The Battle will ends in 5 minutes!!",1,0x696969;
+	end;
+
+OnTimer840000:
+	mapannounce "region_8","The Battle will ends in 1 minute!!",1,0x696969;
+	end;
+
+OnTimer900000:
+OnMatchEnd:
+	stopnpctimer;
+	cleanmap "region_8"; // Removes all ground items
+	donpcevent "#gti_respawn::OnBGStop";
+	donpcevent "#cti_respawn::OnBGStop";
+	donpcevent "#tti_respawn::OnBGStop";
+	set $@BG19, 2;
+	// =======================================================
+	// Team Rewards
+	// =======================================================
+	.@reward_win = 5;
+	.@reward_lose = 3;
+	if ($@score_inferno_blue > $@score_inferno_red) {
+		callfunc "BG_get_Rewards",$@BG19_Team1,7828,5;
+		callfunc "BG_get_Rewards",$@BG19_Team2,7828,1;
+		callfunc "BG_ranking",$@BG19_Team1,BG_INFERNO,1;
+		callfunc "BG_ranking",$@BG19_Team2,BG_INFERNO,0;
+		mapannounce "region_8","The " + bg_get_data($@BG19_Team1,2) + " has won the Battle of Tierra Inferno!",1,bg_get_data($@BG19_Team1,4);
+	} else if ($@score_inferno_red > $@score_inferno_blue) {
+		callfunc "BG_get_Rewards",$@BG19_Team1,7828,1;
+		callfunc "BG_get_Rewards",$@BG19_Team2,7828,5;
+		callfunc "BG_ranking",$@BG19_Team1,BG_INFERNO,0;
+		callfunc "BG_ranking",$@BG19_Team2,BG_INFERNO,1;
+		mapannounce "region_8","The " + bg_get_data($@BG19_Team2,2) + " has won the Battle of Tierra Inferno!",1,bg_get_data($@BG19_Team2,4);
+	} else {
+		callfunc "BG_get_Rewards",$@BG19_Team1,7828,1;
+		callfunc "BG_get_Rewards",$@BG19_Team2,7828,1;
+		mapannounce "region_8","DRAW !!",1;
+	}
+	// =======================================================
+	sleep 5000;
+	$@BG19 = 0;
+	mapwarp "region_8","bat_room",154,150;
+	$@score_inferno_red = 0;
+	$@score_inferno_blue = 0;
+	if($@BG19_Team1) { bg_destroy $@BG19_Team1; $@BG19_Team1 = 0; }
+	if($@BG19_Team2) { bg_destroy $@BG19_Team2; $@BG19_Team2 = 0; }
+	bg_unbook "region_8";
+	end;
+}
+
+region_8,29,45,0	script	Sacrifice Totem::BlueTotem	1277,2,2,{ unitwalk getcharid(3),29,45; end; OnTouch: callfunc "totembg",0,1,8965,8966; }
+region_8,29,54,0	script	Sacrifice Totem::BlueTotem2	1277,2,2,{ unitwalk getcharid(3),29,54; end; OnTouch: callfunc "totembg",0,1,8965,8966; }
+region_8,70,54,0	script	Sacrifice Totem::RedTotem	1277,2,2,{ unitwalk getcharid(3),70,54; end; OnTouch: callfunc "totembg",1,2,8966,8965; }
+region_8,70,45,0	script	Sacrifice Totem::RedTotem2	1277,2,2,{ unitwalk getcharid(3),70,45; end; OnTouch: callfunc "totembg",1,2,8966,8965; }
+
+
+function	script	totembg	{
+	if (!$@BG19)
+		end;
+	if (bg_teamid() != getarg(0))
+		end;
+
+	set .@Points, 0;
+	delitem getarg(2),countitem(getarg(2));
+
+	if (set(.@n,countitem(getarg(3))) > 0) { // Team 2 Skulls
+		delitem getarg(3),.@n;
+		set .@Points, .@Points + .@n;
+	}
+
+	if (.@Points > 0) {
+		emotion ET_BEST;
+		specialeffect 622;
+		if(bg_teamid()) { $@score_inferno_red += .@Points; .@Score = $@score_inferno_red; }
+		else { $@score_inferno_blue += .@Points; .@Score = $@score_inferno_blue; }
+		bg_updatescore strnpcinfo(4),$@score_inferno_blue,$@score_inferno_red;
+		mapannounce "region_8",bg_get_data(getd("$@BG19_Team"+getarg(1)+""),2) + " : " + .@Points + " slaughtered skulls by " + strcharinfo(0) + " [" + .@Score + "/80]",1,bg_get_data(getd("$@BG19_Team"+getarg(1)+""),4);
+		donpcevent "Tierra_TI::OnValidateScore";
+	}
+	end;
+}
+
+// ===========================================================
+// MapFlags
+// ===========================================================
+region_8	mapflag	bg_topscore	80
+region_8	mapflag	battleground	2
+region_8	mapflag	nomemo
+region_8	mapflag	nosave	SavePoint
+region_8	mapflag	noteleport
+region_8	mapflag	nowarp
+region_8	mapflag	nowarpto
+region_8	mapflag	noreturn
+region_8	mapflag	nobranch
+region_8	mapflag	nopenalty
+region_8	mapflag	bg_consume
+
+// ===========================================================
+// Flags
+// ===========================================================
+region_8,75,47,2	script	Croix Base::TIF_Croix	1_FLAG_EAGLE,{ end; }
+region_8,75,52,2	duplicate(TIF_Croix)	Bravo Base#ti_2	1_FLAG_EAGLE
+region_8,24,47,6	script	Guillaume Base::TIF_Guillaume	1_FLAG_LION,{ end; }
+region_8,24,52,6	duplicate(TIF_Guillaume)	Alpha Base#ti_2	1_FLAG_LION
+
+// ===========================================================
+// Heal
+// ===========================================================
+region_8,7,52,5	duplicate(BGHeal)	Therapist in battle#ti_1	4_F_SISTER,
+region_8,52,92,3	duplicate(BGHeal)	Therapist in battle#ti_2	4_F_SISTER
+region_8,92,52,3	duplicate(BGHeal)	Therapist in battle#ti_3	4_F_SISTER
+
+// ===========================================================
+// Respawn
+// ===========================================================
+region_8,49,89,0	script	#tti_respawn	HIDDEN_WARP_NPC,{
+	end;
+
+OnBGStart:
+	initnpctimer;
+	end;
+
+OnBGStop:
+	stopnpctimer;
+	end;
+
+OnTimer19000:
+	specialeffect 83;
+	end;
+
+OnTimer20000:
+	areapercentheal "region_8",46,86,53,93,100,100;
+	areawarp "region_8",46,86,53,93,"region_8",46,70,53,72;
+	initnpctimer;
+	end;
+}
+
+region_8,10,49,0	script	#gti_respawn	HIDDEN_WARP_NPC,{
+	end;
+
+OnBGStart:
+	initnpctimer;
+	end;
+
+OnBGStop:
+	stopnpctimer;
+	end;
+
+OnTimer24000:
+	specialeffect 83;
+	end;
+
+OnTimer25000:
+	areapercentheal "region_8",6,46,13,53,100,100;
+	areawarp "region_8",6,46,13,53,"region_8",27,46,29,53;
+	initnpctimer;
+	end;
+}
+
+region_8,89,49,0	script	#cti_respawn	HIDDEN_WARP_NPC,{
+	end;
+
+OnBGStart:
+	initnpctimer;
+	end;
+
+OnBGStop:
+	stopnpctimer;
+	end;
+
+OnTimer24000:
+	specialeffect 83;
+	end;
+
+OnTimer25000:
+	areapercentheal "region_8",86,46,93,53,100,100;
+	areawarp "region_8",86,46,93,53,"region_8",70,46,72,53;
+	initnpctimer;
+	end;
+}
diff --git a/npc/battleground/bg_flavius_capture_the_flag.txt b/npc/battleground/bg_flavius_capture_the_flag.txt
new file mode 100644
index 000000000..03c93a504
--- /dev/null
+++ b/npc/battleground/bg_flavius_capture_the_flag.txt
@@ -0,0 +1,454 @@
+//===== rAthena Script =======================================
+//= Battleground Extended + : Flavius Capture the Flag
+//===== By: ==================================================
+//= eAmod / Grenat
+//===== Description: =========================================
+//= Battleground Extended + scripts.
+//===== Additional Comments: =================================
+//= Adaptation for rAthena 2020.
+//= This is a free release.
+//= Please do NOT take ownership.
+//= The original author will always stay eAmod,
+//= It would be a disgrace claiming it's yours and making
+//= money out of it. [Grenat]
+//============================================================
+
+// ===========================================================
+// Map Flags
+// ===========================================================
+bat_b02	mapflag	battleground	2
+bat_b02	mapflag	nomemo
+bat_b02	mapflag	nosave	SavePoint
+bat_b02	mapflag	noteleport
+bat_b02	mapflag	nowarp
+bat_b02	mapflag	nowarpto
+bat_b02	mapflag	noreturn
+bat_b02	mapflag	nobranch
+bat_b02	mapflag	nopenalty
+bat_b02	mapflag	noecall
+bat_b02	mapflag	bg_consume
+
+// ===========================================================
+// Flags
+// ===========================================================
+bat_b02,328,150,0	script	Alpha Crystal::Team1_Flag	1914,1,1,{
+	unitwalk getcharid(3),328,150;
+	end;
+
+OnTouch:
+	if ($@BG10 != 1 || Hp < 1)
+		end;
+
+	// Flag Captured
+	if (getcharid(4) == $@BG10_Team2 && .Flag_Status < 2) {
+		set .Flag_Status, 2; // Taken
+		set .Flag_Carrier, getcharid(0);
+
+		sc_end SC_HIDING;
+		sc_end SC_CLOAKING;
+		sc_end SC_CHASEWALK;
+		// Renewal invisibility
+		sc_end SC_CLOAKINGEXCEED;
+		sc_end SC_CAMOUFLAGE;
+		sc_end SC__INVISIBILITY;
+
+		setpcblock(PCBLOCK_SKILL|PCBLOCK_USEITEM,true);
+
+		mapannounce "bat_b02","Alpha Crystal Taken by [ " + strcharinfo(0) + " ]",1,bg_get_data($@BG10_Team1,4);
+		//bg_rankpoints "ctf_taken",1;
+		disablenpc "Team1_Flag";
+		addtimer 2100, "Flavius_CTF::OnAlphaFlash";
+		stopnpctimer;
+	} else if (getcharid(4) == $@BG10_Team1) {
+		if (.Flag_Status == 0 && getvariableofnpc(.Flag_Carrier,"Team2_Flag") == getcharid(0)) {
+			set getvariableofnpc(.Flag_Carrier,"Team2_Flag"),0;
+			set .Flag_Carrier, 0;
+			mapannounce "bat_b02","Omega Crystal Captured by [ " + strcharinfo(0) + " ]!!",1,bg_get_data($@BG10_Team2,4);
+			//bg_rankpoints "ctf_captured",1;
+			setpcblock(PCBLOCK_SKILL|PCBLOCK_USEITEM,false);
+			stopnpctimer;
+			$@score_capture_blue++;
+			donpcevent "Flavius_CTF::OnMatchStop";
+		} else if (.Flag_Status == 1) {
+			mapannounce "bat_b02","Alpha Crystal Returned by [ " + strcharinfo(0) + " ]!!",1,bg_get_data($@BG10_Team1,4);
+			//bg_rankpoints "fame",1;
+			disablenpc "Team1_Flag";
+			sleep 2100;
+			movenpc "Team1_Flag",328,150; // Back to Base
+			set .Flag_Status, 0;
+			initnpctimer;
+			enablenpc "Team1_Flag";
+		}
+	}
+	end;
+
+OnTimer2000:
+	stopnpctimer;
+	if (.Flag_Status < 2) {
+		getmapxy .@m$, .@x, .@y, BL_NPC;
+		viewpointmap "bat_b02",1, .@x, .@y, 1, bg_get_data($@BG10_Team1,4);
+		specialeffect 223;
+		initnpctimer;
+	}
+	end;
+
+OnBase:
+	movenpc "Team1_Flag",328,150;
+	set .Flag_Status, 0;
+	set .Flag_Carrier, 0;
+	initnpctimer;
+	enablenpc "Team1_Flag";
+	end;
+}
+
+bat_b02,62,150,0	script	Omega Crystal::Team2_Flag	1915,1,1,{
+	unitwalk getcharid(3),62,150;
+	end;
+
+OnTouch:
+	if ($@BG10 != 1 || Hp < 1)
+		end;
+
+	// Flag Captured
+	if (getcharid(4) == $@BG10_Team1 && .Flag_Status < 2) {
+		set .Flag_Status, 2; // Taken
+		set .Flag_Carrier, getcharid(0);
+
+		sc_end SC_HIDING;
+		sc_end SC_CLOAKING;
+		sc_end SC_CHASEWALK;
+		// Renewal invisibility
+		sc_end SC_CLOAKINGEXCEED;
+		sc_end SC_CAMOUFLAGE;
+		sc_end SC__INVISIBILITY;
+
+		setpcblock(PCBLOCK_SKILL|PCBLOCK_USEITEM,true);
+
+		mapannounce "bat_b02","Omega Crystal Taken by [ " + strcharinfo(0) + " ]",1,bg_get_data($@BG10_Team2,4);
+		//bg_rankpoints "ctf_taken",1;
+		disablenpc "Team2_Flag";
+		addtimer 2100, "Flavius_CTF::OnOmegaFlash";
+		stopnpctimer;
+	} else if (getcharid(4) == $@BG10_Team2) {
+		if (.Flag_Status == 0 && getvariableofnpc(.Flag_Carrier,"Team1_Flag") == getcharid(0)) {
+			set getvariableofnpc(.Flag_Carrier,"Team1_Flag"),0;
+			set .Flag_Carrier, 0;
+			mapannounce "bat_b02","Alpha Crystal Captured by [ " + strcharinfo(0) + " ]!!",1,bg_get_data($@BG10_Team1,4);
+			//bg_rankpoints "ctf_captured",1;
+			setpcblock(PCBLOCK_SKILL|PCBLOCK_USEITEM,false);
+			stopnpctimer;
+			$@score_capture_red++;
+			donpcevent "Flavius_CTF::OnMatchStop";
+		} else if (.Flag_Status == 1) {
+			mapannounce "bat_b02","Omega Crystal Returned by [ " + strcharinfo(0) + " ]!!",1,bg_get_data($@BG10_Team2,4);
+			//bg_rankpoints "fame",1;
+			disablenpc "Team2_Flag";
+			sleep 2100;
+			movenpc "Team2_Flag",62,150; // Back to Base
+			set .Flag_Status, 0;
+			initnpctimer;
+			enablenpc "Team2_Flag";
+		}
+	}
+	end;
+
+OnTimer2000:
+	stopnpctimer;
+	if (.Flag_Status < 2) {
+		getmapxy .@m$, .@x, .@y, BL_NPC;
+		viewpointmap "bat_b02",1, .@x, .@y, 2, bg_get_data($@BG10_Team2,4);
+		specialeffect 223;
+		initnpctimer;
+	}
+	end;
+
+OnBase:
+	movenpc "Team2_Flag",62,150;
+	set .Flag_Status, 0;
+	set .Flag_Carrier, 0;
+	initnpctimer;
+	enablenpc "Team2_Flag";
+	end;
+}
+
+// ===========================================================
+// Configuration
+// ===========================================================
+-	script	Flavius_CTF	FAKE_NPC,{
+	end;
+
+OnAlphaFlash:
+	if (getvariableofnpc(.Flag_Carrier,"Team1_Flag") == getcharid(0) && $@BG10 == 1) {
+		getmapxy .@m$, .@x, .@y, BL_PC;
+		viewpointmap "bat_b02",1, .@x, .@y, 1, bg_get_data($@BG10_Team1,4);
+		specialeffect 73;
+		emotion ET_FLAG,getcharid(3);
+		addtimer 2100, "Flavius_CTF::OnAlphaFlash";
+		percentheal -5,-5;
+	}
+	end;
+
+OnOmegaFlash:
+	if (getvariableofnpc(.Flag_Carrier,"Team2_Flag") == getcharid(0) && $@BG10 == 1) {
+		getmapxy .@m$, .@x, .@y, BL_PC;
+		viewpointmap "bat_b02",1, .@x, .@y, 2, bg_get_data($@BG10_Team2,4);
+		specialeffect 73;
+		emotion ET_FLAG,getcharid(3);
+		addtimer 2100, "Flavius_CTF::OnOmegaFlash";
+		percentheal -5,-5;
+	}
+	end;
+
+OnInit:
+	disablenpc "Team1_Flag";
+	disablenpc "Team2_Flag";
+	end;
+
+OnTeam1Quit:
+	bg_desert;
+OnTeam1Die:
+	// Drop Flag
+	if ($@BG10 == 1 && getvariableofnpc(.Flag_Carrier,"Team2_Flag") == getcharid(0)) {
+		set getvariableofnpc(.Flag_Carrier,"Team2_Flag"), 0;
+		setpcblock(PCBLOCK_SKILL|PCBLOCK_USEITEM,false);
+		getmapxy .@m$, .@x, .@y, BL_PC;
+		movenpc "Team2_Flag", .@x, .@y;
+		mapannounce "bat_b02","Omega Flag Droped by [ " + strcharinfo(0) + " ]",1,bg_get_data($@BG10_Team2,4);
+		//bg_rankpoints "ctf_droped",1;
+		//bg_rankpoints "fame",1,@killer_bg_src;
+		set getvariableofnpc(.Flag_Status,"Team2_Flag"), 1; // OnFloor
+		initnpctimer "Team2_Flag";
+		enablenpc "Team2_Flag";
+	}
+	end;
+
+OnTeam2Quit:
+	bg_desert;
+OnTeam2Die:
+	// Drop Flag
+	if ($@BG10 == 1 && getvariableofnpc(.Flag_Carrier,"Team1_Flag") == getcharid(0)) {
+		set getvariableofnpc(.Flag_Carrier,"Team1_Flag"), 0;
+		setpcblock(PCBLOCK_SKILL|PCBLOCK_USEITEM,false);
+		getmapxy .@m$, .@x, .@y, BL_PC;
+		movenpc "Team1_Flag", .@x, .@y;
+		mapannounce "bat_b02","Alpha Flag Droped by [ " + strcharinfo(0) + " ]",1,bg_get_data($@BG10_Team1,4);
+		//bg_rankpoints "ctf_droped",1;
+		//bg_rankpoints "fame",1,@killer_bg_src;
+		set getvariableofnpc(.Flag_Status,"Team1_Flag"), 1; // OnFloor
+		initnpctimer "Team1_Flag";
+		enablenpc "Team1_Flag";
+	}
+	end;
+
+OnTeam1Active:
+	warp "bat_b02",311,224;
+	end;
+OnTeam2Active:
+	warp "bat_b02",87,75;
+	end;
+
+OnReady:
+	//if ($@BG10)
+	//	end;
+
+	announce "[Battleground]: Flavius Capture the Flag has just began ! (@joinbg to join)",bc_all,0xccff00;
+	initnpctimer;
+	// BG Variables
+	set $@BG10,1;
+	set $@score_capture_blue, 0;
+	set $@score_capture_red, 0;
+	sleep 2100;
+	bg_warp $@BG10_Team1,"bat_b02",311,224;
+	bg_warp $@BG10_Team2,"bat_b02",87,75;
+	sleep 2100;
+	// Respawn NPC's
+	donpcevent "#guictf_respawn::OnBGStart";
+	donpcevent "#croctf_respawn::OnBGStart";
+	// Start Match!!
+	donpcevent "Flavius_CTF::OnMatchStart";
+	end;
+
+OnMatchStart:
+	if ($@BG10 != 1)
+		end;
+	// Reset Position Members
+	if ($@score_capture_blue || $@score_capture_red) {
+		bg_warp $@BG10_Team1,"bat_b02",311,224;
+		bg_warp $@BG10_Team2,"bat_b02",87,75;
+	}
+
+	// Flags2Base
+	donpcevent "Team1_Flag::OnBase";
+	donpcevent "Team2_Flag::OnBase";
+	mapannounce "bat_b02","The Flags have been set to their Bases!!",8;
+	end;
+
+OnMatchStop:
+	disablenpc "Team1_Flag";
+	disablenpc "Team2_Flag";
+	bg_updatescore "bat_b02",$@score_capture_blue,$@score_capture_red;
+
+	viewpointmap "bat_b02",2, 0, 0, 1, 0x0000FF;
+	viewpointmap "bat_b02",2, 0, 0, 2, 0xFF0000;
+
+	// Team 1 Won
+	if ($@score_capture_blue > 2) {
+		mapannounce "bat_b02","The " + bg_get_data($@BG10_Team1,2) + " army has won the Battle of Flavius CTF!",1,bg_get_data($@BG10_Team1,4);
+		donpcevent "Flavius_CTF::OnMatchEnd";
+	}
+	// Team 2 Won
+	else if ($@score_capture_red > 2) {
+		mapannounce "bat_b02","The " + bg_get_data($@BG10_Team2,2) + " army has won the Battle of Flavius CTF!",1,bg_get_data($@BG10_Team2,4);
+		donpcevent "Flavius_CTF::OnMatchEnd";
+	}
+	// Keep Playing
+	else {
+		sleep 8000;
+		donpcevent "Flavius_CTF::OnMatchStart";
+	}
+	end;
+
+OnTimer600000:
+	mapannounce "bat_b02","The Battle will ends in 5 minutes!!",1,0xA0522D;
+	end;
+
+OnTimer840000:
+	mapannounce "bat_b02","The Battle will ends in 1 minute!!",1,0xA0522D;
+	end;
+
+OnTimer900000:
+	disablenpc "Team1_Flag";
+	disablenpc "Team2_Flag";
+
+	viewpointmap "bat_b02",2, 0, 0, 1, bg_get_data($@BG10_Team1,4);
+	viewpointmap "bat_b02",2, 0, 0, 2, bg_get_data($@BG10_Team2,4);
+
+	if ($@score_capture_blue > $@score_capture_red)
+		mapannounce "bat_b02","The " + bg_get_data($@BG10_Team1,2) + " army has won the Battle of Flavius CTF!",1,bg_get_data($@BG10_Team1,4);
+	else if ($@score_capture_blue < $@score_capture_red)
+		mapannounce "bat_b02","The " + bg_get_data($@BG10_Team2,2) + " army has won the Battle of Flavius CTF!",1,bg_get_data($@BG10_Team2,4);
+	else
+		mapannounce "bat_b02","The battle is over. This is a Tie...!",1,0xA0522D;
+	donpcevent "Flavius_CTF::OnMatchEnd";
+	end;
+
+OnMatchEnd:
+	stopnpctimer;
+	disablenpc "Team1_Flag";
+	disablenpc "Team2_Flag";
+	donpcevent "#guictf_respawn::OnBGStop";
+	donpcevent "#croctf_respawn::OnBGStop";
+	set $@BG10, 2;
+	// =======================================================
+	// Team Rewards
+	// =======================================================
+	if ($@score_capture_blue > $@score_capture_red) {
+		callfunc "BG_get_Rewards",$@BG10_Team1,7829,5;
+		callfunc "BG_get_Rewards",$@BG10_Team2,7829,1;
+		callfunc "BG_ranking",$@BG10_Team1,BG_CAPTUREFLAG,1;
+		callfunc "BG_ranking",$@BG10_Team2,BG_CAPTUREFLAG,0;
+	} else if ($@score_capture_red > $@score_capture_blue) {
+		callfunc "BG_get_Rewards",$@BG10_Team1,7829,1;
+		callfunc "BG_get_Rewards",$@BG10_Team2,7829,5;
+		callfunc "BG_ranking",$@BG10_Team1,BG_CAPTUREFLAG,0;
+		callfunc "BG_ranking",$@BG10_Team2,BG_CAPTUREFLAG,1;
+	} else {
+		callfunc "BG_get_Rewards",$@BG10_Team1,7829,1;
+		callfunc "BG_get_Rewards",$@BG10_Team2,7829,1;
+	}
+
+	// =======================================================
+	sleep 5000;
+	$@BG10 = 0;
+	mapwarp "bat_b02","bat_room",154,150;
+	set $@score_capture_blue, 0;
+	set $@score_capture_red, 0;
+	if($@BG10_Team1) { bg_destroy $@BG10_Team1; $@BG10_Team1 = 0; }
+	if($@BG10_Team2) { bg_destroy $@BG10_Team2; $@BG10_Team2 = 0; }
+	bg_unbook "bat_b02";
+	end;
+}
+
+// ===========================================================
+// Healer
+// ===========================================================
+bat_b02,390,13,5	duplicate(BGHeal)	Therapist in battle#ctf1	4_F_SISTER
+bat_b02,10,293,5	duplicate(BGHeal)	Therapist in battle#ctf2	4_F_SISTER
+
+// ===========================================================
+// Respawn
+// ===========================================================
+bat_b02,390,10,0	script	#guictf_respawn	HIDDEN_WARP_NPC,{
+	end;
+
+OnBGStart:
+	initnpctimer;
+	end;
+
+OnBGStop:
+	stopnpctimer;
+	end;
+
+OnTimer24000:
+	specialeffect 83;
+	end;
+
+OnTimer25000:
+	areapercentheal "bat_b02",382,2,397,17,100,100;
+	areawarp "bat_b02",382,2,397,17,"bat_b02",311,224;
+	initnpctimer;
+	end;
+}
+
+bat_b02,10,290,0	script	#croctf_respawn	HIDDEN_WARP_NPC,{
+	end;
+
+OnBGStart:
+	initnpctimer;
+	end;
+
+OnBGStop:
+	stopnpctimer;
+	end;
+
+OnTimer24000:
+	specialeffect 83;
+	end;
+
+OnTimer25000:
+	areapercentheal "bat_b02",2,282,17,297,100,100;
+	areawarp "bat_b02",2,282,17,297,"bat_b02",87,75;
+	initnpctimer;
+	end;
+}
+
+// ===========================================================
+// Flags
+// ===========================================================
+bat_b02,304,231,1	duplicate(Base Flag#bg)	Alpha Base#bat23	1_FLAG_LION
+bat_b02,319,231,1	duplicate(Base Flag#bg)	Alpha Base#bat24	1_FLAG_LION
+bat_b02,304,218,1	duplicate(Base Flag#bg)	Alpha Base#bat25	1_FLAG_LION
+bat_b02,319,218,1	duplicate(Base Flag#bg)	Alpha Base#bat26	1_FLAG_LION
+bat_b02,304,231,1	duplicate(Base Flag#bg)	Alpha Base#bat27	1_FLAG_LION
+bat_b02,304,231,1	duplicate(Base Flag#bg)	Alpha Base#bat28	1_FLAG_LION
+bat_b02,335,142,1	duplicate(Base Flag#bg)	Alpha Base#bat29	1_FLAG_LION
+bat_b02,335,157,1	duplicate(Base Flag#bg)	Alpha Base#bat30	1_FLAG_LION
+bat_b02,390,16,1	duplicate(Base Flag#bg)	Alpha Base#bat31	1_FLAG_LION
+bat_b02,292,163,1	duplicate(Base Flag#bg)	Alpha Base#bat32	1_FLAG_LION
+bat_b02,292,136,1	duplicate(Base Flag#bg)	Alpha Base#bat33	1_FLAG_LION
+bat_b02,241,185,1	duplicate(Base Flag#bg)	Alpha Base#bat34	1_FLAG_LION
+bat_b02,247,179,1	duplicate(Base Flag#bg)	Alpha Base#bat35	1_FLAG_LION
+
+bat_b02,96,81,1	duplicate(Base Flag#bg)	Omega Base#bat22	1_FLAG_EAGLE
+bat_b02,96,68,1	duplicate(Base Flag#bg)	Omega Base#bat23	1_FLAG_EAGLE
+bat_b02,79,81,1	duplicate(Base Flag#bg)	Omega Base#bat24	1_FLAG_EAGLE
+bat_b02,79,68,1	duplicate(Base Flag#bg)	Omega Base#bat25	1_FLAG_EAGLE
+bat_b02,96,81,1	duplicate(Base Flag#bg)	Omega Base#bat26	1_FLAG_EAGLE
+bat_b02,96,81,1	duplicate(Base Flag#bg)	Omega Base#bat27	1_FLAG_EAGLE
+bat_b02,59,164,1	duplicate(Base Flag#bg)	Omega Base#bat28	1_FLAG_EAGLE
+bat_b02,59,137,1	duplicate(Base Flag#bg)	Omega Base#bat29	1_FLAG_EAGLE
+bat_b02,10,296,1	duplicate(Base Flag#bg)	Omega Base#bat30	1_FLAG_EAGLE
+bat_b02,110,162,1	duplicate(Base Flag#bg)	Omega Base#bat31	1_FLAG_EAGLE
+bat_b02,110,137,1	duplicate(Base Flag#bg)	Omega Base#bat32	1_FLAG_EAGLE
+bat_b02,152,120,1	duplicate(Base Flag#bg)	Omega Base#bat33	1_FLAG_EAGLE
+bat_b02,158,114,1	duplicate(Base Flag#bg)	Omega Base#bat34	1_FLAG_EAGLE
diff --git a/npc/battleground/bg_flavius_death_match.txt b/npc/battleground/bg_flavius_death_match.txt
new file mode 100644
index 000000000..06613e37b
--- /dev/null
+++ b/npc/battleground/bg_flavius_death_match.txt
@@ -0,0 +1,251 @@
+//===== rAthena Script =======================================
+//= Battleground Extended + : Team Death Match
+//===== By: ==================================================
+//= eAmod / Grenat
+//===== Description: =========================================
+//= Battleground Extended + scripts.
+//===== Additional Comments: =================================
+//= Adaptation for rAthena 2020.
+//= This is a free release.
+//= Please do NOT take ownership.
+//= The original author will always stay eAmod,
+//= It would be a disgrace claiming it's yours and making
+//= money out of it. [Grenat]
+//============================================================
+
+// ===========================================================
+// Configuration
+// ===========================================================
+-	script	Flavius_TD	FAKE_NPC,{
+	end;
+
+OnTeam1Quit:
+	bg_desert;
+OnTeam1Die:
+	if ($@BG14 == 1) {
+		if (killerrid == 0) end;
+		$@score_deathmatch_blue -= 1;
+		donpcevent "Flavius_TD::OnValidateScore";
+	}
+	end;
+
+OnTeam1Active:
+	warp "bat_b03",390,10;
+	end;
+OnTeam2Active:
+	warp "bat_b03",10,290;
+	end;
+
+OnTeam2Quit:
+	bg_desert;
+OnTeam2Die:
+	if ($@BG14 == 1) {
+		if (killerrid == 0) end;
+		$@score_deathmatch_red -= 1;
+		donpcevent "Flavius_TD::OnValidateScore";
+	}
+	end;
+
+OnReady:
+	//if ($@BG14)
+	//	end;
+
+	announce "[Battleground]: Flavius Death Match has just began ! (@joinbg to join)",bc_all,0xccff00;
+	set $@BG14,1;
+	initnpctimer;
+	set $@score_deathmatch_blue, 50;
+	set $@score_deathmatch_red, 50;
+	bg_updatescore "bat_b03",$@score_deathmatch_blue,$@score_deathmatch_red;
+	sleep 2100;
+	bg_warp $@BG14_Team1,"bat_b03",328,150;
+	bg_warp $@BG14_Team2,"bat_b03",62,150;
+	sleep 2100;
+	bg_team_reveal $@BG14_Team1;
+	bg_team_reveal $@BG14_Team2;
+	donpcevent "#guitd_respawn::OnBGStart";
+	donpcevent "#crotd_respawn::OnBGStart";
+	end;
+
+OnValidateScore:
+	if ($@BG14 != 1)
+		end;
+	bg_updatescore "bat_b03",$@score_deathmatch_blue,$@score_deathmatch_red;
+	set .@Team1Count, bg_get_data($@BG14_Team1, 0);
+	set .@Team2Count, bg_get_data($@BG14_Team2, 0);
+	.@reward_win = 5;
+	.@reward_lose = 3;
+	// Team 1 Won
+	if ($@score_deathmatch_red <= 0) {
+		callfunc "BG_get_Rewards",$@BG14_Team1,7829,5;
+		callfunc "BG_get_Rewards",$@BG14_Team2,7829,1;
+		callfunc "BG_ranking",$@BG14_Team1,BG_DEATHMATCH,1;
+		callfunc "BG_ranking",$@BG14_Team2,BG_DEATHMATCH,0;
+		mapannounce "bat_b03","The " + bg_get_data($@BG14_Team1,2) + " army has won the Battle of Flavius TD!",1,bg_get_data($@BG14_Team1,4);
+	}
+	// Team 2 Won
+	else if ($@score_deathmatch_blue <= 0) {
+		callfunc "BG_get_Rewards",$@BG14_Team1,7829,1;
+		callfunc "BG_get_Rewards",$@BG14_Team2,7829,5;
+		callfunc "BG_ranking",$@BG14_Team1,BG_DEATHMATCH,0;
+		callfunc "BG_ranking",$@BG14_Team2,BG_DEATHMATCH,1;
+		mapannounce "bat_b03","The " + bg_get_data($@BG14_Team2,2) + " army has won the Battle of Flavius TD!",1,bg_get_data($@BG14_Team2,4);
+	}
+	// All Team 2 Players quit
+	else if (.@Team2Count == 0) {
+		callfunc "BG_get_Rewards",$@BG14_Team1,7829,1;
+		mapannounce "bat_b03","The " + bg_get_data($@BG14_Team1,2) + " army has won the Battle of Flavius TD!",1,bg_get_data($@BG14_Team1,4);
+	}
+	// All Team 1 Players quit
+	else if (.@Team1Count == 0) {
+		callfunc "BG_get_Rewards",$@BG14_Team2,7829,1;
+		mapannounce "bat_b03","The " + bg_get_data($@BG14_Team2,2) + " army has won the Battle of Flavius TD!",1,bg_get_data($@BG14_Team2,4);
+	}
+	else end;
+	donpcevent "Flavius_TD::OnMatchEnd";
+	end;
+
+OnTimer600000:
+	mapannounce "bat_b03","The Battle will ends in 5 minutes!!",1,0x808000;
+	end;
+
+OnTimer840000:
+	mapannounce "bat_b03","The Battle will ends in 1 minute!!",1,0x808000;
+	end;
+
+OnTimer900000:
+	.@reward_win = 5;
+	.@reward_lose = 3;
+	// Team 1 Won
+	if ($@score_deathmatch_blue > $@score_deathmatch_red) {
+		callfunc "BG_get_Rewards",$@BG14_Team1,7829,5;
+		callfunc "BG_get_Rewards",$@BG14_Team2,7829,1;
+		mapannounce "bat_b03","The " + bg_get_data($@BG14_Team1,2) + " army has won the Battle of Flavius TD!",1,bg_get_data($@BG14_Team1,4);
+	}
+	// Team 2 Won
+	else if ($@score_deathmatch_blue < $@score_deathmatch_red) {
+		callfunc "BG_get_Rewards",$@BG14_Team1,7829,1;
+		callfunc "BG_get_Rewards",$@BG14_Team2,7829,5;
+		mapannounce "bat_b03","The " + bg_get_data($@BG14_Team2,2) + " army has won the Battle of Flavius TD!",1,bg_get_data($@BG14_Team2,4);
+	}
+	else {
+		callfunc "BG_get_Rewards",$@BG14_Team1,7829,1;
+		callfunc "BG_get_Rewards",$@BG14_Team2,7829,1;
+		mapannounce "bat_b03","The battle is over. This is a Tie...!",1,0x808000;
+	}
+	donpcevent "Flavius_TD::OnMatchEnd";
+	end;
+
+OnMatchEnd:
+	stopnpctimer;
+	donpcevent "#guitd_respawn::OnBGStop";
+	donpcevent "#crotd_respawn::OnBGStop";
+	set $@BG14, 2;
+	set $@score_deathmatch_blue, 50;
+	set $@score_deathmatch_red, 50;
+	sleep 5000;
+	bg_updatescore "bat_b03",$@score_deathmatch_blue,$@score_deathmatch_red;
+	$@BG14 = 0;
+	mapwarp "bat_b03","bat_room",154,150;
+	if($@BG14_Team1) { bg_destroy $@BG14_Team1; $@BG14_Team1 = 0; }
+	if($@BG14_Team2) { bg_destroy $@BG14_Team2; $@BG14_Team2 = 0; }
+	bg_unbook "bat_b03";
+	end;
+}
+
+// ===========================================================
+// Heal
+// ===========================================================
+bat_b03,390,13,5	duplicate(BGHeal)	Therapist in battle#td1	4_F_SISTER
+bat_b03,10,293,5	duplicate(BGHeal)	Therapist in battle#td2	4_F_SISTER
+
+// ===========================================================
+// Respawn
+// ===========================================================
+bat_b03,390,10,0	script	#guitd_respawn	HIDDEN_WARP_NPC,{
+	end;
+
+OnBGStart:
+	initnpctimer;
+	end;
+
+OnBGStop:
+	stopnpctimer;
+	end;
+
+OnTimer24000:
+	specialeffect 83;
+	end;
+
+OnTimer25000:
+	areapercentheal "bat_b03",382,2,397,17,100,100;
+	areawarp "bat_b03",382,2,397,17,"bat_b03",306,138,327,161;
+	initnpctimer;
+	end;
+}
+
+bat_b03,10,290,0	script	#crotd_respawn	HIDDEN_WARP_NPC,{
+	end;
+
+OnBGStart:
+	initnpctimer;
+	end;
+
+OnBGStop:
+	stopnpctimer;
+	end;
+
+OnTimer24000:
+	specialeffect 83;
+	end;
+
+OnTimer25000:
+	areapercentheal "bat_b03",2,282,17,297,100,100;
+	areawarp "bat_b03",2,282,17,297,"bat_b03",72,138,93,161;
+	initnpctimer;
+	end;
+}
+
+// ===========================================================
+// Flags
+// ===========================================================
+bat_b03,304,231,1	duplicate(Base Flag#bg)	Alpha Base#td_1	1_FLAG_LION
+bat_b03,319,231,1	duplicate(Base Flag#bg)	Alpha Base#td_2	1_FLAG_LION
+bat_b03,304,218,1	duplicate(Base Flag#bg)	Alpha Base#td_3	1_FLAG_LION
+bat_b03,319,218,1	duplicate(Base Flag#bg)	Alpha Base#td_4	1_FLAG_LION
+bat_b03,304,231,1	duplicate(Base Flag#bg)	Alpha Base#td_5	1_FLAG_LION
+bat_b03,304,231,1	duplicate(Base Flag#bg)	Alpha Base#td_6	1_FLAG_LION
+bat_b03,335,142,1	duplicate(Base Flag#bg)	Alpha Base#td_7	1_FLAG_LION
+bat_b03,335,157,1	duplicate(Base Flag#bg)	Alpha Base#td_8	1_FLAG_LION
+bat_b03,390,16,1	duplicate(Base Flag#bg)	Alpha Base#td_9	1_FLAG_LION
+bat_b03,292,163,1	duplicate(Base Flag#bg)	Alpha Base#td_10	1_FLAG_LION
+bat_b03,292,136,1	duplicate(Base Flag#bg)	Alpha Base#td_11	1_FLAG_LION
+bat_b03,241,185,1	duplicate(Base Flag#bg)	Alpha Base#td_12	1_FLAG_LION
+bat_b03,247,179,1	duplicate(Base Flag#bg)	Alpha Base#td_13	1_FLAG_LION
+
+bat_b03,96,81,1	duplicate(Base Flag#bg)	Omega Base#td_1	1_FLAG_EAGLE
+bat_b03,96,68,1	duplicate(Base Flag#bg)	Omega Base#td_2	1_FLAG_EAGLE
+bat_b03,79,81,1	duplicate(Base Flag#bg)	Omega Base#td_3	1_FLAG_EAGLE
+bat_b03,79,68,1	duplicate(Base Flag#bg)	Omega Base#td_4	1_FLAG_EAGLE
+bat_b03,96,81,1	duplicate(Base Flag#bg)	Omega Base#td_5	1_FLAG_EAGLE
+bat_b03,96,81,1	duplicate(Base Flag#bg)	Omega Base#td_6	1_FLAG_EAGLE
+bat_b03,59,164,1	duplicate(Base Flag#bg)	Omega Base#td_7	1_FLAG_EAGLE
+bat_b03,59,137,1	duplicate(Base Flag#bg)	Omega Base#td_8	1_FLAG_EAGLE
+bat_b03,10,296,1	duplicate(Base Flag#bg)	Omega Base#td_9	1_FLAG_EAGLE
+bat_b03,110,162,1	duplicate(Base Flag#bg)	Omega Base#td_10	1_FLAG_EAGLE
+bat_b03,110,137,1	duplicate(Base Flag#bg)	Omega Base#td_11	1_FLAG_EAGLE
+bat_b03,152,120,1	duplicate(Base Flag#bg)	Omega Base#td_12	1_FLAG_EAGLE
+bat_b03,158,114,1	duplicate(Base Flag#bg)	Omega Base#td_13	1_FLAG_EAGLE
+
+// ===========================================================
+// Map Flags
+// ===========================================================
+bat_b03	mapflag	battleground	2
+bat_b03	mapflag	nomemo
+bat_b03	mapflag	nosave	SavePoint
+bat_b03	mapflag	noteleport
+bat_b03	mapflag	nowarp
+bat_b03	mapflag	nowarpto
+bat_b03	mapflag	noreturn
+bat_b03	mapflag	nobranch
+bat_b03	mapflag	nopenalty
+bat_b03	mapflag	bg_consume
diff --git a/npc/battleground/bg_flavius_stone_control.txt b/npc/battleground/bg_flavius_stone_control.txt
new file mode 100644
index 000000000..9fc3c8376
--- /dev/null
+++ b/npc/battleground/bg_flavius_stone_control.txt
@@ -0,0 +1,1031 @@
+//===== rAthena Script =======================================
+//= Battleground Extended + : Flavius Stone Control
+//===== By: ==================================================
+//= eAmod / Grenat
+//===== Description: =========================================
+//= Battleground Extended + scripts.
+//===== Additional Comments: =================================
+//= Adaptation for rAthena 2020.
+//= This is a free release.
+//= Please do NOT take ownership.
+//= The original author will always stay eAmod,
+//= It would be a disgrace claiming it's yours and making
+//= money out of it. [Grenat]
+//============================================================
+
+// ===========================================================
+// Configuration
+// ===========================================================
+-	script	Flavius_SC	-1,{
+	end;
+
+OnGuillaumeQuit:
+OnCroixQuit:
+	bg_desert;
+OnGuillaumeDie:
+OnCroixDie:
+	if ($@BG12 == 1 && set(.@Stone,callfunc("SC_StoneCheck",getcharid(0))) > 0) { // Stone Carrier
+		set .Stone[.@Stone],0;
+		getmapxy .@m$, .@x, .@y, BL_PC;
+		movenpc "Neutral Stone#" + .@Stone, .@x, .@y;
+		mapannounce "bat_b04","Neutral Stone Dropped by [ " + strcharinfo(0) + " ]",1,0xFFFFFF;
+		initnpctimer "Neutral Stone#" + .@Stone;
+		deltimer "Flavius_SC::OnFlash";
+		enablenpc "Neutral Stone#" + .@Stone;
+	}
+	end;
+
+OnGuillaumeActive:
+	warp "bat_b04",328,150;
+	end;
+OnCroixActive:
+	warp "bat_b04",62,150;
+	end;
+
+OnReady:
+	set $@BG12,1;
+
+	announce "[Battleground]: Flavius Stone Control has just began ! (@joinbg to join)",bc_all,0xccff00;
+	initnpctimer;
+	set $@score_stonecontrol_blue, 0;
+	set $@score_stonecontrol_red, 0;
+	setarray .Stone[1],0,0,0,0,0,0;
+	setarray .x[1],177,222,222,177,200,199;
+	setarray .y[1],182,182,117,117,105,194;
+	for( set .@i, 1; .@i < 7; set .@i, .@i + 1)
+		donpcevent "Neutral Stone#" + .@i + "::OnBGStart";
+
+	bg_updatescore "bat_b04",$@score_stonecontrol_blue,$@score_stonecontrol_red;
+	sleep 2000;
+	bg_warp $@BG12_Team1,"bat_b04",328,150;
+	bg_warp $@BG12_Team2,"bat_b04",62,150;
+	sleep 2000;
+	donpcevent "#guisc_respawn::OnBGStart";
+	donpcevent "#crosc_respawn::OnBGStart";
+	end;
+
+OnGuillaumeScore:
+	set $@score_stonecontrol_blue, $@score_stonecontrol_blue + 1;
+	donpcevent "Flavius_SC::OnValidateScore";
+	end;
+
+OnCroixScore:
+	set $@score_stonecontrol_red, $@score_stonecontrol_red + 1;
+	donpcevent "Flavius_SC::OnValidateScore";
+	end;
+
+OnValidateScore:
+	if ($@BG12 != 1)
+		end;
+	if ($@score_stonecontrol_blue > 99)
+		set $@score_stonecontrol_blue,99;
+	if ($@score_stonecontrol_red > 99)
+		set $@score_stonecontrol_red,99;
+
+	bg_updatescore "bat_b04",$@score_stonecontrol_blue,$@score_stonecontrol_red;
+	if ($@score_stonecontrol_red >= 99 || $@score_stonecontrol_blue >= 99)
+		donpcevent "Flavius_SC::OnMatchEnd";
+	end;
+
+OnTimer600000:
+	mapannounce "bat_b04","The Battle will end in 5 minutes!!",1,0x9ACD32;
+	end;
+
+OnTimer840000:
+	mapannounce "bat_b04","The Battle will end in 1 minute!!",1,0x9ACD32;
+	end;
+
+OnTimer900000:
+OnMatchEnd:
+	stopnpctimer;
+	donpcevent "#guisc_respawn::OnBGStop";
+	donpcevent "#crosc_respawn::OnBGStop";
+	set $@BG12, 2;
+	// =======================================================
+	// Team Rewards
+	// =======================================================
+	if ($@score_stonecontrol_blue > $@score_stonecontrol_red) { // Guillaume Won
+		callfunc "BG_get_Rewards",$@BG12_Team1,7829,5;
+		callfunc "BG_get_Rewards",$@BG12_Team2,7829,1;
+		callfunc "BG_ranking",$@BG12_Team1,BG_STONECONTROL,1;
+		callfunc "BG_ranking",$@BG12_Team2,BG_STONECONTROL,0;
+		mapannounce "bat_b04","The Guillaume army has won the Battle of Flavius Stone Control!",1,0x0000FF;
+	} else if ($@score_stonecontrol_blue < $@score_stonecontrol_red) { // Croix Won
+		callfunc "BG_get_Rewards",$@BG12_Team1,7829,1;
+		callfunc "BG_get_Rewards",$@BG12_Team2,7829,5;
+		callfunc "BG_ranking",$@BG12_Team1,BG_STONECONTROL,0;
+		callfunc "BG_ranking",$@BG12_Team2,BG_STONECONTROL,1;
+		mapannounce "bat_b04","The Croix army has won the Battle of Flavius Stone Control!",1,0xFF0000;
+	} else {
+		callfunc "BG_get_Rewards",$@BG12_Team1,7829,1;
+		callfunc "BG_get_Rewards",$@BG12_Team2,7829,1;
+		mapannounce "bat_b04","The battle is over. This is a Tie...!",1,0x9ACD32;
+	}
+	// =======================================================
+	set $@score_stonecontrol_blue, 0;
+	set $@score_stonecontrol_red, 0;
+	for( set .@i, 1; .@i < 7; set .@i, .@i + 1) { // Stop Running Timers
+		stopnpctimer "Neutral Stone#" + .@i;
+		stopnpctimer "csp" + .@i; // Croix Stone Point
+		stopnpctimer "gsp" + .@i; // Guillaume Stone Point
+	}
+	sleep 5000;
+	setarray .Stone[1],0,0,0,0,0,0;
+	bg_updatescore "bat_b04",0,0;
+	for( set .@i, 1; .@i < 7; set .@i, .@i + 1) { // Return Stones to Starting Position and Normalize Stone Points
+		donpcevent "Neutral Stone#" + .@i + "::OnBGStop";
+		donpcevent "csp" + .@i + "::OnBGStop";
+		donpcevent "gsp" + .@i + "::OnBGStop";
+	}
+	$@BG12 = 0;
+	mapwarp "bat_b04","bat_room",154,150;
+	if($@BG12_Team1) { bg_destroy $@BG12_Team1; $@BG12_Team1 = 0; }
+	if($@BG12_Team2) { bg_destroy $@BG12_Team2; $@BG12_Team2 = 0; }
+	set $@score_stonecontrol_blue, 0;
+	set $@score_stonecontrol_red, 0;
+	bg_unbook "bat_b04";
+	end;
+
+OnFlash:
+	if ($@BG12 == 1 && set(.@Stone,callfunc("SC_StoneCheck",getcharid(0))) > 0) {
+		getmapxy .@m$, .@x, .@y, BL_PC;
+		if (getcharid(4) == $@BG12_Team1)
+			viewpointmap "bat_b04",1, .@x, .@y, .@Stone, 0x0000FF;
+		else if (getcharid(4) == $@BG12_Team2)
+			viewpointmap "bat_b04",1, .@x, .@y, .@Stone, 0xFF0000;
+		specialeffect(EF_BOWLINGBASH);
+		emotion ET_HELP,getcharid(3);
+		addtimer 2000, "Flavius_SC::OnFlash";
+		percentheal -5,-5;
+	}
+	end;
+}
+
+// ===========================================================
+// Function
+// ===========================================================
+function	script	SC_StoneCheck	{
+	for( set .@i, 1; .@i < 7; set .@i, .@i + 1) {
+		if (getvariableofnpc(.Stone[.@i],"Flavius_SC") == getarg(0))
+			return .@i;
+	}
+	return 0;
+}
+
+// ===========================================================
+// Neutral Stones
+// ===========================================================
+bat_b04,177,182,0	script	Neutral Stone#1	1905,1,1,{
+	unitwalk getcharid(3),getnpcinfo(NPC_X),getnpcinfo(NPC_Y);
+	end;
+
+OnTouch:
+	if ($@BG12 != 1 ||  Hp < 1 || getcharid(4) == 0)
+		end;
+	set .@Stone,atoi(strnpcinfo(2));
+	if (getvariableofnpc(.Stone[.@Stone],"Flavius_SC") != 0)
+		end; // Already Captured
+	if (callfunc("SC_StoneCheck",getcharid(0)) != 0)
+		end; // Already with a Stone
+
+	sc_end SC_HIDING;
+	sc_end SC_CLOAKING;
+	sc_end SC_CHASEWALK;
+	sc_end SC_CLOAKINGEXCEED;
+	sc_end SC_CAMOUFLAGE;
+	sc_end SC__INVISIBILITY;
+
+	setpcblock(PCBLOCK_SKILL|PCBLOCK_USEITEM,true);
+
+	set getvariableofnpc(.Stone[.@Stone],"Flavius_SC"),getcharid(0);
+	addtimer 2000, "Flavius_SC::OnFlash";
+	disablenpc strnpcinfo(0);
+	stopnpctimer;
+	end;
+
+OnBGStart:
+	initnpctimer;
+	end;
+
+OnTimer2000:
+	initnpctimer;
+	getmapxy .@m$, .@x, .@y, BL_NPC;
+	viewpointmap "bat_b04",1, .@x, .@y, atoi(strnpcinfo(2)), 0xFFFFFF;
+	end;
+
+OnBGStop:
+	set .@Stone,atoi(strnpcinfo(2));
+	movenpc strnpcinfo(0),getvariableofnpc(.x[.@Stone],"Flavius_SC"),getvariableofnpc(.y[.@Stone],"Flavius_SC");
+	enablenpc strnpcinfo(0);
+	stopnpctimer;
+	end;
+}
+
+bat_b04,222,182,0	duplicate(Neutral Stone#1)	Neutral Stone#2	1905,1,1
+bat_b04,222,117,0	duplicate(Neutral Stone#1)	Neutral Stone#3	1905,1,1
+bat_b04,177,117,0	duplicate(Neutral Stone#1)	Neutral Stone#4	1905,1,1
+bat_b04,200,105,0	duplicate(Neutral Stone#1)	Neutral Stone#5	1905,1,1
+bat_b04,199,194,0	duplicate(Neutral Stone#1)	Neutral Stone#6	1905,1,1
+
+// ===========================================================
+// Stone Point - Croix Team
+// ===========================================================
+bat_b04,85,159,0	script	Stone Point::csp1	1309,1,1,{
+	unitwalk getcharid(3),getnpcinfo(NPC_X),getnpcinfo(NPC_Y);
+	end;
+
+OnTouch:
+	if ($@BG12 != 1 || Hp < 1)
+		end;
+	if (.Point != 0 && getcharid(4) == $@BG12_Team1 && callfunc("SC_StoneCheck",getcharid(0)) == 0) { // Guillaume Stole
+		set getvariableofnpc(.Stone[.Point],"Flavius_SC"),getcharid(0);
+		setnpcdisplay strnpcinfo(3),"Stone Point",1309;
+
+		sc_end SC_HIDING;
+		sc_end SC_CLOAKING;
+		sc_end SC_CHASEWALK;
+		sc_end SC_CLOAKINGEXCEED;
+		sc_end SC_CAMOUFLAGE;
+		sc_end SC__INVISIBILITY;
+
+		setpcblock(PCBLOCK_SKILL|PCBLOCK_USEITEM,true);
+
+		mapannounce "bat_b04","Croix Stone has been stolen by [ " + strcharinfo(0) + " ]",1,0x0000FF;
+
+		addtimer 2000, "Flavius_SC::OnFlash";
+		set .Point,0;
+		stopnpctimer;
+	} else if (.Point == 0 && getcharid(4) == $@BG12_Team2 && set(.@Stone,callfunc("SC_StoneCheck",getcharid(0))) > 0) { // Check if user got a Stone
+		initnpctimer;
+		set .Point,.@Stone;
+		set .Count, 0;
+		deltimer "Flavius_SC::OnFlash";
+		setpcblock(PCBLOCK_SKILL|PCBLOCK_USEITEM,false);
+		mapannounce "bat_b04","Croix Stone captured by [ " + strcharinfo(0) + " ]",1,0xFF0000;
+		setnpcdisplay strnpcinfo(3),"Croix Stone",1905;
+		set getvariableofnpc(.Stone[.Point],"Flavius_SC"),0;
+	}
+	end;
+
+OnTimer2000:
+	initnpctimer;
+	getmapxy .@m$, .@x, .@y, BL_NPC;
+	viewpointmap "bat_b04",1, .@x, .@y, .Point, 0xFF0000;
+	specialeffect 223;
+	if (set(.Count, .Count + 1) >= 5) {
+		set .Count, 0;
+		donpcevent "Flavius_SC::OnCroixScore";
+	}
+	end;
+
+OnBGStop:
+	stopnpctimer;
+	setnpcdisplay strnpcinfo(3),"Stone Point",1309;
+	set .Point, 0;
+	set .Count, 0;
+	end;
+}
+
+bat_b04,78,159,0	script	Stone Point::csp2	1309,1,1,{
+	unitwalk getcharid(3),getnpcinfo(NPC_X),getnpcinfo(NPC_Y);
+	end;
+
+OnTouch:
+	if ($@BG12 != 1 || Hp < 1)
+		end;
+	if (.Point != 0 && getcharid(4) == $@BG12_Team1 && callfunc("SC_StoneCheck",getcharid(0)) == 0) { // Guillaume Stole
+		set getvariableofnpc(.Stone[.Point],"Flavius_SC"),getcharid(0);
+		setnpcdisplay strnpcinfo(3),"Stone Point",1309;
+
+		sc_end SC_HIDING;
+		sc_end SC_CLOAKING;
+		sc_end SC_CHASEWALK;
+		sc_end SC_CLOAKINGEXCEED;
+		sc_end SC_CAMOUFLAGE;
+		sc_end SC__INVISIBILITY;
+
+		setpcblock(PCBLOCK_SKILL|PCBLOCK_USEITEM,true);
+
+		mapannounce "bat_b04","Croix Stone has been stolen by [ " + strcharinfo(0) + " ]",1,0x0000FF;
+
+		addtimer 2000, "Flavius_SC::OnFlash";
+		set .Point,0;
+		stopnpctimer;
+	} else if (.Point == 0 && getcharid(4) == $@BG12_Team2 && set(.@Stone,callfunc("SC_StoneCheck",getcharid(0))) > 0) { // Check if user got a Stone
+		initnpctimer;
+		set .Point,.@Stone;
+		set .Count, 0;
+		deltimer "Flavius_SC::OnFlash";
+
+		setpcblock(PCBLOCK_SKILL|PCBLOCK_USEITEM,false);
+
+		mapannounce "bat_b04","Croix Stone captured by [ " + strcharinfo(0) + " ]",1,0xFF0000;
+
+		setnpcdisplay strnpcinfo(3),"Croix Stone",1905;
+		set getvariableofnpc(.Stone[.Point],"Flavius_SC"),0;
+	}
+	end;
+
+OnTimer2000:
+	initnpctimer;
+	getmapxy .@m$, .@x, .@y, BL_NPC;
+	viewpointmap "bat_b04",1, .@x, .@y, .Point, 0xFF0000;
+	specialeffect 223;
+	if (set(.Count, .Count + 1) >= 5) {
+		set .Count, 0;
+		donpcevent "Flavius_SC::OnCroixScore";
+	}
+	end;
+
+OnBGStop:
+	stopnpctimer;
+	setnpcdisplay strnpcinfo(3),"Stone Point",1309;
+	set .Point, 0;
+	set .Count, 0;
+	end;
+}
+
+bat_b04,71,159,0	script	Stone Point::csp3	1309,1,1,{
+	unitwalk getcharid(3),getnpcinfo(NPC_X),getnpcinfo(NPC_Y);
+	end;
+
+OnTouch:
+	if ($@BG12 != 1 || Hp < 1)
+		end;
+	if (.Point != 0 && getcharid(4) == $@BG12_Team1 && callfunc("SC_StoneCheck",getcharid(0)) == 0) { // Guillaume Stole
+		set getvariableofnpc(.Stone[.Point],"Flavius_SC"),getcharid(0);
+		setnpcdisplay strnpcinfo(3),"Stone Point",1309;
+
+		sc_end SC_HIDING;
+		sc_end SC_CLOAKING;
+		sc_end SC_CHASEWALK;
+		sc_end SC_CLOAKINGEXCEED;
+		sc_end SC_CAMOUFLAGE;
+		sc_end SC__INVISIBILITY;
+
+		setpcblock(PCBLOCK_SKILL|PCBLOCK_USEITEM,true);
+
+		mapannounce "bat_b04","Croix Stone has been stolen by [ " + strcharinfo(0) + " ]",1,0x0000FF;
+
+		addtimer 2000, "Flavius_SC::OnFlash";
+		set .Point,0;
+		stopnpctimer;
+	} else if (.Point == 0 && getcharid(4) == $@BG12_Team2 && set(.@Stone,callfunc("SC_StoneCheck",getcharid(0))) > 0) { // Check if user got a Stone
+		initnpctimer;
+		set .Point,.@Stone;
+		set .Count, 0;
+		deltimer "Flavius_SC::OnFlash";
+
+		setpcblock(PCBLOCK_SKILL|PCBLOCK_USEITEM,false);
+
+		mapannounce "bat_b04","Croix Stone captured by [ " + strcharinfo(0) + " ]",1,0xFF0000;
+
+		setnpcdisplay strnpcinfo(3),"Croix Stone",1905;
+		set getvariableofnpc(.Stone[.Point],"Flavius_SC"),0;
+	}
+	end;
+
+OnTimer2000:
+	initnpctimer;
+	getmapxy .@m$, .@x, .@y, BL_NPC;
+	viewpointmap "bat_b04",1, .@x, .@y, .Point, 0xFF0000;
+	specialeffect 223;
+	if (set(.Count, .Count + 1) >= 5) {
+		set .Count, 0;
+		donpcevent "Flavius_SC::OnCroixScore";
+	}
+	end;
+
+OnBGStop:
+	stopnpctimer;
+	setnpcdisplay strnpcinfo(3),"Stone Point",1309;
+	set .Point, 0;
+	set .Count, 0;
+	end;
+}
+
+bat_b04,85,140,0	script	Stone Point::csp4	1309,1,1,{
+	unitwalk getcharid(3),getnpcinfo(NPC_X),getnpcinfo(NPC_Y);
+	end;
+
+OnTouch:
+	if ($@BG12 != 1 || Hp < 1)
+		end;
+	if (.Point != 0 && getcharid(4) == $@BG12_Team1 && callfunc("SC_StoneCheck",getcharid(0)) == 0) { // Guillaume Stole
+		set getvariableofnpc(.Stone[.Point],"Flavius_SC"),getcharid(0);
+		setnpcdisplay strnpcinfo(3),"Stone Point",1309;
+
+		sc_end SC_HIDING;
+		sc_end SC_CLOAKING;
+		sc_end SC_CHASEWALK;
+		sc_end SC_CLOAKINGEXCEED;
+		sc_end SC_CAMOUFLAGE;
+		sc_end SC__INVISIBILITY;
+
+		setpcblock(PCBLOCK_SKILL|PCBLOCK_USEITEM,true);
+
+		mapannounce "bat_b04","Croix Stone has been stolen by [ " + strcharinfo(0) + " ]",1,0x0000FF;
+
+		addtimer 2000, "Flavius_SC::OnFlash";
+		set .Point,0;
+		stopnpctimer;
+	} else if (.Point == 0 && getcharid(4) == $@BG12_Team2 && set(.@Stone,callfunc("SC_StoneCheck",getcharid(0))) > 0) { // Check if user got a Stone
+		initnpctimer;
+		set .Point,.@Stone;
+		set .Count, 0;
+		deltimer "Flavius_SC::OnFlash";
+
+		setpcblock(PCBLOCK_SKILL|PCBLOCK_USEITEM,false);
+
+		mapannounce "bat_b04","Croix Stone captured by [ " + strcharinfo(0) + " ]",1,0xFF0000;
+
+		setnpcdisplay strnpcinfo(3),"Croix Stone",1905;
+		set getvariableofnpc(.Stone[.Point],"Flavius_SC"),0;
+	}
+	end;
+
+OnTimer2000:
+	initnpctimer;
+	getmapxy .@m$, .@x, .@y, BL_NPC;
+	viewpointmap "bat_b04",1, .@x, .@y, .Point, 0xFF0000;
+	specialeffect 223;
+	if (set(.Count, .Count + 1) >= 5) {
+		set .Count, 0;
+		donpcevent "Flavius_SC::OnCroixScore";
+	}
+	end;
+
+OnBGStop:
+	stopnpctimer;
+	setnpcdisplay strnpcinfo(3),"Stone Point",1309;
+	set .Point, 0;
+	set .Count, 0;
+	end;
+}
+
+bat_b04,78,140,0	script	Stone Point::csp5	1309,1,1,{
+	unitwalk getcharid(3),getnpcinfo(NPC_X),getnpcinfo(NPC_Y);
+	end;
+
+OnTouch:
+	if ($@BG12 != 1 || Hp < 1)
+		end;
+	if (.Point != 0 && getcharid(4) == $@BG12_Team1 && callfunc("SC_StoneCheck",getcharid(0)) == 0) { // Guillaume Stole
+		set getvariableofnpc(.Stone[.Point],"Flavius_SC"),getcharid(0);
+		setnpcdisplay strnpcinfo(3),"Stone Point",1309;
+
+		sc_end SC_HIDING;
+		sc_end SC_CLOAKING;
+		sc_end SC_CHASEWALK;
+		sc_end SC_CLOAKINGEXCEED;
+		sc_end SC_CAMOUFLAGE;
+		sc_end SC__INVISIBILITY;
+
+		setpcblock(PCBLOCK_SKILL|PCBLOCK_USEITEM,true);
+
+		mapannounce "bat_b04","Croix Stone has been stolen by [ " + strcharinfo(0) + " ]",1,0x0000FF;
+
+		addtimer 2000, "Flavius_SC::OnFlash";
+		set .Point,0;
+		stopnpctimer;
+	} else if (.Point == 0 && getcharid(4) == $@BG12_Team2 && set(.@Stone,callfunc("SC_StoneCheck",getcharid(0))) > 0) { // Check if user got a Stone
+		initnpctimer;
+		set .Point,.@Stone;
+		set .Count, 0;
+		deltimer "Flavius_SC::OnFlash";
+
+		setpcblock(PCBLOCK_SKILL|PCBLOCK_USEITEM,false);
+
+		mapannounce "bat_b04","Croix Stone captured by [ " + strcharinfo(0) + " ]",1,0xFF0000;
+
+		setnpcdisplay strnpcinfo(3),"Croix Stone",1905;
+		set getvariableofnpc(.Stone[.Point],"Flavius_SC"),0;
+	}
+	end;
+
+OnTimer2000:
+	initnpctimer;
+	getmapxy .@m$, .@x, .@y, BL_NPC;
+	viewpointmap "bat_b04",1, .@x, .@y, .Point, 0xFF0000;
+	specialeffect 223;
+	if (set(.Count, .Count + 1) >= 5) {
+		set .Count, 0;
+		donpcevent "Flavius_SC::OnCroixScore";
+	}
+	end;
+
+OnBGStop:
+	stopnpctimer;
+	setnpcdisplay strnpcinfo(3),"Stone Point",1309;
+	set .Point, 0;
+	set .Count, 0;
+	end;
+}
+
+bat_b04,71,140,0	script	Stone Point::csp6	1309,1,1,{
+	unitwalk getcharid(3),getnpcinfo(NPC_X),getnpcinfo(NPC_Y);
+	end;
+
+OnTouch:
+	if ($@BG12 != 1 || Hp < 1)
+		end;
+	if (.Point != 0 && getcharid(4) == $@BG12_Team1 && callfunc("SC_StoneCheck",getcharid(0)) == 0) { // Guillaume Stole
+		set getvariableofnpc(.Stone[.Point],"Flavius_SC"),getcharid(0);
+		setnpcdisplay strnpcinfo(3),"Stone Point",1309;
+
+		sc_end SC_HIDING;
+		sc_end SC_CLOAKING;
+		sc_end SC_CHASEWALK;
+		sc_end SC_CLOAKINGEXCEED;
+		sc_end SC_CAMOUFLAGE;
+		sc_end SC__INVISIBILITY;
+
+		setpcblock(PCBLOCK_SKILL|PCBLOCK_USEITEM,true);
+
+		mapannounce "bat_b04","Croix Stone has been stolen by [ " + strcharinfo(0) + " ]",1,0x0000FF;
+
+		addtimer 2000, "Flavius_SC::OnFlash";
+		set .Point,0;
+		stopnpctimer;
+	} else if (.Point == 0 && getcharid(4) == $@BG12_Team2 && set(.@Stone,callfunc("SC_StoneCheck",getcharid(0))) > 0) { // Check if user got a Stone
+		initnpctimer;
+		set .Point,.@Stone;
+		set .Count, 0;
+		deltimer "Flavius_SC::OnFlash";
+
+		setpcblock(PCBLOCK_SKILL|PCBLOCK_USEITEM,false);
+
+		mapannounce "bat_b04","Croix Stone captured by [ " + strcharinfo(0) + " ]",1,0xFF0000;
+
+		setnpcdisplay strnpcinfo(3),"Croix Stone",1905;
+		set getvariableofnpc(.Stone[.Point],"Flavius_SC"),0;
+	}
+	end;
+
+OnTimer2000:
+	initnpctimer;
+	getmapxy .@m$, .@x, .@y, BL_NPC;
+	viewpointmap "bat_b04",1, .@x, .@y, .Point, 0xFF0000;
+	specialeffect 223;
+	if (set(.Count, .Count + 1) >= 5) {
+		set .Count, 0;
+		donpcevent "Flavius_SC::OnCroixScore";
+	}
+	end;
+
+OnBGStop:
+	stopnpctimer;
+	setnpcdisplay strnpcinfo(3),"Stone Point",1309;
+	set .Point, 0;
+	set .Count, 0;
+	end;
+}
+
+// ===========================================================
+// Stone Point - Guillaume Team
+// ===========================================================
+bat_b04,312,159,0	script	Stone Point::gsp1	1309,1,1,{
+	unitwalk getcharid(3),getnpcinfo(NPC_X),getnpcinfo(NPC_Y);
+	end;
+
+OnTouch:
+	if ($@BG12 != 1 || Hp < 1)
+		end;
+	if (.Point != 0 && getcharid(4) == $@BG12_Team2 && callfunc("SC_StoneCheck",getcharid(0)) == 0) { // Croix Stole
+		set getvariableofnpc(.Stone[.Point],"Flavius_SC"),getcharid(0);
+		setnpcdisplay strnpcinfo(3),"Stone Point",1309;
+
+		sc_end SC_HIDING;
+		sc_end SC_CLOAKING;
+		sc_end SC_CHASEWALK;
+		sc_end SC_CLOAKINGEXCEED;
+		sc_end SC_CAMOUFLAGE;
+		sc_end SC__INVISIBILITY;
+
+		setpcblock(PCBLOCK_SKILL|PCBLOCK_USEITEM,true);
+
+		mapannounce "bat_b04","Guillaume Stone has been stolen by [ " + strcharinfo(0) + " ]",1,0xFF0000;
+
+		addtimer 2000, "Flavius_SC::OnFlash";
+		set .Point,0;
+		stopnpctimer;
+	} else if (.Point == 0 && getcharid(4) == $@BG12_Team1 && set(.@Stone,callfunc("SC_StoneCheck",getcharid(0))) > 0) { // Check if user got a Stone
+		initnpctimer;
+		set .Point,.@Stone;
+		set .Count, 0;
+		deltimer "Flavius_SC::OnFlash";
+
+		setpcblock(PCBLOCK_SKILL|PCBLOCK_USEITEM,false);
+
+		mapannounce "bat_b04","Guillaume Stone captured by [ " + strcharinfo(0) + " ]",1,0x0000FF;
+
+		setnpcdisplay strnpcinfo(3),"Guillaume Stone",1905;
+		set getvariableofnpc(.Stone[.Point],"Flavius_SC"),0;
+	}
+	end;
+
+OnTimer2000:
+	initnpctimer;
+	getmapxy .@m$, .@x, .@y, BL_NPC;
+	viewpointmap "bat_b04",1, .@x, .@y, .Point, 0x0000FF;
+	specialeffect 223;
+	if (set(.Count, .Count + 1) >= 5) {
+		set .Count, 0;
+		donpcevent "Flavius_SC::OnGuillaumeScore";
+	}
+	end;
+
+OnBGStop:
+	stopnpctimer;
+	setnpcdisplay strnpcinfo(3),"Stone Point",1309;
+	set .Point, 0;
+	set .Count, 0;
+	end;
+}
+
+bat_b04,319,159,0	script	Stone Point::gsp2	1309,1,1,{
+	unitwalk getcharid(3),getnpcinfo(NPC_X),getnpcinfo(NPC_Y);
+	end;
+
+OnTouch:
+	if ($@BG12 != 1 || Hp < 1)
+		end;
+	if (.Point != 0 && getcharid(4) == $@BG12_Team2 && callfunc("SC_StoneCheck",getcharid(0)) == 0) { // Croix Stole
+		set getvariableofnpc(.Stone[.Point],"Flavius_SC"),getcharid(0);
+		setnpcdisplay strnpcinfo(3),"Stone Point",1309;
+
+		sc_end SC_HIDING;
+		sc_end SC_CLOAKING;
+		sc_end SC_CHASEWALK;
+		sc_end SC_CLOAKINGEXCEED;
+		sc_end SC_CAMOUFLAGE;
+		sc_end SC__INVISIBILITY;
+
+		setpcblock(PCBLOCK_SKILL|PCBLOCK_USEITEM,true);
+
+		mapannounce "bat_b04","Guillaume Stone has been stolen by [ " + strcharinfo(0) + " ]",1,0xFF0000;
+
+		addtimer 2000, "Flavius_SC::OnFlash";
+		set .Point,0;
+		stopnpctimer;
+	} else if (.Point == 0 && getcharid(4) == $@BG12_Team1 && set(.@Stone,callfunc("SC_StoneCheck",getcharid(0))) > 0) { // Check if user got a Stone
+		initnpctimer;
+		set .Point,.@Stone;
+		set .Count, 0;
+		deltimer "Flavius_SC::OnFlash";
+
+		setpcblock(PCBLOCK_SKILL|PCBLOCK_USEITEM,false);
+
+		mapannounce "bat_b04","Guillaume Stone captured by [ " + strcharinfo(0) + " ]",1,0x0000FF;
+
+		setnpcdisplay strnpcinfo(3),"Guillaume Stone",1905;
+		set getvariableofnpc(.Stone[.Point],"Flavius_SC"),0;
+	}
+	end;
+
+OnTimer2000:
+	initnpctimer;
+	getmapxy .@m$, .@x, .@y, BL_NPC;
+	viewpointmap "bat_b04",1, .@x, .@y, .Point, 0x0000FF;
+	specialeffect 223;
+	if (set(.Count, .Count + 1) >= 5) {
+		set .Count, 0;
+		donpcevent "Flavius_SC::OnGuillaumeScore";
+	}
+	end;
+
+OnBGStop:
+	stopnpctimer;
+	setnpcdisplay strnpcinfo(3),"Stone Point",1309;
+	set .Point, 0;
+	set .Count, 0;
+	end;
+}
+
+bat_b04,326,159,0	script	Stone Point::gsp3	1309,1,1,{
+	unitwalk getcharid(3),getnpcinfo(NPC_X),getnpcinfo(NPC_Y);
+	end;
+
+OnTouch:
+	if ($@BG12 != 1 || Hp < 1)
+		end;
+	if (.Point != 0 && getcharid(4) == $@BG12_Team2 && callfunc("SC_StoneCheck",getcharid(0)) == 0) { // Croix Stole
+		set getvariableofnpc(.Stone[.Point],"Flavius_SC"),getcharid(0);
+		setnpcdisplay strnpcinfo(3),"Stone Point",1309;
+
+		sc_end SC_HIDING;
+		sc_end SC_CLOAKING;
+		sc_end SC_CHASEWALK;
+		sc_end SC_CLOAKINGEXCEED;
+		sc_end SC_CAMOUFLAGE;
+		sc_end SC__INVISIBILITY;
+
+		setpcblock(PCBLOCK_SKILL|PCBLOCK_USEITEM,true);
+
+		mapannounce "bat_b04","Guillaume Stone has been stolen by [ " + strcharinfo(0) + " ]",1,0xFF0000;
+
+		addtimer 2000, "Flavius_SC::OnFlash";
+		set .Point,0;
+		stopnpctimer;
+	} else if (.Point == 0 && getcharid(4) == $@BG12_Team1 && set(.@Stone,callfunc("SC_StoneCheck",getcharid(0))) > 0) { // Check if user got a Stone
+		initnpctimer;
+		set .Point,.@Stone;
+		set .Count, 0;
+		deltimer "Flavius_SC::OnFlash";
+
+		setpcblock(PCBLOCK_SKILL|PCBLOCK_USEITEM,false);
+
+		mapannounce "bat_b04","Guillaume Stone captured by [ " + strcharinfo(0) + " ]",1,0x0000FF;
+
+		setnpcdisplay strnpcinfo(3),"Guillaume Stone",1905;
+		set getvariableofnpc(.Stone[.Point],"Flavius_SC"),0;
+	}
+	end;
+
+OnTimer2000:
+	initnpctimer;
+	getmapxy .@m$, .@x, .@y, BL_NPC;
+	viewpointmap "bat_b04",1, .@x, .@y, .Point, 0x0000FF;
+	specialeffect 223;
+	if (set(.Count, .Count + 1) >= 5) {
+		set .Count, 0;
+		donpcevent "Flavius_SC::OnGuillaumeScore";
+	}
+	end;
+
+OnBGStop:
+	stopnpctimer;
+	setnpcdisplay strnpcinfo(3),"Stone Point",1309;
+	set .Point, 0;
+	set .Count, 0;
+	end;
+}
+
+bat_b04,312,140,0	script	Stone Point::gsp4	1309,1,1,{
+	unitwalk getcharid(3),getnpcinfo(NPC_X),getnpcinfo(NPC_Y);
+	end;
+
+OnTouch:
+	if ($@BG12 != 1 || Hp < 1)
+		end;
+	if (.Point != 0 && getcharid(4) == $@BG12_Team2 && callfunc("SC_StoneCheck",getcharid(0)) == 0) { // Croix Stole
+		set getvariableofnpc(.Stone[.Point],"Flavius_SC"),getcharid(0);
+		setnpcdisplay strnpcinfo(3),"Stone Point",1309;
+
+		sc_end SC_HIDING;
+		sc_end SC_CLOAKING;
+		sc_end SC_CHASEWALK;
+		sc_end SC_CLOAKINGEXCEED;
+		sc_end SC_CAMOUFLAGE;
+		sc_end SC__INVISIBILITY;
+
+		setpcblock(PCBLOCK_SKILL|PCBLOCK_USEITEM,true);
+
+		mapannounce "bat_b04","Guillaume Stone has been stolen by [ " + strcharinfo(0) + " ]",1,0xFF0000;
+
+		addtimer 2000, "Flavius_SC::OnFlash";
+		set .Point,0;
+		stopnpctimer;
+	} else if (.Point == 0 && getcharid(4) == $@BG12_Team1 && set(.@Stone,callfunc("SC_StoneCheck",getcharid(0))) > 0) { // Check if user got a Stone
+		initnpctimer;
+		set .Point,.@Stone;
+		set .Count, 0;
+		deltimer "Flavius_SC::OnFlash";
+
+		setpcblock(PCBLOCK_SKILL|PCBLOCK_USEITEM,false);
+
+		mapannounce "bat_b04","Guillaume Stone captured by [ " + strcharinfo(0) + " ]",1,0x0000FF;
+
+		setnpcdisplay strnpcinfo(3),"Guillaume Stone",1905;
+		set getvariableofnpc(.Stone[.Point],"Flavius_SC"),0;
+	}
+	end;
+
+OnTimer2000:
+	initnpctimer;
+	getmapxy .@m$, .@x, .@y, BL_NPC;
+	viewpointmap "bat_b04",1, .@x, .@y, .Point, 0x0000FF;
+	specialeffect 223;
+	if (set(.Count, .Count + 1) >= 5) {
+		set .Count, 0;
+		donpcevent "Flavius_SC::OnGuillaumeScore";
+	}
+	end;
+
+OnBGStop:
+	stopnpctimer;
+	setnpcdisplay strnpcinfo(3),"Stone Point",1309;
+	set .Point, 0;
+	set .Count, 0;
+	end;
+}
+
+bat_b04,319,140,0	script	Stone Point::gsp5	1309,1,1,{
+	unitwalk getcharid(3),getnpcinfo(NPC_X),getnpcinfo(NPC_Y);
+	end;
+
+OnTouch:
+	if ($@BG12 != 1 || Hp < 1)
+		end;
+	if (.Point != 0 && getcharid(4) == $@BG12_Team2 && callfunc("SC_StoneCheck",getcharid(0)) == 0) { // Croix Stole
+		set getvariableofnpc(.Stone[.Point],"Flavius_SC"),getcharid(0);
+		setnpcdisplay strnpcinfo(3),"Stone Point",1309;
+
+		sc_end SC_HIDING;
+		sc_end SC_CLOAKING;
+		sc_end SC_CHASEWALK;
+		sc_end SC_CLOAKINGEXCEED;
+		sc_end SC_CAMOUFLAGE;
+		sc_end SC__INVISIBILITY;
+
+		setpcblock(PCBLOCK_SKILL|PCBLOCK_USEITEM,true);
+
+		mapannounce "bat_b04","Guillaume Stone has been stolen by [ " + strcharinfo(0) + " ]",1,0xFF0000;
+
+		addtimer 2000, "Flavius_SC::OnFlash";
+		set .Point,0;
+		stopnpctimer;
+	} else if (.Point == 0 && getcharid(4) == $@BG12_Team1 && set(.@Stone,callfunc("SC_StoneCheck",getcharid(0))) > 0) { // Check if user got a Stone
+		initnpctimer;
+		set .Point,.@Stone;
+		set .Count, 0;
+		deltimer "Flavius_SC::OnFlash";
+
+		setpcblock(PCBLOCK_SKILL|PCBLOCK_USEITEM,false);
+
+		mapannounce "bat_b04","Guillaume Stone captured by [ " + strcharinfo(0) + " ]",1,0x0000FF;
+
+		setnpcdisplay strnpcinfo(3),"Guillaume Stone",1905;
+		set getvariableofnpc(.Stone[.Point],"Flavius_SC"),0;
+	}
+	end;
+
+OnTimer2000:
+	initnpctimer;
+	getmapxy .@m$, .@x, .@y, BL_NPC;
+	viewpointmap "bat_b04",1, .@x, .@y, .Point, 0x0000FF;
+	specialeffect 223;
+	if (set(.Count, .Count + 1) >= 5) {
+		set .Count, 0;
+		donpcevent "Flavius_SC::OnGuillaumeScore";
+	}
+	end;
+
+OnBGStop:
+	stopnpctimer;
+	setnpcdisplay strnpcinfo(3),"Stone Point",1309;
+	set .Point, 0;
+	set .Count, 0;
+	end;
+}
+
+bat_b04,326,140,0	script	Stone Point::gsp6	1309,1,1,{
+	unitwalk getcharid(3),getnpcinfo(NPC_X),getnpcinfo(NPC_Y);
+	end;
+
+OnTouch:
+	if ($@BG12 != 1 || Hp < 1)
+		end;
+	if (.Point != 0 && getcharid(4) == $@BG12_Team2 && callfunc("SC_StoneCheck",getcharid(0)) == 0) { // Croix Stole
+		set getvariableofnpc(.Stone[.Point],"Flavius_SC"),getcharid(0);
+		setnpcdisplay strnpcinfo(3),"Stone Point",1309;
+
+		sc_end SC_HIDING;
+		sc_end SC_CLOAKING;
+		sc_end SC_CHASEWALK;
+		sc_end SC_CLOAKINGEXCEED;
+		sc_end SC_CAMOUFLAGE;
+		sc_end SC__INVISIBILITY;
+
+		setpcblock(PCBLOCK_SKILL|PCBLOCK_USEITEM,true);
+
+		mapannounce "bat_b04","Guillaume Stone has been stolen by [ " + strcharinfo(0) + " ]",1,0xFF0000;
+
+		addtimer 2000, "Flavius_SC::OnFlash";
+		set .Point,0;
+		stopnpctimer;
+	} else if (.Point == 0 && getcharid(4) == $@BG12_Team1 && set(.@Stone,callfunc("SC_StoneCheck",getcharid(0))) > 0) { // Check if user got a Stone
+		initnpctimer;
+		set .Point,.@Stone;
+		set .Count, 0;
+		deltimer "Flavius_SC::OnFlash";
+
+		setpcblock(PCBLOCK_SKILL|PCBLOCK_USEITEM,false);
+
+		mapannounce "bat_b04","Guillaume Stone captured by [ " + strcharinfo(0) + " ]",1,0x0000FF;
+
+		setnpcdisplay strnpcinfo(3),"Guillaume Stone",1905;
+		set getvariableofnpc(.Stone[.Point],"Flavius_SC"),0;
+	}
+	end;
+
+OnTimer2000:
+	initnpctimer;
+	getmapxy .@m$, .@x, .@y, BL_NPC;
+	viewpointmap "bat_b04",1, .@x, .@y, .Point, 0x0000FF;
+	specialeffect 223;
+	if (set(.Count, .Count + 1) >= 5) {
+		set .Count, 0;
+		donpcevent "Flavius_SC::OnGuillaumeScore";
+	}
+	end;
+
+OnBGStop:
+	stopnpctimer;
+	setnpcdisplay strnpcinfo(3),"Stone Point",1309;
+	set .Point, 0;
+	set .Count, 0;
+	end;
+}
+
+// ===========================================================
+// Battleground Respawn
+// ===========================================================
+bat_b04,390,10,0	script	#guisc_respawn	HIDDEN_WARP_NPC,{
+	end;
+
+OnBGStart:
+	initnpctimer;
+	end;
+
+OnBGStop:
+	stopnpctimer;
+	end;
+
+OnTimer24000:
+	specialeffect(EF_SANCTUARY);
+	end;
+
+OnTimer25000:
+	areapercentheal "bat_b04",382,2,397,17,100,100;
+	areawarp "bat_b04",382,2,397,17,"bat_b04",311,224;
+	initnpctimer;
+	end;
+}
+
+bat_b04,10,290,0	script	#crosc_respawn	HIDDEN_WARP_NPC,{
+	end;
+
+OnBGStart:
+	initnpctimer;
+	end;
+
+OnBGStop:
+	stopnpctimer;
+	end;
+
+OnTimer24000:
+	specialeffect(EF_SANCTUARY);
+	end;
+
+OnTimer25000:
+	areapercentheal "bat_b04",2,282,17,297,100,100;
+	areawarp "bat_b04",2,282,17,297,"bat_b04",87,75;
+	initnpctimer;
+	end;
+}
+
+// ===========================================================
+// Flags
+// ===========================================================
+bat_b04,304,231,1	duplicate(Base Flag#bg)	Alpha Base#sc_1	973
+bat_b04,319,231,1	duplicate(Base Flag#bg)	Alpha Base#sc_2	973
+bat_b04,304,218,1	duplicate(Base Flag#bg)	Alpha Base#sc_3	973
+bat_b04,319,218,1	duplicate(Base Flag#bg)	Alpha Base#sc_4	973
+bat_b04,304,231,1	duplicate(Base Flag#bg)	Alpha Base#sc_5	973
+bat_b04,304,231,1	duplicate(Base Flag#bg)	Alpha Base#sc_6	973
+bat_b04,335,142,1	duplicate(Base Flag#bg)	Alpha Base#sc_7	973
+bat_b04,335,157,1	duplicate(Base Flag#bg)	Alpha Base#sc_8	973
+bat_b04,390,16,1	duplicate(Base Flag#bg)	Alpha Base#sc_9	973
+bat_b04,292,163,1	duplicate(Base Flag#bg)	Alpha Base#sc_10	973
+bat_b04,292,136,1	duplicate(Base Flag#bg)	Alpha Base#sc_11	973
+bat_b04,241,185,1	duplicate(Base Flag#bg)	Alpha Base#sc_12	973
+bat_b04,247,179,1	duplicate(Base Flag#bg)	Alpha Base#sc_13	973
+
+bat_b04,96,81,1	duplicate(Base Flag#bg)	Omega Base#sc_1	974
+bat_b04,96,68,1	duplicate(Base Flag#bg)	Omega Base#sc_2	974
+bat_b04,79,81,1	duplicate(Base Flag#bg)	Omega Base#sc_3	974
+bat_b04,79,68,1	duplicate(Base Flag#bg)	Omega Base#sc_4	974
+bat_b04,96,81,1	duplicate(Base Flag#bg)	Omega Base#sc_5	974
+bat_b04,96,81,1	duplicate(Base Flag#bg)	Omega Base#sc_6	974
+bat_b04,59,164,1	duplicate(Base Flag#bg)	Omega Base#sc_7	974
+bat_b04,59,137,1	duplicate(Base Flag#bg)	Omega Base#sc_8	974
+bat_b04,10,296,1	duplicate(Base Flag#bg)	Omega Base#sc_9	974
+bat_b04,110,162,1	duplicate(Base Flag#bg)	Omega Base#sc_10	974
+bat_b04,110,137,1	duplicate(Base Flag#bg)	Omega Base#sc_11	974
+bat_b04,152,120,1	duplicate(Base Flag#bg)	Omega Base#sc_12	974
+bat_b04,158,114,1	duplicate(Base Flag#bg)	Omega Base#sc_13	974
+
+// ===========================================================
+// Map Flags
+// ===========================================================
+bat_b04	mapflag	battleground	2
+bat_b04	mapflag	nomemo
+bat_b04	mapflag	nosave	SavePoint
+bat_b04	mapflag	noteleport
+bat_b04	mapflag	nowarp
+bat_b04	mapflag	nowarpto
+bat_b04	mapflag	noreturn
+bat_b04	mapflag	nobranch
+bat_b04	mapflag	nopenalty
+bat_b04	mapflag	noecall
\ No newline at end of file
diff --git a/npc/battleground/bg_offi_flavius.txt b/npc/battleground/bg_offi_flavius.txt
new file mode 100644
index 000000000..74a3be178
--- /dev/null
+++ b/npc/battleground/bg_offi_flavius.txt
@@ -0,0 +1,624 @@
+//===== rAthena Script =======================================
+//= BattleGround System - Flavius
+//===== Description: =========================================
+//= [Official Conversion]
+//= Flavius Battleground.
+//= - Winning Team: 9 badges (11 if VIP)
+//= - Losing Team: 3 badges (5 if VIP)
+//===== Changelogs: ==========================================
+//= 1.0 First Version. [L0ne_W0lf]
+//= 1.1 Fixed pink crystal spawning as blue. [L0ne_W0lf]
+//= 1.2 Updated 'waitingroom' to support required zeny/lvl. [Kisuka]
+//= 1.3 Removed MaxLvl check in waitingrooms. Replaced setwall with setcell.
+//= 1.4 Label standardization. [Euphy]
+//= 1.5 Added GM management function. [Euphy]
+//= 1.6 Added VIP features and created a reward function. [Euphy]
+//= 1.7 Made Crystals immune to attacks until Guardians are defeated. [Cydh/Aleos]
+//= 1.8 Added battle_config checks to allow this script to use the new queue interface or the previous method. [Aleos]
+//============================================================
+
+// Waiting Room NPCs
+//============================================================
+bat_room,86,227,4	script	Lieutenant Ator	418,{
+	end;
+OnInit:
+	waitingroom "Battle Station",11,"start#bat_b01::OnReadyCheck",1,0,80;
+	end;
+OnEnterBG:
+	set $@FlaviusBG1_id1, waitingroom2bg("bat_b01",10,290,"start#bat_b01::OnGuillaumeQuit","");
+	end;
+}
+
+bat_room,85,204,0	script	Lieutenant Thelokus	414,{
+	end;
+OnInit:
+	waitingroom "Battle Station",11,"start#bat_b01::OnReadyCheck",1,0,80;
+	end;
+OnEnterBG:
+	set $@FlaviusBG1_id2, waitingroom2bg("bat_b01",390,10,"start#bat_b01::OnCroixQuit","");
+	end;
+}
+
+bat_room,85,220,0	warp	back_bgroomb01a	1,1,bat_room,154,150
+bat_room,85,211,0	warp	back_bgroomb01b	1,1,bat_room,154,150
+
+bat_room,2,151,3	script	#bat_b01_timer	844,{
+	end;
+
+OnInit:
+	if (getbattleflag("feature.bgqueue"))
+		end;
+OnEnable:
+	initnpctimer;
+	end;
+
+OnStop:
+	stopnpctimer;
+	end;
+
+OnTimer1000:
+	stopnpctimer;
+	if (bg_get_data($@FlaviusBG1_id1, 0) == 0 && bg_get_data($@FlaviusBG1_id2, 0) == 0) {
+		donpcevent "countdown#bat_b01::OnStop";
+		if (getbattleflag("feature.bgqueue"))
+			bg_reserve "bat_b01", true;
+		$@FlaviusBG1 = 0;
+		if( $@FlaviusBG1_id1 ) { bg_destroy $@FlaviusBG1_id1; $@FlaviusBG1_id1 = 0; }
+		if( $@FlaviusBG1_id2 ) { bg_destroy $@FlaviusBG1_id2; $@FlaviusBG1_id2 = 0; }
+		if (getbattleflag("feature.bgqueue"))
+			bg_unbook "bat_b01";
+		end;
+	}
+	initnpctimer;
+	end;
+}
+
+// Flavius Battleground Engine
+//============================================================
+bat_b01,15,15,3	script	start#bat_b01	844,{
+OnInit:
+	mapwarp "bat_b01","bat_room",154,150;
+	end;
+
+OnReadyCheck:
+	if( $@FlaviusBG1 )
+		end;
+	if (!getbattleflag("feature.bgqueue")) {
+		set .@Guillaume, getwaitingroomstate(0,"Lieutenant Ator");
+		set .@Croix, getwaitingroomstate(0,"Lieutenant Thelokus");
+		if( !.@Guillaume && !.@Croix ) {
+			donpcevent "#bat_b01_timer::OnStop";
+			end;
+		}
+		if( .@Guillaume < 10 || .@Croix < 10 )
+			end;
+	}
+	set $@FlaviusBG1, 1;
+	set $@FlaviusBG1_Victory, 0;
+	set $@Croix_ScoreBG1, 0;
+	set $@Guill_ScoreBG1, 0;
+	bg_updatescore "bat_b01",$@Guill_ScoreBG1,$@Croix_ScoreBG1;
+
+	if (!getbattleflag("feature.bgqueue")) {
+		donpcevent "Lieutenant Ator::OnEnterBG";
+		donpcevent "Lieutenant Thelokus::OnEnterBG";
+	}
+	donpcevent "OBJ#bat_b01_a::OnKill";
+	donpcevent "OBJ#bat_b01_a::OnEnable";
+	donpcevent "OBJ#bat_b01_b::OnKill";
+	donpcevent "OBJ#bat_b01_b::OnEnable";
+	donpcevent "guardian#bat_b01_a::OnKill";
+	donpcevent "guardian#bat_b01_b::OnKill";
+	donpcevent "guardian#bat_b01_a::OnEnable";
+	donpcevent "guardian#bat_b01_b::OnEnable";
+	donpcevent "cell#bat_b01_a::OnRed";
+	donpcevent "cell#bat_b01_b::OnRed";
+	donpcevent "time#bat_b01::OnEnable";
+	disablenpc "Guillaume Vintenar#b01_a";
+	disablenpc "Croix Vintenar#b01_b";
+	disablenpc "Vintenar#bat_b01_aover";
+	disablenpc "Vintenar#bat_b01_bover";
+	bg_warp $@FlaviusBG1_id1,"bat_b01",87,75;
+	bg_warp $@FlaviusBG1_id2,"bat_b01",311,224;
+	donpcevent "countdown#bat_b01::OnEnable";
+	initnpctimer;
+	end;
+
+OnReset:
+	donpcevent "OBJ#bat_b01_a::OnKill";
+	donpcevent "OBJ#bat_b01_a::OnEnable";
+	donpcevent "OBJ#bat_b01_b::OnKill";
+	donpcevent "OBJ#bat_b01_b::OnEnable";
+	donpcevent "guardian#bat_b01_a::OnKill";
+	donpcevent "guardian#bat_b01_b::OnKill";
+	donpcevent "guardian#bat_b01_a::OnEnable";
+	donpcevent "guardian#bat_b01_b::OnEnable";
+	donpcevent "cell#bat_b01_a::OnRed";
+	donpcevent "cell#bat_b01_b::OnRed";
+	end;
+
+OnGuillaumeActive:
+	warp "bat_b01",87,75;
+	end;
+
+OnCroixActive:
+	warp "bat_b01",311,224;
+	end;
+
+OnGuillaumeQuit:
+OnCroixQuit:
+	if (getbattleflag("feature.bgqueue"))
+		bg_desert;
+	else
+		bg_leave;
+	end;
+
+OnTimer10000:
+	stopnpctimer;
+	donpcevent "#bat_b01_timer::OnEnable";
+	end;
+}
+
+bat_b01,1,1,3	script	OBJ#bat_b01_a	844,{
+OnEnable:
+	$@FlavBG1_C1_ID = bg_monster($@FlaviusBG1_id1,"bat_b01",61,150,"Pink Crystal",1915,"OBJ#bat_b01_a::OnMyMobDead");
+	setunitdata $@FlavBG1_C1_ID,UMOB_DMGIMMUNE,1; // Make Crystal immune to damage until Guardians are defeated
+	end;
+
+OnKill:
+	killmonster "bat_b01","OBJ#bat_b01_a::OnMyMobDead";
+	end;
+
+OnMyMobDead:
+	if (mobcount("bat_b01","OBJ#bat_b01_a::OnMyMobDead") < 1) {
+		mapannounce "bat_b01", "Guillaume's Crystal has been destroyed.",bc_map,"0xFFCE00";
+		if ($@Croix_ScoreBG1 > 0) {
+			set $@FlaviusBG1_Victory,2;
+			set $@Croix_ScoreBG1,$@Croix_ScoreBG1+1;
+			enablenpc "Guillaume Vintenar#b01_a";
+			enablenpc "Croix Vintenar#b01_b";
+			donpcevent "time#bat_b01::OnStop";
+			if (getbattleflag("feature.bgqueue"))
+				bg_reserve "bat_b01", true;
+		}
+		else {
+			set $@Croix_ScoreBG1,1;
+			donpcevent "time#bat_b01::OnEnable";
+			donpcevent "start#bat_b01::OnReset";
+		}
+		donpcevent "#bat_b01_timer::OnStop";
+		bg_updatescore "bat_b01",$@Guill_ScoreBG1,$@Croix_ScoreBG1;
+		bg_warp $@FlaviusBG1_id1,"bat_b01",10,290;
+		bg_warp $@FlaviusBG1_id2,"bat_b01",390,10;
+		donpcevent "#bat_b01_timer::OnEnable";
+	}
+	end;
+}
+
+bat_b01,1,2,3	script	OBJ#bat_b01_b	844,{
+OnEnable:
+	$@FlavBG1_C2_ID = bg_monster($@FlaviusBG1_id2,"bat_b01",328,150,"Blue Crystal",1914,"OBJ#bat_b01_b::OnMyMobDead");
+	setunitdata $@FlavBG1_C2_ID,UMOB_DMGIMMUNE,1; // Make Crystal immune to damage until Guardians are defeated
+	end;
+
+OnKill:
+	killmonster "bat_b01","OBJ#bat_b01_b::OnMyMobDead";
+	end;
+
+OnMyMobDead:
+	if (mobcount("bat_b01","OBJ#bat_b01_b::OnMyMobDead") < 1) {
+		mapannounce "bat_b01", "Croix's Crystal has been destroyed.",bc_map,"0xFFCE00";
+		if ($@Guill_ScoreBG1 > 0) {
+			set $@FlaviusBG1_Victory,1;
+			set $@Guill_ScoreBG1,$@Guill_ScoreBG1+1;
+			enablenpc "Guillaume Vintenar#b01_a";
+			enablenpc "Croix Vintenar#b01_b";
+			donpcevent "time#bat_b01::OnStop";
+			if (getbattleflag("feature.bgqueue"))
+				bg_reserve "bat_b01", true;
+		}
+		else {
+			set $@Guill_ScoreBG1,1;
+			donpcevent "time#bat_b01::OnEnable";
+			donpcevent "start#bat_b01::OnReset";
+		}
+		donpcevent "#bat_b01_timer::OnStop";
+		bg_updatescore "bat_b01",$@Guill_ScoreBG1,$@Croix_ScoreBG1;
+		bg_warp $@FlaviusBG1_id1,"bat_b01",10,290;
+		bg_warp $@FlaviusBG1_id2,"bat_b01",390,10;
+		donpcevent "#bat_b01_timer::OnEnable";
+	}
+	end;
+}
+
+bat_b01,1,3,3	script	guardian#bat_b01_a	844,{
+OnEnable:
+	bg_monster $@FlaviusBG1_id1,"bat_b01",108,159,"Guillaume Camp Guardian",1949,"guardian#bat_b01_a::OnMyMobDead";
+	bg_monster $@FlaviusBG1_id1,"bat_b01",108,141,"Guillaume Camp Guardian",1949,"guardian#bat_b01_a::OnMyMobDead";
+	end;
+
+OnKill:
+	killmonster "bat_b01","guardian#bat_b01_a::OnMyMobDead";
+	end;
+
+OnMyMobDead:
+	if (mobcount("bat_b01","guardian#bat_b01_a::OnMyMobDead") < 1) {
+		donpcevent "cell#bat_b01_a::OnGreen";
+		mapannounce "bat_b01", "The Guardian protecting Guillaume's Crystal has been slain.",bc_map,"0xFFCE00";
+		setunitdata $@FlavBG1_C1_ID,UMOB_DMGIMMUNE,0; // Make Crystal damageable again
+	}
+	end;
+}
+
+bat_b01,1,3,3	script	guardian#bat_b01_b	844,{
+OnEnable:
+	bg_monster $@FlaviusBG1_id2,"bat_b01",307,160,"Croix Camp Guardian",1949,"guardian#bat_b01_b::OnMyMobDead";
+	bg_monster $@FlaviusBG1_id2,"bat_b01",307,138,"Croix Camp Guardian",1949,"guardian#bat_b01_b::OnMyMobDead";
+	end;
+
+OnKill:
+	killmonster "bat_b01","guardian#bat_b01_b::OnMyMobDead";
+	end;
+
+OnMyMobDead:
+	if (mobcount("bat_b01","guardian#bat_b01_b::OnMyMobDead") < 1) {
+		donpcevent "cell#bat_b01_b::OnGreen";
+		mapannounce "bat_b01", "The Guardian protecting Croix's Crystal has been slain.",bc_map,"0xFFCE00";
+		setunitdata $@FlavBG1_C2_ID,UMOB_DMGIMMUNE,0; // Make Crystal damageable again
+	}
+	end;
+}
+
+bat_b01,1,4,3	script	cell#bat_b01_a	844,{
+OnRed:
+	setcell "bat_b01",62,149,60,151,cell_basilica,1;
+	setcell "bat_b01",62,149,60,151,cell_walkable,0;
+	end;
+
+OnGreen:
+	setcell "bat_b01",62,149,60,151,cell_basilica,0;
+	setcell "bat_b01",62,149,60,151,cell_walkable,1;
+	end;
+}
+
+bat_b01,1,5,3	script	cell#bat_b01_b	844,{
+OnRed:
+	setcell "bat_b01",327,151,329,149,cell_basilica,1;
+	setcell "bat_b01",327,151,329,149,cell_walkable,0;
+	end;
+
+OnGreen:
+	setcell "bat_b01",327,151,329,149,cell_basilica,0;
+	setcell "bat_b01",327,151,329,149,cell_walkable,1;
+	end;
+}
+
+bat_b01,1,6,1	script	time#bat_b01	844,{
+OnEnable:
+	donpcevent "Battle Therapist#b01_a::OnEnable";
+	donpcevent "Battle Therapist#b01_b::OnEnable";
+	end;
+
+OnStop:
+	donpcevent "Battle Therapist#b01_a::OnStop";
+	donpcevent "Battle Therapist#b01_b::OnStop";
+	end;
+}
+
+bat_b01,10,294,3	script	Battle Therapist#b01_a	95,{
+	specialeffect2 EF_HEAL;
+	mes "[Battle Therapist]";
+	mes "Just close your eyes,";
+	mes "and take a deep breath.";
+	mes "You can be free from pain.";
+	close;
+
+OnTimer25000:
+	specialeffect EF_SANCTUARY;
+	// enablenpc "bat_b01_rp1_a_warp";
+	areapercentheal "bat_b01",0,280,20,300,100,100;
+	areawarp "bat_b01",0,280,20,300,"bat_b01",87,73;
+	end;
+
+// OnTimer26000:
+	// disablenpc "bat_b01_rp1_a_warp";
+	// end;
+
+OnTimer26500:
+	stopnpctimer;
+	donpcevent "Battle Therapist#b01_a::OnEnable";
+	end;
+
+OnEnable:
+	initnpctimer;
+	enablenpc "Battle Therapist#b01_a";
+	end;
+
+OnStop:
+	// disablenpc "bat_b01_rp1_a_warp";
+	disablenpc "Battle Therapist#b01_a";
+	stopnpctimer;
+	end;
+}
+
+/*
+// replaced by areapercentheal and areawarp to prevent enqueue issue
+bat_b01,10,290,0	script	bat_b01_rp1_a_warp	45,10,10,{
+OnInit:
+	disablenpc "bat_b01_rp1_a_warp";
+	end;
+
+OnTouch:
+	percentheal 100,100;
+	warp "bat_b01",87,73;
+	end;
+}
+*/
+
+bat_b01,389,14,3	script	Battle Therapist#b01_b	95,{
+	specialeffect2 EF_HEAL;
+	mes "[Battle Therapist]";
+	mes "Just close your eyes,";
+	mes "and take a deep breath.";
+	mes "You can be free from pain.";
+	close;
+
+OnTimer25000:
+	specialeffect EF_SANCTUARY;
+	// enablenpc "bat_b01_rp1_b_warp";
+	areapercentheal "bat_b01",379,0,399,20,100,100;
+	areawarp "bat_b01",379,0,399,20,"bat_b01",312,225;
+	end;
+
+// OnTimer26000:
+	// disablenpc "bat_b01_rp1_b_warp";
+	// end;
+
+OnTimer26500:
+	stopnpctimer;
+	donpcevent "Battle Therapist#b01_b::OnEnable";
+	end;
+
+OnEnable:
+	initnpctimer;
+	enablenpc "Battle Therapist#b01_b";
+	end;
+
+OnStop:
+	// disablenpc "bat_b01_rp1_b_warp";
+	disablenpc "Battle Therapist#b01_b";
+	stopnpctimer;
+	end;
+}
+
+/*
+bat_b01,389,10,0	script	bat_b01_rp1_b_warp	45,10,10,{
+OnInit:
+	disablenpc "bat_b01_rp1_b_warp";
+	end;
+
+OnTouch:
+	percentheal 100,100;
+	warp "bat_b01",312,225;
+	end;
+}
+*/
+
+bat_b01,87,76,0	script	A_CODE#bat_b01	-1,5,5,{
+OnTouch:
+	if (checkquest(2070) < 0)
+		setquest 2070;
+	end;
+}
+
+bat_b01,312,224,0	script	B_CODE#bat_b01	-1,5,5,{
+OnTouch:
+	if (checkquest(2070) < 0)
+		setquest 2070;
+	end;
+}
+
+bat_b01,10,294,3	script	Guillaume Vintenar#b01_a	934,{
+	if ($@FlaviusBG1_id1 == getcharid(4)) {
+		if ($@FlaviusBG1_Victory == 1)
+			callfunc "F_BG_Badge",1,"Guillaume","Flavius";
+		else
+			callfunc "F_BG_Badge",0,"Guillaume","Flavius";
+	}
+	bg_leave;
+	if (!getbattleflag("feature.bgqueue"))
+		warp "bat_room",154,150;
+	end;
+
+OnInit:
+	disablenpc "Guillaume Vintenar#b01_a";
+	end;
+}
+
+bat_b01,389,14,3	script	Croix Vintenar#b01_b	934,{
+	if ($@FlaviusBG1_id2 == getcharid(4)) {
+		if ($@FlaviusBG1_Victory == 2)
+			callfunc "F_BG_Badge",1,"Croix","Flavius";
+		else
+			callfunc "F_BG_Badge",0,"Croix","Flavius";
+	}
+	bg_leave;
+	if (!getbattleflag("feature.bgqueue"))
+		warp "bat_room",154,150;
+	end;
+
+OnInit:
+	disablenpc "Croix Vintenar#b01_b";
+	end;
+}
+
+bat_b01,1,5,3	script	countdown#bat_b01	844,{
+OnInit:
+	stopnpctimer;
+	end;
+
+OnEnable:
+	stopnpctimer;
+	initnpctimer;
+	end;
+
+OnStop:
+	stopnpctimer;
+	end;
+
+OnTimer7000:
+	mapannounce "bat_b01", "Guillaume Vintenar Axl Rose : Let's attack to destroy that Crystal!",bc_map,"0xFF9900";
+	end;
+
+OnTimer8000:
+	mapannounce "bat_b01", "Croix Vintenar Swandery : Even though Guillaume is struggling to win against us, the victory is ours. Let's show them our power.",bc_map,"0xFF99CC";
+	end;
+
+OnTimer1800000:
+	mapannounce "bat_b01", "Marollo VII : Guillaume Marollo, Croix Marollo! And their followers!",bc_map,"0x99CC00";
+	end;
+
+OnTimer1803000:
+	mapannounce "bat_b01", "Marollo VII : Both camps are competitive, so it's hard to judge which team is superior.",bc_map,"0x99CC00";
+	end;
+
+OnTimer1808000:
+	mapannounce "bat_b01", "Marollo VII : This battle of Flavian is such a waste of time. I will decide victory and defeat by your progress.",bc_map,"0x99CC00";
+	end;
+
+OnTimer1822000:
+	mapannounce "bat_b01", "Marollo VII : If you can't accept the results, try again in another valley battle!",bc_map,"0x99CC00";
+	end;
+
+OnTimer1825000:
+	mapannounce "bat_b01", "Axl Rose, Swandery : Yes, sir.",bc_map,"0x99CC00";
+	end;
+
+OnTimer1830000:
+	donpcevent "time#bat_b01::OnStop";
+	bg_warp $@FlaviusBG1_id1,"bat_b01",10,290;
+	bg_warp $@FlaviusBG1_id2,"bat_b01",390,10;
+	enablenpc "Vintenar#bat_b01_aover";
+	enablenpc "Vintenar#bat_b01_bover";
+	if (getbattleflag("feature.bgqueue"))
+		bg_reserve "bat_b01", true;
+	end;
+
+OnTimer1900000:
+	mapwarp "bat_b01","bat_room",154,150;
+	donpcevent "countdown#bat_b01::OnStop";
+	end;
+}
+
+bat_b01,81,83,3	script	Guillaume Camp#flag21	973,{ end; }
+bat_b01,94,83,3	script	Guillaume Camp#flag22	973,{ end; }
+bat_b01,81,66,3	script	Guillaume Camp#flag23	973,{ end; }
+bat_b01,94,66,3	script	Guillaume Camp#flag24	973,{ end; }
+bat_b01,139,142,3	script	Guillaume Camp#flag25	973,{ end; }
+bat_b01,139,158,3	script	Guillaume Camp#flag26	973,{ end; }
+bat_b01,110,161,3	script	Guillaume Camp#flag27	973,{ end; }
+bat_b01,110,137,3	script	Guillaume Camp#flag28	973,{ end; }
+bat_b01,63,135,3	script	Guillaume Camp#flag29	973,{ end; }
+bat_b01,63,165,3	script	Guillaume Camp#flag30	973,{ end; }
+bat_b01,10,296,3	script	Guillaume Camp#flag31	973,{ end; }
+
+bat_b01,306,233,3	script	Croix Camp#flag21	974,{ end; }
+bat_b01,317,233,3	script	Croix Camp#flag22	974,{ end; }
+bat_b01,306,216,3	script	Croix Camp#flag23	974,{ end; }
+bat_b01,317,216,3	script	Croix Camp#flag24	974,{ end; }
+bat_b01,257,158,3	script	Croix Camp#flag25	974,{ end; }
+bat_b01,257,141,3	script	Croix Camp#flag26	974,{ end; }
+bat_b01,297,164,3	script	Croix Camp#flag27	974,{ end; }
+bat_b01,297,136,3	script	Croix Camp#flag28	974,{ end; }
+bat_b01,336,161,3	script	Croix Camp#flag29	974,{ end; }
+bat_b01,336,139,3	script	Croix Camp#flag30	974,{ end; }
+bat_b01,389,16,3	script	Croix Camp#flag31	974,{ end; }
+
+bat_b01,10,294,3	script	Vintenar#bat_b01_aover	419,{
+	set .@A_B_gap,$@Guill_ScoreBG1 - $@Croix_ScoreBG1;
+	if ($@FlaviusBG1_id1 == getcharid(4)) {
+		if (.@A_B_gap > 0)
+			callfunc "F_BG_Badge",1,"Guillaume","Flavius"; //Guillaume wins
+		else if (.@A_B_gap == 0)
+			callfunc "F_BG_Badge",0,"Guillaume","Flavius"; //Tie
+		else
+			callfunc "F_BG_Badge",0,"Guillaume","Flavius"; //Croix wins
+	}
+	else {
+		mes "[Axl Rose]";
+		mes "Why are you here, Croix mercenary? I am definitely sure of victory against foolish Croix such as you. Ha!";
+		close;
+	}
+	bg_leave;
+	if (!getbattleflag("feature.bgqueue"))
+		warp "bat_room",154,150;
+	end;
+
+OnInit:
+	disablenpc "Vintenar#bat_b01_aover";
+	end;
+}
+
+bat_b01,389,14,3	script	Vintenar#bat_b01_bover	415,{
+	set .@A_B_gap,$@Guill_ScoreBG1 - $@Croix_ScoreBG1;
+	if ($@FlaviusBG1_id2 == getcharid(4)) {
+		if (.@A_B_gap > 0)
+			callfunc "F_BG_Badge",0,"Croix","Flavius"; //Guillaume wins
+		else if (.@A_B_gap == 0)
+			callfunc "F_BG_Badge",0,"Croix","Flavius"; //Tie
+		else
+			callfunc "F_BG_Badge",1,"Croix","Flavius"; //Croix wins
+	}
+	else {
+		mes "[Swandery]";
+		mes "Why do you come here as a Guillaume? You will be sent to where you should be!";
+		close;
+	}
+	bg_leave;
+	if (!getbattleflag("feature.bgqueue"))
+		warp "bat_room",154,150;
+	end;
+
+OnInit:
+	disablenpc "Vintenar#bat_b01_bover";
+	end;
+}
+
+bat_b01,1,10,3	script	Release all#b01	81,{
+	set .@i, callfunc("F_GM_NPC",1854,0);
+	if (.@i == -1) {
+		mes "Cancelled.";
+		close;
+	} else if (.@i == 0) {
+		end;
+	} else {
+		mes "May I help you?";
+		next;
+		switch(select("Release all.:Cancel.")) {
+		case 1:
+			mes "Bye.";
+			close2;
+			mapwarp "bat_b01","bat_room",154,150;
+			end;
+		case 2:
+			mes "Cancelled.";
+			close;
+		}
+	}
+}
+
+// BG Queue makes these scripts useless
+-	script	BGQueueInit#flavius01	-1,{
+	end;
+
+OnInit:
+	if (getbattleflag("feature.bgqueue")) {
+		unloadnpc "Lieutenant Ator";
+		unloadnpc "Lieutenant Thelokus";
+		unloadnpc "back_bgroomb01a";
+		unloadnpc "back_bgroomb01b";
+		unloadnpc "A_CODE#bat_b01";
+		unloadnpc "B_CODE#bat_b01";
+	}
+	end;
+}
diff --git a/npc/battleground/bg_offi_kvm.txt b/npc/battleground/bg_offi_kvm.txt
new file mode 100644
index 000000000..70355c8f2
--- /dev/null
+++ b/npc/battleground/bg_offi_kvm.txt
@@ -0,0 +1,407 @@
+//===== rAthena Script =======================================
+//= BattleGround System - KvM 1-59
+//===== Description: =========================================
+//= [Official Conversion]
+//= Kreiger Von Midgard Battleground for levels 1 to 59
+//= - Winning Team: 1 point
+//= - Losing Team: 0 point
+//===== Changelogs: ==========================================
+//= 1.0 First Version. [L0ne_W0lf]
+//= 1.1 Updated using official Aegis files. [L0ne_W0lf]
+//= 1.2 Upated some announces and dialogs from iRO.
+//=     Changed how the scoreboard works slightly.
+//=     Removed the areapercentheals, and minor things.
+//= 1.3 Fixed wrong names for disablenpc/enablenpc. [Ai4rei]
+//=     Fixed points in text and actual points differing.
+//= 1.4 Added battle_config checks to allow this script to use the new queue interface or the previous method. [Aleos]
+//============================================================
+
+// Waiting Room NPCs
+//============================================================
+bat_room,197,226,5	script	KVM Waiting Room#a2::KvM02R_Guillaume	418,{
+	end;
+OnInit:
+	waitingroom "Battle Station 5 Players",6,"KvM02_BG_Out::OnGuillaumeJoin",1;
+	end;
+OnEnterBG:
+	set $@KvM02BG_id1, waitingroom2bg("bat_c02",52,129,"KvM02_BG::OnGuillaumeQuit","KvM02_BG::OnGuillaumeDie");
+	end;
+}
+
+bat_room,197,205,3	script	KVM Waiting Room#b2::KvM02R_Croix	414,{
+	end;
+OnInit:
+	waitingroom "Battle Station 5 Players",6,"KvM02_BG_Out::OnCroixJoin",1;
+	end;
+OnEnterBG:
+	set $@KvM02BG_id2, waitingroom2bg("bat_c02",147,55,"KvM02_BG::OnCroixQuit","KvM02_BG::OnCroixDie");
+	end;
+}
+
+bat_room,197,220,0	warp2	#kvm601	2,2,bat_room,154,150
+bat_room,197,21,0	warp2	#kvm602	2,2,bat_room,154,150
+
+// Starting Line
+//============================================================
+-	script	KVM02::CellEffect2	-1,{
+	end;
+OnKvM02One:
+	specialeffect EF_CHANGECOLD;
+	end;
+OnKvM02Two:
+	specialeffect EF_CHANGEPOISON;
+	end;
+}
+
+bat_c02,54,124,3	duplicate(CellEffect2)	#RedcellA1-2	139
+bat_c02,55,124,3	duplicate(CellEffect2)	#RedcellA2-2	139
+bat_c02,56,124,3	duplicate(CellEffect2)	#RedcellA3-2	139
+bat_c02,57,124,3	duplicate(CellEffect2)	#RedcellA4-2	139
+bat_c02,57,125,3	duplicate(CellEffect2)	#RedcellA5-2	139
+bat_c02,57,126,3	duplicate(CellEffect2)	#RedcellA6-2	139
+bat_c02,57,127,3	duplicate(CellEffect2)	#RedcellA7-2	139
+
+bat_c02,145,59,3	duplicate(CellEffect2)	#RedcellB1-2	139
+bat_c02,144,59,3	duplicate(CellEffect2)	#RedcellB2-2	139
+bat_c02,143,59,3	duplicate(CellEffect2)	#RedcellB3-2	139
+bat_c02,142,59,3	duplicate(CellEffect2)	#RedcellB4-2	139
+bat_c02,142,56,3	duplicate(CellEffect2)	#RedcellB5-2	139
+bat_c02,142,57,3	duplicate(CellEffect2)	#RedcellB6-2	139
+bat_c02,142,58,3	duplicate(CellEffect2)	#RedcellB7-2	139
+
+bat_c02,54,128,3	script	#A_camp_start02	139,4,4,{
+	end;
+OnInit:
+	disablenpc "#A_camp_start02";
+	end;
+OnEnable:
+	enablenpc "#A_camp_start02";
+	end;
+OnDisable:
+	disablenpc "#A_camp_start02";
+	end;
+OnTouch:
+	set Bat_Team,1;
+	if (!getbattleflag("feature.bgqueue"))
+		setquest 6025;
+	end;
+}
+
+bat_c02,146,56,3	script	#B_camp_start02	139,4,4,{
+	end;
+OnInit:
+	disablenpc "#B_camp_start02";
+	end;
+OnEnable:
+	enablenpc "#B_camp_start02";
+	end;
+OnDisable:
+	disablenpc "#B_camp_start02";
+	end;
+OnTouch:
+	set Bat_Team,2;
+	if (!getbattleflag("feature.bgqueue"))
+		setquest 6025;
+	end;
+}
+
+// Battleground Engine
+//============================================================
+-	script	KvM02_BG	-1,{
+	end;
+
+OnInit:
+	setwall "bat_c02",54,122,6,7,0,"batc02wall_a";
+	setwall "bat_c02",55,122,5,7,0,"batc02wall_b";
+	setwall "bat_c02",140,56,6,7,0,"batc02wall_c";
+	setwall "bat_c02",140,57,5,7,0,"batc02wall_d";
+	disablenpc "KVM Officer#KVM02A";
+	disablenpc "KVM Officer#KVM02B";
+	end;
+
+OnGuillaumeQuit:
+	if (getbattleflag("feature.bgqueue"))
+		bg_desert;
+//	else
+//		set BG_Delay_Tick, gettimetick(2) + 1200;
+OnGuillaumeDie:
+	if( $@KvM02BG == 2 )
+	{
+		set .Guillaume_Count, .Guillaume_Count - 1;
+		bg_updatescore "bat_c02",.Guillaume_Count,.Croix_Count;
+		if( .Guillaume_Count < 1 ) donpcevent "KvM02_BG::OnCroixWin";
+		else {
+			mapannounce "bat_c02", "The number of Guillaumes is "+.Guillaume_Count+".",bc_map,"0x00ff00";
+			mapannounce "bat_c02", "The number of Croixes is "+.Croix_Count+".",bc_map,"0x00ff00";
+		}
+	}
+	end;
+
+OnCroixQuit:
+	if (getbattleflag("feature.bgqueue"))
+		bg_desert;
+//	else
+//		set BG_Delay_Tick, gettimetick(2) + 1200;
+OnCroixDie:
+	if( $@KvM02BG == 2 )
+	{
+		set .Croix_Count, .Croix_Count - 1;
+		bg_updatescore "bat_c02",.Guillaume_Count,.Croix_Count;
+		if( .Croix_Count < 1 ) donpcevent "KvM02_BG::OnGuillaumeWin";
+		else {
+			mapannounce "bat_c02", "The number of Guillaumes is "+.Guillaume_Count+".",bc_map,"0x00ff00";
+			mapannounce "bat_c02", "The number of Croixes is "+.Croix_Count+".",bc_map,"0x00ff00";
+		}
+	}
+	end;
+
+OnGuillaumeActive:
+	warp "bat_c02",62,119;
+	end;
+
+OnCroixActive:
+	warp "bat_c02",137,64;
+	end;
+
+OnStart:
+	disablenpc "KVM Officer#KVM02A";
+	disablenpc "KVM Officer#KVM02B";
+	set $@KvM02BG_Victory, 0;
+	// Warp Teams
+	bg_warp $@KvM02BG_id1,"bat_c02",53,128;
+	bg_warp $@KvM02BG_id2,"bat_c02",146,55;
+	initnpctimer;
+	end;
+
+OnTimer1000:
+	mapannounce "bat_c02", "In 1 minute, KVM will start.",bc_map,"0x00ff00";
+	end;
+
+OnTimer3000:
+	mapannounce "bat_c02", "The maximum time for a KVM battle is 5 minutes.",bc_map,"0x00ff00";
+	end;
+
+OnTimer6000:
+	mapannounce "bat_c02", "Please prepare for the KVM battle.",bc_map,"0x00ff00";
+	mapannounce "bat_c02", "You can buff your people.",bc_map,"0x00ff00";
+	donpcevent "#A_camp_start02::OnEnable";
+	donpcevent "#B_camp_start02::OnEnable";
+	end;
+
+OnTimer13000:
+	donpcevent "#A_camp_start02::OnDisable";
+	donpcevent "#B_camp_start02::OnDisable";
+	end;
+
+OnTimer30000:
+	mapannounce "bat_c02", "30 seconds remaining to start KVM battle.",bc_map,"0x00ff00";
+	end;
+
+OnTimer45000:
+	mapannounce "bat_c02", "15 seconds remaining to start KVM battle.",bc_map,"0x00ff00";
+	donpcevent "::OnKvM02One";
+	end;
+
+OnTimer50000:
+	mapannounce "bat_c02", "10 seconds remaining to start KVM battle.",bc_map,"0x00ff00";
+	donpcevent "::OnKvM02Two";
+	end;
+
+OnTimer55000:
+	mapannounce "bat_c02", "5 seconds remaining to start KVM battle.",bc_map,"0x00ff00";
+	donpcevent "::OnKvM02One";
+	end;
+
+OnTimer59000:
+	mapannounce "bat_c02", "KVM is now commencing.",bc_map,"0x00ff00";
+	donpcevent "::OnKvM02Two";
+	end;
+
+OnTimer61000:
+	// Team Members
+	set .Guillaume_Count, bg_get_data($@KvM02BG_id1, 0);
+	set .Croix_Count, bg_get_data($@KvM02BG_id2, 0);
+
+	if (!getbattleflag("feature.bgqueue")) {
+		if (.Guillaume_Count < 5 || .Croix_Count < 5) {
+			set $@KvM02BG_Victory, 3;
+			set $@KvM02BG, 3;
+			mapannounce "bat_c02","There are not enough players to start the battle",1,0x808080;
+			stopnpctimer;
+			donpcevent "KvM02_BG::OnStop";
+			end;
+		}
+	}
+	bg_updatescore "bat_c02",.Guillaume_Count,.Croix_Count;
+	set $@KvM02BG, 2; // Playing
+	bg_warp $@KvM02BG_id1,"bat_c02",62,119;
+	bg_warp $@KvM02BG_id2,"bat_c02",137,64;
+	end;
+
+OnTimer300000:
+	mapannounce "bat_c02", "1 minute remaining to finish the KVM battle.",bc_map,"0x00ff00";
+	end;
+
+OnTimer330000:
+	mapannounce "bat_c02", "30 seconds remaining to finish the KVM battle.",bc_map,"0x00ff00";
+	end;
+
+OnTimer345000:
+	mapannounce "bat_c02", "15 seconds remaining to finish the KVM battle.",bc_map,"0x00ff00";
+	end;
+
+OnTimer350000:
+	mapannounce "bat_c02", "10 seconds remaining to finish the KVM battle.",bc_map,"0x00ff00";
+	end;
+
+OnTimer355000:
+	mapannounce "bat_c02", "5 seconds remaining to finish the KVM battle.",bc_map,"0x00ff00";
+	end;
+
+OnTimer360000:
+	mapannounce "bat_c02", "The KVM battle is over.",bc_map,"0x00ff00";
+	if( .Croix_Count > .Guillaume_Count )
+		donpcevent "KvM02_BG::OnCroixWin";
+	else if( .Croix_Count < .Guillaume_Count )
+		donpcevent "KvM02_BG::OnGuillaumeWin";
+	else
+	{ // Draw Game
+		set $@KvM02BG, 3;
+		set $@KvM02BG_Victory, 3;
+		mapannounce "bat_c02", "The number of Guillaumes is "+.Guillaume_Count+".",bc_map,"0x00ff00";
+		mapannounce "bat_c02", "The number of Croixes is "+.Croix_Count+".",bc_map,"0x00ff00";
+		mapannounce "bat_c02", "This battle has ended in a draw.",bc_map,"0x00ff00";
+		donpcevent "KvM02_BG::OnStop";
+	}
+	end;
+
+OnGuillaumeWin:
+	set $@KvM02BG, 3;
+	set $@KvM02BG_Victory, 1;
+	mapannounce "bat_c02", "Guillaume wins!",bc_map,"0x00ff00";
+	mapannounce "bat_c02", "Congratulations to Guillaume members.",bc_map,"0x00ff00";
+	mapannounce "bat_c02", "Everyone will be moved to the start point.",bc_map,"0x00ff00";
+	donpcevent "KvM02_BG::OnStop";
+	end;
+
+OnCroixWin:
+	set $@KvM02BG, 3;
+	set $@KvM02BG_Victory, 2;
+	mapannounce "bat_c02", "Croix wins!",bc_map,"0x00ff00";
+	mapannounce "bat_c02", "Congratulations to Croix members.",bc_map,"0x00ff00";
+	mapannounce "bat_c02", "Everyone will be moved to the start point.",bc_map,"0x00ff00";
+	donpcevent "KvM02_BG::OnStop";
+	end;
+
+OnStop:
+	stopnpctimer;
+	enablenpc "KVM Officer#KVM02A";
+	enablenpc "KVM Officer#KVM02B";
+	// Warp Teams
+	bg_warp $@KvM02BG_id1,"bat_c02",53,128;
+	bg_warp $@KvM02BG_id2,"bat_c02",146,55;
+	donpcevent "KvM02_BG_Out::OnBegin";
+	if (getbattleflag("feature.bgqueue"))
+		bg_reserve "bat_c02", true;
+	end;
+}
+
+-	script	KvM02_BG_Out	-1,{
+	end;
+
+OnBegin:
+	initnpctimer;
+	end;
+
+OnTimer1000:
+	mapannounce "bat_c02", "Please apply with the Officer to acquire KVM points.",bc_map,"0x00ff00";
+	end;
+
+OnTimer3000:
+	mapannounce "bat_c02", "The Officer will grant you the points for 30 seconds.",bc_map,"0x00ff00";
+	mapannounce "bat_c02", "In 30 seconds, the Officer will be sent away.",bc_map,"0x00ff00";
+	end;
+
+OnTimer5000:
+	mapannounce "bat_c02", "Unless you talk to the Officer, you cannot gain the points.",bc_map,"0x00ff00";
+	mapannounce "bat_c02", "Please be careful.",bc_map,"0x00ff00";
+	end;
+
+OnTimer55000:
+	mapannounce "bat_c02", "You will be sent back.",bc_map,"0x00ff00";
+	end;
+
+OnTimer60000:
+	stopnpctimer;
+	if (getbattleflag("feature.bgqueue"))
+		bg_reserve "bat_c02", true;
+	mapwarp "bat_c02","bat_room",154,150;
+	set getvariableofnpc(.Croix_Count,"KvM02_BG"), 0;
+	set getvariableofnpc(.Guillaume_Count,"KvM02_BG"), 0;
+	set $@KvM02BG_Victory, 0;
+	if( $@KvM02BG_id1 ) { bg_destroy $@KvM02BG_id1; set $@KvM02BG_id1, 0; }
+	if( $@KvM02BG_id2 ) { bg_destroy $@KvM02BG_id2; set $@KvM02BG_id2, 0; }
+	if (getbattleflag("feature.bgqueue"))
+		bg_unbook "bat_c02";
+	disablenpc "KVM Officer#KVM02A";
+	disablenpc "KVM Officer#KVM02B";
+	set $@KvM02BG, 0;
+	end;
+
+OnGuillaumeJoin:
+OnCroixJoin:
+	if( $@KvM02BG )
+		end;
+	set .@Guillaume, getwaitingroomstate(0,"KvM02R_Guillaume");
+	set .@Croix, getwaitingroomstate(0,"KvM02R_Croix");
+
+	if( .@Guillaume < 5 || .@Croix < 5 )
+		end;
+
+	set $@KvM02BG, 1; // Starting
+	donpcevent "KvM02R_Croix::OnEnterBG";
+	donpcevent "KvM02R_Guillaume::OnEnterBG";
+	donpcevent "KvM02_BG::OnStart";
+	end;
+}
+
+// Battleground rewards
+//============================================================
+bat_c02,51,130,5	script	KVM Officer#KVM02A	419,{
+	if( $@KvM02BG_Victory ) {
+		mes "[KVM Officer]";
+		if( $@KvM02BG_Victory == Bat_Team ) {
+			mes "Good Game.";
+			mes "May the glory of KVM be with you.";
+			mes "You aquire the winning points: 1";
+			close2;
+			set kvm_point,kvm_point + 1;
+		}
+		else {
+			mes "I am so sorry.";
+			mes "I wish you better luck next time.";
+			mes "You aquire the losing points: 0";
+			close2;
+		}
+		bg_leave;
+		set Bat_Team,0;
+		if (!getbattleflag("feature.bgqueue"))
+			warp "bat_room",154,150;
+	}
+	end;
+}
+bat_c02,148,53,1	duplicate(KVM Officer#KVM02A)	KVM Officer#KVM02B	415
+
+// BG Queue makes these scripts useless
+-	script	BGQueueInit#kvm02	-1,{
+	end;
+
+OnInit:
+	if (getbattleflag("feature.bgqueue")) {
+		unloadnpc "KvM02R_Guillaume";
+		unloadnpc "KvM02R_Croix";
+		unloadnpc "#kvm601";
+		unloadnpc "#kvm602";
+	}
+	end;
+}
diff --git a/npc/battleground/bg_offi_tierra.txt b/npc/battleground/bg_offi_tierra.txt
new file mode 100644
index 000000000..ce61f0c64
--- /dev/null
+++ b/npc/battleground/bg_offi_tierra.txt
@@ -0,0 +1,855 @@
+//===== rAthena Script =======================================
+//= BattleGround System - Tierra Gorge
+//===== Description: =========================================
+//= [Official Conversion]
+//= Tierra Gorge Battleground.
+//= - Winning Team: 3 badges (5 if VIP)
+//= - Losing Team: 1 badge (3 if VIP)
+//===== Changelogs: ==========================================
+//= 1.0 First Version. [L0ne_W0lf]
+//= 1.1 Corrected setwalls for barricades. [L0ne_W0lf]
+//= 1.2 Updated 'waitingroom' to support required zeny/lvl. [Kisuka]
+//= 1.3 Removed MaxLvl check in waitingrooms.
+//= 1.4 Label standardization. [Euphy]
+//= 1.5 Added GM management function. [Euphy]
+//= 1.6 Added VIP features and created a reward function. [Euphy]
+//= 1.7 Added battle_config checks to allow this script to use the new queue interface or the previous method. [Aleos]
+//============================================================
+
+// Waiting Room NPCs
+//============================================================
+bat_room,57,227,5	script	Lieutenant Kalos	418,{
+	end;
+
+OnInit:
+	waitingroom "Battle Station",11,"start#bat_a01::OnReadyCheck",1,0,80;
+	end;
+
+OnEnterBG:
+	set $@TierraBG1_id1, waitingroom2bg("bat_a01",50,374,"start#bat_a01::OnGuillaumeQuit","");
+	end;
+}
+
+bat_room,58,204,1	script	Lieutenant Eyor	414,{
+	end;
+
+OnInit:
+	waitingroom "Battle Station",11,"start#bat_a01::OnReadyCheck",1,0,80;
+	end;
+
+OnEnterBG:
+	set $@TierraBG1_id2, waitingroom2bg("bat_a01",42,16,"start#bat_a01::OnCroixQuit","");
+	end;
+}
+
+bat_room,1,151,3	script	#bat_a01_timer	844,{
+	end;
+
+OnInit:
+	if (getbattleflag("feature.bgqueue"))
+		end;
+OnEnable:
+	initnpctimer;
+	end;
+
+OnStop:
+	stopnpctimer;
+	end;
+
+OnTimer1000:
+	stopnpctimer;
+	if (bg_get_data($@TierraBG1_id1, 0) == 0 && bg_get_data($@TierraBG1_id2, 0) == 0) {
+		donpcevent "countdown#bat_a01::OnStop";
+		if (getbattleflag("feature.bgqueue"))
+			bg_reserve "bat_a01", true;
+		$@TierraBG1 = 0; $@TierraBG1_Victory = 0;
+		if( $@TierraBG1_id1 ) { bg_destroy $@TierraBG1_id1; $@TierraBG1_id1 = 0; }
+		if( $@TierraBG1_id2 ) { bg_destroy $@TierraBG1_id2; $@TierraBG1_id2 = 0; }
+		if (getbattleflag("feature.bgqueue"))
+			bg_unbook "bat_a01";
+		end;
+	}
+	initnpctimer;
+	end;
+}
+
+bat_a01,352,342,0	script	#bat_a01_quest_a	-1,5,5,{
+	end;
+
+OnTouch:
+	if (checkquest(2069) < 0)
+		setquest 2069;
+	end;
+}
+
+bat_a01,353,52,0	script	#bat_a01_quest_b	-1,5,5,{
+	end;
+
+OnTouch:
+	if (checkquest(2069) < 0)
+		setquest 2069;
+	end;
+}
+
+bat_room,57,220,0	warp	back_bgrooma01a	1,1,bat_room,154,150
+bat_room,57,211,0	warp	back_bgrooma01b	1,1,bat_room,154,150
+
+// Tierra Gorge Battleground Engine
+//============================================================
+bat_a01,15,15,3	script	start#bat_a01	844,{
+OnInit:
+	mapwarp "bat_a01","bat_room",154,150;
+	end;
+
+OnEnable:
+	donpcevent "OBJ#bat_a01_a::OnKill";
+	donpcevent "OBJ#bat_a01_a::OnEnable";
+	donpcevent "OBJ#bat_a01_b::OnKill";
+	donpcevent "OBJ#bat_a01_b::OnEnable";
+	donpcevent "barricade#bat_a01_a::OnKill";
+	donpcevent "barricade#bat_a01_a::OnEnable";
+	donpcevent "barricade#bat_a01_b::OnKill";
+	donpcevent "barricade#bat_a01_b::OnEnable";
+	donpcevent "OBJ#bat_a01_n::OnKill";
+	donpcevent "OBJ#bat_a01_n::OnEnable";
+	donpcevent "NOBJ_mob#bat_a01_a::OnKill";
+	donpcevent "NOBJ_mob#bat_a01_b::OnKill";
+	donpcevent "Battle Therapist#a01_a::OnEnable";
+	donpcevent "Battle Therapist#a01_b::OnEnable";
+	donpcevent "countdown#bat_a01::OnEnable";
+	disablenpc "Guillaume Blacksmith#a01";
+	disablenpc "Croix Blacksmith#bat_a01";
+	disablenpc "Guillaume Vintenar#a01_a";
+	disablenpc "Croix Vintenar#a01_b";
+	end;
+
+OnGuillaumeActive:
+	warp "bat_a01",352,342;
+	end;
+
+OnCroixActive:
+	warp "bat_a01",353,52;
+	end;
+
+OnGuillaumeQuit:
+OnCroixQuit:
+	if (getbattleflag("feature.bgqueue"))
+		bg_desert;
+	else
+		bg_leave;
+	end;
+
+OnReadyCheck:
+	if( $@TierraBG1 )
+		end;
+	if (!getbattleflag("feature.bgqueue")) {
+		set .@Guillaume, getwaitingroomstate(0,"Lieutenant Kalos");
+		set .@Croix, getwaitingroomstate(0,"Lieutenant Eyor");
+		if( !.@Guillaume && !.@Croix ) {
+			donpcevent "#bat_a01_timer::OnStop";
+			end;
+		}
+		else if( .@Guillaume < 10 || .@Croix < 10 )
+			end;
+	}
+	set $@TierraBG1,1;
+	if (!getbattleflag("feature.bgqueue")) {
+		donpcevent "Lieutenant Kalos::OnEnterBG";
+		donpcevent "Lieutenant Eyor::OnEnterBG";
+	}
+	donpcevent "start#bat_a01::OnEnable";
+	bg_warp $@TierraBG1_id1,"bat_a01",352,342;
+	bg_warp $@TierraBG1_id2,"bat_a01",353,52;
+	initnpctimer;
+	end;
+
+OnTimer10000:
+	stopnpctimer;
+	donpcevent "#bat_a01_timer::OnEnable";
+	end;
+}
+
+bat_a01,15,16,3	script	OBJ#bat_a01_a	844,{
+OnEnable:
+	bg_monster $@TierraBG1_id1,"bat_a01",177,345,"Food Storage",1909,"OBJ#bat_a01_a::OnMyMobDead";
+	end;
+
+OnKill:
+	killmonster "bat_a01","OBJ#bat_a01_a::OnMyMobDead";
+	end;
+
+OnMyMobDead:
+	if (mobcount("bat_a01","OBJ#bat_a01_a::OnMyMobDead") < 1) {
+		donpcevent "Battle Therapist#a01_a::OnStop";
+		donpcevent "Battle Therapist#a01_b::OnStop";
+		set $@TierraBG1_Victory, 2;
+		enablenpc "Guillaume Vintenar#a01_a";
+		enablenpc "Croix Vintenar#a01_b";
+		mapannounce "bat_a01", "Croix Vintenar Swandery: We destroyed Guillaume's Food Storage. We won that! Wow!",bc_map,"0xFFCE00";
+		bg_warp $@TierraBG1_id1,"bat_a01",50,374;
+		bg_warp $@TierraBG1_id2,"bat_a01",42,16;
+		if (getbattleflag("feature.bgqueue"))
+			bg_reserve "bat_a01", true;
+	}
+	end;
+}
+
+bat_a01,15,17,3	script	OBJ#bat_a01_b	844,{
+OnEnable:
+	bg_monster $@TierraBG1_id2,"bat_a01",167,50,"Food Depot",1910,"OBJ#bat_a01_b::OnMyMobDead";
+	end;
+
+OnKill:
+	killmonster "bat_a01","OBJ#bat_a01_b::OnMyMobDead";
+	end;
+
+OnMyMobDead:
+	if (mobcount("bat_a01","OBJ#bat_a01_b::OnMyMobDead") < 1) {
+		donpcevent "Battle Therapist#a01_a::OnStop";
+		donpcevent "Battle Therapist#a01_b::OnStop";
+		set $@TierraBG1_Victory, 1;
+		enablenpc "Guillaume Vintenar#a01_a";
+		enablenpc "Croix Vintenar#a01_b";
+		mapannounce "bat_a01", "Guillaume Vintenar Axl Rose : We destroyed Croix's Food Storage. We won that! Wow!",bc_map,"0xFFCE00";
+		bg_warp $@TierraBG1_id1,"bat_a01",50,374;
+		bg_warp $@TierraBG1_id2,"bat_a01",42,16;
+		if (getbattleflag("feature.bgqueue"))
+			bg_reserve "bat_a01", true;
+	}
+	end;
+}
+
+bat_a01,15,18,3	script	barricade#bat_a01_a	844,{
+OnEnable:
+	for( set .@i,185; .@i < 202; set .@i,.@i+1 )
+		bg_monster $@TierraBG1_id1,"bat_a01",.@i,266,"Barricade",1906,"barricade#bat_a01_a::OnMyMobDead";
+	setwall "bat_a01",186,266,16,6,1,"bat_a01_c1";
+	end;
+
+OnKill:
+	killmonster "bat_a01","barricade#bat_a01_a::OnMyMobDead";
+	if (checkwall("bat_a01_c1") == true)
+		delwall "bat_a01_c1";
+	end;
+
+OnMyMobDead:
+	if (mobcount("bat_a01","barricade#bat_a01_a::OnMyMobDead") < 17) {
+		killmonster "bat_a01","barricade#bat_a01_a::OnMyMobDead";
+		delwall "bat_a01_c1";
+		enablenpc "Guillaume Blacksmith#a01";
+		mapannounce "bat_a01", "Guillaume Vintenar Axl Rose : The Barricade in the valley has been destroyed! Where's the Blacksmith? We need to rebuild the Barricade!",bc_map,"0xFFCE00";
+	}
+	end;
+}
+
+bat_a01,15,19,3	script	barricade#bat_a01_b	844,{
+OnEnable:
+	for( set .@i,169; .@i < 186; set .@i,.@i+1 )
+		bg_monster $@TierraBG1_id2,"bat_a01",.@i,129,"Barricade",1906,"barricade#bat_a01_b::OnMyMobDead";
+	setwall "bat_a01",170,129,16,6,1,"bat_a01_g1";
+	end;
+
+OnKill:
+	killmonster "bat_a01","barricade#bat_a01_b::OnMyMobDead";
+	if (checkwall("bat_a01_g1") == true)
+		delwall "bat_a01_g1";
+	end;
+
+OnMyMobDead:
+	if (mobcount("bat_a01","barricade#bat_a01_b::OnMyMobDead") < 17) {
+		killmonster "bat_a01","barricade#bat_a01_b::OnMyMobDead";
+		delwall "bat_a01_g1";
+		enablenpc "Croix Blacksmith#bat_a01";
+		mapannounce "bat_a01", "Croix Vintenar Swandery : The Barricade in the valley has been destroyed! Where's the Blacksmith? We need to rebuild the Barricade!",bc_map,"0xFFCE00";
+	}
+	end;
+}
+
+bat_a01,15,20,3	script	OBJ#bat_a01_n	844,{
+OnEnable:
+	monster "bat_a01",273,203,"Neutrality Flag",1911,1,"OBJ#bat_a01_n::OnMyMobDead";
+	end;
+
+OnKill:
+	killmonster "bat_a01","OBJ#bat_a01_n::OnMyMobDead";
+	end;
+
+OnMyMobDead:
+	if (mobcount("bat_a01","OBJ#bat_a01_n::OnMyMobDead") < 17) {
+		bg_team_setxy getcharid(4),56,212;
+		if (getcharid(4) == $@TierraBG1_id1) {
+			donpcevent "NOBJ_mob#bat_a01_a::OnEnable";
+			mapannounce "bat_a01", "Guillaume captured a Neutrality Flag, so they have an advantage.",bc_map,"0xFFCE00";
+		}
+		else {
+			donpcevent "NOBJ_mob#bat_a01_b::OnEnable";
+			mapannounce "bat_a01", "Croix captured a Neutrality Flag, so they have an advantage.",bc_map,"0xFFCE00";
+		}
+	}
+	end;
+}
+
+bat_a01,15,21,3	script	NOBJ_mob#bat_a01_a	844,{
+OnEnable:
+	donpcevent "NOBJ_mob#bat_a01_b::OnKill";
+	bg_monster $@TierraBG1_id1,"bat_a01",272,204,"Guillaume Camp Guardian",1949,"NOBJ_mob#bat_a01_a::OnMyMobDead";
+	bg_monster $@TierraBG1_id1,"bat_a01",272,213,"Guillaume Camp Guardian",1949,"NOBJ_mob#bat_a01_a::OnMyMobDead";
+	bg_monster $@TierraBG1_id1,"bat_a01",273,197,"Guillaume Camp Guardian",1950,"NOBJ_mob#bat_a01_a::OnMyMobDead";
+	end;
+
+OnKill:
+	killmonster "bat_a01","NOBJ_mob#bat_a01_a::OnMyMobDead";
+	end;
+
+OnMyMobDead:
+	end;
+}
+
+bat_a01,15,22,3	script	NOBJ_mob#bat_a01_b	844,{
+OnEnable:
+	donpcevent "NOBJ_mob#bat_a01_a::OnKill";
+	bg_monster $@TierraBG1_id2,"bat_a01",272,204,"Croix Camp Guardian",1949,"NOBJ_mob#bat_a01_a::OnMyMobDead";
+	bg_monster $@TierraBG1_id2,"bat_a01",272,213,"Croix Camp Guardian",1949,"NOBJ_mob#bat_a01_a::OnMyMobDead";
+	bg_monster $@TierraBG1_id2,"bat_a01",273,197,"Croix Camp Guardian",1950,"NOBJ_mob#bat_a01_a::OnMyMobDead";
+	end;
+
+OnKill:
+	killmonster "bat_a01","NOBJ_mob#bat_a01_b::OnMyMobDead";
+	end;
+
+OnMyMobDead:
+	end;
+}
+
+bat_a01,185,270,1	script	Guillaume Blacksmith#a01	851,{
+	if (getcharid(4) == $@TierraBG1_id1) {
+		mes "[Guillaume Blacksmith]";
+		mes "We are in urgency! The Barricade has been destroyed!";
+		mes "We can repair the Barricade with ^3131FF50 Stones, 3 Sinew of Bear, 500 Metal Fragments, 30 Rough Elunium and 100 Gold.^000000";
+		mes "We have it all except for the 50 Stones!";
+		next;
+		switch(select("Repair.:Leave it.")) {
+		case 1:
+			if (countitem(7049) > 49) {
+				mes "[Guillaume Blacksmith]";
+				mes "You brought enough stones! Let's go and repair.";
+				next;
+				mes "..";
+				next;
+				mes "....";
+				next;
+				mes "......";
+				next;
+				mes "........";
+				next;
+				mes "..........";
+				next;
+				mes "............";
+				next;
+				mes "..............";
+				next;
+				mes "[Guillaume Blacksmith]";
+				mes "Combine Stones and Gold in the proper percentage.";
+				next;
+				mes "[Guillaume Blacksmith]";
+				mes "Combine Stones and Gold in the proper percentage and shape the Barricade.";
+				next;
+				mes "[Guillaume Blacksmith]";
+				mes "Combine Stones and Gold in the proper percentage and shape the Barricade, then add Rough Elunium to make it stronger.";
+				next;
+				mes "[Guillaume Blacksmith]";
+				mes "Combine Stones and Gold in the proper percentage and shape the Barricade, then add Rough Elunium to make it stronger. Now decorate with Metal Fragments.";
+				next;
+				mes "[Guillaume Blacksmith]";
+				mes "Combine Stones and Gold in the proper percentage and shape the Barricade, then add Rough Elunium to make it stronger. Decorate with Metal Fragments, and plait stones with Sinew of Bear!";
+				next;
+				mes "..............";
+				mes "..............";
+				mes "..............";
+				mes "..............";
+				mes "..............";
+				next;
+				specialeffect EF_REPAIRWEAPON;
+				mes "[Guillaume Blacksmith]";
+				mes "Wow! It's done.";
+				mes "We are relieved.";
+				if (mobcount("bat_a01","barricade#bat_a01_a::OnMyMobDead") < 17) {
+					delitem 7049,50; //Stone
+					donpcevent "barricade#bat_a01_a::OnEnable";
+				}
+				close2;
+				disablenpc "Guillaume Blacksmith#a01";
+				end;
+			}
+			else {
+				mes "[Guillaume Blacksmith]";
+				mes "You don't have enough Stones!";
+				next;
+				mes "[Guillaume Blacksmith]";
+				mes "^3131FFWe need 50 Stones.^000000";
+				mes "We are busy, so please hurry.";
+				close;
+			}
+		case 2:
+			mes "[Guillaume Blacksmith]";
+			mes "There are enemies coming! Let's evacuate from here!";
+			close;
+		}
+	}
+	else {
+		mes "[Guillaume Blacksmith]";
+		mes "There the enemy is coming!";
+		close;
+	}
+
+OnInit:
+	disablenpc "Guillaume Blacksmith#a01";
+	end;
+}
+
+bat_a01,170,121,5	script	Croix Blacksmith#bat_a01	851,{
+	if (getcharid(4) == $@TierraBG1_id2) {
+		mes "[Croix Blacksmith]";
+		mes "We are in urgency! The Barricade has been destroyed!";
+		mes "We can repair the Barricade with ^3131FF50 Stones, 3 Sinew of Bear, 500 Metal Fragments, 30 Rough Elunium and 100 Gold.^000000";
+		mes "We have it all except for the 50 Stones!";
+		next;
+		switch(select("Repair.:Leave it.")) {
+		case 1:
+			if (countitem(7049) > 49) {
+				mes "[Croix Blacksmith]";
+				mes "You brought enough stones! Let's go and repair.";
+				next;
+				mes "..";
+				next;
+				mes "....";
+				next;
+				mes "......";
+				next;
+				mes "........";
+				next;
+				mes "..........";
+				next;
+				mes "............";
+				next;
+				mes "..............";
+				next;
+				mes "[Croix Blacksmith]";
+				mes "Combine Stones and Gold in the proper percentage.";
+				next;
+				mes "[Croix Blacksmith]";
+				mes "Combine Stones and Gold in the proper percentage and shape the Barricade.";
+				next;
+				mes "[Croix Blacksmith]";
+				mes "Combine Stones and Gold in the proper percentage and shape the Barricade, then add Rough Elunium to make it stronger.";
+				next;
+				mes "[Croix Blacksmith]";
+				mes "Combine Stones and Gold in the proper percentage and shape the Barricade, then add Rough Elunium to make it stronger. Now decorate with Metal Fragments.";
+				next;
+				mes "[Croix Blacksmith]";
+				mes "Combine Stones and Gold in the proper percentage and shape the Barricade, then add Rough Elunium to make it stronger. Decorate with Metal Fragments, and plait stones with Sinew of Bear!";
+				next;
+				mes "..............";
+				mes "..............";
+				mes "..............";
+				mes "..............";
+				mes "..............";
+				next;
+				specialeffect EF_REPAIRWEAPON;
+				mes "[Croix Blacksmith]";
+				mes "Wow! It's done.";
+				mes "We are relieved.";
+				if (mobcount("bat_a01","barricade#bat_a01_b::OnMyMobDead") < 17) {
+					delitem 7049,50; //Stone
+					donpcevent "barricade#bat_a01_b::OnEnable";
+				}
+				close2;
+				disablenpc "Croix Blacksmith#bat_a01";
+				end;
+			}
+			else {
+				mes "[Croix Blacksmith]";
+				mes "You don't have enough Stones!";
+				next;
+				mes "[Croix Blacksmith]";
+				mes "^3131FFWe need 50 Stone.^000000";
+				mes "We are busy, so please hurry.";
+				close;
+			}
+		case 2:
+			mes "[Croix Blacksmith]";
+			mes "There are enemies coming! Let's evacuate from here!";
+			close;
+		}
+	}
+	else {
+		mes "[Croix Blacksmith]";
+		mes "There, the enemy is coming!";
+		close;
+	}
+
+OnInit:
+	disablenpc "Croix Blacksmith#bat_a01";
+	end;
+}
+
+bat_a01,53,377,3	script	Battle Therapist#a01_a	95,{
+	specialeffect2 EF_HEAL;
+	mes "[Battle Therapist]";
+	mes "Just close your eyes,";
+	mes "and take a deep breath.";
+	mes "You can be free from pain.";
+	close;
+	end;
+
+OnInit:
+	initnpctimer;
+	end;
+
+OnEnable:
+	stopnpctimer;
+	initnpctimer;
+	enablenpc "Battle Therapist#a01_a";
+	end;
+
+OnStop:
+	// disablenpc "bat_a01_rp1_a_warp";
+	disablenpc "Battle Therapist#a01_a";
+	stopnpctimer;
+	end;
+
+OnTimer25000:
+	specialeffect EF_SANCTUARY;
+	// enablenpc "bat_a01_rp1_a_warp";
+	areapercentheal "bat_a01",41,365,61,385,100,100;
+	areawarp "bat_a01",41,365,61,385,"bat_a01",352,342;
+	end;
+
+// OnTimer26000:
+	// disablenpc "bat_a01_rp1_a_warp";
+	// end;
+
+OnTimer26500:
+	donpcevent "Battle Therapist#a01_a::OnEnable";
+	end;
+}
+
+/*
+bat_a01,51,375,0	script	bat_a01_rp1_a_warp	-1,10,10,{
+OnInit:
+	disablenpc "bat_a01_rp1_a_warp";
+	end;
+
+OnTouch:
+	percentheal 100,100;
+	warp "bat_a01",352,342;
+	end;
+}
+*/
+
+bat_a01,45,19,3	script	Battle Therapist#a01_b	95,{
+	specialeffect2 EF_HEAL;
+	mes "[Battle Therapist]";
+	mes "Just close your eyes,";
+	mes "and take a deep breath.";
+	mes "You can be free from pain.";
+	close;
+	end;
+
+OnInit:
+	initnpctimer;
+	end;
+
+OnEnable:
+	stopnpctimer;
+	initnpctimer;
+	enablenpc "Battle Therapist#a01_b";
+	end;
+
+OnStop:
+	// disablenpc "bat_a01_rp1_b_warp";
+	disablenpc "Battle Therapist#a01_b";
+	stopnpctimer;
+	end;
+
+OnTimer25000:
+	specialeffect EF_SANCTUARY;
+	areapercentheal "bat_a01",33,7,53,27,100,100;
+	areawarp "bat_a01",33,7,53,27,"bat_a01",353,52;
+	// enablenpc "bat_a01_rp1_b_warp";
+	end;
+
+// OnTimer26000:
+	// disablenpc "bat_a01_rp1_b_warp";
+	// end;
+
+OnTimer26500:
+	donpcevent "Battle Therapist#a01_b::OnEnable";
+	end;
+}
+
+/*
+bat_a01,43,17,0	script	bat_a01_rp1_b_warp	-1,10,10,{
+OnInit:
+	disablenpc "bat_a01_rp1_b_warp";
+	end;
+
+OnTouch:
+	percentheal 100,100;
+	warp "bat_a01",353,52;
+	end;
+}
+*/
+
+bat_a01,60,216,3	script	Valley Ghost#bat_a01_n	950,{
+	specialeffect2 EF_HEAL;
+	mes "[Valley Ghost]";
+	mes "Boo...Boo...";
+	close;
+
+OnInit:
+	initnpctimer;
+	end;
+
+OnEnable:
+	stopnpctimer;
+	initnpctimer;
+	end;
+
+OnTimer25000:
+	specialeffect EF_SANCTUARY;
+	areapercentheal "bat_a01",45,203,65,223,100,100;
+	areawarp "bat_a01",45,203,65,223,"bat_a01",301,209;
+	// enablenpc "bat_a01_rp1_n_warp";
+	end;
+
+// OnTimer26000:
+	// disablenpc "bat_a01_rp1_n_warp";
+	// end;
+
+OnTimer26500:
+	donpcevent "Valley Ghost#bat_a01_n::OnEnable";
+	end;
+}
+
+/*
+bat_a01,55,213,0	script	bat_a01_rp1_n_warp	-1,10,10,{
+OnInit:
+	disablenpc "bat_a01_rp1_n_warp";
+	end;
+
+OnTouch:
+	percentheal 100,100;
+	warp "bat_a01",301,209;
+	end;
+}
+*/
+
+bat_a01,194,267,0	script	barri_warp_up#bat_a01_a	-1,7,0,{
+OnTouch:
+	if (getcharid(4) == $@TierraBG1_id1)
+		warp "bat_a01",194,261;
+	end;
+}
+
+bat_a01,194,265,0	script	barri_warp_down#bat_a01a	-1,7,0,{
+OnTouch:
+	if (getcharid(4) == $@TierraBG1_id1)
+		warp "bat_a01",194,270;
+	end;
+}
+
+bat_a01,177,130,0	script	barri_warp_up#bat_a01_b	-1,7,0,{
+OnTouch:
+	if (getcharid(4) == $@TierraBG1_id2)
+		warp "bat_a01",178,125;
+	end;
+}
+
+bat_a01,177,128,0	script	barri_warp_down#bat_a01b	-1,7,0,{
+OnTouch:
+	if (getcharid(4) == $@TierraBG1_id2)
+		warp "bat_a01",178,134;
+	end;
+}
+
+bat_a01,352,342,0	script	A_CODE#bat_a01	-1,5,5,{
+OnTouch:
+	set .@chk_bfquest,checkquest(2069);
+	if ((.@chk_bfquest == 0) || (.@chk_bfquest == 1))
+		setquest 2069;
+	end;
+}
+
+bat_a01,353,52,0	script	B_CODE#bat_a01	-1,5,5,{
+OnTouch:
+	set .@chk_bfquest,checkquest(2069);
+	if ((.@chk_bfquest == 0) || (.@chk_bfquest == 1))
+		setquest 2069;
+	end;
+}
+
+bat_a01,169,227,0	warp	underladd#bat_a01_1	1,1,bat_a01,178,228
+bat_a01,208,164,0	warp	underladd#bat_a01_2	1,1,bat_a01,200,171
+
+bat_a01,171,309,3	script	Guillaume Camp#flag1	973,{ end; }
+bat_a01,149,310,3	script	Guillaume Camp#flag2	973,{ end; }
+bat_a01,119,336,3	script	Guillaume Camp#flag3	973,{ end; }
+bat_a01,118,357,3	script	Guillaume Camp#flag4	973,{ end; }
+bat_a01,150,380,3	script	Guillaume Camp#flag5	973,{ end; }
+bat_a01,173,380,3	script	Guillaume Camp#flag6	973,{ end; }
+bat_a01,210,344,3	script	Guillaume Camp#flag7	973,{ end; }
+bat_a01,350,325,3	script	Guillaume Camp#flag8	973,{ end; }
+bat_a01,358,325,3	script	Guillaume Camp#flag9	973,{ end; }
+
+bat_a01,138,12,3	script	Croix Camp#flag1	974,{ end; }
+bat_a01,108,36,3	script	Croix Camp#flag2	974,{ end; }
+bat_a01,108,63,3	script	Croix Camp#flag3	974,{ end; }
+bat_a01,136,87,3	script	Croix Camp#flag4	974,{ end; }
+bat_a01,167,86,3	script	Croix Camp#flag5	974,{ end; }
+bat_a01,199,49,3	script	Croix Camp#flag6	974,{ end; }
+bat_a01,168,16,3	script	Croix Camp#flag7	974,{ end; }
+bat_a01,357,74,3	script	Croix Camp#flag8	974,{ end; }
+bat_a01,348,74,3	script	Croix Camp#flag9	974,{ end; }
+
+bat_a01,53,377,3	script	Guillaume Vintenar#a01_a	419,{
+	if (getcharid(4) == $@TierraBG1_id1) {
+		if ($@TierraBG1_Victory == 1)
+			callfunc "F_BG_Badge",1,"Guillaume","Tierra";
+		else
+			callfunc "F_BG_Badge",0,"Guillaume","Tierra";
+	}
+	else {
+		if ($@TierraBG1_Victory == 2)
+			callfunc "F_BG_Badge",0,"Guillaume","Tierra";
+		else
+			callfunc "F_BG_Badge",1,"Guillaume","Tierra";
+	}
+	bg_leave;
+	if (!getbattleflag("feature.bgqueue"))
+		warp "bat_room",154,150;
+	end;
+
+OnInit:
+	disablenpc "Guillaume Vintenar#a01_a";
+	end;
+}
+
+bat_a01,45,19,3	script	Croix Vintenar#a01_b	415,{
+	if (getcharid(4) == $@TierraBG1_id2) {
+		if ($@TierraBG1_Victory == 2)
+			callfunc "F_BG_Badge",1,"Croix","Tierra";
+		else
+			callfunc "F_BG_Badge",0,"Croix","Tierra";
+	}
+	else {
+		if ($@TierraBG1_Victory == 1)
+			callfunc "F_BG_Badge",0,"Croix","Tierra";
+		else
+			callfunc "F_BG_Badge",1,"Croix","Tierra";
+	}
+	bg_leave;
+	if (!getbattleflag("feature.bgqueue"))
+		warp "bat_room",154,150;
+	end;
+
+OnInit:
+	disablenpc "Croix Vintenar#a01_b";
+	end;
+}
+
+bat_a01,1,5,3	script	countdown#bat_a01	844,{
+OnEnable:
+	initnpctimer;
+	end;
+
+OnStop:
+	stopnpctimer;
+	end;
+
+OnTimer7000:
+	mapannounce "bat_a01", "Guillaume Vintenar Axl Rose : Let's attack to burn down Croix's Food Depot!",bc_map,"0xFF9900";
+	end;
+
+OnTimer8000:
+	mapannounce "bat_a01", "Croix Vintenar Swandery : Master of Valhalla! Let us be gifted with unfailing faith and courage!",bc_map,"0xFF99CC";
+	end;
+
+OnTimer1800000:
+	mapannounce "bat_a01", "Marollo VII : Guillaume Marollo, Croix Marollo! Marollo followers!",bc_map,"0x99CC00";
+	end;
+
+OnTimer1803000:
+	mapannounce "bat_a01", "Marollo VII : Both camps are competitive, so no camp would be destroyed easily. That means the Marollo kingdoms will never be defeated!",bc_map,"0x99CC00";
+	end;
+
+OnTimer1808000:
+	mapannounce "bat_a01", "Marollo VII : I think we'd better terminate the battle, and call it a draw.",bc_map,"0x99CC00";
+	end;
+
+OnTimer1822000:
+	mapannounce "bat_a01", "Marollo VII : Hold your royalty and faith for a moment, and let's settle up the battle of Tierra Gorge.",bc_map,"0x99CC00";
+	end;
+
+OnTimer1825000:
+	mapannounce "bat_a01", "Axl Rose, Swandery : Yes sir.",bc_map,"0x99CC00";
+	end;
+
+OnTimer1830000:
+	mapwarp "bat_a01","bat_room",154,150;
+	donpcevent "countdown#bat_a01::OnStop";
+	end;
+}
+
+/*
+bat_a01,351,75,3	script	Croix Camp Soldier#bat_a01_guide	934,{
+	mes "Loading...";
+	close;
+}
+
+bat_a01,356,326,3	script	Guillaume Camp Soldier#bat_a01_guide	934,{
+	mes "Loading...";
+	close;
+}
+*/
+
+bat_a01,1,1,3	script	Release all#a01	81,{
+	set .@i, callfunc("F_GM_NPC",1854,0);
+	if (.@i == -1) {
+		mes "Cancelled.";
+		close;
+	} else if (.@i == 0) {
+		end;
+	} else {
+		mes "May I help you?";
+		next;
+		switch(select("Release all.:Cancel.")) {
+		case 1:
+			mes "Bye.";
+			close2;
+			mapwarp "bat_a01","bat_room",154,150;
+			end;
+		case 2:
+			mes "Cancelled.";
+			close;
+		}
+	}
+}
+
+// BG Queue makes these scripts useless
+-	script	BGQueueInit#tierra01	-1,{
+	end;
+
+OnInit:
+	if (getbattleflag("feature.bgqueue")) {
+		unloadnpc "Lieutenant Kalos";
+		unloadnpc "Lieutenant Eyor";
+		unloadnpc "#bat_a01_quest_a";
+		unloadnpc "#bat_a01_quest_b";
+		unloadnpc "back_bgrooma01a";
+		unloadnpc "back_bgrooma01b";
+		unloadnpc "A_CODE#bat_a01";
+		unloadnpc "B_CODE#bat_a01";
+	}
+	end;
+}
diff --git a/npc/battleground/bg_poring_ball.txt b/npc/battleground/bg_poring_ball.txt
new file mode 100644
index 000000000..dfca0183f
--- /dev/null
+++ b/npc/battleground/bg_poring_ball.txt
@@ -0,0 +1,602 @@
+//===== rAthena Script =======================================
+//= Battleground Extended + : Poring Ball
+//===== By: ==================================================
+//= Grenat
+//===== Description: =========================================
+//= Battleground Extended + scripts.
+//===== Additional Comments: =================================
+//= Adapted version of Soccer game for for Ragnarok Online
+//= Originally made in 2006. Adaptation for rAthena 2020.
+//= This is a free release.
+//= Please do NOT take ownership.
+//= Red Team -> East
+//= Blue Team -> West
+//= Special thanks to Olrox for the beautiful map
+// ====	Documentation: =======================================
+// [Skill Push]:
+// A Player can push its opponent using the item Push
+// When an opponent is pushed, there is a chance to fall (Sit)
+// and not moving for one second. CD 6 sec
+//
+// [Skill Shoot]:
+// A Player can target a specific clicked cell to throw the
+// ball ! When the item Shoot is used, player has 3 sec
+// to decide where to throw the ball if the ball is still
+// at 2 cells distance minimum. CD 6 sec
+//
+// [Blockage]
+// Sitting while being on the poring ball way will STOP
+// the ball from going further
+//
+// [Attributes Effects]:
+// STR/INT affect Poring Ball distance when hit by STR/INT%
+// AGI affect Poring Ball walking speed by AGI/3%
+// DEX affect chance of hitting the ball (you can "miss") by DEX/3%
+// VIT reduces chance to be pushed by VIT% and 50+VIT/3% chance
+//     to stop the ball when sitting
+// LUK give chance to critical (distance +5, Speed -20)
+//
+// [PVP]:
+// ON/OFF, it's up to you. PVP activates penalty feature
+// mapflag noskill activated (doesn't allow skills, up to you)
+//
+// [Penalty]:
+// Killing someone results in a penalty.
+// The ball will go in the corner of the killer member team
+// The opposite team will have 20 sec to shoot at the ball.
+//
+// Everything is configurable (See Configuration)
+//============================================================
+
+// ===========================================================
+// Configuration/Main scripts.
+// ===========================================================
+-	script	Poringball_Config	-1,{
+OnInit:
+	//= [Main Configs]
+	.speed = 120;							// Base walking speed of the poring ball (Default: 120)
+	.distance = 4;							// Base amount of cells the ball will move when touched (Default: 4)
+	.chance = 66;							// Base percentage of chance to hit the ball (Default: 66)
+	.pvp = 1;							// PVP mode (1 = PVP on, 0 = PVP off)
+	.blockage = 1;							// Blockage mode: 'Sitting' can stop the ball (1 = Activated, 0 = Deactivated)
+	.penalty = 1;							// Penalty mode (1 = Activated, 0 = Deactivated)
+	.sound_poring = 1;						// Some rAthena version doesn't make walking sound of poring (1 = Activated, 0 = Already have sound)
+	.skill_push_cells = 3;						// Skill Push how many cells away (Default: 3)
+	.skill_push_chance = 25;					// Skill Push percentage of making targets sit for 1 sec (Default: 25)
+	.skill_push_sit_time = 1;					// Skill Push sit down duration in seconds (Default: 1)
+
+	//= [Olrox Poring Ball Map]
+	setarray .ball_center,78,79;					// Center
+	setarray .map_corner,41,116,49,108;				// Corners
+	setarray .map_surface,33,48,78,108,79,48,123,109;		// Map Surface
+	setarray .map_goal,72,85;					// Goal lenght
+	setarray .ball_corner1,36,107;					// Corner 1
+	setarray .ball_corner2,122,108;					// Corner 2
+	setarray .respawn,24,21,130,133;
+/*
+	//= [Grenat Poring Ball Map]
+	// db/battleground.yml Spawn Blue: 83,70. Spawn Red: 114,70	// Coordination of both team to modified
+	setarray .ball_center,99,70;					// Center
+	setarray .map_corner,24,175,24,117;				// Corners
+	setarray .map_goal,62,77;					// Goal lenght
+	setarray .ball_corner1,42,70;					// Corner 1
+	setarray .ball_corner2,157,70;					// Corner 2
+	MoveNPC "Healer#ball1",26,24;					// Healer
+	MoveNPC "Healer#ball2",175,119;					// Healer
+	MoveNPC "Return#ball2",30,24;					// Return
+	MoveNPC "Return#ball1",170,119;					// Return
+	MoveNPC "Poring Ball",99,70;					// Poring Ball
+	MoveNPC "Blue Goal#poring1",24,77;				// Blue Goal 1
+	MoveNPC "Blue Goal#poring2",24,62;				// Blue Goal 1
+	MoveNPC "Red Goal#poring3",175,77;				// Blue Goal 1
+	MoveNPC "Red Goal#poring4",175,62;				// Blue Goal 1
+	setarray .respawn,83,70,114,70;
+*/
+	end;
+
+OnTeam1Active:
+	warp "bg_ball",.respawn[0],.respawn[1];
+	end;
+OnTeam2Active:
+	warp "bg_ball",.respawn[2],.respawn[3];
+	end;
+
+OnTeamDie1:
+OnTeamDie2:
+	if($@poringball != 3)||(!.penalty) end;
+	if(getcharid(4) == $@BG_Team201) {
+		mapannounce "bg_ball", "Penalty for Red team ! Blue team kick at the red team's corner",bc_blue;
+		$@poringballnext_teamid = $@BG_Team201;
+		donpcevent "Poring Ball::OnPenaltyBlue";
+	} else {
+		mapannounce "bg_ball", "Penalty for Blue team ! Red team kick at the blue team's corner",bc_blue;
+		$@poringballnext_teamid = $@BG_Team202;
+		donpcevent "Poring Ball::OnPenaltyRed";
+	}
+	end;
+
+OnPoringBallQuit:
+	if (getbattleflag("feature.bgqueue"))
+		bg_desert;
+	else
+		bg_leave;
+	end;
+
+OnReady:
+	announce "[Battleground]: Poring Ball has just began !",0;
+	$@BG20 = 1;
+	bg_warp $@BG_Team201,"bg_ball",.respawn[0],.respawn[1];
+	bg_warp $@BG_Team202,"bg_ball",.respawn[2],.respawn[3];
+	$@poringball = 2;
+	$@poringballnext_teamid = 0;
+	$@score_poring_red = 0;
+	$@score_poring_blue = 0;
+	bg_updatescore "bg_ball",$@score_poring_blue,$@score_poring_red;
+	MoveNPC "Poring Ball",.ball_center[0],.ball_center[1];
+	viewpointmap "bg_ball",1, .ball_center[0], .ball_center[1], 1, 0xffffff;
+	initnpctimer;
+	end;
+
+OnTimer1000:
+	mapannounce "bg_ball","[Poring Ball]: Start of the match in 10 seconds.",0;
+	end;
+OnTimer4500:
+	mapannounce "bg_ball", "[Poring Ball]: Start of the match in 5 seconds.",0;
+	end;
+OnTimer10000:
+	mapannounce "bg_ball","[Poring Ball]: Match has just begun !",0;
+	mapannounce "bg_ball","[Received] : Push and Shoot item skills",0;
+	bg_warp $@BG_Team201,"bg_ball",35,108;
+	bg_warp $@BG_Team202,"bg_ball",122,49;
+	$@poringball = 3;
+	getmapunits(BL_PC,"bg_ball",.@array);
+	for(.@i = 0; .@i < getarraysize(.@array); .@i++) {
+		if(!countitem("SKILL_SHOOT",.@array[.@i])) getitem "SKILL_SHOOT",1,.@array[.@i];
+		if(!countitem("SKILL_PUSH",.@array[.@i])) getitem "SKILL_PUSH",1,.@array[.@i];
+		if(!.pvp) setpcblock PCBLOCK_ATTACK,1,.@array[.@i];
+		//sc_start SC_TIMERDOWN,361000,360,10000,SCSTART_NOAVOID,.@array[.@i];
+	}
+	end;
+OnTimer190000:
+	mapannounce "bg_ball", "[Poring Ball]: Half-time !",bc_map;
+	end;
+OnTimer370000:
+	mapannounce "bg_ball", "[Poring Ball]: End of the match !",bc_map;
+	$@poringball = 4;
+	$@BG_Status = 2;
+	bg_reserve "bg_ball";
+	end;
+OnTimer376000:
+	MoveNPC "Poring Ball",.ball_center[0],.ball_center[1];
+	stopnpctimer;
+	if ($@score_poring_blue<$@score_poring_red) {
+		mapannounce "bg_ball", "Congrats red team !!",bc_map;
+		callfunc "BG_get_Rewards",$@BG_Team201,7829,1;
+		callfunc "BG_get_Rewards",$@BG_Team202,7829,5;
+		callfunc "BG_ranking",$@BG_Team201,BG_PORINGBALL,0;
+		callfunc "BG_ranking",$@BG_Team202,BG_PORINGBALL,1;
+	} else if ($@score_poring_blue>$@score_poring_red) {
+		mapannounce "bg_ball", "Congrats blue team !!",bc_map;
+		callfunc "BG_get_Rewards",$@BG_Team201,7829,5;
+		callfunc "BG_get_Rewards",$@BG_Team202,7829,1;
+		callfunc "BG_ranking",$@BG_Team201,BG_PORINGBALL,1;
+		callfunc "BG_ranking",$@BG_Team202,BG_PORINGBALL,0;
+	} else {
+		mapannounce "bg_ball", "Draw !!",bc_map;
+		callfunc "BG_get_Rewards",$@BG_Team201,7829,1;
+		callfunc "BG_get_Rewards",$@BG_Team202,7829,1;
+	}
+	donpcevent "Poring Ball::OnBackToCenter";
+	sleep 7000;
+	set $@poringball,0;
+	set $@poringballnext_teamid, 0;
+	cleanmap "bg_ball";
+	getmapunits(BL_PC,"bg_ball",.@array);
+	for(.@i = 0; .@i < getarraysize(.@array); .@i++) {
+		if(countitem("SKILL_SHOOT",.@array[.@i])) delitem "SKILL_SHOOT",1,.@array[.@i];
+		if(countitem("SKILL_PUSH",.@array[.@i])) delitem "SKILL_PUSH",1,.@array[.@i];
+		if(!.pvp) setpcblock PCBLOCK_ATTACK,0,.@array[.@i];
+		//sc_start SC_TIMERDOWN,361000,360,10000,SCSTART_NOAVOID,.@array[.@i];
+	}
+	mapwarp "bg_ball","bat_room",154,150;
+	if($@BG_Team201) { bg_destroy $@BG_Team201; $@BG_Team201 = 0; }
+	if($@BG_Team202) { bg_destroy $@BG_Team202; $@BG_Team202 = 0; }
+	$@BG20 = 0;
+	bg_unbook "bg_ball";
+	end;
+}
+
+// ===========================================================
+// Map Flags
+// ===========================================================
+
+bg_ball	mapflag	nomemo
+bg_ball	mapflag	noteleport
+bg_ball	mapflag	nowarp
+bg_ball	mapflag	nosave	SavePoint
+bg_ball	mapflag	battleground	2
+bg_ball	mapflag	nopenalty
+bg_ball	mapflag	noskill
+
+// ===========================================================
+// Functions
+// ===========================================================
+function	script	CheckConditionsPB	{
+	// Check if pc is hidden
+	if(getstatus(SC_HIDING) || getstatus(SC_CLOAKING) || getstatus(SC_CHASEWALK) || getstatus(SC_CLOAKINGEXCEED) || getstatus(SC_CAMOUFLAGE) || getstatus(SC__INVISIBILITY)  ) {
+		dispbottom "You cannot hit the ball while hiding.";
+		return 0;
+	}
+
+	// Check if the event is on
+	if ($@poringball != 3) {
+		npctalk "No match ! don't hit !";
+		return 0;
+	}
+
+	// If ball is going towards a specific destination, we can't interrupt
+	if (getvariableofnpc(.destination,"Poring Ball")) return 0;
+
+	// Anti-cheat
+	if ((getcharid(4) != $@BG_Team201) && (getcharid(4) != $@BG_Team202) && getgmlevel()<10) {
+		warp "prontera",0,0;
+		return 0;
+	}
+
+	return 1;
+}
+
+function	script	CheckPositionPB	{
+	if (getarg(1) < getarg(0)) return 1;
+	else if (getarg(1) > getarg(0)) return -1;
+	else return 0;
+}
+
+function	script	CheckPoringClose	{
+	getmapxy .@map$,.@x,.@y;
+	getmapxy .@map2$,.@x2,.@y2,BL_NPC,"Poring Ball";
+	if (distance(.@x,.@y,.@x2,.@y2)>2)||(.@map$ != "bg_ball") return 0;
+	return 1;
+}
+
+function	script	Skill_Shoot	{
+	if(callfunc("CheckPoringClose")) {
+		if(getvariableofnpc(.busy,"Poring Ball")) end;
+		dispbottom "[Shoot] : Throw the Poring Ball within the next 3 sec.";
+		setporingball;
+		sleep2 3000;
+		removeporingball;
+	}
+	return;
+}
+
+function	script	Skill_Push	{
+	getmapxy .@map$,.@x,.@y;
+	.@bgteam = bg_teamid();
+	.@launcher = getcharid(3);
+	if(.@map$ != "bg_ball") end;
+	showscript "Push !!";
+	specialeffect2 457;
+	detachrid;
+	getareaunits(BL_PC,.@map$,.@x-1,.@y-1,.@x+1,.@y+1,.@array);
+	for (.@i = 0; .@i < getarraysize(.@array); .@i++) {
+		if(.@array[.@i] == .@launcher) || (bg_teamid(.@array[.@i]) == .@bgteam)
+			continue;
+		specialeffect2 2,AREA,convertpcinfo(.@array[.@i],CPC_NAME);
+		if(rand(0,100) >= readparam(bVit,convertpcinfo(.@array[.@i],CPC_NAME)))
+			unitpush .@array[.@i],rand(0,7),getvariableofnpc(.skill_push_cells,"Poringball_Config");
+		if(rand(0,100) <= getvariableofnpc(.skill_push_chance,"Poringball_Config")-(readparam(bVit,convertpcinfo(.@array[.@i],CPC_NAME))/5)) {
+			sit convertpcinfo(.@array[.@i],CPC_NAME);
+			setpcblock PCBLOCK_SITSTAND, true, .@array[.@i];
+		}
+	}
+	sleep 1000*getvariableofnpc(.skill_push_sit_time,"Poringball_Config");
+	for (.@i = 0; .@i < getarraysize(.@array); .@i++) {
+		setpcblock PCBLOCK_SITSTAND, false, .@array[.@i];
+	}
+	return;
+}
+
+// ===========================================================
+// Throw Ball on a clicked cell scripts.
+// ===========================================================
+bg_ball,0,0,0	script	TryThrowBall	-1,{
+	if(callfunc("CheckPoringClose")) {
+		if(!callfunc("CheckConditionsPB")) end;
+		specialeffect 1,AREA,"Poring Ball";
+		showscript "Shoot !!";
+		.poringx = getporingballx();
+		.poringy = getporingbally();
+		doevent "Poring Ball::OnShoot";
+		removeporingball;
+	}
+	end;
+}
+
+// ===========================================================
+// Ball scripts.
+// ===========================================================
+bg_ball,78,79,4	script	Poring Ball	1002,{
+	getmapxy .@map$,.@x,.@y;
+OnStart:
+	if(!callfunc("CheckConditionsPB")) end;
+
+	// If pc is too far, pc will automatically walk towards the ball and hit it
+	if (distance(getnpcinfo(NPC_X),getnpcinfo(NPC_Y),.@x,.@y)>2) {
+		unitwalk getcharid(3),getnpcinfo(NPC_X),getnpcinfo(NPC_Y),"Poring Ball::OnArrived";
+		end;
+	}
+
+	// Check which team's turn
+	if ($@poringballnext_teamid != 0) && (getcharid(4) != $@poringballnext_teamid) {
+		dispbottom "Wait your turn.";
+		if(!.busy)
+			goto OnStartTimer;
+		end;
+	}
+
+	//=======================================================
+	// = Attributes influences
+	//=======================================================
+	// Distance
+	.distance = getvariableofnpc(.distance,"Poringball_Config");
+	if(readparam(bStr) > readparam(bInt)) .distance += .distance*readparam(bStr)/100;	// STR affects distance by STR% if STR > INT
+	else .distance += .distance*readparam(bInt)/100;					// INT affects distance by INT% if INT > STR
+	.distance = rand(.distance-2,.distance);
+	// Ball speed
+	.@speed = getvariableofnpc(.speed,"Poringball_Config");					// AGI affects ball walking speed by AGI/3%
+	.@speed -= .@speed*(readparam(bAgi)/3)/100;						// AGI affects ball walking speed by AGI/3%
+	// Chance of touch
+	if(rand(0,100) > getvariableofnpc(.chance,"Poringball_Config")+readparam(bDex)/3){	// DEX affects chance of hitting by DEX/3%.
+		specialeffect2 611;
+		end;
+	}
+	// Critical
+	if(rand(0,100) < 20+(readparam(bLuk)/2)) {						// 20+LUK/2% chance to critical
+		.@crit = 1;
+		.distance += rand(2,4);
+		.@speed -= 20;
+	}
+	// Caps
+	if(.distance >= 15) .distance = 15;	// Distance max
+	if(.@speed <= 50) .@speed = 50;		// Speed max
+	// Penalty
+	if(.penaltyGO) {
+		.distance += rand(15,20);
+		.@speed -= 20;
+		.@crit = 1;
+	}
+
+	.@movingX = callfunc("CheckPositionPB",getnpcinfo(NPC_X),.@x);
+	.@movingY = callfunc("CheckPositionPB",getnpcinfo(NPC_Y),.@y);
+	.PlayerName$ = strcharinfo(0);
+	$@poringballnext_teamid = 0;
+
+	if (getnpcinfo(NPC_X)+(.@movingX*.distance) >= getvariableofnpc(.map_corner[1],"Poringball_Config")) .distance = getvariableofnpc(.map_corner[1],"Poringball_Config") - getnpcinfo(NPC_X);
+	else if (getnpcinfo(NPC_X)+(.@movingX*.distance) <= getvariableofnpc(.map_corner[0],"Poringball_Config")) .distance = getnpcinfo(NPC_X) - getvariableofnpc(.map_corner[0],"Poringball_Config");
+	else if (getnpcinfo(NPC_Y)+(.@movingY*.distance) >= getvariableofnpc(.map_corner[3],"Poringball_Config")) .distance = getvariableofnpc(.map_corner[3],"Poringball_Config") - getnpcinfo(NPC_Y);
+	else if (getnpcinfo(NPC_Y)+(.@movingY*.distance) <= getvariableofnpc(.map_corner[2],"Poringball_Config")) .distance = getnpcinfo(NPC_Y) - getvariableofnpc(.map_corner[2],"Poringball_Config");
+	if(!.distance) .distance ++;
+	npcspeed .@speed;
+	npcwalkto getnpcinfo(NPC_X)+.@movingX*.distance,getnpcinfo(NPC_Y)+.@movingY*.distance;
+
+	//=======================================================
+	// = Visual effects
+	//=======================================================
+	specialeffect2 457;
+	if(readparam(bStr) > readparam(bInt)) specialeffect 2;
+	else if(readparam(bDex) > readparam(bStr)) specialeffect 3;
+	else misceffect 435;
+	if(.@crit) {
+		misceffect 1;
+		misceffect 466;
+		misceffect 400;
+	} else misceffect 2;
+OnMove:
+	// Beginning of the movement
+	for(.@i = 0; .@i < .distance; .@i++) {
+		viewpointmap "bg_ball",1, getnpcinfo(NPC_X), getnpcinfo(NPC_Y), 1, 0xffffff;
+		if (.destination){
+			for(.@i2 = 0; .@i2 < 1; .@i2++) {
+				switch(.destination){
+					case 0: break;
+					case 1: // Back to the center
+						.@goingtoX = getvariableofnpc(.ball_center[0],"Poringball_Config");
+						.@goingtoY = getvariableofnpc(.ball_center[1],"Poringball_Config");
+						.@speed = 80;
+						break;
+					case 2: // corner blue team
+						.@goingtoX = getvariableofnpc(.ball_corner1[0],"Poringball_Config");
+						.@goingtoY = getvariableofnpc(.ball_corner1[1],"Poringball_Config");
+						.@speed = 80;
+						break;
+					case 3: // corner red team
+						.@goingtoX = getvariableofnpc(.ball_corner2[0],"Poringball_Config");
+						.@goingtoY = getvariableofnpc(.ball_corner2[1],"Poringball_Config");
+						.@speed = 80;
+						break;
+					case 4:	// Throw ball on a specific Cell
+						.@goingtoX = getvariableofnpc(.poringx,"TryThrowBall");
+						.@goingtoY = getvariableofnpc(.poringy,"TryThrowBall");
+						.@speed = 50;
+						break;
+				}
+
+				.@movingX = callfunc("CheckPositionPB",.@goingtoX,getnpcinfo(NPC_X));
+				.@movingY = callfunc("CheckPositionPB",.@goingtoY,getnpcinfo(NPC_Y));
+
+				npcspeed .@speed;
+				viewpointmap "bg_ball",1, getnpcinfo(NPC_X), getnpcinfo(NPC_Y), 1, 0xffffff;
+				npcwalkto getnpcinfo(NPC_X)+.@movingX,getnpcinfo(NPC_Y)+.@movingY;
+
+				if (getnpcinfo(NPC_X)==.@goingtoX) && (getnpcinfo(NPC_Y)==.@goingtoY) {
+					if (.destination == 2)
+						goto OnPenalty;
+					else if (.destination == 3)
+						goto OnPenalty;
+					.destination = 0;
+				} else .@i2 -= 1;
+				sleep .@speed;
+			}
+			end;
+		}
+
+		// Check if a player can stop the ball by being sit on its way
+		getareaunits(BL_PC,"bg_ball",getnpcinfo(NPC_X)-1,getnpcinfo(NPC_Y)-1,getnpcinfo(NPC_X)+1,getnpcinfo(NPC_Y)+1,.@array);
+		for(.@i3 = 0; .@i3 < getarraysize(.@array); .@i3++)
+			if(ispcsit(.@array[.@i3]))&&(getvariableofnpc(.blockage,"Poringball_Config"))
+				if(rand(0,100) >= 50+readparam(bVit,convertpcinfo(.@array,CPC_NAME))/3)
+					unitstopwalk getnpcid(0),USW_FIXPOS;
+		.@ballx = getnpcinfo(NPC_X)+.@movingX;
+		.@bally = getnpcinfo(NPC_Y)+.@movingY;
+		if(getvariableofnpc(.sound_poring,"Poringball_Config")) soundeffectall "poring_move.wav",0,"bg_ball";
+		if(.@moving) {
+			npcspeed .@speed;
+			npcwalkto .@ballx,.@bally;
+			.@moving -= 1;
+		}
+OnGoalCheck:
+		// Goal for the red Team
+		if (.@ballx >= getvariableofnpc(.map_corner[1],"Poringball_Config")) .@teamclose$ = "blue";
+		else if (.@ballx <= getvariableofnpc(.map_corner[0],"Poringball_Config")) .@teamclose$ = "red";
+		if(!.penaltyGO)&&(.@teamclose$ != "") {
+			if (.@bally >= getvariableofnpc(.map_goal[0],"Poringball_Config"))&&(.@bally <= getvariableofnpc(.map_goal[1],"Poringball_Config")){
+				misceffect 8;
+				npctalk "Goal !! I'm going back to the middle :>";
+				setd("$@score_poring_"+.@teamclose$+""),getd("$@score_poring_"+.@teamclose$+"")+1;
+				bg_updatescore "bg_ball",$@score_poring_blue,$@score_poring_red;
+				if(.@teamclose$=="red") $@poringballnext_teamid = $@BG_Team201; else $@poringballnext_teamid = $@BG_Team202;
+				mapannounce "bg_ball", ""+.PlayerName$+" scored a goal for the "+.@teamclose$+" team. First kick for the other team.",bc_blue;
+				goto OnBackToCenter;
+			}
+			.distance += 3;
+			if(.@teamclose$ == "red") .@movingX -= 1; else .@movingX += 1;
+			.@moving += 3;
+			.@teamclose$ = "";
+			misceffect 426;
+		} else if (!.penaltyGO)&&(.@bally >= getvariableofnpc(.map_corner[3],"Poringball_Config")) {
+			.distance += 3;
+			.@movingY -= 1;
+			.@moving += 3;
+			misceffect 426;
+		} else if (!.penaltyGO)&&(.@bally <= getvariableofnpc(.map_corner[2],"Poringball_Config")) {
+			.distance += 3;
+			.@movingY += 1;
+			.@moving += 3;
+			misceffect 426;
+		}
+		sleep .@speed;
+	}
+	if(.penaltyGO)
+		.penaltyGO = 0;
+	end;
+
+OnBackToCenter:
+	.destination = 1;
+	.distance = 1;
+	goto OnMove;
+OnPenaltyRed:
+	.destination = 2;
+	.distance = 1;
+	npctalk "Penalty !!";
+	goto OnMove;
+OnPenaltyBlue:
+	.destination = 3;
+	.distance = 1;
+	npctalk "Penalty !!";
+	goto OnMove;
+OnPenalty:
+	.destination = 0;
+	.penaltyGO = 1;
+	for(.@i = 20; .@i > 0; .@i--) {
+		if(.penaltyGO) {
+			sleep 1000;
+			npctalk "Time left : "+.@i;
+		} else end;
+	}
+	.penaltyGO = 0;
+	$@poringballnext_teamid = 0;
+	end;
+OnShoot:
+	.destination = 4;
+	.distance = 1;
+	.@speed = 20;
+	goto OnMove;
+OnStartTimer:
+	.busy = 1;
+	sleep 2000;
+	if($@poringballnext_teamid) mapannounce "bg_ball", "Ball is for "+($@poringballnext_teamid==$@BG_Team201?"blue":"red")+" team for 5 seconds.",bc_blue;
+	sleep 5000;
+	set $@poringballnext_teamid, 0;
+	.busy = 0;
+	end;
+OnArrived:
+	getmapxy .@map$,.@x,.@y;
+	switch (getunitdir(getcharid(3))) {
+		case DIR_NORTH: .@y --; break;
+		case DIR_NORTHWEST: .@y --; .@x ++; break;
+		case DIR_WEST: .@x ++; break;
+		case DIR_SOUTHWEST: .@y ++; .@x ++; break;
+		case DIR_SOUTH: .@y ++; break;
+		case DIR_SOUTHEAST: .@y ++; .@x --; break;
+		case DIR_EAST: .@x --; break;
+		case DIR_NORTHEAST: .@y --; .@x --; break;
+	}
+	goto OnStart;
+}
+
+// ===========================================================
+// Goals
+// ===========================================================
+bg_ball,41,85,6	script	Blue Goal#poring1	1_FLAG_LION,{ end; }
+bg_ball,41,73,6	duplicate(Blue Goal#poring1)	Blue Goal#poring2	1_FLAG_LION
+bg_ball,116,85,2	duplicate(Blue Goal#poring1)	Red Goal#poring3	1_FLAG_EAGLE
+bg_ball,116,72,2	duplicate(Blue Goal#poring1)	Red Goal#poring4	1_FLAG_EAGLE
+
+// ===========================================================
+// Respawn
+// ===========================================================
+bg_ball,133,137,3	script	Return#ball1	4_ENERGY_RED,{
+	if($@poringball == 3) {
+		attachnpctimer;
+		initnpctimer;
+	}
+	end;
+OnTimer1000:
+	npctalk "5",strnpcinfo(0),bc_self;
+	end;
+OnTimer2000:
+	npctalk "4",strnpcinfo(0),bc_self;
+	end;
+OnTimer3000:
+	npctalk "3",strnpcinfo(0),bc_self;
+	end;
+OnTimer4000:
+	npctalk "2",strnpcinfo(0),bc_self;
+	specialeffect2 501;
+	end;
+OnTimer5000:
+	npctalk "1",strnpcinfo(0),bc_self;
+	specialeffect2 34;
+	end;
+OnTimer6000:
+	stopnpctimer;
+	if(getcharid(4) == $@BG_Team202) {
+		if(rand(0,1)) warp "bg_ball",121,107;
+		else warp "bg_ball",121,50;
+	} else {
+		if(rand(0,1)) warp "bg_ball",36,50;
+		else warp "bg_ball",36,107;
+	}
+	sleep2 200;
+	specialeffect2 6;
+	end;
+}
+
+bg_ball,21,26,3	duplicate(Return#ball1)	Return#ball2	4_ENERGY_BLUE
+
+// ===========================================================
+// Healer
+// ===========================================================
+bg_ball,127,138,3	duplicate(BGHeal)	Healer#ball1	95
+bg_ball,25,28,3	duplicate(BGHeal)	Healer#ball2	95
\ No newline at end of file
diff --git a/npc/battleground/bg_rush.txt b/npc/battleground/bg_rush.txt
new file mode 100644
index 000000000..3480fbef2
--- /dev/null
+++ b/npc/battleground/bg_rush.txt
@@ -0,0 +1,823 @@
+//===== rAthena Script =======================================
+//= Battleground Extended + : Rush
+//===== By: ==================================================
+//= eAmod / Grenat
+//===== Description: =========================================
+//= Battleground Extended + scripts.
+//===== Additional Comments: =================================
+//= Adaptation for rAthena 2020.
+//= This is a free release.
+//= Please do NOT take ownership.
+//= The original author will always stay eAmod,
+//= It would be a disgrace claiming it's yours and making
+//= money out of it. [Grenat]
+//============================================================
+
+// ===========================================================
+// Configuration
+// ===========================================================
+-	script	Rush	FAKE_NPC,{
+	end;
+
+OnInit:
+	setwall "rush_cas01",198,228,10,6,0,"Rush_wall_a";
+	setcell "rush_cas01",198,224,207,233,cell_basilica,1;
+	setwall "rush_cas02",142,48,10,6,0,"Rush_wall_b";
+	setcell "rush_cas02",142,44,151,53,cell_basilica,1;
+	setwall "rush_cas03",62,8,10,0,0,"Rush_wall_c";
+	setcell "rush_cas03",56,6,69,17,cell_basilica,1;
+	setwall "rush_cas04",266,290,10,6,0,"Rush_wall_d";
+	setcell "rush_cas04",266,286,275,295,cell_basilica,1;
+	end;
+
+OnTeam1Quit:
+OnTeam2Quit:
+	bg_desert;
+	end;
+
+OnTeam1Active:
+OnTeam2Active:
+	warp .Castle$,43,229;
+	end;
+
+OnReady:
+	set .Castle$,"rush_cas01";
+	set .GX,202; set .GY,230; set .CX,202; set .CY,226;
+
+	announce "[Battleground]: Rush has just began ! (@joinbg to join)",bc_all,0xccff00;
+	bg_reserve .Castle$;
+	set $@BG15,1;
+	initnpctimer;
+	initnpctimer "Rush_Respawn";
+	set $@score_rush_blue, 0;
+	set $@score_rush_red, 0;
+	set .Defender, 0; // No Defender
+	// Emperium =====================
+	bg_monster 0,.Castle$,158,174,"Emperium",20402,"Rush::OnEmperium";
+
+	// ======================================
+	sleep 2100;
+	bg_warp $@BG15_Team1,.Castle$,43,229;
+	bg_warp $@BG15_Team2,.Castle$,43,229;
+	.x = 43; .y = 229;
+	sleep 4000;
+	mapannounce .Castle$,"Move on warriors!! Let's capture this Castle!!",1,0xDDA0DD;
+	end;
+
+OnTimer60000:
+	mapannounce .Castle$,"Battle of Rush will ends in 6 minutes",1,0xDDA0DD;
+	end;
+
+OnTimer360000:
+	mapannounce .Castle$,"Battle of Rush will ends in 1 minute",1,0xDDA0DD;
+	end;
+
+OnEmperium:
+	if ($@BG15 != 1)
+		end;
+
+	if (.Defender == 0) { // First Capture
+		initnpctimer;
+		set .Defender,getcharid(4);
+		mapannounce .Castle$,bg_get_data(.Defender,3) + " : Castle captured, now prepare to Defend it!!",1,bg_get_data(.Defender,4);
+
+		if (.Defender == $@BG15_Team1) {
+			set $@score_rush_blue,1;
+			set .Attacker,$@BG15_Team2;
+		} else {
+			set $@score_rush_red,1;
+			set .Attacker,$@BG15_Team1;
+		}
+
+		bg_warp .Attacker,.Castle$,.x,.y; // To Cementery and Wait
+		bg_updatescore .Castle$,$@score_rush_blue,$@score_rush_red;
+
+		// Emperium =====================
+		bg_monster .Defender,.Castle$,158,174,"Emperium",20402,"Rush::OnEmperium";
+
+		// ======================================
+		initnpctimer "Rush_Respawn";
+
+		sleep 5000;
+		mapannounce .Castle$,bg_get_data(.Attacker,3) + " : Capture the Castle, it's our last chance to Win!!",1,bg_get_data(.Attacker,4);
+		end;
+	}
+
+	// Second Capture
+	mapannounce .Castle$,bg_get_data(.Attacker,3) + " : Castle captured, we won the Battle!!",1,bg_get_data(.Attacker,4);
+	if (.Defender == $@BG15_Team1)
+		set $@score_rush_red,2;
+	else
+		set $@score_rush_blue,2;
+
+	donpcevent "Rush::OnMatchEnd";
+	end;
+
+OnTimer420000:
+	if (.Defender == 0)
+		mapannounce .Castle$,"Castle captured Fail. No winners",1,0xDDA0DD;
+	else {
+		mapannounce .Castle$,bg_get_data(.Defender,3) + " : Castle protected, we won the Battle!!",1,bg_get_data(.Defender,4);
+		if (.Defender == $@BG15_Team1)
+			set $@score_rush_blue,3;
+		else
+			set $@score_rush_red,3;
+	}
+
+	donpcevent "Rush::OnMatchEnd";
+	end;
+
+OnMatchEnd:
+	stopnpctimer;
+	stopnpctimer "Rush_Respawn";
+	killmonster .Castle$,"Rush::OnEmperium";
+	bg_updatescore .Castle$,$@score_rush_blue,$@score_rush_red;
+	set $@BG15, 2;
+	// =======================================================
+	// Team Rewards
+	// =======================================================
+	if ($@score_rush_blue > $@score_rush_red) {
+		set .@Won,0;
+		callfunc "BG_get_Rewards",$@BG15_Team1,7828,5;
+		callfunc "BG_get_Rewards",$@BG15_Team2,7828,1;
+		callfunc "BG_ranking",$@BG15_Team1,BG_RUSH,1;
+		callfunc "BG_ranking",$@BG15_Team2,BG_RUSH,0;
+	} else if ($@score_rush_red > $@score_rush_blue) {
+		set .@Won,0;
+		callfunc "BG_get_Rewards",$@BG15_Team2,7828,5;
+		callfunc "BG_get_Rewards",$@BG15_Team1,7828,1;
+		callfunc "BG_ranking",$@BG15_Team1,BG_RUSH,0;
+		callfunc "BG_ranking",$@BG15_Team2,BG_RUSH,1;
+	} else {
+		callfunc "BG_get_Rewards",$@BG15_Team1,7828,1;
+		callfunc "BG_get_Rewards",$@BG15_Team2,7828,1;
+	}
+	// =======================================================
+	set $@score_rush_blue, 0;
+	set $@score_rush_red, 0;
+	sleep 5000;
+	bg_updatescore .Castle$,$@score_rush_blue,$@score_rush_red;
+	$@BG15 = 0;
+	mapwarp .Castle$,"bat_room",154,150;
+	if($@BG15_Team1) { bg_destroy $@BG15_Team1; $@BG15_Team1 = 0; }
+	if($@BG15_Team2) { bg_destroy $@BG15_Team2; $@BG15_Team2 = 0; }
+	bg_unbook .Castle$;
+	end;
+}
+
+
+-	script	Rush1	FAKE_NPC,{
+	end;
+
+OnTeam1Quit:
+OnTeam2Quit:
+	bg_desert;
+	end;
+
+OnTeam1Active:
+OnTeam2Active:
+	warp .Castle$,252,271;
+	end;
+OnReady:
+	//if ($@BG15b)
+	//	end;
+
+	announce "[Battleground]: Rush has just began !",0;
+	set .Castle$,"rush_cas02";
+	set .GX,146; set .GY, 50; set .CX,146; set .CY, 46;
+
+	bg_reserve .Castle$;
+	set $@BG15b,1;
+	initnpctimer;
+	initnpctimer "Rush_Respawn1";
+	set $@score_rush_blue1, 0;
+	set $@score_rush_red1, 0;
+	set .Defender, 0; // No Defender
+	// Emperium =====================
+	bg_monster 0,.Castle$,271,29,"Emperium",20402,"Rush1::OnEmperium";
+
+	// ======================================
+	sleep 2100;
+	bg_warp $@BG15b_Team1,.Castle$,252,271;
+	bg_warp $@BG15b_Team2,.Castle$,252,271;
+	.x = 252; .y = 271;
+	sleep 4000;
+	mapannounce .Castle$,"Move on warriors!! Let's capture this Castle!!",1,0xDDA0DD;
+	end;
+
+OnTimer60000:
+	mapannounce .Castle$,"Battle of Rush will ends in 6 minutes",1,0xDDA0DD;
+	end;
+
+OnTimer360000:
+	mapannounce .Castle$,"Battle of Rush will ends in 1 minute",1,0xDDA0DD;
+	end;
+
+OnEmperium:
+	if ($@BG15 != 1)
+		end;
+
+	if (.Defender == 0) { // First Capture
+		initnpctimer;
+		set .Defender,getcharid(4);
+		mapannounce .Castle$,bg_get_data(.Defender,3) + " : Castle captured, now prepare to Defend it!!",1,bg_get_data(.Defender,4);
+
+		if (.Defender == $@BG15b_Team1) {
+			set $@score_rush_blue1,1;
+			set .Attacker,$@BG15b_Team2;
+		} else {
+			set $@score_rush_red1,1;
+			set .Attacker,$@BG15b_Team1;
+		}
+
+		bg_warp .Attacker,.Castle$,.x,.y; // To Cementery and Wait
+		bg_updatescore .Castle$,$@score_rush_blue1,$@score_rush_red1;
+
+		// Emperium =====================
+		bg_monster .Defender,.Castle$,271,29,"Emperium",20402,"Rush1::OnEmperium";
+
+		// ======================================
+		initnpctimer "Rush_Respawn1";
+
+		sleep 5000;
+		mapannounce .Castle$,bg_get_data(.Attacker,3) + " : Capture the Castle, it's our last chance to Win!!",1,bg_get_data(.Attacker,4);
+		end;
+	}
+
+	// Second Capture
+	mapannounce .Castle$,bg_get_data(.Attacker,3) + " : Castle captured, we won the Battle!!",1,bg_get_data(.Attacker,4);
+	if (.Defender == $@BG15b_Team1)
+		set $@score_rush_red1,2;
+	else
+		set $@score_rush_blue1,2;
+
+	donpcevent "Rush1::OnMatchEnd";
+	end;
+
+OnTimer420000:
+	if (.Defender == 0)
+		mapannounce .Castle$,"Castle captured Fail. No winners",1,0xDDA0DD;
+	else {
+		mapannounce .Castle$,bg_get_data(.Defender,3) + " : Castle protected, we won the Battle!!",1,bg_get_data(.Defender,4);
+		if (.Defender == $@BG15b_Team1)
+			set $@score_rush_blue1,3;
+		else
+			set $@score_rush_red1,3;
+	}
+
+	donpcevent "Rush1::OnMatchEnd";
+	end;
+
+OnMatchEnd:
+	stopnpctimer;
+	stopnpctimer "Rush_Respawn1";
+	killmonster .Castle$,"Rush1::OnEmperium";
+	bg_updatescore .Castle$,$@score_rush_blue1,$@score_rush_red1;
+	set $@BG15, 2;
+	// =======================================================
+	// Team Rewards
+	// =======================================================
+	if ($@score_rush_blue1 > $@score_rush_red1) {
+		callfunc "BG_get_Rewards",$@BG15b_Team1,7828,5;
+		callfunc "BG_get_Rewards",$@BG15b_Team2,7828,1;
+		callfunc "BG_ranking",$@BG15b_Team1,BG_RUSH,1;
+		callfunc "BG_ranking",$@BG15b_Team2,BG_RUSH,0;
+	} else if ($@score_rush_red1 > $@score_rush_blue1) {
+		callfunc "BG_get_Rewards",$@BG15b_Team2,7828,5;
+		callfunc "BG_get_Rewards",$@BG15b_Team1,7828,1;
+		callfunc "BG_ranking",$@BG15b_Team1,BG_RUSH,0;
+		callfunc "BG_ranking",$@BG15b_Team2,BG_RUSH,1;
+	} else {
+		callfunc "BG_get_Rewards",$@BG15b_Team1,7828,1;
+		callfunc "BG_get_Rewards",$@BG15b_Team2,7828,1;
+	}
+	// =======================================================
+	set $@score_rush_blue1, 0;
+	set $@score_rush_red1, 0;
+	sleep 5000;
+	bg_updatescore .Castle$,$@score_rush_blue1,$@score_rush_red1;
+	$@BG15b = 0;
+	mapwarp .Castle$,"bat_room",154,150;
+	if($@BG15b_Team1) { bg_destroy $@BG15b_Team1; $@BG15b_Team1 = 0; }
+	if($@BG15b_Team2) { bg_destroy $@BG15b_Team2; $@BG15b_Team2 = 0; }
+	bg_unbook .Castle$;
+	end;
+}
+
+-	script	Rush2	FAKE_NPC,{
+	end;
+
+OnTeam1Quit:
+OnTeam2Quit:
+	bg_desert;
+	end;
+
+OnTeam1Active:
+OnTeam2Active:
+	warp .Castle$,216,103;
+	end;
+
+OnReady:
+	//if ($@BG15c)
+	//	end;
+
+	announce "[Battleground]: Rush has just began !",0;
+	set .Castle$,"rush_cas03";
+	set .GX, 60; set .GY, 13; set .CX, 64; set .CY, 13;
+
+	bg_reserve .Castle$;
+	set $@BG15c,1;
+	initnpctimer;
+	initnpctimer "Rush_Respawn2";
+	set $@score_rush_blue2, 0;
+	set $@score_rush_red2, 0;
+	set .Defender, 0; // No Defender
+	// Emperium =====================
+	bg_monster 0,.Castle$,28,102,"Emperium",20402,"Rush2::OnEmperium";
+
+	// ======================================
+	sleep 2100;
+	bg_warp $@BG15c_Team1,.Castle$,216,103;
+	bg_warp $@BG15c_Team2,.Castle$,216,103;
+	.x = 216; .y = 103;
+	sleep 4000;
+	mapannounce .Castle$,"Move on warriors!! Let's capture this Castle!!",1,0xDDA0DD;
+	end;
+
+OnTimer60000:
+	mapannounce .Castle$,"Battle of Rush will ends in 6 minutes",1,0xDDA0DD;
+	end;
+
+OnTimer360000:
+	mapannounce .Castle$,"Battle of Rush will ends in 1 minute",1,0xDDA0DD;
+	end;
+
+OnEmperium:
+	if ($@BG15 != 1)
+		end;
+
+	if (.Defender == 0) { // First Capture
+		initnpctimer;
+		set .Defender,getcharid(4);
+		mapannounce .Castle$,bg_get_data(.Defender,3) + " : Castle captured, now prepare to Defend it!!",1,bg_get_data(.Defender,4);
+
+		if (.Defender == $@BG15c_Team1) {
+			set $@score_rush_blue2,1;
+			set .Attacker,$@BG15c_Team2;
+		} else {
+			set $@score_rush_red2,1;
+			set .Attacker,$@BG15c_Team1;
+		}
+
+		bg_warp .Attacker,.Castle$,.x,.y; // To Cementery and Wait
+		bg_updatescore .Castle$,$@score_rush_blue2,$@score_rush_red2;
+
+		// Emperium =====================
+		bg_monster .Defender,.Castle$,28,102,"Emperium",20402,"Rush2::OnEmperium";
+
+		// ======================================
+		initnpctimer "Rush_Respawn2";
+
+		sleep 5000;
+		mapannounce .Castle$,bg_get_data(.Attacker,3) + " : Capture the Castle, it's our last chance to Win!!",1,bg_get_data(.Attacker,4);
+		end;
+	}
+
+	// Second Capture
+	mapannounce .Castle$,bg_get_data(.Attacker,3) + " : Castle captured, we won the Battle!!",1,bg_get_data(.Attacker,4);
+	if (.Defender == $@BG15c_Team1)
+		set $@score_rush_red2,2;
+	else
+		set $@score_rush_blue2,2;
+
+	donpcevent "Rush2::OnMatchEnd";
+	end;
+
+OnTimer420000:
+	if (.Defender == 0)
+		mapannounce .Castle$,"Castle captured Fail. No winners",1,0xDDA0DD;
+	else {
+		mapannounce .Castle$,bg_get_data(.Defender,3) + " : Castle protected, we won the Battle!!",1,bg_get_data(.Defender,4);
+		if (.Defender == $@BG15c_Team1)
+			set $@score_rush_blue2,3;
+		else
+			set $@score_rush_red2,3;
+	}
+
+	donpcevent "Rush2::OnMatchEnd";
+	end;
+
+OnMatchEnd:
+	stopnpctimer;
+	stopnpctimer "Rush_Respawn2";
+	killmonster .Castle$,"Rush2::OnEmperium";
+	bg_updatescore .Castle$,$@score_rush_blue2,$@score_rush_red2;
+	set $@BG15, 2;
+	// =======================================================
+	// Team Rewards
+	// =======================================================
+	if ($@score_rush_blue2 > $@score_rush_red2) {
+		callfunc "BG_get_Rewards",$@BG15c_Team1,7828,5;
+		callfunc "BG_get_Rewards",$@BG15c_Team2,7828,1;
+		callfunc "BG_ranking",$@BG15c_Team1,BG_RUSH,1;
+		callfunc "BG_ranking",$@BG15c_Team2,BG_RUSH,0;
+	} else if ($@score_rush_red2 > $@score_rush_blue2) {
+		callfunc "BG_get_Rewards",$@BG15c_Team2,7828,5;
+		callfunc "BG_get_Rewards",$@BG15c_Team1,7828,1;
+		callfunc "BG_ranking",$@BG15c_Team1,BG_RUSH,0;
+		callfunc "BG_ranking",$@BG15c_Team2,BG_RUSH,1;
+	} else {
+		callfunc "BG_get_Rewards",$@BG15c_Team1,7828,1;
+		callfunc "BG_get_Rewards",$@BG15c_Team2,7828,1;
+	}
+	// =======================================================
+	set $@score_rush_blue2, 0;
+	set $@score_rush_red2, 0;
+	sleep 5000;
+	bg_updatescore .Castle$,$@score_rush_blue2,$@score_rush_red2;
+	$@BG15c = 0;
+	mapwarp .Castle$,"bat_room",154,150;
+	if($@BG15c_Team1) { bg_destroy $@BG15c_Team1; $@BG15c_Team1 = 0; }
+	if($@BG15c_Team2) { bg_destroy $@BG15c_Team2; $@BG15c_Team2 = 0; }
+	bg_unbook .Castle$;
+	end;
+}
+
+-	script	Rush3	FAKE_NPC,{
+	end;
+
+OnTeam1Quit:
+OnTeam2Quit:
+	bg_desert;
+	end;
+
+OnTeam1Active:
+OnTeam2Active:
+	warp .Castle$,100,280;
+	end;
+
+OnReady:
+	//if ($@BG15d)
+	//	end;
+
+	announce "[Battleground]: Rush has just began !",0;
+	set .Castle$,"rush_cas04";
+	set .GX,270; set .GY,292; set .CX,270; set .CY,288;
+
+	bg_reserve .Castle$;
+	set $@BG15d,1;
+	initnpctimer;
+	initnpctimer "Rush_Respawn3";
+	set $@score_rush_blue3, 0;
+	set $@score_rush_red3, 0;
+	set .Defender, 0; // No Defender
+	// Emperium =====================
+	bg_monster 0,.Castle$,245,167,"Emperium",20402,"Rush3::OnEmperium";
+
+	// ======================================
+	sleep 2100;
+	bg_warp $@BG15d_Team1,.Castle$,100,280;
+	bg_warp $@BG15d_Team2,.Castle$,100,280;
+	.x = 100; .y = 280;
+	sleep 4000;
+	mapannounce .Castle$,"Move on warriors!! Let's capture this Castle!!",1,0xDDA0DD;
+	end;
+
+OnTimer60000:
+	mapannounce .Castle$,"Battle of Rush will ends in 6 minutes",1,0xDDA0DD;
+	end;
+
+OnTimer360000:
+	mapannounce .Castle$,"Battle of Rush will ends in 1 minute",1,0xDDA0DD;
+	end;
+
+OnEmperium:
+	if ($@BG15 != 1)
+		end;
+
+	if (.Defender == 0) { // First Capture
+		initnpctimer;
+		set .Defender,getcharid(4);
+		mapannounce .Castle$,bg_get_data(.Defender,3) + " : Castle captured, now prepare to Defend it!!",1,bg_get_data(.Defender,4);
+
+		if (.Defender == $@BG15d_Team1) {
+			set $@score_rush_blue3,1;
+			set .Attacker,$@BG15d_Team2;
+		} else {
+			set $@score_rush_red3,1;
+			set .Attacker,$@BG15d_Team1;
+		}
+
+		bg_warp .Attacker,.Castle$,.x,.y; // To Cementery and Wait
+		bg_updatescore .Castle$,$@score_rush_blue3,$@score_rush_red3;
+
+		// Emperium =====================
+		bg_monster .Defender,.Castle$,245,167,"Emperium",20402,"Rush3::OnEmperium";
+
+		// ======================================
+		initnpctimer "Rush_Respawn3";
+
+		sleep 5000;
+		mapannounce .Castle$,bg_get_data(.Attacker,3) + " : Capture the Castle, it's our last chance to Win!!",1,bg_get_data(.Attacker,4);
+		end;
+	}
+
+	// Second Capture
+	mapannounce .Castle$,bg_get_data(.Attacker,3) + " : Castle captured, we won the Battle!!",1,bg_get_data(.Attacker,4);
+	if (.Defender == $@BG15d_Team1)
+		set $@score_rush_red3,2;
+	else
+		set $@score_rush_blue3,2;
+
+	donpcevent "Rush3::OnMatchEnd";
+	end;
+
+OnTimer420000:
+	if (.Defender == 0)
+		mapannounce .Castle$,"Castle captured Fail. No winners",1,0xDDA0DD;
+	else {
+		mapannounce .Castle$,bg_get_data(.Defender,3) + " : Castle protected, we won the Battle!!",1,bg_get_data(.Defender,4);
+		if (.Defender == $@BG15d_Team1)
+			set $@score_rush_blue3,3;
+		else
+			set $@score_rush_red3,3;
+	}
+
+	donpcevent "Rush3::OnMatchEnd";
+	end;
+
+OnMatchEnd:
+	stopnpctimer;
+	stopnpctimer "Rush_Respawn3";
+	killmonster .Castle$,"Rush3::OnEmperium";
+	bg_updatescore .Castle$,$@score_rush_blue3,$@score_rush_red3;
+	set $@BG15, 2;
+	// =======================================================
+	// Team Rewards
+	// =======================================================
+	if ($@score_rush_blue3 > $@score_rush_red3) {
+		callfunc "BG_get_Rewards",$@BG15d_Team1,7828,5;
+		callfunc "BG_get_Rewards",$@BG15d_Team2,7828,1;
+		callfunc "BG_ranking",$@BG15d_Team1,BG_RUSH,1;
+		callfunc "BG_ranking",$@BG15d_Team2,BG_RUSH,0;
+	} else if ($@score_rush_red3 > $@score_rush_blue3) {
+		callfunc "BG_get_Rewards",$@BG15d_Team2,7828,5;
+		callfunc "BG_get_Rewards",$@BG15d_Team1,7828,1;
+		callfunc "BG_ranking",$@BG15d_Team1,BG_RUSH,0;
+		callfunc "BG_ranking",$@BG15d_Team2,BG_RUSH,1;
+	} else {
+		callfunc "BG_get_Rewards",$@BG15d_Team1,7828,1;
+		callfunc "BG_get_Rewards",$@BG15d_Team2,7828,1;
+	}
+	// =======================================================
+	set $@score_rush_blue3, 0;
+	set $@score_rush_red3, 0;
+	sleep 5000;
+	bg_updatescore .Castle$,$@score_rush_blue3,$@score_rush_red3;
+	$@BG15d = 0;
+	mapwarp .Castle$,"bat_room",154,150;
+	if($@BG15d_Team1) { bg_destroy $@BG15d_Team1; $@BG15d_Team1 = 0; }
+	if($@BG15d_Team2) { bg_destroy $@BG15d_Team2; $@BG15d_Team2 = 0; }
+	bg_unbook .Castle$;
+	end;
+}
+
+// Battleground Respawn
+// *********************************************************************
+
+-	script	Rush_Respawn	FAKE_NPC,{
+	end;
+
+OnTimer24000:
+	mapannounce getvariableofnpc(.Castle$,"Rush"),"-- Reinforcements entering the Battle of Rush --",1,0xDDA0DD;
+	end;
+
+OnTimer25000:
+	set .@Castle$,getvariableofnpc(.Castle$,"Rush");
+	set .@Defender,getvariableofnpc(.Defender,"Rush");
+
+		// rush_cas01 ========================================================================
+			areapercentheal .@Castle$,198,224,207,233,100,100;
+			if (.@Defender == 0)
+				areawarp .@Castle$,198,224,207,233,.@Castle$,43,229;
+			else if ($@BG15_Team1 == .@Defender) {
+				areawarp .@Castle$,198,229,207,233,.@Castle$,71,36;
+				areawarp .@Castle$,198,224,207,227,.@Castle$,43,229;
+			} else {
+				areawarp .@Castle$,198,229,207,233,.@Castle$,43,229;
+				areawarp .@Castle$,198,224,207,227,.@Castle$,71,36;
+			}
+
+	initnpctimer;
+	end;
+}
+-	script	Rush_Respawn1	FAKE_NPC,{
+	end;
+
+OnTimer24000:
+	mapannounce getvariableofnpc(.Castle$,"Rush1"),"-- Reinforcements entering the Battle of Rush --",1,0xDDA0DD;
+	end;
+
+OnTimer25000:
+	set .@Castle$,getvariableofnpc(.Castle$,"Rush1");
+	set .@Defender,getvariableofnpc(.Defender,"Rush1");
+
+		// rush_cas02 ========================================================================
+			areapercentheal .@Castle$,142,44,151,53,100,100;
+			if (.@Defender == 0)
+				areawarp .@Castle$,142,44,151,53,.@Castle$,252,271;
+			else if ($@BG15b_Team1 == .@Defender) {
+				areawarp .@Castle$,142,49,151,53,.@Castle$,40,235;
+				areawarp .@Castle$,142,44,151,47,.@Castle$,252,271;
+			} else {
+				areawarp .@Castle$,142,49,151,53,.@Castle$,252,271;
+				areawarp .@Castle$,142,44,151,47,.@Castle$,40,235;
+			}
+
+	initnpctimer;
+	end;
+}
+-	script	Rush_Respawn2	FAKE_NPC,{
+	end;
+
+OnTimer24000:
+	mapannounce getvariableofnpc(.Castle$,"Rush2"),"-- Reinforcements entering the Battle of Rush --",1,0xDDA0DD;
+	end;
+
+OnTimer25000:
+	set .@Castle$,getvariableofnpc(.Castle$,"Rush2");
+	set .@Defender,getvariableofnpc(.Defender,"Rush2");
+
+		// rush_cas03 ========================================================================
+			areapercentheal .@Castle$,56,6,69,17,100,100;
+			if (.@Defender == 0)
+				areawarp .@Castle$,56,6,69,17,.@Castle$,216,103;
+			else if ($@BG15c_Team1 == .@Defender) {
+				areawarp .@Castle$,56,6,61,17,.@Castle$,31,190;
+				areawarp .@Castle$,63,6,69,17,.@Castle$,216,103;
+			} else {
+				areawarp .@Castle$,56,6,61,17,.@Castle$,216,103;
+				areawarp .@Castle$,63,6,69,17,.@Castle$,31,190;
+			}
+	initnpctimer;
+	end;
+}
+-	script	Rush_Respawn3	FAKE_NPC,{
+	end;
+
+OnTimer24000:
+	mapannounce getvariableofnpc(.Castle$,"Rush3"),"-- Reinforcements entering the Battle of Rush --",1,0xDDA0DD;
+	end;
+
+OnTimer25000:
+	set .@Castle$,getvariableofnpc(.Castle$,"Rush3");
+	set .@Defender,getvariableofnpc(.Defender,"Rush3");
+
+		// rush_cas04 ========================================================================
+			areapercentheal .@Castle$,266,286,275,295,100,100;
+			if (.@Defender == 0)
+				areawarp .@Castle$,266,286,275,295,.@Castle$,100,280;
+			else if ($@BG15d_Team1 == .@Defender) {
+				areawarp .@Castle$,266,291,275,295,.@Castle$,116,89;
+				areawarp .@Castle$,266,286,275,289,.@Castle$,100,280;
+			} else {
+				areawarp .@Castle$,266,291,275,295,.@Castle$,100,280;
+				areawarp .@Castle$,266,286,275,289,.@Castle$,116,89;
+			}
+
+	initnpctimer;
+	end;
+}
+
+// ===========================================================
+// Heal
+// ===========================================================
+rush_cas01,198,230,6	duplicate(BGHeal)	Therapist in battle#rh1	4_F_SISTER
+rush_cas01,198,226,6	duplicate(BGHeal)	Therapist in battle#rh2	4_F_SISTER
+rush_cas02,142,50,6	duplicate(BGHeal)	Therapist in battle#rh3	4_F_SISTER
+rush_cas02,142,46,6	duplicate(BGHeal)	Therapist in battle#rh4	4_F_SISTER
+rush_cas03,60,17,4	duplicate(BGHeal)	Therapist in battle#rh5	4_F_SISTER
+rush_cas03,64,17,4	duplicate(BGHeal)	Therapist in battle#rh6	4_F_SISTER
+rush_cas04,266,292,6	duplicate(BGHeal)	Therapist in battle#rh7	4_F_SISTER
+rush_cas04,266,288,6	duplicate(BGHeal)	Therapist in battle#rh8	4_F_SISTER
+
+// ===========================================================
+// Warp Portals
+// ===========================================================
+rush_cas01,157,135,0	warp	rush106-1	1,1,rush_cas01,184,40
+rush_cas01,161,41,0	warp	rush102-1	1,1,rush_cas01,57,202
+rush_cas01,184,44,0	warp	rush106	1,1,rush_cas01,157,140
+rush_cas01,203,21,0	warp	rush105-1	1,1,rush_cas01,45,25
+rush_cas01,210,41,0	warp	rush101-1	1,1,rush_cas01,84,215
+rush_cas01,35,183,0	warp	rush104	1,1,rush_cas01,71,82
+rush_cas01,45,21,0	warp	rush105	1,1,rush_cas01,203,25
+rush_cas01,53,202,0	warp	rush102	1,1,rush_cas01,165,41
+rush_cas01,64,164,0	warp	rush103	1,1,rush_cas01,98,25
+rush_cas01,71,86,0	warp	rush104-1	1,1,rush_cas01,35,187
+rush_cas01,88,215,0	warp	rush101	1,1,rush_cas01,206,41
+rush_cas01,98,21,0	warp	rush103-1	1,1,rush_cas01,64,168
+
+rush_cas02,259,212,0	warp	rush201	1,1,rush_cas02,72,240
+rush_cas02,75,240,0	warp	rush201-1	1,5,rush_cas02,256,212
+rush_cas02,232,189,0	warp	rush202	1,1,rush_cas02,74,261
+rush_cas02,78,261,0	warp	rush202-1	1,1,rush_cas02,236,189
+rush_cas02,229,208,0	warp	rush203	1,1,rush_cas02,70,282
+rush_cas02,74,282,0	warp	rush203-1	1,1,rush_cas02,225,208
+rush_cas02,7,261,0	warp	rush204	1,1,rush_cas02,55,30
+rush_cas02,59,30,0	warp	rush204-1	1,1,rush_cas02,11,261
+rush_cas02,28,31,0	warp	rush205	1,1,rush_cas02,251,42
+rush_cas02,254,45,0	warp	rush205-1	1,1,rush_cas02,24,31
+
+rush_cas03,194,71,0	warp	rush301	1,1,rush_cas03,129,194
+rush_cas03,125,194,0	warp	rush301-1	1,1,rush_cas03,199,70
+rush_cas03,164,86,0	warp	rush302	1,1,rush_cas03,66,189
+rush_cas03,70,189,0	warp	rush302-1	1,1,rush_cas03,166,81
+rush_cas03,150,67,0	warp	rush303	1,1,rush_cas03,9,187
+rush_cas03,5,187,0	warp	rush303-1	1,1,rush_cas03,151,62
+rush_cas03,165,232,0	warp	rush304	1,1,rush_cas03,193,49
+rush_cas03,188,49,0	warp	rush304-1	1,1,rush_cas03,165,228
+rush_cas03,195,42,0	warp	rush305	1,1,rush_cas03,19,227
+rush_cas03,15,227,0	warp	rush305-1	1,1,rush_cas03,195,46
+rush_cas03,13,175,0	warp	rush306	1,1,rush_cas03,162,194
+rush_cas03,166,194,0	warp	rush306-1	1,1,rush_cas03,13,179
+rush_cas03,156,231,0	warp	rush307	1,1,rush_cas03,18,88
+rush_cas03,14,88,0	warp	rush307-1	1,1,rush_cas03,156,227
+
+rush_cas04,106,217,0	warp	rush407	1,1,rush_cas04,131,15
+rush_cas04,115,210,0	warp	rush408	1,1,rush_cas04,92,215
+rush_cas04,135,15,0	warp	rush407-1	1,1,rush_cas04,110,217
+rush_cas04,135,92,0	warp	rush402-1	1,1,rush_cas04,34,282
+rush_cas04,152,92,0	warp	rush404-1	1,1,rush_cas04,59,255
+rush_cas04,154,16,0	warp	rush414	1,1,rush_cas04,252,11
+rush_cas04,17,206,0	warp	rush406-1	1,1,rush_cas04,29,219
+rush_cas04,212,46,0	warp	rush415	1,1,rush_cas04,225,158
+rush_cas04,225,154,0	warp	rush415-1	1,1,rush_cas04,212,42
+rush_cas04,237,74,0	warp	rush412-1	1,1,rush_cas04,62,213
+rush_cas04,256,11,0	warp	rush414-1	1,1,rush_cas04,159,16
+rush_cas04,266,47,0	warp	rush409-1	1,1,rush_cas04,45,175
+rush_cas04,27,215,0	warp	rush406-2	1,1,rush_cas04,17,202
+rush_cas04,34,286,0	warp	rush402	1,1,rush_cas04,131,92
+rush_cas04,38,243,0	warp	rush406	1,1,rush_cas04,29,219
+rush_cas04,38,259,0	warp	rush403-1	1,1,rush_cas04,43,271
+rush_cas04,42,175,0	warp	rush409	1,1,rush_cas04,266,43
+rush_cas04,43,191,0	warp	rush410-1	1,1,rush_cas04,70,185
+rush_cas04,47,271,0	warp	rush403	1,1,rush_cas04,38,255
+rush_cas04,50,248,0	warp	rush405	1,1,rush_cas04,54,229
+rush_cas04,58,232,0	warp	rush405-1	1,1,rush_cas04,62,213
+rush_cas04,63,255,0	warp	rush404	1,1,rush_cas04,156,92
+rush_cas04,65,215,0	warp	rush412	1,1,rush_cas04,233,74
+rush_cas04,66,223,0	warp	rush401	1,1,rush_cas04,96,53
+rush_cas04,70,182,0	warp	rush410	1,1,rush_cas04,39,191
+rush_cas04,79,244,0	warp	rush413-1	1,1,rush_cas04,91,250
+rush_cas04,88,248,0	warp	rush411-1	1,1,rush_cas04,76,242
+rush_cas04,90,218,0	warp	rush408-1	1,1,rush_cas04,111,210
+rush_cas04,92,53,0	warp	rush401-1	1,1,rush_cas04,62,223
+rush_cas04,93,209,0	warp	rush411	1,1,rush_cas04,92,250
+rush_cas04,95,251,0	warp	rush413	1,1,rush_cas04,91,209
+
+// ===========================================================
+// Map Flags
+// ===========================================================
+rush_cas01	mapflag	battleground	2
+rush_cas01	mapflag	nomemo
+rush_cas01	mapflag	nosave	SavePoint
+rush_cas01	mapflag	noteleport
+rush_cas01	mapflag	nowarp
+rush_cas01	mapflag	nowarpto
+rush_cas01	mapflag	noreturn
+rush_cas01	mapflag	nobranch
+rush_cas01	mapflag	nopenalty
+rush_cas01	mapflag	bg_consume
+
+rush_cas02	mapflag	battleground	2
+rush_cas02	mapflag	nomemo
+rush_cas02	mapflag	nosave	SavePoint
+rush_cas02	mapflag	noteleport
+rush_cas02	mapflag	nowarp
+rush_cas02	mapflag	nowarpto
+rush_cas02	mapflag	noreturn
+rush_cas02	mapflag	nobranch
+rush_cas02	mapflag	nopenalty
+rush_cas02	mapflag	bg_consume
+
+rush_cas03	mapflag	battleground	2
+rush_cas03	mapflag	nomemo
+rush_cas03	mapflag	nosave	SavePoint
+rush_cas03	mapflag	noteleport
+rush_cas03	mapflag	nowarp
+rush_cas03	mapflag	nowarpto
+rush_cas03	mapflag	noreturn
+rush_cas03	mapflag	nobranch
+rush_cas03	mapflag	nopenalty
+rush_cas03	mapflag	bg_consume
+
+rush_cas04	mapflag	battleground	2
+rush_cas04	mapflag	nomemo
+rush_cas04	mapflag	nosave	SavePoint
+rush_cas04	mapflag	noteleport
+rush_cas04	mapflag	nowarp
+rush_cas04	mapflag	nowarpto
+rush_cas04	mapflag	noreturn
+rush_cas04	mapflag	nobranch
+rush_cas04	mapflag	nopenalty
+rush_cas04	mapflag	bg_consume
diff --git a/npc/battleground/bg_tierra_bossnia.txt b/npc/battleground/bg_tierra_bossnia.txt
new file mode 100644
index 000000000..6c60148f8
--- /dev/null
+++ b/npc/battleground/bg_tierra_bossnia.txt
@@ -0,0 +1,320 @@
+//===== rAthena Script =======================================
+//= Battleground Extended + : Tierra Bossnia
+//===== By: ==================================================
+//= eAmod / Grenat
+//===== Description: =========================================
+//= Battleground Extended + scripts.
+//===== Additional Comments: =================================
+//= Adaptation for rAthena 2020.
+//= This is a free release.
+//= Please do NOT take ownership.
+//= The original author will always stay eAmod,
+//= It would be a disgrace claiming it's yours and making
+//= money out of it. [Grenat]
+//============================================================
+
+// ===========================================================
+// Configuration
+// ===========================================================
+-	script	Tierra_Boss	-1,{
+	end;
+
+OnGuillaumeQuit:
+OnCroixQuit:
+	bg_desert;
+	end;
+
+OnTeam1Active:
+	warp "bat_a03",353,344;
+	end;
+OnTeam2Active:
+	warp "bat_a03",353,52;
+	end;
+
+OnReady:
+	//if ($@BG16)
+	//	end;
+
+	announce "[Battleground]: Tierra Bossnia has just began ! (@joinbg to join)",bc_all,0xccff00;
+	set $@BG16, 1;
+	initnpctimer;
+	set $@score_bossnia_blue, 0;
+	set $@score_bossnia_red, 0;
+	set .Neutral_Base, 0;
+	sleep 2000;
+	bg_warp $@BG16_Team1,"bat_a03",353,344;
+	bg_warp $@BG16_Team2,"bat_a03",353,52;
+	sleep 2000;
+	donpcevent "#gtb_respawn::OnBGStart";
+	donpcevent "#ctb_respawn::OnBGStart";
+	bg_updatescore "bat_a03",$@score_bossnia_red,$@score_bossnia_blue;
+	sleep 3000;
+	donpcevent "Balance_Flag::OnBGStart";
+	donpcevent "Guillaume_Boss::OnSummon";
+	donpcevent "Croix_Boss::OnSummon";
+	mapannounce "bat_a03","-- Capture the Balance Flag to remove immunity of Enemy Guardians --",1,0x483D8B;
+	end;
+
+OnNeutralReset:
+	set .Neutral_Base, 0;
+	killmonster "bat_a03","Tierra_Boss::OnNeutralBreak";
+	bg_monster_immunity getvariableofnpc(.Boss,"Guillaume_Boss"),1;
+	bg_monster_immunity getvariableofnpc(.Boss,"Croix_Boss"),1;
+	bg_monster 0,"bat_a03",273,204,"Balance Flag",1911,"Tierra_Boss::OnNeutralBreak";
+	sleep 2000;
+	if ($@BG16 != 1)
+		end;
+	mapannounce "bat_a03","-- Balance Flag returned to normality --",1,0x483D8B;
+	end;
+
+OnNeutralBreak:
+	if ($@BG16 != 1)
+		end;
+	set .Neutral_Base, getcharid(4);
+	if (getcharid(4) == $@BG16_Team1) {
+		mapannounce "bat_a03","-- Guillaume captured the Balance Flag. Croix guardian is now vulnerable to attacks!! --",1,0x0000FF;
+		bg_monster_immunity getvariableofnpc(.Boss,"Guillaume_Boss"),1;
+		bg_monster_immunity getvariableofnpc(.Boss,"Croix_Boss"),0;
+		bg_monster .Neutral_Base,"bat_a03",273,204,"Guillaume Flag",1912,"Tierra_Boss::OnNeutralBreak";
+	} else if (getcharid(4) == $@BG16_Team2) {
+		mapannounce "bat_a03","-- Croix captured the Balance Flag. Guillaume guardian is now vulnerable to attacks!! --",1,0xFF0000;
+		bg_monster_immunity getvariableofnpc(.Boss,"Guillaume_Boss"),0;
+		bg_monster_immunity getvariableofnpc(.Boss,"Croix_Boss"),1;
+		bg_monster .Neutral_Base,"bat_a03",273,204,"Croix Flag",1913,"Tierra_Boss::OnNeutralBreak";
+	} else {
+		set .Neutral_Base, 0;
+		bg_monster_immunity getvariableofnpc(.Boss,"Guillaume_Boss"),1;
+		bg_monster_immunity getvariableofnpc(.Boss,"Croix_Boss"),1;
+		bg_monster 0,"bat_a03",273,204,"Balance Flag",1911,"Tierra_Boss::OnNeutralBreak";
+	}
+	end;
+
+OnTimer600000:
+	mapannounce "bat_a03","Battle of Tierra Bossnia will end in 5 minutes",1,0x483D8B;
+	end;
+OnTimer840000:
+	mapannounce "bat_a03","Battle of Tierra Bossnia will end in 1 minute",1,0x483D8B;
+	end;
+
+OnTimer900000:
+OnMatchEnd:
+	stopnpctimer;
+	stopnpctimer "Guillaume_Boss";
+	stopnpctimer "Croix_Boss";
+	donpcevent "#gtb_respawn::OnBGStop";
+	donpcevent "#ctb_respawn::OnBGStop";
+	donpcevent "Balance_Flag::OnBGStop";
+	killmonster "bat_a03","Guillaume_Boss::OnBoss";
+	killmonster "bat_a03","Croix_Boss::OnBoss";
+	set $@BG16, 2;
+	// =======================================================
+	// Team Rewards
+	// =======================================================
+	if ($@score_bossnia_blue < $@score_bossnia_red) {
+		callfunc "BG_get_Rewards",$@BG16_Team1,7828,5;
+		callfunc "BG_get_Rewards",$@BG16_Team2,7828,1;
+		callfunc "BG_ranking",$@BG16_Team1,BG_BOSSNIA,1;
+		callfunc "BG_ranking",$@BG16_Team2,BG_BOSSNIA,0;
+		mapannounce "bat_a03","The Guillaume army has won the Battle of Tierra Bossnia!",1,0x0000FF;
+	} else if ($@score_bossnia_blue > $@score_bossnia_red) {
+		callfunc "BG_get_Rewards",$@BG16_Team1,7828,1;
+		callfunc "BG_get_Rewards",$@BG16_Team2,7828,5;
+		callfunc "BG_ranking",$@BG16_Team1,BG_BOSSNIA,0;
+		callfunc "BG_ranking",$@BG16_Team2,BG_BOSSNIA,1;
+		mapannounce "bat_a03","The Croix army has won the Battle of Tierra Bossnia!",1,0xFF0000;
+	} else {
+		callfunc "BG_get_Rewards",$@BG16_Team1,7828,1;
+		callfunc "BG_get_Rewards",$@BG16_Team2,7828,1;
+		mapannounce "bat_a03","The battle is over. This is a Tie...!",1,0x483D8B;
+	}
+	// =======================================================
+	set .Neutral_Base, 0;
+	set $@score_bossnia_blue, 0;
+	set $@score_bossnia_red, 0;
+	bg_updatescore "bat_a03",$@score_bossnia_red,$@score_bossnia_blue;
+	$@BG16 = 0;
+	mapwarp "bat_a03","bat_room",154,150;
+	if($@BG16_Team1) { bg_destroy $@BG16_Team1; $@BG16_Team1 = 0; }
+	if($@BG16_Team2) { bg_destroy $@BG16_Team2; $@BG16_Team2 = 0; }
+	bg_unbook "bat_a03";
+	end;
+}
+
+-	script	Guillaume_Boss	-1,{
+	end;
+
+OnSummon:
+	set .@Boss, 2100 + $@score_bossnia_blue;
+	mapannounce "bat_a03","-- Guillaume Guardian [" + strmobinfo(2,.@Boss) + "] entering the battle --",1,0x0000FF;
+	set .Boss, bg_monster($@BG16_Team1,"bat_a03",176,345,"Guillaume Guardian",.@Boss,"Guillaume_Boss::OnBoss");
+	bg_monster_immunity .Boss,1;
+	initnpctimer;
+	end;
+
+OnTimer2000:
+	stopnpctimer;
+	if (.Boss) {
+		bg_monster_reveal .Boss,1,0x0000FF;
+		initnpctimer;
+	}
+	end;
+
+OnBoss:
+	stopnpctimer;
+	bg_monster_reveal .Boss,2,0x0000FF; // Hide Spot
+	$@score_bossnia_blue++;
+	bg_updatescore "bat_a03",$@score_bossnia_red,$@score_bossnia_blue;
+	set .Boss, 0;
+	if ($@score_bossnia_blue > 4)
+		donpcevent "Tierra_Boss::OnMatchEnd";
+	else
+	{
+		donpcevent "Tierra_Boss::OnNeutralReset";
+		donpcevent "Guillaume_Boss::OnSummon";
+	}
+	end;
+}
+
+-	script	Croix_Boss	-1,{
+	end;
+
+OnSummon:
+	set .@Boss, 2100 + $@score_bossnia_red;
+	mapannounce "bat_a03","-- Croix Guardian [" + strmobinfo(2,.@Boss) + "] entering the battle --",1,0xFF0000;
+	set .Boss, bg_monster($@BG16_Team2,"bat_a03",167,50,"Croix Guardian",.@Boss,"Croix_Boss::OnBoss");
+	bg_monster_immunity .Boss,1;
+	initnpctimer;
+	end;
+
+OnTimer2000:
+	stopnpctimer;
+	if (.Boss) {
+		bg_monster_reveal .Boss,1,0xFF0000;
+		initnpctimer;
+	}
+	end;
+
+OnBoss:
+	stopnpctimer;
+	bg_monster_reveal .Boss,2,0xFF0000; // Hide Spot
+	$@score_bossnia_red++;
+	bg_updatescore "bat_a03",$@score_bossnia_red,$@score_bossnia_blue;
+	set .Boss, 0;
+	if ($@score_bossnia_red > 4)
+		donpcevent "Tierra_Boss::OnMatchEnd";
+	else
+	{
+		donpcevent "Tierra_Boss::OnNeutralReset";
+		donpcevent "Croix_Boss::OnSummon";
+	}
+	end;
+}
+
+-	script	Balance_Flag	-1,{
+	end;
+
+OnBGStart:
+	viewpointmap "bat_a03",1,273,204,1,0xFFFFFF;
+	bg_monster 0,"bat_a03",273,204,"Balance Flag",1911,"Tierra_Boss::OnNeutralBreak";
+	initnpctimer;
+	end;
+
+OnBGStop:
+	stopnpctimer;
+	viewpointmap "bat_a03",2,273,204,1,0xFFFFFF;
+	killmonster "bat_a03","Tierra_Boss::OnNeutralBreak";
+	end;
+
+OnTimer2000:
+	initnpctimer;
+	set .@NB, getvariableofnpc(.Neutral_Base,"Tierra_Boss");
+	if (.@NB == $@BG16_Team1)
+		viewpointmap "bat_a03",1,273,204,1,0x0000FF;
+	else if (.@NB == $@BG16_Team2)
+		viewpointmap "bat_a03",1,273,204,1,0xFF0000;
+	else
+		viewpointmap "bat_a03",1,273,204,1,0xFFFFFF;
+	end;
+}
+
+// ===========================================================
+// Map Flags
+// ===========================================================
+bat_a03	mapflag	battleground	2
+bat_a03	mapflag	nomemo
+bat_a03	mapflag	nosave	SavePoint
+bat_a03	mapflag	noteleport
+bat_a03	mapflag	monster_noteleport
+bat_a03	mapflag	nowarp
+bat_a03	mapflag	nowarpto
+bat_a03	mapflag	noreturn
+bat_a03	mapflag	nobranch
+bat_a03	mapflag	nopenalty
+
+// ===========================================================
+// Flags
+// ===========================================================
+bat_a03,148,85,1	duplicate(Base Flag#bg)	Omega Base#tb_1	974
+bat_a03,155,85,1	duplicate(Base Flag#bg)	Omega Base#tb_2	974
+bat_a03,357,75,1	duplicate(Base Flag#bg)	Omega Base#tb_3	974
+bat_a03,348,74,1	duplicate(Base Flag#bg)	Omega Base#tb_4	974
+bat_a03,199,49,1	duplicate(Base Flag#bg)	Omega Base#tb_5	974
+bat_a03,168,16,1	duplicate(Base Flag#bg)	Omega Base#tb_6	974
+bat_a03,138,12,1	duplicate(Base Flag#bg)	Omega Base#tb_7	974
+bat_a03,108,35,1	duplicate(Base Flag#bg)	Omega Base#tb_8	974
+bat_a03,164,308,1	duplicate(Base Flag#bg)	Alpha Base#tb_1	973
+bat_a03,157,308,1	duplicate(Base Flag#bg)	Alpha Base#tb_2	973
+bat_a03,359,327,1	duplicate(Base Flag#bg)	Alpha Base#tb_3	973
+bat_a03,350,326,1	duplicate(Base Flag#bg)	Alpha Base#tb_4	973
+bat_a03,209,344,1	duplicate(Base Flag#bg)	Alpha Base#tb_5	973
+bat_a03,173,380,1	duplicate(Base Flag#bg)	Alpha Base#tb_6	973
+bat_a03,150,380,1	duplicate(Base Flag#bg)	Alpha Base#tb_7	973
+bat_a03,118,357,1	duplicate(Base Flag#bg)	Alpha Base#tb_8	973
+bat_a03,119,336,1	duplicate(Base Flag#bg)	Alpha Base#tb_9	973
+
+// ===========================================================
+// Respawn
+// ===========================================================
+bat_a03,50,374,0	script	#gtb_respawn	HIDDEN_WARP_NPC,{
+	end;
+
+OnBGStart:
+	initnpctimer;
+	end;
+
+OnBGStop:
+	stopnpctimer;
+	end;
+
+OnTimer24000:
+	specialeffect(EF_SANCTUARY);
+	end;
+
+OnTimer25000:
+	areapercentheal "bat_a03",46,370,54,378,100,100;
+	areawarp "bat_a03",46,370,54,378,"bat_a03",354,340;
+	initnpctimer;
+	end;
+}
+
+bat_a03,42,16,0	script	#ctb_respawn	HIDDEN_WARP_NPC,{
+	end;
+
+OnBGStart:
+	initnpctimer;
+	end;
+
+OnBGStop:
+	stopnpctimer;
+	end;
+
+OnTimer24000:
+	specialeffect(EF_SANCTUARY);
+	end;
+
+OnTimer25000:
+	areapercentheal "bat_a03",38,12,47,21,100,100;
+	areawarp "bat_a03",38,12,47,21,"bat_a03",354,57;
+	initnpctimer;
+	end;
+}
\ No newline at end of file
diff --git a/npc/battleground/bg_tierra_domination.txt b/npc/battleground/bg_tierra_domination.txt
new file mode 100644
index 000000000..a6fa39863
--- /dev/null
+++ b/npc/battleground/bg_tierra_domination.txt
@@ -0,0 +1,626 @@
+//===== rAthena Script =======================================
+//= Battleground Extended + : Tierra Domination
+//===== By: ==================================================
+//= eAmod / Grenat
+//===== Description: =========================================
+//= Battleground Extended + scripts.
+//===== Additional Comments: =================================
+//= Adaptation for rAthena 2020.
+//= This is a free release.
+//= Please do NOT take ownership.
+//= The original author will always stay eAmod,
+//= It would be a disgrace claiming it's yours and making
+//= money out of it. [Grenat]
+//============================================================
+
+// ===========================================================
+// Configuration
+// ===========================================================
+-	script	Tierra_DOM	FAKE_NPC,{
+	end;
+
+OnTeam1Quit:
+OnTeam2Quit:
+	bg_desert;
+	end;
+
+OnTeam1Active:
+	warp "bat_a04",353,344;
+	end;
+OnTeam2Active:
+	warp "bat_a04",353,52;
+	end;
+
+OnDie:
+	// Check for Offensive or Defensive Kills
+	if ($@BG17 != 1 )
+		end;
+
+	if (!@killer_bg_id || @killer_bg_id == getcharid(4))
+		end;
+
+	set .@Base, 0;
+	getmapxy .@m$, .@x, .@y, BL_PC;
+
+	if (.@x >= 136 && .@y >= 329 && .@x <= 186 && .@y <= 361)
+		set .@Base, getvariableofnpc(.Owner,"Dom_N_Base"); // North
+	else if (.@x >= 260 && .@y >= 194 && .@x <= 287 && .@y <= 213)
+		set .@Base, getvariableofnpc(.Owner,"Dom_C_Base"); // Center
+	else if (.@x >= 129 && .@y >= 34 && .@x <= 175 && .@y <= 65)
+		set .@Base, getvariableofnpc(.Owner,"Dom_S_Base"); // South
+	else end; // Not Killed on Base territory
+
+	//if (.@Base == 1)
+	//{ // Team 1
+		//if (getcharid(4) == $@BG_Team1)
+		//	//bg_rankpoints "dom_off_kills",1,@killer_bg_src;
+		//else
+		//	//bg_rankpoints "dom_def_kills",1,@killer_bg_src;
+	//}
+	//else if (.@Base == 2)
+	//{ // Team 2
+		//if (getcharid(4) == $@BG_Team2)
+		//	bg_rankpoints "dom_off_kills",1,@killer_bg_src;
+		//else
+		//	bg_rankpoints "dom_def_kills",1,@killer_bg_src;
+	//}
+	end;
+
+OnReady:
+	//if ($@BG17)
+	//	end;
+
+	announce "[Battleground]: Tierra Domination has just began ! (@joinbg to join)",bc_all,0xccff00;
+	set $@BG17,1;
+	set $@score_domination_blue, 0;
+	set $@score_domination_red, 0;
+	bg_updatescore "bat_a04",$@score_domination_blue,$@score_domination_red;
+	donpcevent "Dom_N_Base::OnBase";
+	donpcevent "Dom_S_Base::OnBase";
+	donpcevent "Dom_C_Base::OnBase";
+	sleep 2100;
+	bg_warp $@BG17_Team1,"bat_a04",353,344;
+	bg_warp $@BG17_Team2,"bat_a04",353,52;
+	sleep 2100;
+	donpcevent "#guiDOM_respawn::OnBGStart";
+	donpcevent "#croDOM_respawn::OnBGStart";
+	end;
+
+OnNScore:
+	if (set(.@North, getvariableofnpc(.Owner,"Dom_N_Base")) == 0)
+		end; // No Owner
+
+	if (.@North == 1)
+		set $@score_domination_blue, $@score_domination_blue + 1;
+	else
+		set $@score_domination_red, $@score_domination_red + 1;
+
+	donpcevent "Tierra_DOM::OnValidateScore";
+	end;
+
+OnSScore:
+	if (set(.@South, getvariableofnpc(.Owner,"Dom_S_Base")) == 0)
+		end; // No Owner
+
+	if (.@South == 1)
+		set $@score_domination_blue, $@score_domination_blue + 1;
+	else
+		set $@score_domination_red, $@score_domination_red + 1;
+
+	donpcevent "Tierra_DOM::OnValidateScore";
+	end;
+
+OnCScore:
+	if (set(.@Center, getvariableofnpc(.Owner,"Dom_C_Base")) == 0)
+		end; // No Owner
+
+	if (.@Center == 1)
+		set $@score_domination_blue, $@score_domination_blue + 1;
+	else
+		set $@score_domination_red, $@score_domination_red + 1;
+
+	donpcevent "Tierra_DOM::OnValidateScore";
+	end;
+
+OnValidateScore:
+	if ($@score_domination_blue > 99)
+		set $@score_domination_blue, 99;
+	if ($@score_domination_red > 99)
+		set $@score_domination_red, 99;
+
+	bg_updatescore "bat_a04",$@score_domination_blue,$@score_domination_red; // Update Visual Score
+
+	if ($@score_domination_blue < 99 && $@score_domination_red < 99)
+		end; // No winners
+
+OnMatchEnd:
+	stopnpctimer "Dom_N_Base";
+	stopnpctimer "Dom_S_Base";
+	stopnpctimer "Dom_C_Base";
+	donpcevent "#guiDOM_respawn::OnBGStop";
+	donpcevent "#croDOM_respawn::OnBGStop";
+	set $@BG17, 2;
+	// =======================================================
+	// Team Rewards
+	// =======================================================
+	.@reward_win = 5;
+	.@reward_lose = 3;
+
+	// Tie
+	if ($@score_domination_blue >= 99 && $@score_domination_red >= 99) {
+		callfunc "BG_get_Rewards",$@BG17_Team1,7828,1;
+		callfunc "BG_get_Rewards",$@BG17_Team2,7828,1;
+		callfunc "BG_ranking",$@BG17_Team1,BG_DOMINATION,2;
+		callfunc "BG_ranking",$@BG17_Team2,BG_DOMINATION,2;
+		mapannounce "bat_a04","The battle is over. This is a Tie...!",1,0x4169E1;
+	}
+	// Team 1 Won
+	else if ($@score_domination_blue >= 99) {
+		callfunc "BG_get_Rewards",$@BG17_Team1,7828,5;
+		callfunc "BG_get_Rewards",$@BG17_Team2,7828,1;
+		callfunc "BG_ranking",$@BG17_Team1,BG_DOMINATION,1;
+		callfunc "BG_ranking",$@BG17_Team2,BG_DOMINATION,0;
+		mapannounce "bat_a04","The " + bg_get_data($@BG17_Team1,2) + " army has won the Battle of Tierra Domination!",1,bg_get_data($@BG17_Team1,4);
+	}
+	// Team 2 Won
+	else if ($@score_domination_red >= 99) {
+		callfunc "BG_get_Rewards",$@BG17_Team1,7828,1;
+		callfunc "BG_get_Rewards",$@BG17_Team2,7828,5;
+		callfunc "BG_ranking",$@BG17_Team1,BG_DOMINATION,0;
+		callfunc "BG_ranking",$@BG17_Team2,BG_DOMINATION,1;
+		mapannounce "bat_a04","The " + bg_get_data($@BG17_Team2,2) + " army has won the Battle of Tierra Domination!",1,bg_get_data($@BG17_Team2,4);
+	}
+	// =======================================================
+	set $@score_domination_blue, 0;
+	set $@score_domination_red, 0;
+	sleep 5000;
+	bg_updatescore "bat_a04",$@score_domination_blue,$@score_domination_red;
+	$@BG17 = 0;
+	mapwarp "bat_a04","bat_room",154,150;
+	if($@BG17_Team1) { bg_destroy $@BG17_Team1; $@BG17_Team1 = 0; }
+	if($@BG17_Team2) { bg_destroy $@BG17_Team2; $@BG17_Team2 = 0; }
+	bg_unbook "bat_a04";
+	end;
+}
+
+// ===========================================================
+// Battleground Bases
+// ===========================================================
+bat_a04,173,345,0	script	North Base::Dom_N_Base	1911,{
+	end;
+
+OnBase:
+	set .Owner, 0;
+	set .Balance, 0;
+	set .Tick, 0;
+	setnpcdisplay "Dom_N_Base","North Base",1911;
+	initnpctimer;
+	end;
+
+OnTimer1000:
+	stopnpctimer;
+	if ($@BG17 != 1)
+		end;
+
+	set .@Team1Count, bg_getareausers($@BG17_Team1,"bat_a04",136,329,186,361);
+	set .@Team2Count, bg_getareausers($@BG17_Team2,"bat_a04",136,329,186,361);
+	set .Balance, .Balance + set(.@Balance, .@Team1Count - .@Team2Count);
+
+	if (.Balance < -50)
+		set .Balance, -50;
+	else if (.Balance > 50)
+		set .Balance, 50;
+
+	switch(.Owner) {
+		case 0:
+			if (.Balance == 50) {
+				set .Balance, 50;
+				set .Owner, 1; // Team 1
+				setnpcdisplay "Dom_N_Base",bg_get_data($@BG17_Team1,2) + " Base",1912;
+				mapannounce "bat_a04","North Base captured by " + bg_get_data($@BG17_Team1,2),1,bg_get_data($@BG17_Team1,4);
+				//bg_rankpoints_area $@BG17_Team1,"bat_a04",136,329,186,361,"dom_bases",1;
+				donpcevent "GDomNBW::OnEnable";
+			}
+			else if (.Balance == -50) {
+				set .Balance, -50;
+				set .Owner, 2; // Team 2
+				setnpcdisplay "Dom_N_Base",bg_get_data($@BG17_Team2,2) + " Base",1913;
+				mapannounce "bat_a04","North Base captured by " + bg_get_data($@BG17_Team2,2),1,bg_get_data($@BG17_Team2,4);
+				//bg_rankpoints_area $@BG17_Team2,"bat_a04",136,329,186,361,"dom_bases",1;
+				donpcevent "CDomNBW::OnEnable";
+			}
+			break;
+		case 1:
+			if (.Balance <= 0) { // Team 1 lost Control
+				set .Owner, 0;
+				setnpcdisplay "Dom_N_Base","North Base",1911;
+				mapannounce "bat_a04",bg_get_data($@BG17_Team1,2) + " lost control of the North Base",1,bg_get_data($@BG17_Team1,4);
+				donpcevent "GDomNBW::OnDisable";
+			}
+			break;
+		case 2:
+			if (.Balance >= 0) { // Team 2 lost Control
+				set .Owner, 0;
+				setnpcdisplay "Dom_N_Base","North Base",1911;
+				mapannounce "bat_a04",bg_get_data($@BG17_Team2,2) + " lost control of the North Base",1,bg_get_data($@BG17_Team2,4);
+				donpcevent "CDomNBW::OnDisable";
+			}
+			break;
+	}
+
+	if (.@Balance > 0)
+		specialeffect 236;
+	else if (.@Balance < 0)
+		specialeffect 225;
+	else if (.Owner == 1)
+		specialeffect 236;
+	else if (.Owner == 2)
+		specialeffect 225;
+	else
+		specialeffect 223;
+
+	switch(.Owner) {
+		case 0: viewpointmap "bat_a04",1,173,345,1,0xFFFFFF; break;
+		case 1: viewpointmap "bat_a04",1,173,345,1,bg_get_data($@BG17_Team1,4); break;
+		case 2: viewpointmap "bat_a04",1,173,345,1,bg_get_data($@BG17_Team2,4); break;
+	}
+
+	if (.Owner == 0)
+		set .Tick, 0;
+	else if (set(.Tick, .Tick + 1) == 7) {
+		donpcevent "Tierra_DOM::OnNScore";
+		set .Tick, 0;
+	}
+
+	initnpctimer;
+	end;
+}
+
+bat_a04,273,204,0	script	Center Base::Dom_C_Base	1911,{
+	end;
+
+OnBase:
+	set .Owner, 0;
+	set .Balance, 0;
+	set .Tick, 0;
+	setnpcdisplay "Dom_C_Base","Center Base",1911;
+	initnpctimer;
+	end;
+
+OnTimer1000:
+	stopnpctimer;
+	if ($@BG17 != 1 )
+		end;
+
+	set .@Team1Count, bg_getareausers($@BG17_Team1,"bat_a04",260,194,287,213);
+	set .@Team2Count, bg_getareausers($@BG17_Team2,"bat_a04",260,194,287,213);
+	set .Balance, .Balance + set(.@Balance, .@Team1Count - .@Team2Count);
+
+	if (.Balance < -50)
+		set .Balance, -50;
+	else if (.Balance > 50)
+		set .Balance, 50;
+
+	switch(.Owner) {
+		case 0:
+			if (.Balance == 50) {
+				set .Balance, 50;
+				set .Owner, 1; // Team 1
+				setnpcdisplay "Dom_C_Base",bg_get_data($@BG17_Team1,2) + " Base",1912;
+				mapannounce "bat_a04","Center Base captured by " + bg_get_data($@BG17_Team1,2),1,bg_get_data($@BG17_Team1,4);
+				//bg_rankpoints_area $@BG17_Team1,"bat_a04",260,194,287,213,"dom_bases",1;
+				donpcevent "GDomCBW::OnEnable";
+			}
+			else if (.Balance == -50) {
+				set .Balance, -50;
+				set .Owner, 2; // Team 2
+				setnpcdisplay "Dom_C_Base",bg_get_data($@BG17_Team2,2) + " Base",1913;
+				mapannounce "bat_a04","Center Base captured by " + bg_get_data($@BG17_Team2,2),1,bg_get_data($@BG17_Team2,4);
+				//bg_rankpoints_area $@BG17_Team2,"bat_a04",260,194,287,213,"dom_bases",1;
+				donpcevent "CDomCBW::OnEnable";
+			}
+			break;
+		case 1:
+			if (.Balance <= 0) { // Team 1 lost Control
+				set .Owner, 0;
+				setnpcdisplay "Dom_C_Base","Center Base",1911;
+				mapannounce "bat_a04",bg_get_data($@BG17_Team1,2) + " lost control of the Center Base",1,bg_get_data($@BG17_Team1,4);
+				donpcevent "GDomCBW::OnDisable";
+			}
+			break;
+		case 2:
+			if (.Balance >= 0) { // Team 2 lost Control
+				set .Owner, 0;
+				setnpcdisplay "Dom_C_Base","Center Base",1911;
+				mapannounce "bat_a04",bg_get_data($@BG17_Team2,2) + " lost control of the Center Base",1,bg_get_data($@BG17_Team2,4);
+				donpcevent "CDomCBW::OnDisable";
+			}
+			break;
+	}
+
+	if (.@Balance > 0)
+		specialeffect 236;
+	else if (.@Balance < 0)
+		specialeffect 225;
+	else if (.Owner == 1)
+		specialeffect 236;
+	else if (.Owner == 2)
+		specialeffect 225;
+	else
+		specialeffect 223;
+
+	switch(.Owner) {
+		case 0: viewpointmap "bat_a04",1,273,204,3,0xFFFFFF; break;
+		case 1: viewpointmap "bat_a04",1,273,204,3,bg_get_data($@BG17_Team1,4); break;
+		case 2: viewpointmap "bat_a04",1,273,204,3,bg_get_data($@BG17_Team2,4); break;
+	}
+
+	if (.Owner == 0)
+		set .Tick, 0;
+	else if (set(.Tick, .Tick + 1) == 7) {
+		donpcevent "Tierra_DOM::OnCScore";
+		set .Tick, 0;
+	}
+
+	initnpctimer;
+	end;
+}
+
+bat_a04,164,50,0	script	South Base::Dom_S_Base	1911,{
+	end;
+
+OnBase:
+	set .Owner, 0;
+	set .Balance, 0;
+	set .Tick, 0;
+	setnpcdisplay "Dom_S_Base","South Base",1911;
+	initnpctimer;
+	end;
+
+OnTimer1000:
+	stopnpctimer;
+	if ($@BG17 != 1 )
+		end;
+
+	set .@Team1Count, bg_getareausers($@BG17_Team1,"bat_a04",129,34,175,65);
+	set .@Team2Count, bg_getareausers($@BG17_Team2,"bat_a04",129,34,175,65);
+	set .Balance, .Balance + set(.@Balance, .@Team1Count - .@Team2Count);
+
+	if (.Balance < -50)
+		set .Balance, -50;
+	else if (.Balance > 50)
+		set .Balance, 50;
+
+	switch(.Owner) {
+		case 0:
+			if (.Balance == 50) {
+				set .Balance, 50;
+				set .Owner, 1; // Team 1
+				setnpcdisplay "Dom_S_Base",bg_get_data($@BG17_Team1,2) + " Base",1912;
+				mapannounce "bat_a04","South Base captured by " + bg_get_data($@BG17_Team1,2),1,bg_get_data($@BG17_Team1,4);
+				//bg_rankpoints_area $@BG17_Team1,"bat_a04",129,34,175,65,"dom_bases",1;
+				donpcevent "GDomSBW::OnEnable";
+			}
+			else if (.Balance == -50) {
+				set .Balance, -50;
+				set .Owner, 2; // Team 2
+				setnpcdisplay "Dom_S_Base",bg_get_data($@BG17_Team2,2) + " Base",1913;
+				mapannounce "bat_a04","South Base captured by " + bg_get_data($@BG17_Team2,2),1,bg_get_data($@BG17_Team2,4);
+				//bg_rankpoints_area $@BG17_Team2,"bat_a04",129,34,175,65,"dom_bases",1;
+				donpcevent "CDomSBW::OnEnable";
+			}
+			break;
+		case 1:
+			if (.Balance <= 0) { // Team 1 lost Control
+				set .Owner, 0;
+				setnpcdisplay "Dom_S_Base","North Base",1911;
+				mapannounce "bat_a04",bg_get_data($@BG17_Team1,2) + " lost control of the South Base",1,bg_get_data($@BG17_Team1,4);
+				donpcevent "GDomSBW::OnDisable";
+			}
+			break;
+		case 2:
+			if (.Balance >= 0) { // Team 2 lost Control
+				set .Owner, 0;
+				setnpcdisplay "Dom_S_Base","North Base",1911;
+				mapannounce "bat_a04",bg_get_data($@BG17_Team2,2) + " lost control of the South Base",1,bg_get_data($@BG17_Team2,4);
+				donpcevent "CDomSBW::OnDisable";
+			}
+			break;
+	}
+
+	if (.@Balance > 0)
+		specialeffect 236;
+	else if (.@Balance < 0)
+		specialeffect 225;
+	else if (.Owner == 1)
+		specialeffect 236;
+	else if (.Owner == 2)
+		specialeffect 225;
+	else
+		specialeffect 223;
+
+	switch(.Owner) {
+		case 0: viewpointmap "bat_a04",1,164,50,2,0xFFFFFF; break;
+		case 1: viewpointmap "bat_a04",1,164,50,2,bg_get_data($@BG17_Team1,4); break;
+		case 2: viewpointmap "bat_a04",1,164,50,2,bg_get_data($@BG17_Team2,4); break;
+	}
+
+	if (.Owner == 0)
+		set .Tick, 0;
+	else if (set(.Tick, .Tick + 1) == 7) {
+		donpcevent "Tierra_DOM::OnSScore";
+		set .Tick, 0;
+	}
+
+	initnpctimer;
+	end;
+}
+
+// ===========================================================
+// Healer
+// ===========================================================
+bat_a04,53,377,3	duplicate(BGHeal)	Therapist in battle#DOM2	4_F_SISTER
+bat_a04,45,18,3	duplicate(BGHeal)	Therapist in battle#DOM1	4_F_SISTER
+
+// ===========================================================
+// Respawn
+// ===========================================================
+bat_a04,46,377,0	script	North Base Warp::GDomNBW	1_SHADOW_NPC,{
+	end;
+
+OnEnable:
+	waitingroom "Join To Warp",20;
+	end;
+
+OnDisable:
+	delwaitingroom;
+	end;
+
+OnWarp:
+	warpwaitingpc "bat_a04",115,346,20;
+	end;
+}
+
+bat_a04,46,370,0	script	Center Base Warp::GDomCBW	1_SHADOW_NPC,{
+	end;
+
+OnEnable:
+	waitingroom "Join To Warp",20;
+	end;
+
+OnDisable:
+	delwaitingroom;
+	end;
+
+OnWarp:
+	warpwaitingpc "bat_a04",285,226,20;
+	end;
+}
+
+bat_a04,53,370,0	script	South Base Warp::GDomSBW	1_SHADOW_NPC,{
+	end;
+
+OnEnable:
+	waitingroom "Join To Warp",20;
+	end;
+
+OnDisable:
+	delwaitingroom;
+	end;
+
+OnWarp:
+	warpwaitingpc "bat_a04",106,48,20;
+	end;
+}
+
+bat_a04,38,19,0	script	North Base Warp::CDomNBW	1_SHADOW_NPC,{
+	end;
+
+OnEnable:
+	waitingroom "Join To Warp",20;
+	end;
+
+OnDisable:
+	delwaitingroom;
+	end;
+
+OnWarp:
+	warpwaitingpc "bat_a04",115,346,20;
+	end;
+}
+
+bat_a04,38,12,0	script	Center Base Warp::CDomCBW	1_SHADOW_NPC,{
+	end;
+
+OnEnable:
+	waitingroom "Join To Warp",20;
+	end;
+
+OnDisable:
+	delwaitingroom;
+	end;
+OnWarp:
+	warpwaitingpc "bat_a04",260,183,20;
+	end;
+}
+
+bat_a04,45,12,0	script	South Base Warp::CDomSBW	1_SHADOW_NPC,{
+	end;
+
+OnEnable:
+	waitingroom "Join To Warp",20;
+	end;
+
+OnDisable:
+	delwaitingroom;
+	end;
+
+OnWarp:
+	warpwaitingpc "bat_a04",106,48,20;
+	end;
+}
+
+bat_a04,50,374,0	script	#guiDOM_respawn	HIDDEN_WARP_NPC,{
+	end;
+
+OnBGStart:
+	initnpctimer;
+	end;
+
+OnBGStop:
+	stopnpctimer;
+	end;
+
+OnTimer24000:
+	specialeffect 83;
+	end;
+
+OnTimer25000:
+	areapercentheal "bat_a04",46,370,54,378,100,100;
+	donpcevent "GDomNBW::OnWarp";
+	donpcevent "GDomCBW::OnWarp";
+	donpcevent "GDomSBW::OnWarp";
+	areawarp "bat_a04",46,370,54,378,"bat_a04",353,344;
+	initnpctimer;
+	end;
+}
+
+bat_a04,42,16,0	script	#croDOM_respawn	HIDDEN_WARP_NPC,{
+	end;
+
+OnBGStart:
+	initnpctimer;
+	end;
+
+OnBGStop:
+	stopnpctimer;
+	end;
+
+OnTimer24000:
+	specialeffect 83;
+	end;
+
+OnTimer25000:
+	areapercentheal "bat_a04",38,12,47,21,100,100;
+	donpcevent "GDomNBW::OnWarp";
+	donpcevent "GDomCBW::OnWarp";
+	donpcevent "GDomSBW::OnWarp";
+	areawarp "bat_a04",38,12,47,21,"bat_a04",353,52;
+	initnpctimer;
+	end;
+}
+
+// ===========================================================
+// Map Flags
+// ===========================================================
+bat_a04	mapflag	battleground	2
+bat_a04	mapflag	nomemo
+bat_a04	mapflag	nosave	SavePoint
+bat_a04	mapflag	noteleport
+bat_a04	mapflag	nowarp
+bat_a04	mapflag	nowarpto
+bat_a04	mapflag	noreturn
+bat_a04	mapflag	nobranch
+bat_a04	mapflag	nopenalty
+bat_a04	mapflag	noecall
+bat_a04	mapflag	bg_consume
diff --git a/npc/battleground/bg_tierra_eye_of_storm.txt b/npc/battleground/bg_tierra_eye_of_storm.txt
new file mode 100644
index 000000000..70bab28f4
--- /dev/null
+++ b/npc/battleground/bg_tierra_eye_of_storm.txt
@@ -0,0 +1,699 @@
+//===== rAthena Script =======================================
+//= Battleground Extended + : Tierra Eye of Storm
+//===== By: ==================================================
+//= eAmod / Grenat
+//===== Description: =========================================
+//= Battleground Extended + scripts.
+//===== Additional Comments: =================================
+//= Adaptation for rAthena 2020.
+//= This is a free release.
+//= Please do NOT take ownership.
+//= The original author will always stay eAmod,
+//= It would be a disgrace claiming it's yours and making
+//= money out of it. [Grenat]
+//============================================================
+
+// ===========================================================
+// Configuration
+// ===========================================================
+-	script	Tierra_EOS	FAKE_NPC,{
+	end;
+
+OnTeam1Quit:
+	set @killer_bg_src, 0;
+	bg_desert;
+OnTeam1Die:
+	// Drop Flag
+	if ($@BG18 == 1 && getvariableofnpc(.Flag_Carrier,"Neutral_Flag") == getcharid(0)) {
+		setpcblock(PCBLOCK_SKILL|PCBLOCK_USEITEM,false);
+		getmapxy .@m$, .@x, .@y, BL_PC;
+		movenpc "Neutral_Flag", .@x, .@y;
+		mapannounce "bat_a02",bg_get_data($@BG_Team1,2) + " have droped the Flag",1,0xFFFFFF;
+		//bg_rankpoints "fame",1,@killer_bg_src;
+		set getvariableofnpc(.Flag_Status,"Neutral_Flag"), 0; // OnFloor
+		set getvariableofnpc(.Flag_Carrier,"Neutral_Flag"), 0;
+		initnpctimer "Neutral_Flag";
+		enablenpc "Neutral_Flag";
+	}
+	end;
+
+OnTeam2Quit:
+	set @killer_bg_src, 0;
+	bg_desert;
+OnTeam2Die:
+	// Drop Flag
+	if ($@BG18 == 1 && getvariableofnpc(.Flag_Carrier,"Neutral_Flag") == getcharid(0)) {
+		setpcblock(PCBLOCK_SKILL|PCBLOCK_USEITEM,false);
+		getmapxy .@m$, .@x, .@y, BL_PC;
+		movenpc "Neutral_Flag", .@x, .@y;
+		mapannounce "bat_a02",bg_get_data($@BG_Team2,2) + " have droped the Flag",1,0xFFFFFF;
+		//bg_rankpoints "fame",1,@killer_bg_src;
+		set getvariableofnpc(.Flag_Status,"Neutral_Flag"), 0; // OnFloor
+		set getvariableofnpc(.Flag_Carrier,"Neutral_Flag"), 0;
+		initnpctimer "Neutral_Flag";
+		enablenpc "Neutral_Flag";
+	}
+	end;
+
+OnTeam1Active:
+	warp "bat_a02",353,344;
+	end;
+OnTeam2Active:
+	warp "bat_a02",353,52;
+	end;
+
+OnReady:
+	//if ($@BG18)
+	//	end;
+
+	announce "[Battleground]: Tierra Eye of Storm has just began ! (@joinbg to join)",bc_all,0xccff00;
+	set $@BG18,1;
+	// BG Variables
+	set $@score_eyeofstorm_blue, 0;
+	set $@score_eyeofstorm_red, 0;
+	sleep 2100;
+	bg_warp $@BG18_Team1,"bat_a02",353,344;
+	bg_warp $@BG18_Team2,"bat_a02",353,52;
+	sleep 2100;
+	// Respawn NPC's
+	donpcevent "#guieoe_respawn::OnBGStart";
+	donpcevent "#croeoe_respawn::OnBGStart";
+	// Start Match!!
+	donpcevent "North_Base::OnBase";
+	donpcevent "South_Base::OnBase";
+	donpcevent "Neutral_Flag::OnBase";
+	donpcevent "::OnStartStorm";
+	mapannounce "bat_a02","The Battle of Tierra Valley - Eye of Storm has begun",1,0x4169E1;
+	end;
+
+OnFlash:
+	if (getvariableofnpc(.Flag_Carrier,"Neutral_Flag") == getcharid(0) && $@BG18 == 1 ) {
+		getmapxy .@m$, .@x, .@y, BL_PC;
+		viewpointmap "bat_a02",1,.@x,.@y,3,0xFFFFFF;
+		specialeffect 73;
+		emotion ET_HELP,getcharid(3);
+		addtimer 2100, "Tierra_EOS::OnFlash";
+		percentheal -5,-5;
+	}
+	end;
+
+OnTeam1Flag:
+	viewpointmap "bat_a02",2,0,0,3,0xFFFFFF;
+	set .@North, getvariableofnpc(.Owner,"North_Base");
+	set .@South, getvariableofnpc(.Owner,"South_Base");
+
+	if (.@North == .@South) {
+		set $@score_eyeofstorm_blue, $@score_eyeofstorm_blue + 5;
+		mapannounce "bat_a02",bg_get_data($@BG18_Team1,2) + " captured the Flag [+5 points]",1,0x0000FF;
+	} else {
+		set $@score_eyeofstorm_blue, $@score_eyeofstorm_blue + 3;
+		mapannounce "bat_a02",bg_get_data($@BG18_Team1,2) + " captured the Flag [+3 points]",1,0x0000FF;
+	}
+
+	donpcevent "Tierra_EOS::OnValidateScore";
+	donpcevent "Neutral_Flag::OnBase";
+	end;
+
+OnTeam2Flag:
+	viewpointmap "bat_a02",2,0,0,3,0xFFFFFF;
+	set .@North, getvariableofnpc(.Owner,"North_Base");
+	set .@South, getvariableofnpc(.Owner,"South_Base");
+
+	if (.@North == .@South) {
+		set $@score_eyeofstorm_red, $@score_eyeofstorm_red + 5;
+		mapannounce "bat_a02",bg_get_data($@BG18_Team2,2) + " captured the Flag [+5 points]",1,0xFF0000;
+	} else {
+		set $@score_eyeofstorm_red, $@score_eyeofstorm_red + 3;
+		mapannounce "bat_a02",bg_get_data($@BG18_Team2,2) + " captured the Flag [+3 points]",1,0xFF0000;
+	}
+
+	donpcevent "Tierra_EOS::OnValidateScore";
+	donpcevent "Neutral_Flag::OnBase";
+	end;
+
+OnNorthScore:
+	if (set(.@North, getvariableofnpc(.Owner,"North_Base")) == 0)
+		end; // No Owner
+	set .@South, getvariableofnpc(.Owner,"South_Base");
+	// Double Domination
+	if (.@North == .@South) {
+		if (.@North == $@BG18_Team1)
+			set $@score_eyeofstorm_blue, $@score_eyeofstorm_blue + 2;
+		else
+			set $@score_eyeofstorm_red, $@score_eyeofstorm_red + 2;
+	} else if (.@North == $@BG18_Team1)
+		set $@score_eyeofstorm_blue, $@score_eyeofstorm_blue + 1;
+	else
+		set $@score_eyeofstorm_red, $@score_eyeofstorm_red + 1;
+
+	donpcevent "Tierra_EOS::OnValidateScore";
+	end;
+
+OnSouthScore:
+	if (set(.@South, getvariableofnpc(.Owner,"South_Base")) == 0)
+		end; // No Owner
+	set .@North, getvariableofnpc(.Owner,"North_Base");
+	// Double Domination
+	if (.@North == .@South) {
+		if (.@South == $@BG18_Team1)
+			set $@score_eyeofstorm_blue, $@score_eyeofstorm_blue + 2;
+		else
+			set $@score_eyeofstorm_red, $@score_eyeofstorm_red + 2;
+	} else if (.@South == $@BG18_Team1)
+		set $@score_eyeofstorm_blue, $@score_eyeofstorm_blue + 1;
+	else
+		set $@score_eyeofstorm_red, $@score_eyeofstorm_red + 1;
+
+	donpcevent "Tierra_EOS::OnValidateScore";
+	end;
+
+OnValidateScore:
+	if ($@score_eyeofstorm_blue > 99)
+		set $@score_eyeofstorm_blue, 99;
+	if ($@score_eyeofstorm_red > 99)
+		set $@score_eyeofstorm_red, 99;
+
+	bg_updatescore "bat_a02",$@score_eyeofstorm_blue,$@score_eyeofstorm_red; // Update Visual Score
+
+	if ($@score_eyeofstorm_blue < 99 && $@score_eyeofstorm_red < 99)
+		end; // No winners
+OnMatchEnd:
+
+	donpcevent "Neutral_Flag::OnDisable";
+	stopnpctimer "North_Base";
+	stopnpctimer "South_Base";
+	donpcevent "#guieoe_respawn::OnBGStop";
+	donpcevent "#croeoe_respawn::OnBGStop";
+	set $@BG18, 2;
+	// =======================================================
+	// Team Rewards
+	// =======================================================
+	.@reward_win = 5;
+	.@reward_lose = 3;
+
+	// Tie
+	if ($@score_eyeofstorm_blue >= 99 && $@score_eyeofstorm_red >= 99) {
+		callfunc "BG_get_Rewards",$@BG18_Team1,7828,1;
+		callfunc "BG_get_Rewards",$@BG18_Team2,7828,1;
+		mapannounce "bat_a02","The battle is over. This is a Tie...!",1,0x4169E1;
+	}
+	// Team 1 Won
+	else if ($@score_eyeofstorm_blue >= 99) {
+		callfunc "BG_get_Rewards",$@BG18_Team1,7828,5;
+		callfunc "BG_get_Rewards",$@BG18_Team2,7828,1;
+		callfunc "BG_ranking",$@BG18_Team1,BG_EYEOFSTORM,1;
+		callfunc "BG_ranking",$@BG18_Team2,BG_EYEOFSTORM,0;
+		mapannounce "bat_a02","The " + bg_get_data($@BG18_Team1,2) + " has won the Battle of Tierra EoS!",1,bg_get_data($@BG18_Team1,4);
+	}
+	// Team 2 Won
+	else if ($@score_eyeofstorm_red >= 99) {
+		callfunc "BG_get_Rewards",$@BG18_Team1,7828,1;
+		callfunc "BG_get_Rewards",$@BG18_Team2,7828,5;
+		callfunc "BG_ranking",$@BG18_Team1,BG_EYEOFSTORM,0;
+		callfunc "BG_ranking",$@BG18_Team2,BG_EYEOFSTORM,1;
+		mapannounce "bat_a02","The " + bg_get_data($@BG18_Team2,2) + " has won the Battle of Tierra EoS!",1,bg_get_data($@BG18_Team2,4);
+	}
+	// =======================================================
+	set $@score_eyeofstorm_blue, 0;
+	set $@score_eyeofstorm_red, 0;
+	sleep 5000;
+	$@BG18 = 0;
+	mapwarp "bat_a02","bat_room",154,150;
+	if($@BG18_Team1) { bg_destroy $@BG18_Team1; $@BG18_Team1 = 0; }
+	if($@BG18_Team2) { bg_destroy $@BG18_Team2; $@BG18_Team2 = 0; }
+	bg_unbook "bat_a02";
+	bg_updatescore "bat_a02",$@score_eyeofstorm_blue,$@score_eyeofstorm_red;
+	donpcevent "GEoSNBW::OnDisable";
+	//donpcevent "GEoSCBW::OnDisable";
+	donpcevent "GEoSSBW::OnDisable";
+	donpcevent "CEoSNBW::OnDisable";
+	//donpcevent "CEoSCBW::OnDisable";
+	donpcevent "CEoSSBW::OnDisable";
+	end;
+
+OnBreak:
+	if ($@BG18 != 1 )
+		end;
+
+	if (getcharid(4) == $@BG18_Team1)
+		mapannounce "bat_a02","Netraul Flag Taken by " + bg_get_data($@BG18_Team1,2),1,bg_get_data($@BG18_Team1,4);
+	else if (getcharid(4) == $@BG18_Team2)
+		mapannounce "bat_a02","Netraul Flag Taken by " + bg_get_data($@BG18_Team2,2),1,bg_get_data($@BG18_Team2,4);
+	else end;
+
+	set getvariableofnpc(.Flag_Status,"Neutral_Flag"), 1;
+	set getvariableofnpc(.Flag_Carrier,"Neutral_Flag"), getcharid(0);
+
+	sc_end SC_HIDING;
+	sc_end SC_CLOAKING;
+	sc_end SC_CHASEWALK;
+
+	// Renewal invisibility
+	sc_end SC_CLOAKINGEXCEED;
+	sc_end SC_CAMOUFLAGE;
+	sc_end SC__INVISIBILITY;
+
+	setpcblock(PCBLOCK_SKILL|PCBLOCK_USEITEM,true);
+
+	stopnpctimer "Neutral_Flag";
+	disablenpc "Neutral_Flag";
+
+	addtimer 2100, "Tierra_EOS::OnFlash";
+	end;
+}
+
+// ===========================================================
+// Flags
+// ===========================================================
+bat_a02,273,204,0	script	Neutral Flag::Neutral_Flag	1911,1,1,{
+	end;
+
+OnTouch:
+	if ($@BG18 != 1 || Hp < 1 || .Flag_Status)
+		end;
+
+	if (getcharid(4) == $@BG18_Team1)
+		mapannounce "bat_a02","Netraul Flag Taken by " + bg_get_data($@BG18_Team1,2),1,bg_get_data($@BG18_Team1,4);
+	else if (getcharid(4) == $@BG18_Team2)
+		mapannounce "bat_a02","Netraul Flag Taken by " + bg_get_data($@BG18_Team2,2),1,bg_get_data($@BG18_Team2,4);
+	else end;
+
+	set .Flag_Status, 1;
+	set .Flag_Carrier, getcharid(0);
+	//bg_rankpoints "fame",1;
+
+	sc_end SC_HIDING;
+	sc_end SC_CLOAKING;
+	sc_end SC_CHASEWALK;
+
+	// Renewal invisibility
+	sc_end SC_CLOAKINGEXCEED;
+	sc_end SC_CAMOUFLAGE;
+	sc_end SC__INVISIBILITY;
+
+	setpcblock(PCBLOCK_SKILL|PCBLOCK_USEITEM,true);
+
+	disablenpc "Neutral_Flag";
+	addtimer 2100, "Tierra_EOS::OnFlash";
+	stopnpctimer;
+	end;
+
+OnTimer2000:
+	stopnpctimer;
+	if (.Flag_Status == 0 && $@BG18 == 1 ) {
+		getmapxy .@m$, .@x, .@y, BL_NPC;
+		viewpointmap "bat_a02",1,.@x,.@y,3,0xFFFFFF;
+		specialeffect 223;
+		initnpctimer;
+	}
+	end;
+
+OnDisable:
+	movenpc "Neutral_Flag",273,204;
+	set .Flag_Status, 0;
+	stopnpctimer;
+	disablenpc "Neutral_Flag";
+	killmonster "bat_a02","Tierra_EOS::OnBreak";
+	end;
+
+OnBase:
+	if ($@BG18 != 1 )
+		end;
+
+	movenpc "Neutral_Flag",273,204;
+	set .Flag_Status, 0;
+	set .Flag_Carrier, 0;
+	initnpctimer;
+	disablenpc "Neutral_Flag";
+	mapannounce "bat_a02","The Neutral Flag have been set!!",1,0xFFFFFF;
+	bg_monster 0,"bat_a02",273,204,"Neutral Flag",1911,"Tierra_EOS::OnBreak";
+	end;
+}
+
+// ===========================================================
+// Bases
+// ===========================================================
+bat_a02,173,345,0	script	North Base::North_Base	1911,3,3,{
+	end;
+
+OnTouch:
+	if ($@BG18 != 1 || .Owner == 0 || .Owner != getcharid(4) || getvariableofnpc(.Flag_Carrier,"Neutral_Flag") != getcharid(0))
+		end;
+
+	//bg_rankpoints "eos_flags",1;
+	set getvariableofnpc(.Flag_Carrier,"Neutral_Flag"), 0;
+	setpcblock(PCBLOCK_SKILL|PCBLOCK_USEITEM,false);
+	if (.Owner == $@BG18_Team1)
+		donpcevent "Tierra_EOS::OnTeam1Flag";
+	else
+		donpcevent "Tierra_EOS::OnTeam2Flag";
+	end;
+
+OnBase:
+	set .Owner, 0;
+	set .Balance, 0;
+	set .Tick, 0;
+	setnpcdisplay "North_Base","North Base",1911;
+	initnpctimer;
+	end;
+
+OnTimer1000:
+	stopnpctimer;
+	if ($@BG18 != 1 )
+		end;
+
+	set .@Team1Count, bg_getareausers($@BG18_Team1,"bat_a02",136,329,186,361);
+	set .@Team2Count, bg_getareausers($@BG18_Team2,"bat_a02",136,329,186,361);
+	set .Balance, .Balance + set(.@Balance, .@Team1Count - .@Team2Count);
+
+	if (.Balance < -50)
+		set .Balance, -50;
+	else if (.Balance > 50)
+		set .Balance, 50;
+
+	if (.Owner == 0) {
+		if (.Balance == 50) {
+			set .Balance, 50;
+			set .Owner, $@BG18_Team1; // Team 1
+			setnpcdisplay "North_Base",bg_get_data($@BG18_Team1,2) + " Base",1912;
+			mapannounce "bat_a02","North Base captured by " + bg_get_data($@BG18_Team1,2),1,bg_get_data($@BG18_Team1,4);
+			//bg_rankpoints_area $@BG18_Team1,"bat_a02",136,329,186,361,"eos_bases",1;
+			donpcevent "GEoSNBW::OnEnable";
+		} else if (.Balance == -50) {
+			set .Balance, -50;
+			set .Owner, $@BG18_Team2; // Team 2
+			setnpcdisplay "North_Base",bg_get_data($@BG18_Team2,2) + " Base",1913;
+			mapannounce "bat_a02","North Base captured by " + bg_get_data($@BG18_Team2,2),1,bg_get_data($@BG18_Team2,4);
+			//bg_rankpoints_area $@BG18_Team2,"bat_a02",136,329,186,361,"eos_bases",1;
+			donpcevent "CEoSNBW::OnEnable";
+		}
+	} else if (.Owner == $@BG18_Team1) {
+		if (.Balance <= 0) { // Team 1 lost Control
+			set .Owner, 0;
+			setnpcdisplay "North_Base","North Base",1911;
+			mapannounce "bat_a02",bg_get_data($@BG18_Team1,2) + " lost control of the North Base",1,bg_get_data($@BG18_Team1,4);
+			donpcevent "GEoSNBW::OnDisable";
+		}
+	} else if (.Owner == $@BG18_Team2) {
+		if (.Balance >= 0) { // Team 2 lost Control
+			set .Owner, 0;
+			setnpcdisplay "North_Base","North Base",1911;
+			mapannounce "bat_a02",bg_get_data($@BG18_Team2,2) + " lost control of the North Base",1,bg_get_data($@BG18_Team2,4);
+			donpcevent "CEoSNBW::OnDisable";
+		}
+	}
+
+	if (.@Balance > 0)
+		specialeffect 236;
+	else if (.@Balance < 0)
+		specialeffect 225;
+	else if (.Owner == $@BG18_Team1)
+		specialeffect 236;
+	else if (.Owner == $@BG18_Team2)
+		specialeffect 225;
+	else
+		specialeffect 223;
+
+	if (.Owner == 0)
+		viewpointmap "bat_a02",1,173,345,1,0xFFFFFF;
+	else if (.Owner == $@BG18_Team1)
+		viewpointmap "bat_a02",1,173,345,1,bg_get_data($@BG18_Team1,4);
+	else if (.Owner == $@BG18_Team2)
+		viewpointmap "bat_a02",1,173,345,1,bg_get_data($@BG18_Team2,4);
+
+	if (.Owner == 0)
+		set .Tick, 0;
+	else if (set(.Tick, .Tick + 1) == 7) {
+		donpcevent "Tierra_EOS::OnNorthScore";
+		set .Tick, 0;
+	}
+
+	initnpctimer;
+	end;
+}
+
+bat_a02,164,50,0	script	South Base::South_Base	1911,3,3,{
+	end;
+
+OnTouch:
+	if ($@BG18 != 1 || .Owner == 0 || .Owner != getcharid(4) || getvariableofnpc(.Flag_Carrier,"Neutral_Flag") != getcharid(0))
+		end;
+
+	//bg_rankpoints "eos_flags",1;
+	set getvariableofnpc(.Flag_Carrier,"Neutral_Flag"), 0;
+	setpcblock(PCBLOCK_SKILL|PCBLOCK_USEITEM,false);
+	if (.Owner == $@BG18_Team1)
+		donpcevent "Tierra_EOS::OnTeam1Flag";
+	else
+		donpcevent "Tierra_EOS::OnTeam2Flag";
+	end;
+
+OnBase:
+	set .Owner, 0;
+	set .Balance, 0;
+	set .Tick, 0;
+	setnpcdisplay "South_Base","South Base",1911;
+	initnpctimer;
+	end;
+
+OnTimer1000:
+	stopnpctimer;
+	if ($@BG18 != 1)
+		end;
+
+	set .@Team1Count, bg_getareausers($@BG18_Team1,"bat_a02",129,34,175,65);
+	set .@Team2Count, bg_getareausers($@BG18_Team2,"bat_a02",129,34,175,65);
+	set .Balance, .Balance + set(.@Balance, .@Team1Count - .@Team2Count);
+
+	if (.Balance < -50)
+		set .Balance, -50;
+	else if (.Balance > 50)
+		set .Balance, 50;
+
+	if (.Owner == 0) {
+		if (.Balance == 50) {
+			set .Balance, 50;
+			set .Owner, $@BG18_Team1; // Team 1
+			setnpcdisplay "South_Base",bg_get_data($@BG18_Team1,2) + " Base",1912;
+			mapannounce "bat_a02","South Base captured by " + bg_get_data($@BG18_Team1,2),1,bg_get_data($@BG18_Team1,4);
+			//bg_rankpoints_area $@BG18_Team1,"bat_a02",129,34,175,65,"eos_bases",1;
+			donpcevent "GEoSSBW::OnEnable";
+		} else if (.Balance == -50) {
+			set .Balance, -50;
+			set .Owner, $@BG18_Team2; // Team 2
+			setnpcdisplay "South_Base",bg_get_data($@BG18_Team2,2) + " Base",1913;
+			mapannounce "bat_a02","South Base captured by " + bg_get_data($@BG18_Team2,2),1,bg_get_data($@BG18_Team2,4);
+			//bg_rankpoints_area $@BG18_Team2,"bat_a02",129,34,175,65,"eos_bases",1;
+			donpcevent "CEoSSBW::OnEnable";
+		}
+	} else if (.Owner == $@BG18_Team1) {
+		if (.Balance <= 0) { // Team 1 lost Control
+			set .Owner, 0;
+			setnpcdisplay "South_Base","North Base",1911;
+			mapannounce "bat_a02",bg_get_data($@BG18_Team1,2) + " lost control of the South Base",1,bg_get_data($@BG18_Team1,4);
+			donpcevent "GEoSSBW::OnDisable";
+		}
+	} else if (.Owner == $@BG18_Team2) {
+		if (.Balance >= 0) { // Team 2 lost Control
+			set .Owner, 0;
+			setnpcdisplay "South_Base","North Base",1911;
+			mapannounce "bat_a02",bg_get_data($@BG18_Team2,2) + " lost control of the South Base",1,bg_get_data($@BG18_Team2,4);
+			donpcevent "CEoSSBW::OnDisable";
+		}
+	}
+
+	if (.@Balance > 0)
+		specialeffect 236;
+	else if (.@Balance < 0)
+		specialeffect 225;
+	else if (.Owner == $@BG18_Team1)
+		specialeffect 236;
+	else if (.Owner == $@BG18_Team2)
+		specialeffect 225;
+	else
+		specialeffect 223;
+
+	if (.Owner == 0)
+		viewpointmap "bat_a02",1,164,50,2,0xFFFFFF;
+	else if (.Owner == $@BG18_Team1)
+		viewpointmap "bat_a02",1,164,50,2,bg_get_data($@BG18_Team1,4);
+	else if (.Owner == $@BG18_Team2)
+		viewpointmap "bat_a02",1,164,50,2,bg_get_data($@BG18_Team2,4);
+
+	if (.Owner == 0)
+		set .Tick, 0;
+	else if (set(.Tick, .Tick + 1) == 7) {
+		donpcevent "Tierra_EOS::OnSouthScore";
+		set .Tick, 0;
+	}
+
+	initnpctimer;
+	end;
+}
+
+// Battleground Therapist
+// *********************************************************************
+
+// ===========================================================
+// Healer
+// ===========================================================
+bat_a02,53,377,3	duplicate(BGHeal)	Therapist in battle#eoe2	4_F_SISTER
+bat_a02,45,18,3	duplicate(BGHeal)	Therapist in battle#eoe1	4_F_SISTER
+
+// ===========================================================
+// Respawn
+// ===========================================================
+bat_a02,46,377,0	script	North Base Warp::GEoSNBW	1_SHADOW_NPC,{
+	end;
+
+	OnEnable:
+		waitingroom "Join To Warp",20;
+		end;
+
+	OnDisable:
+		delwaitingroom;
+		end;
+
+	OnWarp:
+		warpwaitingpc "bat_a02",115,346,20;
+		end;
+}
+
+bat_a02,53,370,0	script	South Base Warp::GEoSSBW	1_SHADOW_NPC,{
+	end;
+
+	OnEnable:
+		waitingroom "Join To Warp",20;
+		end;
+
+	OnDisable:
+		delwaitingroom;
+		end;
+
+	OnWarp:
+		warpwaitingpc "bat_a02",106,48,20;
+		end;
+}
+
+bat_a02,38,19,0	script	North Base Warp::CEoSNBW	1_SHADOW_NPC,{
+	end;
+
+	OnEnable:
+		waitingroom "Join To Warp",20;
+		end;
+
+	OnDisable:
+		delwaitingroom;
+		end;
+
+	OnWarp:
+		warpwaitingpc "bat_a02",115,346,20;
+		end;
+}
+
+bat_a02,45,12,0	script	South Base Warp::CEoSSBW	1_SHADOW_NPC,{
+	end;
+
+	OnEnable:
+		waitingroom "Join To Warp",20;
+		end;
+
+	OnDisable:
+		delwaitingroom;
+		end;
+
+	OnWarp:
+		warpwaitingpc "bat_a02",106,48,20;
+		end;
+}
+
+bat_a02,50,374,0	script	#guieoe_respawn	HIDDEN_WARP_NPC,{
+	end;
+
+	OnBGStart:
+		initnpctimer;
+		end;
+
+	OnBGStop:
+		stopnpctimer;
+		end;
+
+	OnTimer24000:
+		specialeffect 83;
+		end;
+
+	OnTimer25000:
+		areapercentheal "bat_a02",46,370,54,378,100,100;
+		donpcevent "GEoSNBW::OnWarp";
+		donpcevent "GEoSSBW::OnWarp";
+		areawarp "bat_a02",46,370,54,378,"bat_a02",353,344;
+		initnpctimer;
+		end;
+}
+
+bat_a02,42,16,0	script	#croeoe_respawn	HIDDEN_WARP_NPC,{
+	end;
+
+	OnBGStart:
+		initnpctimer;
+		end;
+
+	OnBGStop:
+		stopnpctimer;
+		end;
+
+	OnTimer24000:
+		specialeffect 83;
+		end;
+
+	OnTimer25000:
+		areapercentheal "bat_a02",38,12,47,21,100,100;
+		donpcevent "CEoSNBW::OnWarp";
+		donpcevent "CEoSSBW::OnWarp";
+		areawarp "bat_a02",38,12,47,21,"bat_a02",353,52;
+		initnpctimer;
+		end;
+}
+
+// MapFlags
+// *********************************************************************
+
+bat_a02	mapflag	battleground	2
+bat_a02	mapflag	nomemo
+bat_a02	mapflag	nosave	SavePoint
+bat_a02	mapflag	noteleport
+bat_a02	mapflag	nowarp
+bat_a02	mapflag	nowarpto
+bat_a02	mapflag	noreturn
+bat_a02	mapflag	nobranch
+bat_a02	mapflag	nopenalty
+bat_a02	mapflag	noecall
+bat_a02	mapflag	bg_consume
+
+// Eye of the Storm Effects
+// *********************************************************************
+
+bat_a02,269,189,0	script	#stormef1	HIDDEN_WARP_NPC,{
+	end;
+
+OnStartStorm:
+	if ($@BG18 != 1) end;
+
+	sleep (rand(15,40) * 1000);
+	specialeffect 622;
+	specialeffect 537;
+
+	goto OnStartStorm;
+	end;
+}
+
+bat_a02,284,189,0	duplicate(#stormef1)	#stormef2	HIDDEN_WARP_NPC
+bat_a02,267,204,0	duplicate(#stormef1)	#stormef3	HIDDEN_WARP_NPC
+bat_a02,278,210,0	duplicate(#stormef1)	#stormef4	HIDDEN_WARP_NPC
+bat_a02,262,210,0	duplicate(#stormef1)	#stormef5	HIDDEN_WARP_NPC
+bat_a02,256,201,0	duplicate(#stormef1)	#stormef6	HIDDEN_WARP_NPC
+bat_a02,284,218,0	duplicate(#stormef1)	#stormef7	HIDDEN_WARP_NPC
+bat_a02,263,220,0	duplicate(#stormef1)	#stormef8	HIDDEN_WARP_NPC
+bat_a02,289,207,0	duplicate(#stormef1)	#stormef9	HIDDEN_WARP_NPC
+bat_a02,279,182,0	duplicate(#stormef1)	#stormef10	HIDDEN_WARP_NPC
+bat_a02,272,229,0	duplicate(#stormef1)	#stormef11	HIDDEN_WARP_NPC
diff --git a/npc/mapflag/battleground.txt b/npc/mapflag/battleground.txt
index 436bed99e..a793c7b0f 100644
--- a/npc/mapflag/battleground.txt
+++ b/npc/mapflag/battleground.txt
@@ -6,11 +6,6 @@
 //===== Additional Comments: ================================= 
 //= 1.0 Initial script. [Epoque]
 //============================================================
-
-bat_c01	mapflag	battleground	2
-bat_c02	mapflag	battleground	2
-bat_c03	mapflag	battleground	2
 bat_b01	mapflag	battleground	2
-bat_b02	mapflag	battleground
+bat_c02	mapflag	battleground	2
 bat_a01	mapflag	battleground
-bat_a02	mapflag	battleground
diff --git a/npc/re/scripts_athena.conf b/npc/re/scripts_athena.conf
index 503324c02..7812aad25 100644
--- a/npc/re/scripts_athena.conf
+++ b/npc/re/scripts_athena.conf
@@ -10,7 +10,7 @@ npc: npc/re/other/global_npcs.txt
 npc: npc/re/airports/izlude.txt
 
 // --------------------- Battle Grounds -------------------------
-npc: npc/re/battleground/bg_common.txt
+//npc: npc/re/battleground/bg_common.txt
 
 // --------------------------- Cities ---------------------------
 npc: npc/re/cities/alberta.txt
diff --git a/npc/scripts_athena.conf b/npc/scripts_athena.conf
index c16cf9ab5..d5886c683 100644
--- a/npc/scripts_athena.conf
+++ b/npc/scripts_athena.conf
@@ -12,22 +12,21 @@ npc: npc/airports/rachel.txt
 npc: npc/airports/yuno.txt
 
 // --------------------- Battle Grounds -------------------------
-// - Flavius ----------------------------------------------------
-npc: npc/battleground/flavius/flavius_enter.txt
-npc: npc/battleground/flavius/flavius01.txt
-npc: npc/battleground/flavius/flavius02.txt
-// - Kreiger Von Midgard ----------------------------------------
-npc: npc/battleground/kvm/kvm_enter.txt
-npc: npc/battleground/kvm/kvm_item_pay.txt
-npc: npc/battleground/kvm/kvm01.txt
-npc: npc/battleground/kvm/kvm02.txt
-npc: npc/battleground/kvm/kvm03.txt
-// - Tierra Gorge -----------------------------------------------
-npc: npc/battleground/tierra/tierra_enter.txt
-npc: npc/battleground/tierra/tierra01.txt
-npc: npc/battleground/tierra/tierra02.txt
-// --------------------------------------------------------------
 npc: npc/battleground/bg_common.txt
+npc: npc/battleground/bg_conquest.txt
+npc: npc/battleground/bg_flavius_capture_the_flag.txt
+npc: npc/battleground/bg_flavius_death_match.txt
+npc: npc/battleground/bg_flavius_stone_control.txt
+npc: npc/battleground/bg_poring_ball.txt
+npc: npc/battleground/bg_rush.txt
+npc: npc/battleground/bg_tierra_bossnia.txt
+npc: npc/battleground/bg_tierra_domination.txt
+npc: npc/battleground/bg_tierra_eye_of_storm.txt
+npc: npc/battleground/bg_offi_flavius.txt
+npc: npc/battleground/bg_offi_kvm.txt
+npc: npc/battleground/bg_offi_tierra.txt
+npc: npc/battleground/bg_double_inferno.txt
+npc: npc/battleground/bg_bomberman.txt
 
 // --------------------------- Cities ---------------------------
 npc: npc/cities/alberta.txt
diff --git a/src/common/mmo.hpp b/src/common/mmo.hpp
index 5a2414dc2..1f579b04b 100644
--- a/src/common/mmo.hpp
+++ b/src/common/mmo.hpp
@@ -732,6 +732,9 @@ struct guild {
 	struct guild_alliance alliance[MAX_GUILDALLIANCE];
 	struct guild_expulsion expulsion[MAX_GUILDEXPULSION];
 	struct guild_skill skill[MAX_GUILDSKILL];
+#ifdef BGEXTENDED
+	int skill_block_timer[MAX_GUILDSKILL]; // BG eAmod
+#endif
 	struct Channel *channel;
 	int instance_id;
 	time_t last_leader_change;
diff --git a/src/config/core.hpp b/src/config/core.hpp
index bb44ce662..87ec9a3fd 100644
--- a/src/config/core.hpp
+++ b/src/config/core.hpp
@@ -99,4 +99,8 @@
 
 #include "../custom/defines_post.hpp"
 
+/// Battleground Extended [Grenat]
+/// Comment to disable Battleground Extended
+#define BGEXTENDED
+
 #endif /* CONFIG_CORE_HPP */
diff --git a/src/map/atcommand.cpp b/src/map/atcommand.cpp
index fd1817e6e..ac30a816a 100644
--- a/src/map/atcommand.cpp
+++ b/src/map/atcommand.cpp
@@ -10622,6 +10622,221 @@ ACMD_FUNC(quest) {
 	return 0;
 }
 
+#ifdef BGEXTENDED
+/*==========================================
+* Battleground Leader Commands
+*------------------------------------------*/
+ACMD_FUNC(order)
+{
+	nullpo_retr(-1,sd);
+	memset(atcmd_output, '\0', sizeof(atcmd_output));
+	if( !message || !*message )
+	{
+		clif_displaymessage(fd, "Please, enter a message (usage: @order <message>).");
+		return -1;
+	}
+
+	if( map_getmapflag(sd->bl.m, MF_BATTLEGROUND) )
+	{
+		std::shared_ptr<s_battleground_data> bgteam = util::umap_find(bg_team_db, sd->bg_id);
+		if( bgteam->leader_char_id !=  sd->status.char_id) {
+			clif_displaymessage(fd, "This command is reserved for Team Leaders Only.");
+			return -1;
+		}
+		if (battle_config.bg_order_behavior)
+			sprintf(atcmd_output, "%s: %s", sd->status.name, message);
+		else
+			sprintf(atcmd_output, "Team Leader: %s", message);
+		clif_broadcast2(&sd->bl, atcmd_output, (int)strlen(atcmd_output)+1, bgteam->color, 0x190, 20, 0, 0, BG);
+	}
+	else
+	{
+		if( !sd->state.gmaster_flag )
+		{
+			clif_displaymessage(fd, "This command is reserved for Guild Leaders Only.");
+			return -1;
+		}
+		clif_broadcast2(&sd->bl, message, (int)strlen(message)+1, 0xFF0000, 0x190, 20, 0, 0, GUILD);
+	}
+
+	return 0;
+}
+
+ACMD_FUNC(leader)
+{
+	struct map_session_data *pl_sd = NULL;
+	nullpo_retr(-1,sd);
+	memset(atcmd_player_name, '\0', sizeof(atcmd_player_name));
+
+	if (!message || !*message || sscanf(message, "%23[^\n]", atcmd_player_name) < 1) {
+		clif_displaymessage(fd,"Please enter a player name (usage: @leader <char name/ID>).");
+		return -1;
+	}
+	if(!sd->bg_id) {
+		clif_displaymessage(fd, "This command is reserved for Battleground Only.");
+		return -1;
+	}
+	std::shared_ptr<s_battleground_data> bgd = util::umap_find(bg_team_db, sd->bg_id);
+	if( bgd->leader_char_id !=  sd->status.char_id)
+		clif_displaymessage(fd, "This command is reserved for Team Leaders Only.");
+	else if( !bgd || !sd->bg_id)
+		clif_displaymessage(fd, "This command is reserved for Battleground Only.");
+	else if( sd->ud.skilltimer != INVALID_TIMER )
+		clif_displaymessage(fd, "Command not allow while casting a skill.");
+	else if( !message || !*message )
+		clif_displaymessage(fd, "Please, enter the new Leader name (usage: @leader <name>).");
+	else if((pl_sd=map_nick2sd(atcmd_player_name,true)) == NULL && (pl_sd=map_charid2sd(atoi(atcmd_player_name))) == NULL)
+		clif_displaymessage(fd, "Character not found.");
+	else if( sd->bg_id != pl_sd->bg_id )
+		clif_displaymessage(fd, "Destination Player is not in your Team.");
+	else if( sd == pl_sd )
+		clif_displaymessage(fd, "You are already the Team Leader.");
+	else
+	{ // Everytest OK!
+		sprintf(atcmd_output, "Team Leader transfered to [%s]", pl_sd->status.name);
+		clif_broadcast2(&sd->bl, atcmd_output, (int)strlen(atcmd_output)+1, bgd->color, 0x190, 20, 0, 0, BG_LISTEN);
+
+		bgd->leader_char_id = pl_sd->status.char_id;
+
+		clif_name_area(&sd->bl);
+		clif_name_area(&pl_sd->bl);
+		return 0;
+	}
+	return -1;
+}
+
+ACMD_FUNC(reportafk)
+{
+	struct map_session_data *pl_sd = NULL;
+	nullpo_retr(-1,sd);
+	memset(atcmd_player_name, '\0', sizeof(atcmd_player_name));
+
+	if (!message || !*message || sscanf(message, "%23[^\n]", atcmd_player_name) < 1) {
+		clif_displaymessage(fd,"Please enter a player name (usage: @reportafk <char name/ID>).");
+		return -1;
+	}
+	std::shared_ptr<s_battleground_data> bgteam = util::umap_find(bg_team_db, sd->bg_id);
+	if( !sd->bg_id )
+		clif_displaymessage(fd, "This command is reserved for Battleground Only.");
+	else if( bgteam->leader_char_id != sd->status.char_id && battle_config.bg_reportafk_leaderonly )
+		clif_displaymessage(fd, "This command is reserved for Team Leaders Only.");
+	else if( !message || !*message )
+		clif_displaymessage(fd, "Please, enter the character name (usage: @reportafk <name>).");
+	else if((pl_sd=map_nick2sd(atcmd_player_name,true)) == NULL && (pl_sd=map_charid2sd(atoi(atcmd_player_name))) == NULL)
+		clif_displaymessage(fd, "Character not found");
+	else if( sd->bg_id != pl_sd->bg_id )
+		clif_displaymessage(fd, "Destination Player is not in your Team.");
+	else if( sd == pl_sd )
+		clif_displaymessage(fd, "You cannot kick yourself.");
+	else if( pl_sd->state.bg_afk == 0 )
+		clif_displaymessage(fd, "The player is not AFK on this Battleground.");
+	else
+	{ // Everytest OK!
+		if( bgteam == NULL )
+			return -1;
+
+		bg_team_leave(pl_sd,2,true);
+		clif_displaymessage(pl_sd->fd, "You have been kicked from Battleground because of your AFK status.");
+		pc_setpos(pl_sd,pl_sd->status.save_point.map,pl_sd->status.save_point.x,pl_sd->status.save_point.y,CLR_TELEPORT);
+
+		sprintf(atcmd_output, "- AFK [%s] Kicked by @reportafk command-", pl_sd->status.name);
+		clif_broadcast2(&sd->bl, atcmd_output, (int)strlen(atcmd_output)+1, bgteam->color, 0x190, 20, 0, 0, BG);
+		return 0;
+	}
+	return -1;
+}
+
+ACMD_FUNC(listenbg)
+{
+	if (sd->state.bg_listen)
+	{
+		sd->state.bg_listen = 0;
+		clif_displaymessage(fd, "You will receive Battleground announcements");
+	}
+	else
+	{
+		sd->state.bg_listen = 1;
+		clif_displaymessage(fd, "You will not receive Battleground announcements.");
+	}
+
+	return 0;
+}
+
+/*==========================================
+* Guild Skill Usage for Guild Masters
+*------------------------------------------*/
+ACMD_FUNC(bgskill)
+{
+	if(!sd->bg_id) return -1;
+	int i, skillnum = 0, skilllv = 0;
+	t_tick tick = gettick();
+	std::shared_ptr<s_battleground_data> bgd = util::umap_find(bg_team_db, sd->bg_id);
+	const struct { char skillstr[3]; int id; } skills[] = {
+		{ "BO",	10010 },
+		{ "RG",	10011 },
+		{ "RS",	10012 },
+		{ "EC",	10013 },
+		{ "CF",	10017 },
+		{ "CB",	10018 },
+		{ "EM",	10019 },
+	};
+
+	// Check for Skill ID
+	for( i = 0; i < ARRAYLENGTH(skills); i++ )
+	{
+		if( strncmpi(message, skills[i].skillstr, 3) == 0 )
+		{
+			skillnum = skills[i].id;
+			break;
+		}
+	}
+	if( !skillnum )
+	{
+		clif_displaymessage(fd, "Invalid Skill string. Use @bgskill EC/RS/RG/BO/CF/CB/EM");
+		return -1;
+	}
+
+	if( !map_getmapflag(sd->bl.m, MF_BATTLEGROUND) )
+	{
+		clif_displaymessage(fd, "This command is only available for Battleground.");
+		return -1;
+	}
+	else
+	{
+		if( bgd->leader_char_id == sd->status.char_id )
+		{
+			if(bg_block_skill_status(sd, skillnum))
+				return -1;
+			else
+				skilllv = 1;
+		}
+		else
+		{
+			clif_displaymessage(fd, "This command is reserved for Team Leaders Only.");
+			return -1;
+		}
+	}
+
+	if( pc_cant_act(sd) || pc_issit(sd) || sd->sc.option&(OPTION_WEDDING|OPTION_XMAS|OPTION_SUMMER) || sd->state.only_walk || sd->sc.data[SC_BASILICA] )
+		return -1;
+
+	if( DIFF_TICK(tick, sd->ud.canact_tick) < 0 )
+		return -1;
+
+	if( sd->menuskill_id )
+	{
+		if( sd->menuskill_id == SA_TAMINGMONSTER )
+			sd->menuskill_id = sd->menuskill_val = 0; //Cancel pet capture.
+		else if( sd->menuskill_id != SA_AUTOSPELL )
+			return -1; //Can't use skills while a menu is open.
+	}
+
+	sd->skillitem = sd->skillitemlv = 0;
+	if(skillnum) unit_skilluse_id(&sd->bl, sd->bl.id, skillnum, 1);
+	return 0;
+}
+#endif
+
 /**
  * Opens the refineUI
  * Usage: @refineui
@@ -11016,6 +11231,14 @@ void atcommand_basecommands(void) {
 		ACMD_DEF2("erasequest", quest),
 		ACMD_DEF2("completequest", quest),
 		ACMD_DEF2("checkquest", quest),
+#ifdef BGEXTENDED
+		//BG eAmod
+		ACMD_DEF(listenbg),
+		ACMD_DEF(order),
+		ACMD_DEF(leader),
+		ACMD_DEF(reportafk),
+		ACMD_DEF(bgskill),
+#endif
 		ACMD_DEF(refineui),
 		ACMD_DEFR(stylist, ATCMD_NOCONSOLE|ATCMD_NOAUTOTRADE),
 		ACMD_DEF(addfame),
diff --git a/src/map/battle.cpp b/src/map/battle.cpp
index fd8fb68e4..2a1d5c2cd 100644
--- a/src/map/battle.cpp
+++ b/src/map/battle.cpp
@@ -10105,6 +10105,20 @@ static const struct _battle_data {
 	{ "mercenary_autoloot",                 &battle_config.mercenary_autoloot,              0,      0,      1,              },
 	{ "mer_idle_no_share" ,                 &battle_config.mer_idle_no_share,               0,      0,      INT_MAX,        },
 	{ "idletime_mer_option",                &battle_config.idletime_mer_option,             0x1F,   0x1,    0xFFF,          },
+#ifdef BGEXTENDED
+	{ "bg_eAmod_mode",                      &battle_config.bg_eAmod_mode,                   1,      0,      1,              },
+	{ "bg_idle_announce",                   &battle_config.bg_idle_announce,                0,      0,      INT_MAX,        },
+	{ "bg_idle_autokick",                   &battle_config.bg_idle_autokick,                0,      0,      INT_MAX,        },
+	{ "bg_reward_rates",                    &battle_config.bg_reward_rates,                 100,    0,      INT_MAX,        },
+	{ "bg_reportafk_leaderonly",            &battle_config.bg_reportafk_leaderonly,         1,      0,      1,              },
+	{ "bg_queue2team_balanced",             &battle_config.bg_queue2team_balanced,          1,      0,      1,              },
+	{ "bg_queue_onlytowns",                 &battle_config.bg_queue_onlytowns,              1,      0,      1,              },
+	{ "bg_order_behavior",                  &battle_config.bg_order_behavior,               1,      0,      1,              },
+	{ "bg_reserved_char_id",                &battle_config.bg_reserved_char_id,             999996, 0,      INT_MAX,        },
+	{ "woe_reserved_char_id",		&battle_config.woe_reserved_char_id,            999997, 0,      INT_MAX,        },
+	{ "bg_can_trade",			&battle_config.bg_can_trade,                    1,      0,      1,              },
+	{ "bg_double_login",			&battle_config.bg_double_login,                 1,      0,      1,              },
+#endif
 	{ "feature.refineui",                   &battle_config.feature_refineui,                1,      0,      1,              },
 	{ "rndopt_drop_pillar",                 &battle_config.rndopt_drop_pillar,              1,      0,      1,              },
 	{ "pet_legacy_formula",                 &battle_config.pet_legacy_formula,              0,      0,      1,              },
diff --git a/src/map/battle.hpp b/src/map/battle.hpp
index af4f70f8d..ae05c720a 100644
--- a/src/map/battle.hpp
+++ b/src/map/battle.hpp
@@ -689,6 +689,20 @@ struct Battle_Config
 	int mercenary_autoloot;
 	int mer_idle_no_share;
 	int idletime_mer_option;
+#ifdef BGEXTENDED
+	int bg_idle_announce;
+	int bg_idle_autokick;
+	int bg_reportafk_leaderonly;
+	int bg_queue2team_balanced;
+	int bg_reward_rates;
+	int bg_queue_onlytowns;
+	int bg_order_behavior;
+	int bg_eAmod_mode;
+	int bg_reserved_char_id;
+	int woe_reserved_char_id;
+	int bg_can_trade;
+	int bg_double_login;
+#endif
 	int feature_refineui;
 	int rndopt_drop_pillar;
 	int pet_legacy_formula;
diff --git a/src/map/battleground.cpp b/src/map/battleground.cpp
index 66f78a78f..82ef5c9ab 100644
--- a/src/map/battleground.cpp
+++ b/src/map/battleground.cpp
@@ -12,6 +12,10 @@
 #include "../common/showmsg.hpp"
 #include "../common/strlib.hpp"
 #include "../common/timer.hpp"
+#ifdef BGEXTENDED
+#include "../common/socket.hpp"
+#include "../common/utils.hpp"
+#endif
 #include "../common/utilities.hpp"
 
 #include "battle.hpp"
@@ -25,6 +29,14 @@
 #include "party.hpp"
 #include "pc.hpp"
 #include "pet.hpp"
+#ifdef BGEXTENDED
+#include "elemental.hpp"
+#include "log.hpp"
+#include "quest.hpp"
+#include "skill.hpp"
+#include "clan.hpp"
+#include "channel.hpp"
+#endif
 
 using namespace rathena;
 
@@ -306,6 +318,19 @@ uint64 BattlegroundDatabase::parseBodyNode(const ryml::NodeRef& node) {
 						if (!this->asInt16(team[team_name], "RespawnY", team_ptr->warp_y))
 							return 0;
 					}
+#ifdef BGEXTENDED
+					if (this->nodeExists(team[team_name], "TeamID")) {
+						if (!this->asInt16(team[team_name], "TeamID", team_ptr->team_id))
+							return 0;
+					}
+					if (this->nodeExists(team[team_name], "Color")) {
+						if (!this->asInt16(team[team_name], "Color", team_ptr->color_id))
+							return 0;
+					} else {
+						if (!exists)
+							team_ptr->color_id = 0;
+					}
+#endif
 
 					if (this->nodeExists(team[team_name], "DeathEvent")) {
 						if (!this->asString(team[team_name], "DeathEvent", team_ptr->death_event))
@@ -397,6 +422,101 @@ std::shared_ptr<s_battleground_queue> bg_search_queue(int queue_id)
 	return nullptr;
 }
 
+
+#ifdef BGEXTENDED
+struct guild bg_guild[13]; // Temporal fake guild information
+const unsigned int bg_colors[13] = { 0x0000FF, 0xFF0000, 0x00FF00, 0xFFFFFF, 0xFFFFFF, 0xFFFFFF, 0xFFFFFF, 0xFFFFFF, 0xFFFFFF, 0xFFFFFF, 0xFFFFFF, 0xFFFFFF, 0xFFFFFF };
+
+#define BLUE_SKULL 8965
+#define RED_SKULL 8966
+#define GREEN_SKULL 8967
+
+int bg_member_removeskulls(struct map_session_data *sd)
+{
+	int n;
+	nullpo_ret(sd);
+	if( (n = pc_search_inventory(sd,BLUE_SKULL)) >= 0 )
+		pc_delitem(sd,n,sd->inventory.u.items_inventory[n].amount,0,2,LOG_TYPE_OTHER);
+	if( (n = pc_search_inventory(sd,RED_SKULL)) >= 0 )
+		pc_delitem(sd,n,sd->inventory.u.items_inventory[n].amount,0,2,LOG_TYPE_OTHER);
+	if( (n = pc_search_inventory(sd,GREEN_SKULL)) >= 0 )
+		pc_delitem(sd,n,sd->inventory.u.items_inventory[n].amount,0,2,LOG_TYPE_OTHER);
+
+	return 1;
+}
+
+int bg_countlogin(struct map_session_data *sd, bool check_bat_room)
+{
+	int c = 0, m = map_mapname2mapid("bat_room");
+	struct map_session_data* pl_sd;
+	struct s_mapiterator* iter;
+	nullpo_ret(sd);
+
+	iter = mapit_getallusers();
+	for (pl_sd = (TBL_PC*)mapit_first(iter); mapit_exists(iter); pl_sd = (TBL_PC*)mapit_next(iter))
+	{
+		if (!(pl_sd->bg_queue_id || map_getmapflag(pl_sd->bl.m, MF_BATTLEGROUND) || (check_bat_room && pl_sd->bl.m == m)))
+			continue;
+		if( session[sd->fd]->client_addr == session[pl_sd->fd]->client_addr )
+			c++;
+	}
+	mapit_free(iter);
+	return c;
+}
+
+int bg_checkskill(struct map_session_data *sd, int id)
+{
+	std::shared_ptr<s_battleground_data> bg = util::umap_find(bg_team_db, sd->bg_id);
+	int idx = id - GD_SKILLBASE;
+	if( idx < 0 || idx >= MAX_GUILDSKILL-1 || !bg->g )
+		return 0;
+	return bg->g->skill[idx].lv;
+}
+
+static TIMER_FUNC(bg_block_skill_end)
+{
+	return 1;
+}
+
+int bg_block_skill_status(struct map_session_data *sd, int skillnum)
+{
+	if(!sd->bg_id) return 1;
+	const struct TimerData * td;
+	char output[128];
+	int idx;
+	t_tick seconds;
+	std::shared_ptr<s_battleground_data> bg = util::umap_find(bg_team_db, sd->bg_id);
+	idx = skillnum - GD_SKILLBASE;
+	if( bg == NULL || bg->g == NULL || idx < 0 || idx >= MAX_GUILDSKILL-1 || bg->skill_block_timer[idx] == INVALID_TIMER )
+		return 0;
+	if( (td = get_timer(bg->skill_block_timer[idx])) == NULL )
+		return 0;
+	seconds = DIFF_TICK(td->tick,gettick())/1000;
+	sprintf(output, "%s : Cannot use team skill %s. %lld seconds remaining................", bg->g->name, skill_get_desc(skillnum), seconds);
+	clif_bg_message(bg.get(), sd->bg_id, bg->g->name, output, strlen(output) + 1);
+	return 1;
+}
+
+void bg_block_skill_start(struct map_session_data *sd, int skillnum, t_tick time)
+{
+	int idx = skillnum - GD_SKILLBASE;
+	std::shared_ptr<s_battleground_data> bgd = util::umap_find(bg_team_db, sd->bg_id);
+	if( bgd == NULL || idx < 0 || idx >= MAX_GUILDSKILL-1 )
+		return;
+
+	if( bgd->skill_block_timer[idx] != INVALID_TIMER )
+		delete_timer(bgd->skill_block_timer[idx], bg_block_skill_end);
+
+	bgd->skill_block_timer[idx] = add_timer(gettick() + time, bg_block_skill_end, sd->bg_id, skillnum);
+}
+
+struct guild* bg_guild_get(int bg_id) { // Return Fake Guild for BG Members
+	std::shared_ptr<s_battleground_data> bg = util::umap_find(bg_team_db, bg_id);
+	if( bg == NULL ) return NULL;
+	return bg->g;
+}
+#endif
+
 /**
  * Search for an available player in Battleground
  * @param bg: Battleground data
@@ -459,6 +579,38 @@ bool bg_team_warp(int bg_id, unsigned short mapindex, short x, short y)
 	return false;
 }
 
+#ifdef BGEXTENDED
+int bg_reveal_pos(struct block_list *bl, va_list ap)
+{
+	struct map_session_data *pl_sd, *sd = NULL;
+	int flag, color;
+
+	pl_sd = (struct map_session_data *)bl;
+	sd = va_arg(ap,struct map_session_data *); // Source
+	flag = va_arg(ap,int);
+	color = va_arg(ap,int);
+
+	if( pl_sd->bg_id == sd->bg_id )
+		return 0; // Same Team
+
+	clif_viewpoint(pl_sd,sd->bl.id,flag,sd->bl.x,sd->bl.y,sd->bl.id,color);
+	return 0;
+}
+
+int bg_send_dot_remove(struct map_session_data *sd) {
+	nullpo_ret(sd);
+	int m;
+
+	std::shared_ptr<s_battleground_data> bgd = util::umap_find(bg_team_db, sd->bg_id);
+	if (sd && sd->bg_id)
+	{
+		clif_bg_xy_remove(sd);
+		if (bgd->reveal_pos && (m = map_mapindex2mapid(sd->mapindex)) == sd->bl.m)
+			map_foreachinmap(bg_reveal_pos, m, BL_PC, sd, 2, 0xFFFFFF);
+	}
+	return 0;
+}
+#else
 /**
  * Remove a player's Battleground map marker
  * @param sd: Player data
@@ -471,6 +623,7 @@ void bg_send_dot_remove(struct map_session_data *sd)
 		clif_bg_xy_remove(sd);
 	return;
 }
+#endif
 
 /**
  * Join a player to a Battleground team
@@ -491,7 +644,14 @@ bool bg_team_join(int bg_id, struct map_session_data *sd, bool is_queue)
 			return false; // No free slots
 
 		s_battleground_member_data member = {};
-
+#ifdef BGEXTENDED
+		char output[CHAT_SIZE_MAX];
+		pc_update_last_action(sd); // Start count from here...
+		sd->bg_kills = 0;
+		sd->state.bg_afk = 0;
+		bgteam->count++;
+		member.color = sd->status.clothes_color;	// We save clothes color [Grenat]
+#endif
 		sd->bg_id = bg_id;
 		member.sd = sd;
 		member.x = sd->bl.x;
@@ -505,7 +665,49 @@ bool bg_team_join(int bg_id, struct map_session_data *sd, bool is_queue)
 
 		guild_send_dot_remove(sd);
 
+#ifdef BGEXTENDED
+		if (!bgteam->creation_tick) bgteam->creation_tick = last_tick; // Creation Tick = First member joined.
+
+		if( !bgteam->leader_char_id ) { // First Join = Team Leader
+			bgteam->leader_char_id = sd->status.char_id;
+			clif_bg_message(bgteam.get(), 0, "Server", "You are the Team leader", strlen(output) + 1);
+		}
+
+		switch (bgteam->team_id) {
+		case 0: clan_member_join( sd, 1, sd->status.account_id, sd->status.char_id );
+			status_change_start(&sd->bl, &sd->bl, SC_SWORDCLAN, 10000, 0, 1, 0, 0, INFINITE_TICK, SCSTART_NOAVOID);
+			break;
+		case 1: clan_member_join( sd, 2, sd->status.account_id, sd->status.char_id );
+			status_change_start(&sd->bl, &sd->bl, SC_ARCWANDCLAN, 10000, 0, 2, 0, 0, INFINITE_TICK, SCSTART_NOAVOID);
+			break;
+		case 2: clan_member_join( sd, 3, sd->status.account_id, sd->status.char_id );
+			status_change_start(&sd->bl, &sd->bl, SC_GOLDENMACECLAN, 10000, 0, 3, 0, 0, INFINITE_TICK, SCSTART_NOAVOID);
+			break;
+		}
+		if(bgteam->color_id)
+			pc_changelook(sd, LOOK_CLOTHES_COLOR, bgteam->color_id);
+
+		if( battle_config.bg_eAmod_mode ){
+//			clif_bg_belonginfo(sd);
+			clif_name_area(&sd->bl);
+			skill_blockpc_clear(sd);
+		}
+
+		switch (bgteam->team_id) {
+			case 0: sc_start2(&sd->bl, &sd->bl, SC_SWORDCLAN, 0, 1, 0, INFINITE_TICK); break;
+			case 1: sc_start2(&sd->bl, &sd->bl, SC_ARCWANDCLAN, 0, 2, 0, INFINITE_TICK); break;
+			case 2: sc_start2(&sd->bl, &sd->bl, SC_GOLDENMACECLAN, 0, 3, 0, INFINITE_TICK); break;
+		}
+#endif
+
 		for (const auto &pl_sd : bgteam->members) {
+#ifdef BGEXTENDED
+			if (battle_config.bg_eAmod_mode) { // Simulate Guild Information
+				clif_guild_basicinfo(pl_sd.sd);
+//				clif_bg_emblem(pl_sd.sd, bgteam->g);
+				clif_bg_memberlist(pl_sd.sd);	//This one doesn't allow for a 3rd person to join, AND no emblem
+			}
+#endif
 			if (pl_sd.sd != sd)
 				clif_hpmeter_single(sd->fd, pl_sd.sd->bl.id, pl_sd.sd->battle_status.hp, pl_sd.sd->battle_status.max_hp);
 		}
@@ -525,8 +727,11 @@ bool bg_team_join(int bg_id, struct map_session_data *sd, bool is_queue)
  * @param deserter: Whether to apply the deserter status or not
  * @return Remaining count in Battleground team or -1 on failure
  */
-int bg_team_leave(struct map_session_data *sd, bool quit, bool deserter)
-{
+#ifdef BGEXTENDED
+int bg_team_leave(struct map_session_data *sd, int quit, bool deserter) {
+#else
+int bg_team_leave(struct map_session_data *sd, bool quit, bool deserter) {
+#endif
 	if (!sd || !sd->bg_id)
 		return -1;
 
@@ -536,6 +741,42 @@ int bg_team_leave(struct map_session_data *sd, bool quit, bool deserter)
 	std::shared_ptr<s_battleground_data> bgteam = util::umap_find(bg_team_db, bg_id);
 
 	sd->bg_id = 0;
+#ifdef BGEXTENDED
+	if (bgteam->leader_char_id == sd->status.char_id) // Set new Leader first on the list
+		bgteam->leader_char_id = 0;
+	clan_member_leave( sd, sd->status.clan_id, sd->status.account_id, sd->status.char_id );
+	status_change_end(&sd->bl, SC_SWORDCLAN, INVALID_TIMER);
+	status_change_end(&sd->bl, SC_ARCWANDCLAN, INVALID_TIMER);
+	sd->bg_kills = 0;
+	sd->state.bg_afk = 0;
+	bg_member_removeskulls(sd);
+	status_change_end(&sd->bl, SC_GUILDAURA, INVALID_TIMER);
+	status_change_end(&sd->bl, SC_BATTLEORDERS, INVALID_TIMER);
+	status_change_end(&sd->bl, SC_REGENERATION, INVALID_TIMER);
+	struct guild *g;
+	if (battle_config.bg_eAmod_mode)
+	{ // Refresh Guild Information
+		if (sd->status.guild_id && (g = guild_search(sd->status.guild_id)) != NULL)
+		{
+			clif_guild_belonginfo(sd);
+			clif_guild_basicinfo(sd);
+			clif_guild_allianceinfo(sd);
+			clif_guild_memberlist(sd);
+			clif_guild_skillinfo(sd);
+			clif_guild_emblem(sd, g);
+		} else {
+			guild_send_dot_remove(sd);
+			channel_pcquit(sd,3); //leave guild and ally chan
+			sd->status.guild_id = 0;
+			sd->guild = NULL;
+			sd->guild_emblem_id = 0;
+		}
+		clif_name_area(&sd->bl);
+		clif_guild_emblem_area(&sd->bl);
+		//clif_refresh(sd);
+		unit_refresh( &sd->bl, true );
+	}
+#endif
 
 	if (bgteam) {
 		// Warping members out only applies to the Battleground Queue System
@@ -544,6 +785,9 @@ int bg_team_leave(struct map_session_data *sd, bool quit, bool deserter)
 
 			while (member != bgteam->members.end()) {
 				if (member->sd == sd) {
+#ifdef BGEXTENDED
+					pc_changelook(sd, LOOK_CLOTHES_COLOR, member->color); // Put back clothes color [Grenat]
+#endif
 					if (member->entry_point.map != 0 && !map_getmapflag(map_mapindex2mapid(member->entry_point.map), MF_NOSAVE))
 						pc_setpos(sd, member->entry_point.map, member->entry_point.x, member->entry_point.y, CLR_TELEPORT);
 					else
@@ -551,17 +795,36 @@ int bg_team_leave(struct map_session_data *sd, bool quit, bool deserter)
 
 					bgteam->members.erase(member);
 					break;
-				} else
+				} else {
+#ifdef BGEXTENDED
+					if (!bgteam->leader_char_id) {// Set new Leader first on the list
+						bgteam->leader_char_id = member->sd->status.char_id;
+						clif_name_area(&sd->bl);
+						char output[CHAT_SIZE_MAX];
+						clif_bg_message(bgteam.get(), 0, "Server", "You are the new Team leader", strlen(output) + 1);
+					}
+#endif
 					member++;
+				}
 			}
 		}
 
 		char output[CHAT_SIZE_MAX];
 
+#ifdef BGEXTENDED
+		switch (quit) {
+			case 3: sprintf(output, "Server: %s Kicked by AFK Status...", sd->status.name); break;
+			case 2: sprintf(output, "Server: %s Kicked by AFK Report...", sd->status.name); break;
+			case 1: sprintf(output, "Server: %s has quit the game...", sd->status.name); break;
+			case 0: sprintf(output, "Server: %s is leaving the battlefield...", sd->status.name); break;
+		}
+		bgteam->count--;
+#else
 		if (quit)
 			sprintf(output, "Server: %s has quit the game...", sd->status.name);
 		else
 			sprintf(output, "Server: %s is leaving the battlefield...", sd->status.name);
+#endif
 
 		clif_bg_message(bgteam.get(), 0, "Server", output, strlen(output) + 1);
 
@@ -633,7 +896,18 @@ int bg_create(uint16 mapindex, s_battleground_team* team)
 	bg->logout_event = team->quit_event.c_str();
 	bg->die_event = team->death_event.c_str();
 	bg->active_event = team->active_event.c_str();
-
+#ifdef BGEXTENDED
+	int i = 0;
+	bg->team_id = team->team_id;
+	bg->color_id = team->color_id;
+	bg->creation_tick = 0;
+	bg->g = &bg_guild[team->team_id];
+	bg->color = bg_colors[team->team_id];
+	while (i < MAX_GUILDSKILL) {
+		bg->skill_block_timer[i] = INVALID_TIMER;
+		i++;
+	}
+#endif
 	return bg->id;
 }
 
@@ -670,6 +944,15 @@ int bg_team_get_id(struct block_list *bl)
 			if( ((TBL_MER*)bl)->master )
 				return ((TBL_MER*)bl)->master->bg_id;
 			break;
+#ifdef BGEXTENDED
+		case BL_ELEM:
+			if( ((TBL_ELEM*)bl)->master )
+				return ((TBL_ELEM*)bl)->master->bg_id;
+			break;
+		case BL_NPC:
+			return ((TBL_NPC*)bl)->u.scr.bg_id;
+			break;
+#endif
 		case BL_SKILL:
 			return ((TBL_SKILL*)bl)->group->bg_id;
 	}
@@ -705,20 +988,249 @@ void bg_send_message(struct map_session_data *sd, const char *mes, int len)
 int bg_send_xy_timer_sub(std::shared_ptr<s_battleground_data> bg)
 {
 	struct map_session_data *sd;
-
+#ifdef BGEXTENDED
+	char output[128];
+	int m, idle_announce = battle_config.bg_idle_announce,
+	idle_autokick = battle_config.bg_idle_autokick;
+	m = map_mapindex2mapid(bg->cemetery.map);
+	bg->reveal_flag = !bg->reveal_flag; // Switch
+#endif
 	for (auto &pl_sd : bg->members) {
 		sd = pl_sd.sd;
 
+#ifdef BGEXTENDED
+		if (idle_autokick && DIFF_TICK(last_tick, sd->idletime) >= idle_autokick && bg->g && map_getmapflag(sd->bl.m, MF_BATTLEGROUND))
+		{
+			sprintf(output, "[Battleground] : %s has been kicked for being AFK.", sd->status.name);
+			clif_broadcast2(&sd->bl, output, (int)strlen(output) + 1, bg->color, 0x190, 20, 0, 0, ALL_SAMEMAP);
+
+			bg_team_leave(sd, 3, true);
+			run_script(npc_name2id("OnPCLeaveBG")->u.scr.script,0,sd->bl.id,npc_name2id("OnPCLeaveBG")->bl.id);
+			clif_displaymessage(sd->fd, "You have been kicked from Battleground because of your AFK status.");
+			pc_setpos(sd, sd->status.save_point.map, sd->status.save_point.x, sd->status.save_point.y, CLR_TELEPORT);
+			continue;
+		}
+		else if (sd->bl.x != pl_sd.x || sd->bl.y != pl_sd.y) { // xy update
+			pl_sd.x = sd->bl.x;
+			pl_sd.y = sd->bl.y;
+			clif_bg_xy(sd);
+		}
+
+		if (bg->reveal_pos && bg->reveal_flag && sd->bl.m == m)
+			map_foreachinmap(bg_reveal_pos, m, BL_PC, sd, 1, bg->color);
+
+		// Message for AFK Idling
+		if (idle_announce && DIFF_TICK(last_tick, sd->idletime) == idle_announce && bg->g && map_getmapflag(sd->bl.m, MF_BATTLEGROUND))
+		{ // Set AFK status and announce to the team.
+			sd->state.bg_afk = 1;
+			sprintf(output, "[%s] %s seems to be away. AFK warning. Use @reportafk to kick this individual.", bg->g->name, sd->status.name);
+			clif_bg_message(bg.get(), sd->bg_id, bg->g->name, output, strlen(output) + 1);
+		}
+#else
 		if (sd->bl.x != pl_sd.x || sd->bl.y != pl_sd.y) { // xy update
 			pl_sd.x = sd->bl.x;
 			pl_sd.y = sd->bl.y;
 			clif_bg_xy(sd);
 		}
+#endif
 	}
 
 	return 0;
 }
 
+#ifdef BGEXTENDED
+void bg_guild_build_data(void)
+{
+	int i, j, k, skill;
+	memset(&bg_guild, 0, sizeof(bg_guild));
+	for( i = 1; i <= 13; i++ )
+	{ // Emblem Data - Guild ID's
+		FILE* fp = NULL;
+		char path[256];
+
+		j = i - 1;
+		bg_guild[j].emblem_id = 1; // Emblem Index
+		bg_guild[j].guild_id = SHRT_MAX - j;
+		bg_guild[j].guild_lv = 1;
+		bg_guild[j].max_member = MAX_BG_MEMBERS;
+
+		// Skills
+		if( j < 3 )
+		{ // Clan Skills
+			for( k = 0; k < MAX_GUILDSKILL-1; k++ )
+			{
+				skill = k + GD_SKILLBASE;
+				bg_guild[j].skill[k].id = skill;
+				switch( skill )
+				{
+				case GD_GLORYGUILD:
+					bg_guild[j].skill[k].lv = 0;
+					break;
+				case GD_APPROVAL:
+				case GD_KAFRACONTRACT:
+				case GD_GUARDRESEARCH:
+				case GD_BATTLEORDER:
+				case GD_RESTORE:
+				case GD_EMERGENCYCALL:
+				case GD_DEVELOPMENT:
+					bg_guild[j].skill[k].lv = 1;
+					break;
+				case GD_GUARDUP:
+				case GD_REGENERATION:
+					bg_guild[j].skill[k].lv = 3;
+					break;
+				case GD_LEADERSHIP:
+				case GD_GLORYWOUNDS:
+				case GD_SOULCOLD:
+				case GD_HAWKEYES:
+					bg_guild[j].skill[k].lv = 5;
+					break;
+				case GD_EXTENSION:
+					bg_guild[j].skill[k].lv = 10;
+					break;
+				}
+			}
+		}
+		else
+		{ // Other Data
+			snprintf(bg_guild[j].name, NAME_LENGTH, "Team %d", i - 3); // Team 1, Team 2 ... Team 10
+			safestrncpy(bg_guild[j].master, bg_guild[j].name, NAME_LENGTH);
+			snprintf(bg_guild[j].position[0].name, NAME_LENGTH, "%s Leader", bg_guild[j].name);
+			safestrncpy(bg_guild[j].position[1].name, bg_guild[j].name, NAME_LENGTH);
+		}
+
+		sprintf(path, "%s/emblems/bg_%d.ebm", db_path, i);
+		if( (fp = fopen(path, "rb")) != NULL )
+		{
+			fseek(fp, 0, SEEK_END);
+			bg_guild[j].emblem_len = ftell(fp);
+			fseek(fp, 0, SEEK_SET);
+			if (fread(&bg_guild[j].emblem_data, 1, bg_guild[j].emblem_len, fp) == bg_guild[j].emblem_len) {
+				fclose(fp);
+				ShowStatus("Done reading '%s' emblem data file.\n", path);
+			} else
+				ShowStatus("Failed to read '%s'.\n", path); // Never happen
+		}
+	}
+
+	// Guild Data - Guillaume
+	safestrncpy(bg_guild[0].name, "Blue Team", NAME_LENGTH);
+	safestrncpy(bg_guild[0].master, "General Guillaume", NAME_LENGTH);
+	safestrncpy(bg_guild[0].position[0].name, "Blue Team Leader", NAME_LENGTH);
+	safestrncpy(bg_guild[0].position[1].name, "Blue Team", NAME_LENGTH);
+
+	// Guild Data - Croix
+	safestrncpy(bg_guild[1].name, "Red Team", NAME_LENGTH);
+	safestrncpy(bg_guild[1].master, "Prince Croix", NAME_LENGTH);
+	safestrncpy(bg_guild[1].position[0].name, "Red Team Leader", NAME_LENGTH);
+	safestrncpy(bg_guild[1].position[1].name, "Red Team", NAME_LENGTH);
+
+	// Guild Data - Traitors
+	safestrncpy(bg_guild[2].name, "Green Team", NAME_LENGTH);
+	safestrncpy(bg_guild[2].master, "Mercenary", NAME_LENGTH);
+	safestrncpy(bg_guild[2].position[0].name, "Green Team Leader", NAME_LENGTH);
+	safestrncpy(bg_guild[2].position[1].name, "Green Team", NAME_LENGTH);
+}
+
+void bg_team_getitem(int bg_id, int nameid, int amount)
+{
+	std::shared_ptr<s_battleground_data> bg;
+	struct map_session_data *sd;
+	struct item_data *id;
+	struct item it;
+	int get_amount, j, flag;
+
+	std::shared_ptr<s_battleground_data> bgd = util::umap_find(bg_team_db, bg_id);
+	if (amount < 1 || bgd == NULL || (id = itemdb_exists(nameid)) == NULL)
+		return;
+	if( battle_config.bg_reward_rates != 100 )
+		amount = amount * battle_config.bg_reward_rates / 100;
+
+	memset(&it, 0, sizeof(it));
+	it.nameid = nameid;
+	it.identify = 1;
+
+	for (j = 0; j < MAX_BG_MEMBERS; j++)
+	{
+		if ((sd = bg->members[j].sd) == NULL)
+			continue;
+
+		get_amount = amount;
+
+		if ((flag = pc_additem(sd, &it, get_amount, LOG_TYPE_SCRIPT)))
+			clif_additem(sd, 0, 0, flag);
+	}
+}
+void bg_team_get_kafrapoints(int bg_id, int amount)
+{
+	struct map_session_data *sd;
+	int i, get_amount;
+
+	std::shared_ptr<s_battleground_data> bgd = util::umap_find(bg_team_db, bg_id);
+	if (bgd == NULL)
+		return;
+	if( battle_config.bg_reward_rates != 100 )
+		amount = amount * battle_config.bg_reward_rates / 100;
+
+	for (i = 0; i < MAX_BG_MEMBERS; i++)
+	{
+		if ((sd = bgd->members[i].sd) == NULL)
+			continue;
+
+		get_amount = amount;
+		pc_getcash(sd, 0, get_amount, LOG_TYPE_SCRIPT);
+	}
+}
+
+/* ==============================================================
+bg_arena (0 EoS | 1 Boss | 2 TI | 3 CTF | 4 TD | 5 SC | 6 CON)
+bg_result (0 Won | 1 Tie | 2 Lost)
+============================================================== */
+void bg_team_rewards(int bg_id, int nameid, int amount, int kafrapoints, int quest_id, const char *var, int add_value, int bg_arena, int bg_result)
+{
+	struct map_session_data *sd;
+	struct item_data *id;
+	struct item it;
+	int j, flag, get_amount;
+
+	std::shared_ptr<s_battleground_data> bgd = util::umap_find(bg_team_db, bg_id);
+	if (amount < 1 || bgd == NULL || (id = itemdb_exists(nameid)) == NULL)
+		return;
+
+	if( battle_config.bg_reward_rates != 100 )
+	{ // BG Reward Rates
+		amount = amount * battle_config.bg_reward_rates / 100;
+		kafrapoints = kafrapoints * battle_config.bg_reward_rates / 100;
+	}
+
+	bg_result = cap_value(bg_result, 0, 2);
+	memset(&it, 0, sizeof(it));
+	it.nameid = nameid;
+	it.identify = 1;
+
+	for (j = 0; j < MAX_BG_MEMBERS; j++)
+	{
+		if ((sd = bgd->members[j].sd) == NULL)
+			continue;
+
+		pc_setglobalreg(sd, add_str(var), pc_readglobalreg(sd, add_str(var)) + add_value);
+
+		if (kafrapoints > 0)
+		{
+			get_amount = kafrapoints;
+			pc_getcash(sd, 0, get_amount, LOG_TYPE_SCRIPT);
+		}
+
+		if (nameid && amount > 0)
+		{
+			if ((flag = pc_additem(sd, &it, amount, LOG_TYPE_SCRIPT)))
+				clif_additem(sd, 0, 0, flag);
+		}
+	}
+}
+
+#endif
+
 /**
  * Update a player's Battleground minimap icon
  * @param tid: Timer ID
@@ -1570,6 +2082,10 @@ void do_init_battleground(void)
 	add_timer_func_list(bg_on_ready_expire, "bg_on_ready_expire");
 	add_timer_func_list(bg_on_ready_start, "bg_on_ready_start");
 	add_timer_interval(gettick() + battle_config.bg_update_interval, bg_send_xy_timer, 0, 0, battle_config.bg_update_interval);
+#ifdef BGEXTENDED
+	add_timer_func_list(bg_block_skill_end,"bg_block_skill_end");
+	bg_guild_build_data();
+#endif
 }
 
 /**
diff --git a/src/map/battleground.hpp b/src/map/battleground.hpp
index a2df3e6f5..61bfed8fe 100644
--- a/src/map/battleground.hpp
+++ b/src/map/battleground.hpp
@@ -19,6 +19,9 @@ struct s_battleground_member_data {
 	struct map_session_data *sd;
 	unsigned afk : 1;
 	struct point entry_point; ///< Battleground queue entry point
+#ifdef BGEXTENDED
+	int color;	// Clothes Color [Grenat]
+#endif
 };
 
 struct s_battleground_data {
@@ -28,6 +31,21 @@ struct s_battleground_data {
 	std::string logout_event; ///< NPC Event to call on log out events
 	std::string die_event; ///< NPC Event to call on death events
 	std::string active_event; ///< NPC Event to call on players joining an active battleground
+#ifdef BGEXTENDED
+	int count;
+	int team_id;
+	int color_id;
+	time_t creation_tick; // Creation of this Team
+	// Team Leader and BG Skills features
+	int leader_char_id;
+	int skill_block_timer[MAX_GUILDSKILL];
+	unsigned int color;
+	bool reveal_pos, reveal_flag;
+	// Fake Guild Link
+	struct guild *g;
+	// Score Board
+	int team_score;
+#endif
 };
 
 struct s_battleground_team {
@@ -36,6 +54,11 @@ struct s_battleground_team {
 		death_event, ///< Team NPC Event to call on death events
 		active_event, ///< Team NPC Event to call on players joining an active battleground
 		bg_id_var; ///< Team NPC variable name
+#ifdef BGEXTENDED
+	int16 guild_index;
+	int16 team_id;
+	int16 color_id;
+#endif
 };
 
 struct s_battleground_map {
@@ -125,10 +148,33 @@ public:
 extern BattlegroundDatabase battleground_db;
 extern std::unordered_map<int, std::shared_ptr<s_battleground_data>> bg_team_db;
 extern std::vector<std::shared_ptr<s_battleground_queue>> bg_queues;
+#ifdef BGEXTENDED
+extern struct guild bg_guild[];
+extern const unsigned int bg_colors[];
+struct guild* bg_guild_get(int bg_id);
+int battleground_countlogin(struct map_session_data *sd, bool check_bat_room);
+void bg_team_getitem(int bg_id, int nameid, int amount);
+void bg_team_get_kafrapoints(int bg_id, int amount);
+void bg_team_rewards(int bg_id, int nameid, int amount, int kafrapoints, int quest_id, const char *var, int add_value, int bg_arena, int bg_result);
+int bg_countlogin(struct map_session_data *sd, bool check_bat_room);
+void bg_team_getitem(int bg_id, int nameid, int amount);
+void bg_team_get_kafrapoints(int bg_id, int amount);
+void bg_team_rewards(int bg_id, int nameid, int amount, int kafrapoints, int quest_id, const char *var, int add_value, int bg_arena, int bg_result);
+int bg_checkskill (struct map_session_data *sd, int id);
+int bg_block_skill_status (struct map_session_data *sd, int skillnum);
+void bg_block_skill_start (struct map_session_data *sd, int skillnum, t_tick time);
+//int bg_block_skill_end (int tid, unsigned int tick, int id, intptr_t data);
+void bg_reload(void);
+void bg_guild_build_data(void);
+#endif
 
 std::shared_ptr<s_battleground_type> bg_search_name(const char *name);
 std::shared_ptr<s_battleground_queue> bg_search_queue(int queue_id);
+#ifdef BGEXTENDED
+int bg_send_dot_remove(struct map_session_data *sd);
+#else
 void bg_send_dot_remove(struct map_session_data *sd);
+#endif
 int bg_team_get_id(struct block_list *bl);
 struct map_session_data *bg_getavailablesd(s_battleground_data *bg);
 
@@ -139,7 +185,11 @@ bool bg_queue_reservation(const char *name, bool state, bool ended);
 int bg_create(uint16 mapindex, s_battleground_team* team);
 bool bg_team_join(int bg_id, struct map_session_data *sd, bool is_queue);
 bool bg_team_delete(int bg_id);
+#ifdef BGEXTENDED
+int bg_team_leave(struct map_session_data *sd, int quit, bool deserter);
+#else
 int bg_team_leave(struct map_session_data *sd, bool quit, bool deserter);
+#endif
 bool bg_team_warp(int bg_id, unsigned short mapindex, short x, short y);
 bool bg_player_is_in_bg_map(struct map_session_data *sd);
 bool bg_queue_check_joinable(std::shared_ptr<s_battleground_type> bg, struct map_session_data *sd, const char *name);
diff --git a/src/map/buyingstore.cpp b/src/map/buyingstore.cpp
index 0e5da9747..2db6d7d60 100644
--- a/src/map/buyingstore.cpp
+++ b/src/map/buyingstore.cpp
@@ -12,6 +12,9 @@
 #include "../common/socket.hpp"  // RBUF*
 #include "../common/strlib.hpp"  // safestrncpy
 #include "../common/timer.hpp"  // gettick
+#ifdef BGEXTENDED
+#include "../common/utils.hpp"
+#endif
 
 #include "atcommand.hpp"  // msg_txt
 #include "battle.hpp"  // battle_config.*
@@ -396,6 +399,14 @@ void buyingstore_trade( struct map_session_data* sd, uint32 account_id, unsigned
 			clif_buyingstore_trade_failed_seller( sd, BUYINGSTORE_TRADE_SELLER_FAILED, item->itemId );
 			return;
 		}
+#ifdef BGEXTENDED
+		if (sd->inventory.u.items_inventory[index].card[0] == CARD0_CREATE && ((MakeDWord(sd->inventory.u.items_inventory[index].card[2], sd->inventory.u.items_inventory[index].card[3])) == (battle_config.bg_reserved_char_id || battle_config.woe_reserved_char_id) && !battle_config.bg_can_trade ))
+		{ // Items where creator's ID is important
+			clif_buyingstore_trade_failed_seller(sd, BUYINGSTORE_TRADE_SELLER_FAILED, item->itemId);
+			clif_displaymessage(sd->fd, "Cannot Trade event reserved Items (Battleground, WoE).");
+			return;
+		}
+#endif
 
 		int listidx;
 
diff --git a/src/map/clif.cpp b/src/map/clif.cpp
index fe407f279..3ad20f629 100644
--- a/src/map/clif.cpp
+++ b/src/map/clif.cpp
@@ -367,6 +367,10 @@ static inline unsigned char clif_bl_type(struct block_list *bl, bool walking) {
 					return 0xd; //NPC_ABR_TYPE
 				case AI_BIONIC:
 					return 0xe; //NPC_BIONIC_TYPE
+#ifdef BGEXTENDED
+				case AI_BOMB:
+					return 0x7;
+#endif
 				default:
 					return 0x5; //NPC_MOB_TYPE
 			}
@@ -484,7 +488,11 @@ int clif_send(const void* buf, int len, struct block_list* bl, enum send_target
 	int x0 = 0, x1 = 0, y0 = 0, y1 = 0, fd;
 	struct s_mapiterator* iter;
 
+#ifdef BGEXTENDED
+	if( type != ALL_CLIENT && type != BG_LISTEN)
+#else
 	if( type != ALL_CLIENT )
+#endif
 		nullpo_ret(bl);
 
 	sd = BL_CAST(BL_PC, bl);
@@ -492,8 +500,15 @@ int clif_send(const void* buf, int len, struct block_list* bl, enum send_target
 	switch(type) {
 
 	case ALL_CLIENT: //All player clients.
+#ifdef BGEXTENDED
+	case BG_LISTEN:
+#endif
 		iter = mapit_getallusers();
 		while( ( tsd = (map_session_data*)mapit_next( iter ) ) != nullptr ){
+#ifdef BGEXTENDED
+		if (type == BG_LISTEN && (tsd->state.bg_listen && !tsd->bg_queue_id))
+			continue;
+#endif
 			if( session_isActive( fd = tsd->fd ) ){
 				WFIFOHEAD( fd, len );
 				memcpy( WFIFOP( fd, 0 ), buf, len );
@@ -1078,7 +1093,11 @@ static void clif_set_unit_idle( struct block_list* bl, bool walking, send_target
 	struct map_session_data* sd = BL_CAST( BL_PC, bl );
 	struct status_change* sc = status_get_sc( bl );
 	struct view_data* vd = status_get_viewdata( bl );
+#ifdef BGEXTENDED
+	int g_id = clif_visual_guild_id(bl);
+#else
 	int g_id = status_get_guild_id( bl );
+#endif
 
 #if PACKETVER < 20091103
 	if( !pcdb_checkid( vd->class_ ) ){
@@ -1243,7 +1262,11 @@ static void clif_spawn_unit( struct block_list *bl, enum send_target target ){
 	struct map_session_data* sd = BL_CAST( BL_PC, bl );
 	struct status_change* sc = status_get_sc( bl );
 	struct view_data* vd = status_get_viewdata( bl );
+#ifdef BGEXTENDED
+	int g_id = clif_visual_guild_id(bl);
+#else
 	int g_id = status_get_guild_id( bl );
+#endif
 
 #if PACKETVER < 20091103
 	if( !pcdb_checkid( vd->class_ ) ){
@@ -1395,7 +1418,11 @@ static void clif_set_unit_walking( struct block_list *bl, struct map_session_dat
 	struct status_change* sc = status_get_sc( bl );
 	struct view_data* vd = status_get_viewdata( bl );
 	struct packet_unit_walking p;
-	int g_id = status_get_guild_id(bl);
+#ifdef BGEXTENDED
+	int g_id = clif_visual_guild_id(bl);
+#else
+	int g_id = status_get_guild_id( bl );
+#endif
 
 	sd = BL_CAST(BL_PC, bl);
 
@@ -2226,7 +2253,15 @@ void clif_selllist(struct map_session_data *sd)
 		{
 			if( !pc_can_sell_item(sd, &sd->inventory.u.items_inventory[i], nd->subtype))
 				continue;
-
+#ifdef BGEXTENDED
+			if (sd->inventory.u.items_inventory[i].card[0] == CARD0_CREATE)
+			{ // Do not allow sell BG/WoE Consumables
+				if (battle_config.bg_reserved_char_id && MakeDWord(sd->inventory.u.items_inventory[i].card[2], sd->inventory.u.items_inventory[i].card[3]) == battle_config.bg_reserved_char_id)
+					continue;
+				if (battle_config.woe_reserved_char_id && MakeDWord(sd->inventory.u.items_inventory[i].card[2], sd->inventory.u.items_inventory[i].card[3]) == battle_config.woe_reserved_char_id)
+					continue;
+			}
+#endif
 			if (battle_config.rental_item_novalue && sd->inventory.u.items_inventory[i].expire_time)
 				val = 0;
 			else {
@@ -2518,7 +2553,28 @@ void clif_sendfakenpc(struct map_session_data *sd, int npcid) {
 	WBUFB(buf,50)=5;
 	WFIFOSET(fd, packet_len(0x78));
 }
+#ifdef BGEXTENDED
+void clif_sendfakenpc2(struct map_session_data *sd,struct map_session_data *fk) {
+	unsigned char *buf;
+	int fd = sd->fd;
+	sd->state.using_fake_npc = 1;
 
+	WFIFOHEAD(fd, packet_len(0x78));
+	buf = WFIFOP(fd,0);
+	memset(WBUFP(buf,0), 0, packet_len(0x78));
+	WBUFW(buf,0)=0x78;
+#if PACKETVER >= 20071106
+	WBUFB(buf,2) = 0; // object type
+	buf = WFIFOP(fd,1);
+#endif
+	WBUFL(buf,2)=fk->bl.id;
+	WBUFW(buf,14)=111;
+	WBUFPOS(buf,46,fk->bl.x,fk->bl.y,fk->ud.dir);
+	WBUFB(buf,49)=5;
+	WBUFB(buf,50)=5;
+	WFIFOSET(fd, packet_len(0x78));
+}
+#endif
 
 /// Displays an NPC dialog menu (ZC_MENU_LIST).
 /// 00b7 <packet len>.W <npc id>.L <menu items>.?B
@@ -8727,7 +8783,10 @@ void clif_guild_belonginfo(struct map_session_data *sd)
 
 	nullpo_retv(sd);
 	nullpo_retv(g = sd->guild);
-
+#ifdef BGEXTENDED
+	if( battle_config.bg_eAmod_mode && sd->bg_id && map_getmapflag(sd->bl.m, MF_BATTLEGROUND) )
+		return;
+#endif
 	fd=sd->fd;
 	ps=guild_getposition(sd);
 	WFIFOHEAD(fd,packet_len(0x16c));
@@ -8857,14 +8916,30 @@ void clif_guild_basicinfo(struct map_session_data *sd) {
 	nullpo_retv(sd);
 	fd = sd->fd;
 
+#ifdef BGEXTENDED
+	std::shared_ptr<s_battleground_data> bgd = util::umap_find(bg_team_db, sd->bg_id);
+
+	if (battle_config.bg_eAmod_mode && sd->bg_id && map_getmapflag(sd->bl.m, MF_BATTLEGROUND))
+		g = bgd->g;
+	else
+		g = sd->guild;
+
+	if (g == NULL)
+		return;
+#else
 	if( (g = sd->guild) == NULL )
 		return;
+#endif
 
 	WFIFOHEAD(fd,packet_len(cmd));
 	WFIFOW(fd, 0)=cmd;
 	WFIFOL(fd, 2)=g->guild_id;
 	WFIFOL(fd, 6)=g->guild_lv;
+#ifdef BGEXTENDED
+	WFIFOL(fd,10)= (bgd)?bgd->count:g->connect_member;
+#else
 	WFIFOL(fd,10)=g->connect_member;
+#endif
 	WFIFOL(fd,14)=g->max_member;
 	WFIFOL(fd,18)=g->average_lv;
 	WFIFOL(fd,22)=(uint32)cap_value(g->exp, 0, MAX_GUILD_EXP);
@@ -8885,7 +8960,40 @@ void clif_guild_basicinfo(struct map_session_data *sd) {
 
 	WFIFOSET(fd,packet_len(cmd));
 }
+#ifdef BGEXTENDED
+void clif_bg_memberlist(struct map_session_data *sd)
+{
+	int fd, c = 0;
+	nullpo_retv(sd);
+
+	if( (fd = sd->fd) == 0 )
+		return;
+	std::shared_ptr<s_battleground_data> bgd = util::umap_find(bg_team_db, sd->bg_id);
+	if( !(battle_config.bg_eAmod_mode && sd->bg_id && bgd != NULL) )
+		return;
 
+	WFIFOHEAD(fd,bgd->count * 34 + 4);
+	WFIFOW(fd,0) = 0xaa5;
+	for (const auto &pl_sd : bgd->members) {
+		if( ( sd = pl_sd.sd ) == nullptr )
+			continue;
+		WFIFOL(fd, c * 34 + 4) = pl_sd.sd->status.account_id;
+		WFIFOL(fd, c * 34 + 8) = pl_sd.sd->status.char_id;
+		WFIFOW(fd, c * 34 + 12) = pl_sd.sd->status.hair;
+		WFIFOW(fd, c * 34 + 14) = pl_sd.sd->status.hair_color;
+		WFIFOW(fd, c * 34 + 16) = pl_sd.sd->status.sex;
+		WFIFOW(fd, c * 34 + 18) = pl_sd.sd->status.class_;
+		WFIFOW(fd, c * 34 + 20) = pl_sd.sd->status.base_level;
+		WFIFOL(fd, c * 34 + 22) = pl_sd.sd->bg_kills; // Exp slot used to show kills
+		WFIFOL(fd, c * 34 + 26) = 1; // Online
+		WFIFOL(fd, c * 34 + 30) = (pl_sd.sd->status.char_id == bgd->leader_char_id) ? 0 : 1; // Position
+		WFIFOL(fd,c*34+34)=(uint32)time(NULL);
+		c++;
+	}
+	WFIFOW(fd, 2)=c * 34 + 4;
+	WFIFOSET(fd,WFIFOW(fd,2));
+}
+#endif
 
 /// Guild alliance and opposition list (ZC_MYGUILD_BASIC_INFO).
 /// 014c <packet len>.W { <relation>.L <guild id>.L <guild name>.24B }*
@@ -8895,8 +9003,16 @@ void clif_guild_allianceinfo(struct map_session_data *sd)
 	struct guild *g;
 
 	nullpo_retv(sd);
+#ifdef BGEXTENDED
+	if( !(battle_config.bg_eAmod_mode && sd->bg_id && (g = bg_guild_get(sd->bg_id)) != NULL) )
+		g = sd->guild;
+
+	if( g == NULL )
+		return;
+#else
 	if( (g = sd->guild) == NULL )
 		return;
+#endif
 
 	fd = sd->fd;
 	WFIFOHEAD(fd, MAX_GUILDALLIANCE * 32 + 4);
@@ -8940,6 +9056,13 @@ void clif_guild_memberlist(struct map_session_data *sd)
 
 	if( !session_isActive(fd = sd->fd) )
 		return;
+#ifdef BGEXTENDED
+	if( battle_config.bg_eAmod_mode && sd->bg_id && map_getmapflag(sd->bl.m, MF_BATTLEGROUND) )
+	{
+		clif_bg_memberlist(sd);
+		return;
+	}
+#endif
 	if( (g = sd->guild) == NULL )
 		return;
 
@@ -9088,7 +9211,10 @@ void clif_guild_emblem(struct map_session_data *sd,struct guild *g)
 	int fd;
 	nullpo_retv(sd);
 	nullpo_retv(g);
-
+#ifdef BGEXTENDED
+	if(battle_config.bg_eAmod_mode && sd->bg_id && map_getmapflag(sd->bl.m, MF_BATTLEGROUND) )
+		return;
+#endif
 	fd = sd->fd;
 	if( g->emblem_len <= 0 )
 		return;
@@ -9108,13 +9234,23 @@ void clif_guild_emblem(struct map_session_data *sd,struct guild *g)
 /// 0b47 <guild id>.L <version>.L <unknown>.L
 void clif_guild_emblem_area(struct block_list* bl)
 {
+#ifdef BGEXTENDED
+	TBL_PC*sd = map_id2sd(bl->id);
+	if(sd && battle_config.bg_eAmod_mode && sd->bg_id && map_getmapflag(sd->bl.m, MF_BATTLEGROUND) )
+		return;
+#endif
 	// TODO this packet doesn't force the update of ui components that have the emblem visible
 	//      (emblem in the flag npcs and emblem over the head in agit maps) [FlavioJS]
 	PACKET_ZC_CHANGE_GUILD p{};
 
 	p.packetType = HEADER_ZC_CHANGE_GUILD;
+#ifdef BGEXTENDED
+	p.guild_id = clif_visual_guild_id(bl);
+	p.emblem_id = clif_visual_emblem_id(bl);
+#else
 	p.guild_id = status_get_guild_id(bl);
 	p.emblem_id = status_get_emblem_id(bl);
+#endif
 
 #if PACKETVER < 20190724
 	p.aid = bl->id;
@@ -9135,15 +9271,42 @@ void clif_guild_skillinfo(struct map_session_data* sd)
 	int i,c;
 
 	nullpo_retv(sd);
+#ifdef BGEXTENDED
+	if( ((g = sd->guild) == NULL) && !(battle_config.bg_eAmod_mode && sd->bg_id && map_getmapflag(sd->bl.m, MF_BATTLEGROUND))  )
+		return;
+#else
 	if( (g = sd->guild) == NULL )
 		return;
+#endif
 
 	fd = sd->fd;
 	WFIFOHEAD(fd, 6 + MAX_GUILDSKILL*37);
 	WFIFOW(fd,0) = 0x0162;
+#ifdef BGEXTENDED
+	if(battle_config.bg_eAmod_mode && sd->bg_id && map_getmapflag(sd->bl.m, MF_BATTLEGROUND))
+		WFIFOW(fd,4) = 0;
+	else
+#endif
 	WFIFOW(fd,4) = g->skill_point;
 	for(i = 0, c = 0; i < MAX_GUILDSKILL; i++)
 	{
+#ifdef BGEXTENDED
+		if(battle_config.bg_eAmod_mode && sd->bg_id && map_getmapflag(sd->bl.m, MF_BATTLEGROUND))
+		{
+			int id = 10000+i;
+			if (id < 10010 || (id >= 10014 && id <= 10016) || id > 10019 )
+				continue;
+			int p = 6 + c*37;
+			WFIFOW(fd,p+0) = id;
+			WFIFOL(fd,p+2) = skill_get_inf(id);
+			WFIFOW(fd,p+6) = 1;
+			WFIFOW(fd,p+8) = 1;
+			WFIFOW(fd,p+10) = skill_get_range(id, 1);
+			safestrncpy(WFIFOCP(fd,p+12), skill_get_name(id), NAME_LENGTH);
+			WFIFOB(fd,p+36)= 0;
+			c++;
+		} else
+#endif
 		if(g->skill[i].id > 0 && guild_check_skill_require(g, g->skill[i].id))
 		{
 			int id = g->skill[i].id;
@@ -10051,6 +10214,28 @@ void clif_name( struct block_list* src, struct block_list *bl, send_target targe
 				safestrncpy( packet.party_name, p->party.name, NAME_LENGTH );
 			}
 
+#ifdef BGEXTENDED
+			if (battle_config.bg_eAmod_mode && sd->bg_id) {
+				std::shared_ptr<s_battleground_data> bgteam = util::umap_find(bg_team_db, sd->bg_id);
+				if (bgteam) {
+					int ps = (sd->status.char_id == bgteam->leader_char_id) ? 0 : 1;
+					//safestrncpy( packet.party_name, bgteam->g->name, NAME_LENGTH );
+					safestrncpy(packet.guild_name, bgteam->g->name, NAME_LENGTH);
+					safestrncpy(packet.position_name, bgteam->g->position[ps].name, NAME_LENGTH);
+				}
+			} else if( sd->guild ){
+				int position;
+
+				// Will get the position of the guild the player is in
+				position = guild_getposition( sd );
+
+				safestrncpy( packet.guild_name, sd->guild->name, NAME_LENGTH );
+				safestrncpy( packet.position_name, sd->guild->position[position].name, NAME_LENGTH );
+			}else if( sd->clan ){
+				safestrncpy( packet.position_name, sd->clan->name, NAME_LENGTH );
+			}
+#else
+
 			if( sd->guild ){
 				int position;
 
@@ -10062,6 +10247,7 @@ void clif_name( struct block_list* src, struct block_list *bl, send_target targe
 			}else if( sd->clan ){
 				safestrncpy( packet.position_name, sd->clan->name, NAME_LENGTH );
 			}
+#endif
 
 #if PACKETVER_MAIN_NUM >= 20150225 || PACKETVER_RE_NUM >= 20141126 || defined( PACKETVER_ZERO )
 			packet.title_id = sd->status.title_id; // Title ID
@@ -10124,7 +10310,7 @@ void clif_name( struct block_list* src, struct block_list *bl, send_target targe
 				safestrncpy( packet.position_name, md->guardian_data->castle->castle_name, NAME_LENGTH );
 
 				clif_send(&packet, sizeof(packet), src, target);
-			}else if( battle_config.show_mob_info ){
+			}else if( battle_config.show_mob_info && !map_getmapflag( bl->m, MF_HIDEMOBHPBAR )){
 				PACKET_ZC_ACK_REQNAMEALL packet = { 0 };
 
 				packet.packet_id = HEADER_ZC_ACK_REQNAMEALL;
@@ -10466,6 +10652,10 @@ void clif_msg(struct map_session_data* sd, unsigned short id)
 	nullpo_retv(sd);
 	fd = sd->fd;
 
+#ifdef BGEXTENDED
+	if (sd->bg_id && id == WORK_IN_PROGRESS)
+		return;
+#endif
 	WFIFOHEAD(fd, packet_len(0x291));
 	WFIFOW(fd, 0) = 0x291;
 	WFIFOW(fd, 2) = id;  // zero-based msgstringtable.txt index
@@ -10654,7 +10844,10 @@ static bool clif_process_message(struct map_session_data* sd, bool whisperFormat
 		sd->idletime_hom = last_tick;
 	if (battle_config.mer_idle_no_share && sd->md && battle_config.idletime_mer_option&IDLE_CHAT)
 		sd->idletime_mer = last_tick;
-
+#ifdef BGEXTENDED
+	if (sd && sd->bg_id)
+		pc_update_last_action(sd);
+#endif
 	//achievement_update_objective(sd, AG_CHATTING, 1, 1); // !TODO: Confirm how this achievement is triggered
 
 	return true;
@@ -10878,8 +11071,14 @@ void clif_parse_LoadEndAck(int fd,struct map_session_data *sd)
 
 	// guild
 	// (needs to go before clif_spawn() to show guild emblems correctly)
+#ifdef BGEXTENDED
+	std::shared_ptr<s_battleground_data> bgd = util::umap_find(bg_team_db, sd->bg_id);
+	if(sd->status.guild_id && !(battle_config.bg_eAmod_mode && sd->bg_id && !map_getmapflag(sd->bl.m, MF_BATTLEGROUND)))
+		guild_send_memberinfoshort(sd,1);
+#else
 	if(sd->status.guild_id)
 		guild_send_memberinfoshort(sd,1);
+#endif
 
 	struct map_data *mapdata = map_getmapdata(sd->bl.m);
 
@@ -11120,7 +11319,10 @@ void clif_parse_LoadEndAck(int fd,struct map_session_data *sd)
 			if( map_getmapflag(sd->bl.m, MF_BATTLEGROUND) == 2 )
 				clif_bg_updatescore_single(sd);
 		}
-
+#ifdef BGEXTENDED
+		if( mapdata->flag[MF_BG_TOPSCORE] )
+				clif_bg_updatescore_single(sd);
+#endif
 		if( mapdata->flag[MF_ALLOWKS] && !mapdata_flag_ks(mapdata) )
 		{
 			char output[128];
@@ -11465,7 +11667,10 @@ void clif_parse_WalkToXY(int fd, struct map_session_data *sd)
 		sd->idletime_hom = last_tick;
 	if (battle_config.mer_idle_no_share && sd->md && battle_config.idletime_mer_option&IDLE_WALK)
 		sd->idletime_mer = last_tick;
-
+#ifdef BGEXTENDED
+	if (sd && sd->bg_id)
+		pc_update_last_action(sd);
+#endif
 	unit_walktoxy(&sd->bl, x, y, 4);
 }
 
@@ -11686,7 +11891,10 @@ void clif_parse_Emotion(int fd, struct map_session_data *sd)
 			sd->idletime_hom = last_tick;
 		if (battle_config.mer_idle_no_share && sd->md && battle_config.idletime_mer_option&IDLE_EMOTION)
 			sd->idletime_mer = last_tick;
-
+#ifdef BGEXTENDED
+		if (sd && sd->bg_id)
+			pc_update_last_action(sd);
+#endif
 		if (sd->state.block_action & PCBLOCK_EMOTION) {
 			clif_skill_fail(sd, 1, USESKILL_FAIL_LEVEL, 1);
 			return;
@@ -11764,6 +11972,10 @@ void clif_parse_ActionRequest_sub(struct map_session_data *sd, int action_type,
 			sd->idletime_hom = last_tick;
 		if (battle_config.mer_idle_no_share && sd->md && battle_config.idletime_mer_option&IDLE_ATTACK)
 			sd->idletime_mer = last_tick;
+#ifdef BGEXTENDED
+		if (sd && sd->bg_id)
+			pc_update_last_action(sd);
+#endif
 		unit_attack(&sd->bl, target_id, action_type != 0);
 		break;
 	case 0x02: // sitdown
@@ -12082,7 +12294,10 @@ void clif_parse_DropItem(int fd, struct map_session_data *sd){
 			sd->idletime_hom = last_tick;
 		if (battle_config.mer_idle_no_share && sd->md && battle_config.idletime_mer_option&IDLE_DROPITEM)
 			sd->idletime_mer = last_tick;
-
+#ifdef BGEXTENDED
+		if (sd && sd->bg_id)
+			pc_update_last_action(sd);
+#endif
 		return;
 	}
 
@@ -12116,6 +12331,10 @@ void clif_parse_UseItem(int fd, struct map_session_data *sd)
 		sd->idletime_hom = last_tick;
 	if (battle_config.mer_idle_no_share && sd->md && battle_config.idletime_mer_option&IDLE_USEITEM)
 		sd->idletime_mer = last_tick;
+#ifdef BGEXTENDED
+	if (sd && sd->bg_id)
+		pc_update_last_action(sd);
+#endif
 	n = RFIFOW(fd,packet_db[RFIFOW(fd,0)].pos[0])-2;
 
 	if(n <0 || n >= MAX_INVENTORY)
@@ -12168,6 +12387,10 @@ void clif_parse_EquipItem(int fd,struct map_session_data *sd)
 		sd->idletime_hom = last_tick;
 	if (battle_config.mer_idle_no_share && sd->md && battle_config.idletime_mer_option&IDLE_USEITEM)
 		sd->idletime_mer = last_tick;
+#ifdef BGEXTENDED
+	if (sd && sd->bg_id)
+		pc_update_last_action(sd);
+#endif
 
 	//Client doesn't send the position for ammo.
 	if(sd->inventory_data[index]->type == IT_AMMO)
@@ -12907,6 +13130,10 @@ void clif_parse_skill_toid( struct map_session_data* sd, uint16 skill_id, uint16
 		sd->idletime_hom = last_tick;
 	if (battle_config.mer_idle_no_share && sd->md && battle_config.idletime_mer_option&IDLE_USESKILLTOID)
 		sd->idletime_mer = last_tick;
+#ifdef BGEXTENDED
+	if (sd && sd->bg_id)
+		pc_update_last_action(sd);
+#endif
 
 	if( sd->npc_id ){
 		if( pc_hasprogress( sd, WIP_DISABLE_SKILLITEM ) || !sd->npc_item_flag || !( inf & INF_SELF_SKILL ) ){
@@ -12973,7 +13200,27 @@ void clif_parse_skill_toid( struct map_session_data* sd, uint16 skill_id, uint16
 	sd->skillitem = sd->skillitemlv = 0;
 
 	if( SKILL_CHK_GUILD(skill_id) ) {
+#ifdef BGEXTENDED
+		if (map_getmapflag(sd->bl.m, MF_BATTLEGROUND) && sd->bg_id) {
+			int idx = skill_id - GD_SKILLBASE;
+			if( idx < 0 || idx >= MAX_GUILDSKILL )
+				skill_lv = 0;
+			std::shared_ptr<s_battleground_data> bgd = util::umap_find(bg_team_db, sd->bg_id);
+			if( sd->status.char_id == bgd->leader_char_id || skill_id == GD_CHARGESHOUT_BEATING )
+			{
+				if (bg_block_skill_status(sd, skill_id))
+					skill_lv = 0;
+				else
+					skill_lv = 1;
+			}
+			else
+				skill_lv = 0;
+		}
+		else if( sd->state.gmaster_flag || skill_id == GD_CHARGESHOUT_BEATING)
+
+#else
 		if( sd->state.gmaster_flag || skill_id == GD_CHARGESHOUT_BEATING )
+#endif
 			skill_lv = guild_checkskill(sd->guild, skill_id);
 		else
 			skill_lv = 0;
@@ -13039,6 +13286,10 @@ static void clif_parse_UseSkillToPosSub(int fd, struct map_session_data *sd, uin
 		sd->idletime_hom = last_tick;
 	if (battle_config.mer_idle_no_share && sd->md && battle_config.idletime_mer_option&IDLE_USESKILLTOPOS)
 		sd->idletime_mer = last_tick;
+#ifdef BGEXTENDED
+	if (sd && sd->bg_id)
+		pc_update_last_action(sd);
+#endif
 
 	if( skill_isNotOk(skill_id, sd) )
 		return;
@@ -14279,6 +14530,10 @@ void clif_parse_GuildChangeMemberPosition(int fd, struct map_session_data *sd)
 /// 0151 <guild id>.L
 void clif_parse_GuildRequestEmblem(int fd,struct map_session_data *sd)
 {
+#ifdef BGEXTENDED
+	if(battle_config.bg_eAmod_mode && sd->bg_id && map_getmapflag(sd->bl.m, MF_BATTLEGROUND) )
+		return;
+#endif
 	struct guild* g;
 	int guild_id = RFIFOL(fd,packet_db[RFIFOW(fd,0)].pos[0]);
 
@@ -18219,6 +18474,148 @@ void clif_readbook(int fd, int book_id, int page)
 
 /// Battlegrounds
 ///
+#ifdef BGEXTENDED
+int clif_visual_guild_id(struct block_list *bl)
+{
+	nullpo_ret(bl);
+	int bg_id;
+	std::shared_ptr<s_battleground_data> bgd = util::umap_find(bg_team_db, (bg_id = bg_team_get_id(bl)));
+
+	if( battle_config.bg_eAmod_mode && (bg_id = bg_team_get_id(bl)) > 0 && bgd != NULL && bgd->g )
+		return 0;/*bgd->g->guild_id*/
+	else
+		return status_get_guild_id(bl);
+}
+
+int clif_visual_emblem_id(struct block_list *bl)
+{
+	nullpo_ret(bl);
+	int bg_id;
+	std::shared_ptr<s_battleground_data> bgd = util::umap_find(bg_team_db, (bg_id = bg_team_get_id(bl)));
+
+	if( battle_config.bg_eAmod_mode && (bg_id = bg_team_get_id(bl)) > 0 && bgd != NULL && bgd->g )
+		return 0;	//Remove emblem because we add clan emblem instead [Grenat]
+	else
+		return status_get_emblem_id(bl);
+}
+
+void clif_bg_updatescore_team(struct map_session_data *sd)
+{
+	unsigned char buf[6];
+	int i, m;
+
+	nullpo_retv(sd);
+
+	std::shared_ptr<s_battleground_data> bgd = util::umap_find(bg_team_db, sd->bg_id);
+	if( (m = map_mapindex2mapid(sd->mapindex)) < 0 )
+		return;
+
+	WBUFW(buf,0) = 0x2de;
+	WBUFW(buf,2) = bgd->team_score;
+	WBUFW(buf,4) = map[m].bgscore_top;
+
+	for (i = 0; i < MAX_BG_MEMBERS; i++)
+	{
+		if ((sd = bgd->members[i].sd) == NULL || sd->bl.m != m)
+			continue;
+
+		clif_send(buf, packet_len(0x2de), &sd->bl, SELF);
+	}
+}
+
+void clif_bg_leave_single(struct map_session_data *sd, const char *name, const char *mes)
+{
+	int fd;
+	nullpo_retv(sd);
+
+	fd = sd->fd;
+	WFIFOHEAD(fd, 66);
+	WFIFOW(fd, 0) = 0x15a;
+	memcpy(WFIFOP(fd, 2), name, NAME_LENGTH);
+	memcpy(WFIFOP(fd, 26), mes, 40);
+	WFIFOSET(fd, 66);
+}
+
+void clif_bg_expulsion_single(struct map_session_data *sd, const char *name, const char *mes)
+{
+	int fd;
+
+#if PACKETVER < 20100803
+	const unsigned short cmd = 0x15c;
+#else
+	const unsigned short cmd = 0x839;
+#endif
+
+	nullpo_retv(sd);
+
+	fd = sd->fd;
+
+	WFIFOHEAD(fd, packet_len(cmd));
+	WFIFOW(fd, 0) = cmd;
+	safestrncpy((char*)WFIFOP(fd, 2), name, NAME_LENGTH);
+	safestrncpy((char*)WFIFOP(fd,26), mes, 40);
+#if PACKETVER < 20100803
+	safestrncpy((char*)WFIFOP(fd,66), "", NAME_LENGTH);
+#endif
+	WFIFOSET(fd, packet_len(cmd));
+}
+
+void clif_bg_belonginfo(struct map_session_data *sd)
+{
+	int fd;
+	struct guild *g;
+	nullpo_retv(sd);
+
+	if( !(battle_config.bg_eAmod_mode && sd->bg_id && (g = bg_guild_get(sd->bg_id)) != NULL) )
+		return;
+
+	fd = sd->fd;
+	WFIFOHEAD(fd,packet_len(0x16c));
+	WFIFOW(fd,0) = 0x16c;
+	WFIFOL(fd,2) = g->guild_id;
+	WFIFOL(fd,6) = 0;
+	WFIFOL(fd,10) = 0;
+	WFIFOB(fd,14) = 0;
+	WFIFOL(fd,15) = 0;
+	safestrncpy(WFIFOCP(fd,19),g->name,NAME_LENGTH);
+	WFIFOSET(fd,packet_len(0x16c));
+}
+
+void clif_bg_emblem(struct map_session_data *sd, struct guild *g)
+{
+	int fd;
+
+	nullpo_retv(sd);
+	nullpo_retv(g);
+
+#ifdef BGEXTENDED
+	if(battle_config.bg_eAmod_mode && sd->bg_id && map_getmapflag(sd->bl.m, MF_BATTLEGROUND) )
+		return;
+#endif
+	if( g->emblem_len <= 0 )
+		return;
+
+	fd = sd->fd;
+	WFIFOHEAD(fd,g->emblem_len+12);
+	WFIFOW(fd,0)=0x152;
+	WFIFOW(fd,2)=g->emblem_len+12;
+	WFIFOL(fd,4)=g->guild_id;
+	WFIFOL(fd,8)=g->emblem_id;
+	memcpy(WFIFOP(fd,12),g->emblem_data,g->emblem_len);
+	WFIFOSET(fd,WFIFOW(fd,2));
+}
+
+void clif_bg_leave(struct map_session_data *sd, const char *name, const char *mes)
+{
+	unsigned char buf[128];
+	nullpo_retv(sd);
+
+	WBUFW(buf,0)=0x15a;
+	memcpy(WBUFP(buf, 2),name,NAME_LENGTH);
+	memcpy(WBUFP(buf,26),mes,40);
+	clif_send(buf,packet_len(0x15a),&sd->bl,BG);
+}
+#endif
 
 /// Updates HP bar of a camp member.
 /// 02e0 <account id>.L <name>.24B <hp>.W <max hp>.W (ZC_BATTLEFIELD_NOTIFY_HP)
@@ -18350,11 +18747,23 @@ void clif_bg_updatescore_single(struct map_session_data *sd)
 	fd = sd->fd;
 
 	struct map_data *mapdata = map_getmapdata(sd->bl.m);
-
+#ifdef BGEXTENDED
+	std::shared_ptr<s_battleground_data> bg = util::umap_find(bg_team_db, sd->bg_id);
+#endif
 	WFIFOHEAD(fd,packet_len(0x2de));
 	WFIFOW(fd,0) = 0x2de;
+#ifdef BGEXTENDED
+	if (map_getmapflag(sd->bl.m, MF_BATTLEGROUND) == 2 || map_getmapflag(sd->bl.m, MF_BG_TOPSCORE)) {
+		WFIFOW(fd,2) = mapdata->bgscore_lion;
+		WFIFOW(fd,4) = mapdata->bgscore_eagle;
+	} else if( map_getmapflag(sd->bl.m, MF_BATTLEGROUND) == 3 && bg != NULL ) {
+		WFIFOW(fd,2) = bg->team_score;
+		WFIFOW(fd,4) = mapdata->bgscore_top;
+	}
+#else
 	WFIFOW(fd,2) = mapdata->bgscore_lion;
 	WFIFOW(fd,4) = mapdata->bgscore_eagle;
+#endif
 	WFIFOSET(fd,packet_len(0x2de));
 }
 
diff --git a/src/map/clif.hpp b/src/map/clif.hpp
index b3d608905..ce8b018d9 100644
--- a/src/map/clif.hpp
+++ b/src/map/clif.hpp
@@ -247,6 +247,9 @@ enum send_target : uint8_t {
 	BG_SAMEMAP_WOS,
 	BG_AREA,
 	BG_AREA_WOS,
+#ifdef BGEXTENDED
+	BG_LISTEN,
+#endif
 
 	CLAN,				// Clan System
 };
@@ -863,6 +866,19 @@ void clif_bg_updatescore(int16 m);
 void clif_bg_updatescore_single(struct map_session_data *sd);
 void clif_sendbgemblem_area(struct map_session_data *sd);
 void clif_sendbgemblem_single(int fd, struct map_session_data *sd);
+#ifdef BGEXTENDED
+// BG eAmod
+void clif_bg_belonginfo (struct map_session_data *sd);
+int clif_visual_guild_id (struct block_list *bl);
+int clif_visual_emblem_id (struct block_list *bl);
+void clif_bg_emblem (struct map_session_data *sd, struct guild *g);
+void clif_bg_memberlist (struct map_session_data *sd);
+void clif_bg_leave_single (struct map_session_data *sd, const char *name, const char *mes);
+void clif_bg_expulsion_single (struct map_session_data *sd, const char *name, const char *mes);
+void clif_bg_updatescore_team (struct map_session_data *sd);
+void clif_sendfakenpc(struct map_session_data *sd, int npcid);
+void clif_sendfakenpc2(struct map_session_data *sd, struct map_session_data *fk);
+#endif
 
 // Battleground Queue
 void clif_bg_queue_apply_result(e_bg_queue_apply_ack result, const char *name, struct map_session_data *sd);
diff --git a/src/map/map.cpp b/src/map/map.cpp
index 496b65adc..6f70ed788 100644
--- a/src/map/map.cpp
+++ b/src/map/map.cpp
@@ -1958,7 +1958,19 @@ void map_reqnickdb(struct map_session_data * sd, int charid)
 	struct map_session_data* tsd;
 
 	nullpo_retv(sd);
-
+#ifdef BGEXTENDED
+	if (battle_config.bg_reserved_char_id && battle_config.bg_reserved_char_id == charid)
+	{
+		clif_solved_charname(sd->fd, charid, "Battleground");
+		return;
+	}
+
+	if (battle_config.woe_reserved_char_id && battle_config.woe_reserved_char_id == charid)
+	{
+		clif_solved_charname(sd->fd, charid, "WoE");
+		return;
+	}
+#endif
 	tsd = map_charid2sd(charid);
 	if( tsd )
 	{
diff --git a/src/map/map.hpp b/src/map/map.hpp
index 31d83118b..ff90115cd 100644
--- a/src/map/map.hpp
+++ b/src/map/map.hpp
@@ -408,6 +408,9 @@ enum mob_ai {
 	AI_WAVEMODE,
 	AI_ABR,
 	AI_BIONIC,
+#ifdef BGEXTENDED
+	AI_BOMB,
+#endif
 	AI_MAX
 };
 
@@ -644,6 +647,12 @@ enum e_mapflag : int16 {
 	MF_PRIVATEAIRSHIP_SOURCE,
 	MF_PRIVATEAIRSHIP_DESTINATION,
 	MF_SKILL_DURATION,
+#ifdef BGEXTENDED
+	MF_NOECALL, // [BattleGround System]
+	MF_BG_CONSUME, // allows using BG consumables
+	MF_WOE_CONSUME, // allows using WoE consumables
+	MF_BG_TOPSCORE,
+#endif
 	MF_NOCASHSHOP,
 	MF_NORODEX,
 	MF_NORENEWALEXPPENALTY,
@@ -780,7 +789,11 @@ struct map_data {
 	int16 m;
 	int16 xs,ys; // map dimensions (in cells)
 	int16 bxs,bys; // map dimensions (in blocks)
+#ifdef BGEXTENDED
+	int16 bgscore_lion, bgscore_eagle, bgscore_top; // Battleground ScoreBoard
+#else
 	int16 bgscore_lion, bgscore_eagle; // Battleground ScoreBoard
+#endif
 	int npc_num; // number total of npc on the map
 	int npc_num_area; // number of npc with a trigger area on the map
 	int npc_num_warp; // number of warp npc on the map
diff --git a/src/map/npc.hpp b/src/map/npc.hpp
index b0ddff839..bbd3818bd 100644
--- a/src/map/npc.hpp
+++ b/src/map/npc.hpp
@@ -165,7 +165,11 @@ struct npc_data {
 		struct {
 			struct script_code *script;
 			short xs,ys; // OnTouch area radius
+#ifdef BGEXTENDED
+			int guild_id, bg_id;
+#else
 			int guild_id;
+#endif
 			t_tick timer;
 			int timerid,timeramount,rid;
 			t_tick timertick;
diff --git a/src/map/pc.cpp b/src/map/pc.cpp
index 86f546a0b..842ce6859 100644
--- a/src/map/pc.cpp
+++ b/src/map/pc.cpp
@@ -1816,6 +1816,10 @@ bool pc_authok(struct map_session_data *sd, uint32 login_id2, time_t expiration_
 
 	// Initialize BG queue
 	sd->bg_queue_id = 0;
+#ifdef BGEXTENDED
+	sd->ballx = 0;
+	sd->bally = 0;
+#endif
 
 #if PACKETVER_MAIN_NUM >= 20150507 || PACKETVER_RE_NUM >= 20150429 || defined(PACKETVER_ZERO)
 	sd->hatEffects = {};
@@ -5375,9 +5379,23 @@ int pc_getcash(struct map_session_data *sd, int cash, int points, e_log_pick_typ
  * @return Stored index in inventory, or -1 if not found.
  **/
 short pc_search_inventory(struct map_session_data *sd, t_itemid nameid) {
+#ifdef BGEXTENDED
+	short i,x,y;
+#else
 	short i;
+#endif
 	nullpo_retr(-1, sd);
 
+#ifdef BGEXTENDED
+	if (map_getmapflag(sd->bl.m, MF_BG_CONSUME)) {
+		ARR_FIND( 0, MAX_INVENTORY, x, sd->inventory.u.items_inventory[x].nameid == nameid && ( MakeDWord(sd->inventory.u.items_inventory[x].card[2], sd->inventory.u.items_inventory[x].card[3]) == battle_config.bg_reserved_char_id ) && (sd->inventory.u.items_inventory[x].amount > 0 || nameid == 0) );
+			if( x < MAX_INVENTORY) return x;
+	}
+	if (map_getmapflag(sd->bl.m, MF_WOE_CONSUME)) {
+		ARR_FIND( 0, MAX_INVENTORY, y, sd->inventory.u.items_inventory[y].nameid == nameid && ( MakeDWord(sd->inventory.u.items_inventory[y].card[2], sd->inventory.u.items_inventory[y].card[3]) == battle_config.woe_reserved_char_id ) && (sd->inventory.u.items_inventory[y].amount > 0 || nameid == 0) );
+			if( y < MAX_INVENTORY) return y;
+	}
+#endif
 	ARR_FIND( 0, MAX_INVENTORY, i, sd->inventory.u.items_inventory[i].nameid == nameid && (sd->inventory.u.items_inventory[i].amount > 0 || nameid == 0) );
 	return ( i < MAX_INVENTORY ) ? i : -1;
 }
@@ -5890,6 +5908,14 @@ int pc_useitem(struct map_session_data *sd,int n)
 		}
 		return 0;/* regardless, effect is not run */
 	}
+#ifdef BGEXTENDED
+	if( sd->inventory.u.items_inventory[n].card[0] == CARD0_CREATE) {
+		if (MakeDWord(sd->inventory.u.items_inventory[n].card[2], sd->inventory.u.items_inventory[n].card[3]) == battle_config.bg_reserved_char_id && !map_getmapflag(sd->bl.m, MF_BG_CONSUME))
+			return 0;
+		if (MakeDWord(sd->inventory.u.items_inventory[n].card[2], sd->inventory.u.items_inventory[n].card[3]) == battle_config.woe_reserved_char_id && !map_getmapflag(sd->bl.m, MF_WOE_CONSUME))
+			return 0;
+	}
+#endif
 
 	if (pet_db_search(id->nameid, PET_CATCH) != nullptr && map_getmapflag(sd->bl.m, MF_NOPETCAPTURE)) {
 		clif_displaymessage(sd->fd, msg_txt(sd, 669)); // You can't catch any pet on this map.
@@ -10655,6 +10681,14 @@ bool pc_candrop(struct map_session_data *sd, struct item *item)
 		return false;
 	if( !pc_can_give_items(sd) || sd->sc.cant.drop) //check if this GM level can drop items
 		return false;
+#ifdef BGEXTENDED
+	if( item->card[0] == CARD0_CREATE) {
+		if (MakeDWord(item->card[2], item->card[3]) == battle_config.bg_reserved_char_id)
+			return false;
+		if (MakeDWord(item->card[2], item->card[3]) == battle_config.woe_reserved_char_id)
+			return false;
+	}
+#endif
 	return (itemdb_isdropable(item, pc_get_group_level(sd)));
 }
 
@@ -14755,6 +14789,28 @@ void pc_set_costume_view(struct map_session_data *sd) {
 	if (robe != sd->status.robe)
 		clif_changelook(&sd->bl, LOOK_ROBE, sd->status.robe);
 }
+#ifdef BGEXTENDED
+/***********************************************************
+* Update Idle PC Timer
+***********************************************************/
+int pc_update_last_action(struct map_session_data *sd)
+{
+	int64 tick = gettick();
+
+	sd->idletime = last_tick;
+
+	std::shared_ptr<s_battleground_data> bgd = util::umap_find(bg_team_db, sd->bg_id);
+	if (sd->bg_id && sd->state.bg_afk && bgd != NULL && bgd->g)
+	{ // Battleground AFK announce
+		char output[128];
+		sprintf(output, "%s : %s is no longer away...", bgd->g->name, sd->status.name);
+		clif_bg_message(bgd.get(), sd->bg_id, bgd->g->name, output, strlen(output) + 1);
+		sd->state.bg_afk = 0;
+	}
+
+	return 1;
+}
+#endif
 
 std::shared_ptr<s_attendance_period> pc_attendance_period(){
 	uint32 date = date_get(DT_YYYYMMDD);
diff --git a/src/map/pc.hpp b/src/map/pc.hpp
index f56861518..1118adfbe 100644
--- a/src/map/pc.hpp
+++ b/src/map/pc.hpp
@@ -389,6 +389,12 @@ struct map_session_data {
 		bool barter_extended_open;
 		unsigned int block_action : 10;
 		bool refineui_open;
+#ifdef BGEXTENDED
+		// BG eAmod
+		unsigned bg_afk : 1;
+		unsigned int bg_listen : 1;
+		unsigned int only_walk : 1;
+#endif
 		t_itemid inventory_expansion_confirmation;
 		uint16 inventory_expansion_amount;
 		t_itemid laphine_synthesis;
@@ -761,6 +767,11 @@ struct map_session_data {
 	// Battlegrounds queue system [MasterOfMuppets]
 	int bg_id, bg_queue_id;
 	int tid_queue_active; ///< Timer ID associated with players joining an active BG
+#ifdef BGEXTENDED
+	unsigned short bg_kills;	// Battleground Kill Count
+	int ballx;			// poringball [Grenat]
+	int bally;			// poringball [Grenat]
+#endif
 
 #ifdef SECURE_NPCTIMEOUT
 	/**
@@ -1598,6 +1609,9 @@ void pc_show_questinfo(struct map_session_data *sd);
 void pc_show_questinfo_reinit(struct map_session_data *sd);
 
 bool pc_job_can_entermap(enum e_job jobid, int m, int group_lv);
+#ifdef BGEXTENDED
+int pc_update_last_action(struct map_session_data *sd);
+#endif
 
 #if defined(RENEWAL_DROP) || defined(RENEWAL_EXP)
 uint16 pc_level_penalty_mod( struct map_session_data* sd, e_penalty_type type, std::shared_ptr<s_mob_db> mob, mob_data* md = nullptr );
diff --git a/src/map/script.cpp b/src/map/script.cpp
index e0f25550e..8b9252792 100644
--- a/src/map/script.cpp
+++ b/src/map/script.cpp
@@ -13474,6 +13474,11 @@ BUILDIN_FUNC(flagemblem)
 {
 	TBL_NPC* nd;
 	int g_id = script_getnum(st,2);
+#ifdef BGEXTENDED
+	int flag = 0;
+	if( script_hasdata(st,3) )
+		flag = 1;
+#endif
 
 	if(g_id < 0)
 		return SCRIPT_CMD_SUCCESS;
@@ -13484,6 +13489,13 @@ BUILDIN_FUNC(flagemblem)
 	} else if( nd->subtype != NPCTYPE_SCRIPT ) {
 		ShowError("script:flagemblem: unexpected subtype %d for npc %d '%s'\n", nd->subtype, st->oid, nd->exname);
 	} else {
+#ifdef BGEXTENDED
+		if (flag) {
+			nd->u.scr.bg_id = g_id;
+			clif_guild_emblem_area(&nd->bl);
+			return SCRIPT_CMD_SUCCESS;
+		}
+#endif
 		bool changed = ( nd->u.scr.guild_id != g_id )?true:false;
 		nd->u.scr.guild_id = g_id;
 		clif_guild_emblem_area(&nd->bl);
@@ -20516,10 +20528,14 @@ BUILDIN_FUNC(waitingroom2bg)
 	unsigned char i,c=0;
 	struct s_battleground_team team;
 
+#ifdef BGEXTENDED
+	nd = (struct npc_data *)map_id2bl(st->oid);
+#else
 	if( script_hasdata(st,7) )
 		nd = npc_name2id(script_getstr(st,7));
 	else
 		nd = (struct npc_data *)map_id2bl(st->oid);
+#endif
 
 	if( nd == NULL || (cd = (struct chat_data *)map_id2bl(nd->chat_id)) == NULL )
 	{
@@ -20536,6 +20552,19 @@ BUILDIN_FUNC(waitingroom2bg)
 
 	team.warp_x = script_getnum(st,3);
 	team.warp_y = script_getnum(st,4);
+#ifdef BGEXTENDED
+	team.guild_index = script_getnum(st, 5);
+	if (script_hasdata(st,6)) {
+		team.quit_event = script_getstr(st,6); // Logout Event
+		check_event(st, team.quit_event.c_str());
+	} else
+		team.quit_event = "";
+	if (script_hasdata(st,7)) {
+		team.death_event = script_getstr(st,7); // Die Event
+		check_event(st, team.death_event.c_str());
+	} else
+		team.death_event = "";
+#else
 	if (script_hasdata(st,5)) {
 		team.quit_event = script_getstr(st,5); // Logout Event
 		check_event(st, team.quit_event.c_str());
@@ -20546,6 +20575,7 @@ BUILDIN_FUNC(waitingroom2bg)
 		check_event(st, team.death_event.c_str());
 	} else
 		team.death_event = "";
+#endif
 
 	if( (bg_id = bg_create(mapindex, &team)) == 0 )
 	{ // Creation failed
@@ -20719,8 +20749,15 @@ BUILDIN_FUNC(bg_warp)
 
 	bg_id = script_getnum(st,2);
 	map_name = script_getstr(st,3);
+#ifdef BGEXTENDED
+	if( !strcmp(map_name,"RespawnPoint") )
+		mapindex = 0;
+	else if( (mapindex = mapindex_name2id(map_name)) == 0 )
+		return SCRIPT_CMD_SUCCESS; // Invalid Map
+#else
 	if( (mapindex = mapindex_name2id(map_name)) == 0 )
 		return SCRIPT_CMD_SUCCESS; // Invalid Map
+#endif
 	x = script_getnum(st,4);
 	y = script_getnum(st,5);
 	bg_team_warp(bg_id, mapindex, x, y);
@@ -20847,6 +20884,17 @@ BUILDIN_FUNC(bg_get_data)
 			mapreg_setreg(add_str("$@arenamemberscount"), i);
 			script_pushint(st, i);
 			break;
+#ifdef BGEXTENDED
+		case 2:
+			script_pushconststr(st, bg->g ? bg->g->name : "null");
+			break;
+		case 3:
+			script_pushconststr(st, bg->g ? bg->g->master : "null");
+			break;
+		case 4:
+			script_pushint(st, bg->color);
+			break;
+#endif
 		default:
 			ShowError("script:bg_get_data: unknown data identifier %d\n", type);
 			break;
@@ -20935,6 +20983,506 @@ BUILDIN_FUNC(bg_info)
 	return SCRIPT_CMD_SUCCESS;
 }
 
+#ifdef BGEXTENDED
+BUILDIN_FUNC(bgannounce)
+{
+	const char *mes = script_getstr(st, 2);
+	const char *fontColor = script_hasdata(st, 3) ? script_getstr(st, 3) : "0xFFFFFF";
+	int         fontType = script_hasdata(st, 4) ? script_getnum(st, 4) : 0x190; // default fontType (FW_NORMAL)
+	int         fontSize = script_hasdata(st, 5) ? script_getnum(st, 5) : 12;    // default fontSize
+	int         fontAlign = script_hasdata(st, 6) ? script_getnum(st, 6) : 0;     // default fontAlign
+	int         fontY = script_hasdata(st, 7) ? script_getnum(st, 7) : 0;     // default fontY
+
+	clif_broadcast2(NULL, mes, (int)strlen(mes) + 1, strtol(fontColor, (char **)NULL, 0), fontType, fontSize, fontAlign, fontY, BG_LISTEN);
+	return SCRIPT_CMD_SUCCESS;
+}
+
+BUILDIN_FUNC(bg_team_updatescore)
+{
+	struct map_session_data* sd;
+	int bg_id = script_getnum(st, 2),
+		score = script_getnum(st, 3);
+
+	if (!script_rid2sd(sd))
+		return SCRIPT_CMD_SUCCESS;
+
+	std::shared_ptr<s_battleground_data> bgd = util::umap_find(bg_team_db, bg_id);
+	if (bgd != NULL)
+	{
+		bgd->team_score = score;
+		clif_bg_updatescore_team(sd);
+	}
+	return SCRIPT_CMD_SUCCESS;
+}
+
+BUILDIN_FUNC(bg_team_guildid)
+{
+	int bg_id = script_getnum(st, 2),
+		guild_id = 0;
+	std::shared_ptr<s_battleground_data> bgd = util::umap_find(bg_team_db, bg_id);
+	if (bgd != NULL && bgd->g)
+		guild_id = bgd->g->guild_id;
+	script_pushint(st, guild_id);
+	return SCRIPT_CMD_SUCCESS;
+}
+
+BUILDIN_FUNC(bg_monster_immunity) {
+	struct mob_data *md;
+	struct block_list *mbl;
+	int id = script_getnum(st, 2);
+	bool flag = script_getnum(st, 3) != 0;
+
+	if (id == 0 || (mbl = map_id2bl(id)) == NULL || mbl->type != BL_MOB)
+		return SCRIPT_CMD_SUCCESS;
+	md = (TBL_MOB *)mbl;
+	//md->state.immunity = flag;
+	md->ud.immune_attack = flag; // rAthena have Its own immunity state [Easycore]
+	return SCRIPT_CMD_SUCCESS;
+}
+
+static int bg_cleanmap_sub(struct block_list *bl, va_list ap)
+{
+	nullpo_ret(bl);
+	map_clearflooritem(bl);
+	return SCRIPT_CMD_SUCCESS;
+}
+/*==========================================
+ *------------------------------------------*/
+BUILDIN_FUNC(donpceventall)
+{
+	const char* event = script_getstr(st,2);
+	npc_event_doall(event);
+	return SCRIPT_CMD_SUCCESS;
+}
+BUILDIN_FUNC(bg_team_reveal)
+{
+	int bg_id;
+
+	bg_id = script_getnum(st, 2);
+	std::shared_ptr<s_battleground_data> bgd = util::umap_find(bg_team_db, bg_id);
+	if (bgd == NULL)
+		return 0;
+
+	bgd->reveal_pos = true; // Reveal Position Mode
+	return 0;
+}
+
+BUILDIN_FUNC(bg_team_setquest)
+{
+	struct map_session_data *sd;
+	int i, bg_id, quest;
+
+	if (!script_rid2sd(sd))
+		return SCRIPT_CMD_SUCCESS;
+
+	bg_id = script_getnum(st, 2);
+	quest = script_getnum(st, 3);
+
+	std::shared_ptr<s_battleground_data> bgd = util::umap_find(bg_team_db, bg_id);
+	if (bg_id == 0 || bgd == NULL)
+		return 0;
+
+	for (i = 0; i < MAX_BG_MEMBERS; i++)
+	{
+		if ((sd = bgd->members[i].sd) == NULL)
+			continue;
+		clif_quest_add(sd, &sd->quest_log[i]);
+	}
+	return 0;
+}
+
+BUILDIN_FUNC(bg_monster_reveal)
+{
+	struct mob_data *md;
+	struct block_list *mbl;
+	int id = script_getnum(st, 2),
+		flag = script_getnum(st, 3),
+		color = script_getnum(st, 4);
+
+	if (id == 0 || (mbl = map_id2bl(id)) == NULL || mbl->type != BL_MOB)
+		return 0;
+	md = (TBL_MOB *)mbl;
+	map_foreachinmap(buildin_viewpointmap_sub, mbl->m, BL_PC, st->oid, flag, mbl->x, mbl->y, mbl->id, color);
+	return 0;
+}
+
+BUILDIN_FUNC(bg_cleanmap)
+{
+	const char* map_name;
+	int m;
+
+	map_name = script_getstr(st, 3);
+	m = map_mapname2mapid(map_name);
+
+	map_foreachinmap(bg_cleanmap_sub, m, BL_ITEM);
+	return 0;
+}
+BUILDIN_FUNC(bg_getitem)
+{
+	int bg_id, nameid, amount;
+
+	bg_id = script_getnum(st, 2);
+	nameid = script_getnum(st, 3);
+	amount = script_getnum(st, 4);
+
+	bg_team_getitem(bg_id, nameid, amount);
+	return 0;
+}
+
+BUILDIN_FUNC(bg_getkafrapoints)
+{
+	int bg_id, amount;
+
+	bg_id = script_getnum(st, 2);
+	amount = script_getnum(st, 3);
+	bg_team_get_kafrapoints(bg_id, amount);
+	return 0;
+}
+
+BUILDIN_FUNC(bg_reward)
+{
+	int bg_id, nameid, amount, kafrapoints, quest_id, add_value, bg_arena, bg_result;
+	const char *var;
+
+	bg_id = script_getnum(st, 2);
+	nameid = script_getnum(st, 3);
+	amount = script_getnum(st, 4);
+	kafrapoints = script_getnum(st, 5);
+	quest_id = script_getnum(st, 6);
+	var = script_getstr(st, 7);
+	add_value = script_getnum(st, 8);
+	bg_arena = script_getnum(st, 9);
+	bg_result = script_getnum(st, 10);
+
+	bg_team_rewards(bg_id, nameid, amount, kafrapoints, quest_id, var, add_value, bg_arena, bg_result);
+	return 0;
+}
+BUILDIN_FUNC(bg_logincount)
+{
+	TBL_PC *sd;
+	if (!script_rid2sd(sd)) {
+		script_pushint(st, 0);
+		return SCRIPT_CMD_FAILURE;
+	}
+	int i = 0;
+
+	if (sd)
+		i = bg_countlogin(sd, true);
+	script_pushint(st, i);
+	return SCRIPT_CMD_SUCCESS;
+}
+
+/// Validates data of a guild emblem (compressed bitmap)
+enum e_result_validate_emblem {	// Used as Result for clif_validate_emblem
+	EMBVALIDATE_SUCCESS = 0,
+	EMBVALIDATE_ERR_RAW_FILEFORMAT,	// Invalid File Format (Error in zlib/decompression or malformed BMP header)
+	EMBVALIDATE_ERR_TRANSPARENCY	// uploaded emblem does not met the requirements of battle_config.emblem_transparency_limit
+};
+static enum e_result_validate_emblem clif_validate_emblem(const uint8* emblem, unsigned long emblem_len)
+{
+	uint8 buf[1800];  // no well-formed emblem bitmap is larger than 1782 (24 bit) / 1654 (8 bit) bytes
+	unsigned long buf_len = sizeof(buf);
+	int offset = 0;
+	/*
+	if (!((decode_zip(buf, &buf_len, emblem, emblem_len) == 0 && buf_len >= 18)  // sizeof(BITMAPFILEHEADER) + sizeof(biSize) of the following info header struct
+		&& RBUFW(buf, 0) == 0x4d42   // BITMAPFILEHEADER.bfType (signature)
+		&& RBUFL(buf, 2) == buf_len  // BITMAPFILEHEADER.bfSize (file size)
+		&& (offset = RBUFL(buf, 10)) < buf_len  // BITMAPFILEHEADER.bfOffBits (offset to bitmap bits)
+		))
+		return EMBVALIDATE_ERR_RAW_FILEFORMAT;
+	*/
+	if (battle_config.emblem_transparency_limit != 100) {
+		int i, transcount = 1, tmp[3];
+		for (i = offset; i < buf_len - 1; i++) {
+			int j = i % 3;
+			tmp[j] = RBUFL(buf, i);
+			if (j == 2 && (tmp[0] == 0xFFFF00FF) && (tmp[1] == 0xFFFF00) && (tmp[2] == 0xFF00FFFF)) //if pixel is transparent
+				transcount++;
+		}
+		if (((transcount * 300) / (buf_len - offset)) > battle_config.emblem_transparency_limit) //convert in % to chk
+			return EMBVALIDATE_ERR_TRANSPARENCY;
+	}
+
+	return EMBVALIDATE_SUCCESS;
+}
+
+BUILDIN_FUNC(bg_teamid)
+{
+	TBL_PC *sd;
+
+	if( !script_hasdata(st, 2) )
+		script_rid2sd(sd);
+	else
+		sd = map_id2sd( script_getnum(st, 2) );
+
+	if (sd) {
+		std::shared_ptr<s_battleground_data> bgteam = util::umap_find(bg_team_db, sd->bg_id);
+		if (bgteam)
+			script_pushint(st, bgteam->team_id);
+		else
+			script_pushint(st, -1);
+	}
+	return SCRIPT_CMD_SUCCESS;
+}
+BUILDIN_FUNC(bg_kill)
+{
+	struct map_session_data* sd = map_id2sd(script_getnum(st, 2));
+	if (!sd) {
+		script_pushint(st, 0);
+		return SCRIPT_CMD_FAILURE;
+	} else
+		sd->bg_kills++;
+
+	return SCRIPT_CMD_SUCCESS;
+}
+//use : areaeffect( effect id, x, y);
+BUILDIN_FUNC(areaeffect) {
+	TBL_PC* sd;
+	struct map_session_data* fk = (struct map_session_data*)aCalloc(1, sizeof(struct map_session_data));
+
+	if (!script_rid2sd(sd)) {
+		script_pushint(st, 0);
+		return SCRIPT_CMD_FAILURE;
+	}
+
+	fk->bl.id  = npc_get_new_npc_id();
+	fk->bl.x   = script_getnum(st,3);
+	fk->bl.y   = script_getnum(st,4);
+	fk->ud.dir = 0;
+
+	clif_sendfakenpc2( sd, fk );
+	clif_specialeffect_single(&fk->bl, script_getnum(st,2), sd->fd);
+	if (fk->bl.id)
+		unit_free(&fk->bl,CLR_OUTSIGHT);
+	return SCRIPT_CMD_SUCCESS;
+}
+/*==========================================
+ * Get NPC info: getnpcinfo <type>{,<char_id>} [Grenat]
+ * type: NPC_X: X, NPC_Y: Y
+ *------------------------------------------*/
+BUILDIN_FUNC(getnpcinfo)
+{
+	TBL_NPC* nd = map_id2nd(st->oid);
+
+	int type = script_getnum(st,2);
+
+	if (!nd) {
+		script_pushint(st,0);
+		return SCRIPT_CMD_SUCCESS;
+	}
+
+	switch(type){
+		case NPC_X: script_pushint(st,nd->bl.x); break;
+		case NPC_Y: script_pushint(st,nd->bl.y); break;
+		default:
+			script_pushint(st,0);
+			break;
+	}
+	return SCRIPT_CMD_SUCCESS;
+}
+/*==========================================
+ * Set poring ball mode [Grenat]
+ * setporingball;
+ *------------------------------------------*/
+BUILDIN_FUNC(setporingball)
+{
+	struct map_session_data* sd;
+
+	if (!script_rid2sd(sd))
+		return SCRIPT_CMD_FAILURE;
+
+	sd->ballx = 1;
+
+	return SCRIPT_CMD_SUCCESS;
+}
+/*==========================================
+ * Get X value of clicked cell [Grenat]
+ * getporingballx();
+ *------------------------------------------*/
+BUILDIN_FUNC(getporingballx)
+{
+	struct map_session_data* sd;
+
+	if (!script_rid2sd(sd))
+	{
+		script_pushint(st, 0);
+		return SCRIPT_CMD_FAILURE;
+	}
+
+	script_pushint(st, sd->ballx);
+
+	return SCRIPT_CMD_SUCCESS;
+}
+/*==========================================
+ * Get Y value of clicked cell [Grenat]
+ * getporingballx();
+ *------------------------------------------*/
+BUILDIN_FUNC(getporingbally)
+{
+	struct map_session_data* sd;
+
+	if (!script_rid2sd(sd))
+	{
+		script_pushint(st, 0);
+		return SCRIPT_CMD_FAILURE;
+	}
+
+	script_pushint(st, sd->bally);
+
+	return SCRIPT_CMD_SUCCESS;
+}
+/*==========================================
+ * Remove poring ball mode to save ressources [Grenat]
+ * removeporingball;
+ *------------------------------------------*/
+BUILDIN_FUNC(removeporingball)
+{
+	struct map_session_data* sd;
+
+	if (!script_rid2sd(sd))
+		return SCRIPT_CMD_FAILURE;
+
+	sd->ballx = 0;
+	sd->bally = 0;
+
+	return SCRIPT_CMD_SUCCESS;
+}
+/*==========================================
+ * Get direction the unit is looking [Grenat]
+ * getunitdir <unit_id/account_id>;
+ *------------------------------------------*/
+BUILDIN_FUNC(getunitdir)
+{
+	struct block_list* bl = map_id2bl(script_getnum(st,2));
+
+	if (!bl) {
+		script_pushint(st, 0);
+		return SCRIPT_CMD_FAILURE;
+	}
+
+	script_pushint(st, unit_getdir(bl));
+
+	return SCRIPT_CMD_SUCCESS;
+}
+/*==========================================
+ * Get information if a pc is sit or not [Grenat]
+ * ispcsit <account_id>;
+ *------------------------------------------*/
+BUILDIN_FUNC(ispcsit)
+{
+	struct map_session_data* sd;
+
+	if( !script_hasdata(st, 2) )
+		script_rid2sd(sd);
+	else
+		sd = map_id2sd( script_getnum(st, 2) );
+
+	if(sd) {
+		if( pc_issit(sd) )
+			script_pushint(st, 1);
+		else
+			script_pushint(st, 0);
+	}
+
+	return SCRIPT_CMD_SUCCESS;
+}
+/*==========================================
+ * Push (knockback) a specific target in
+ * a specific direction [Grenat]
+ * unitpush <unit_id/account_id>,<dir>,<cells>;
+ *------------------------------------------*/
+BUILDIN_FUNC(unitpush)
+{
+	uint8 dir;
+	int cells, dx, dy;
+	struct block_list* bl = map_id2bl(script_getnum(st,2));
+
+	dir = script_getnum(st,3);
+	cells     = script_getnum(st,4);
+
+	if(dir>7)
+	{
+		ShowWarning("buildin_pushpc: Invalid direction %d specified.\n", dir);
+		script_reportsrc(st);
+
+		dir%= 8;  // trim spin-over
+	}
+
+	if(!cells)
+	{// zero distance
+		return 0;
+	}
+	else if(cells<0)
+	{// pushing backwards
+		dir = (dir+4)%8;  // turn around
+		cells     = -cells;
+	}
+
+	dx = dirx[dir];
+	dy = diry[dir];
+
+	if( bl != NULL )
+		unit_blown(bl, dx, dy, cells, BLOWN_NONE);
+	return 0;
+}
+/*==========================================
+ * Start a specific battleground [Grenat]
+ * bg_create2 <battleground_db_name>;
+ *------------------------------------------*/
+BUILDIN_FUNC(bg_create2) {
+	std::shared_ptr<s_battleground_type> bg = bg_search_name(script_getstr(st, 2));
+
+	if (!bg) {
+		ShowError("bg_create2: Invalid Battleground name %s.\n", script_getstr(st, 2));
+		return SCRIPT_CMD_FAILURE;
+	}
+
+	s_battleground_team* team;
+	team = &bg->maps[0].team1;
+	int bg_team_1 = bg_create(bg->maps[0].mapindex, team);
+	team = &bg->maps[0].team2;
+	int bg_team_2 = bg_create(bg->maps[0].mapindex, team);
+	mapreg_setreg(add_str(bg->maps[0].team1.bg_id_var.c_str()), bg_team_1);
+	mapreg_setreg(add_str(bg->maps[0].team2.bg_id_var.c_str()), bg_team_2);
+	npc_event_do(bg->maps[0].bgcallscript.c_str());
+	mapreg_setreg(add_str("$@currentbgteam1"), bg_team_1);
+	mapreg_setreg(add_str("$@currentbgteam2"), bg_team_2);
+
+	return SCRIPT_CMD_SUCCESS;
+}
+/*==========================================
+ * Get amount of players in a battleground queue [Grenat]
+ * getqueuecount <map_name>;
+ *------------------------------------------*/
+BUILDIN_FUNC(getqueuecount)
+{
+	struct map_session_data* sd;
+	const char *name = script_getstr(st, 2);
+
+	if (!script_rid2sd(sd))
+		return SCRIPT_CMD_SUCCESS;
+
+	int16 mapindex = mapindex_name2id(name);
+
+	for (auto &pair : battleground_db) {
+		for (auto &map : pair.second->maps) {
+			if (map.mapindex == mapindex) {
+				for (const auto &queue : bg_queues) {
+					if(pair.second->id == queue->id) {
+						script_pushint(st, queue->teama_members.size()+queue->teamb_members.size());
+						return SCRIPT_CMD_SUCCESS;
+					}
+				}
+				script_pushint(st, 0);
+				return SCRIPT_CMD_SUCCESS;
+			}
+		}
+	}
+	script_pushint(st, 0);
+	return SCRIPT_CMD_SUCCESS;
+}
+#endif
+
 /*==========================================
  * Instancing System
  *------------------------------------------*/
@@ -26524,6 +27072,35 @@ struct script_function buildin_func[] = {
 	BUILDIN_DEF(bg_reserve,"s?"),
 	BUILDIN_DEF(bg_unbook,"s"),
 	BUILDIN_DEF(bg_info,"si"),
+#ifdef BGEXTENDED
+// Extended BattleGround
+	BUILDIN_DEF(bg_logincount, ""),
+	BUILDIN_DEF(bg_monster_immunity, "ii"),
+	BUILDIN_DEF(bg_team_updatescore, "ii"),
+	BUILDIN_DEF(bg_team_guildid, "i"),
+	BUILDIN_DEF(bg_team_reveal,"i"),
+	BUILDIN_DEF(bg_team_setquest,"ii"),
+	BUILDIN_DEF(bg_getitem, "iii"),
+	BUILDIN_DEF(bg_getkafrapoints, "ii"),
+	BUILDIN_DEF(bg_reward, "iiiiisiii"),
+	BUILDIN_DEF(bgannounce, "s?????"),
+	BUILDIN_DEF(bg_monster_reveal,"iii"),
+	BUILDIN_DEF(donpceventall,"s"),
+	BUILDIN_DEF2(flagemblem, "flagemblembg", "ii"),
+	BUILDIN_DEF(bg_teamid,"?"),
+	BUILDIN_DEF(bg_kill,"i"),		// [Grenat]
+	BUILDIN_DEF(areaeffect, "iii"),		// [Grenat]
+	BUILDIN_DEF(getnpcinfo,"i?"),		// [Grenat]
+	BUILDIN_DEF(setporingball,""),		// [Grenat]
+	BUILDIN_DEF(getporingballx,""),		// [Grenat]
+	BUILDIN_DEF(getporingbally,""),		// [Grenat]
+	BUILDIN_DEF(removeporingball,""),	// [Grenat]
+	BUILDIN_DEF(getunitdir,"i"),		// [Grenat]
+	BUILDIN_DEF(ispcsit,"?"),		// [Grenat]
+	BUILDIN_DEF(unitpush,"iii"),		// [Grenat]
+	BUILDIN_DEF(bg_create2, "s"),		// [Grenat]
+	BUILDIN_DEF(getqueuecount,"s"),		// [Grenat]
+#endif
 
 	// Instancing
 	BUILDIN_DEF(instance_create,"s??"),
diff --git a/src/map/script.hpp b/src/map/script.hpp
index 47e61273f..b44e62d5e 100644
--- a/src/map/script.hpp
+++ b/src/map/script.hpp
@@ -379,6 +379,14 @@ enum monsterinfo_types {
 	MOB_MVPEXP
 };
 
+#ifdef BGEXTENDED
+enum npcinfo_types {
+	NPC_MAP = 0,
+	NPC_X,
+	NPC_Y,
+};
+#endif
+
 enum petinfo_types {
 	PETINFO_ID = 0,
 	PETINFO_CLASS,
diff --git a/src/map/script_constants.hpp b/src/map/script_constants.hpp
index 74bee0732..ebec76042 100644
--- a/src/map/script_constants.hpp
+++ b/src/map/script_constants.hpp
@@ -529,6 +529,13 @@
 	export_constant(MF_PRIVATEAIRSHIP_SOURCE);
 	export_constant(MF_PRIVATEAIRSHIP_DESTINATION);
 	export_constant(MF_SKILL_DURATION);
+#ifdef BGEXTENDED
+	// Battleground eAmod
+	export_constant(MF_NOECALL);
+	export_constant(MF_BG_CONSUME);
+	export_constant(MF_WOE_CONSUME);
+	export_constant(MF_BG_TOPSCORE);
+#endif
 	export_constant(MF_NOCASHSHOP);
 	export_constant(MF_NORODEX);
 	export_constant(MF_NORENEWALDROPPENALTY);
@@ -4111,6 +4118,9 @@
 	export_constant(AI_LEGION);
 	export_constant(AI_FAW);
 	export_constant(AI_GUILD);
+#ifdef BGEXTENDED
+	export_constant(AI_BOMB);
+#endif
 	export_constant(AI_WAVEMODE);
 	export_constant(AI_ABR);
 	export_constant(AI_BIONIC);
@@ -4470,6 +4480,13 @@
 	export_constant(PETINFO_EGGID);
 	export_constant(PETINFO_FOODID);
 
+#ifdef BGEXTENDED
+	/* npcinfo types [Grenat]*/
+	export_constant(NPC_MAP);
+	export_constant(NPC_X);
+	export_constant(NPC_Y);
+#endif
+
 	// For backwards compatability - might be removed in the near future
 	export_constant2("PET_ID",PETINFO_ID);
 	export_constant2("PET_CLASS",PETINFO_CLASS);
diff --git a/src/map/skill.cpp b/src/map/skill.cpp
index 998b7387e..deaca3931 100644
--- a/src/map/skill.cpp
+++ b/src/map/skill.cpp
@@ -851,6 +851,11 @@ bool skill_isNotOk(uint16 skill_id, struct map_session_data *sd)
 
 	if (skill_blockpc_get(sd, skill_id) != -1){
 		clif_skill_fail(sd,skill_id,USESKILL_FAIL_SKILLINTERVAL,0);
+#ifdef BGEXTENDED
+		// I don't know why 'cooldown msg' doesn't appears in Guild Skills [Easycore]
+		if (skill_id >= 10010 && skill_id <= 10013)
+			clif_displaymessage(sd->fd,"[Guild Skill] Cannot use the skill due to cooldown delay");
+#endif
 		return true;
 	}
 
@@ -962,11 +967,19 @@ bool skill_isNotOk(uint16 skill_id, struct map_session_data *sd)
 			break;
 		case GD_EMERGENCYCALL:
 		case GD_ITEMEMERGENCYCALL:
+#ifdef BGEXTENDED
+			if (
+				!map_getmapflag(sd->bl.m, MF_BATTLEGROUND) && (!(battle_config.emergency_call&((is_agit_start())?2:1)) ||
+				!(battle_config.emergency_call&(mapdata_flag_gvg2(mapdata)?8:4)) ||
+				(battle_config.emergency_call&16 && map_getmapflag(sd->bl.m, MF_NOWARPTO) && !(map_getmapflag(sd->bl.m, MF_GVG_CASTLE) || map_getmapflag(sd->bl.m, MF_GVG_TE_CASTLE))))
+			)	{
+#else
 			if (
 				!(battle_config.emergency_call&((is_agit_start())?2:1)) ||
 				!(battle_config.emergency_call&(mapdata_flag_gvg2(mapdata)?8:4)) ||
 				(battle_config.emergency_call&16 && mapdata->flag[MF_NOWARPTO] && !(mapdata->flag[MF_GVG_CASTLE] || mapdata->flag[MF_GVG_TE_CASTLE]))
 			)	{
+#endif
 				clif_skill_fail(sd,skill_id,USESKILL_FAIL_LEVEL,0);
 				return true;
 			}
@@ -10041,23 +10054,40 @@ int skill_castend_nodamage_id (struct block_list *src, struct block_list *bl, ui
 	case GD_RESTORE:
 	case GD_EMERGENCY_MOVE:
 		if(flag&1) {
-			if (status_get_guild_id(src) == status_get_guild_id(bl)) {				
+#ifdef BGEXTENDED
+			if (status_get_guild_id(src) == status_get_guild_id(bl) || (map_getmapflag(src->m, MF_BATTLEGROUND) && bg_team_get_id(src) == bg_team_get_id(bl))) {
+#else
+			if (status_get_guild_id(src) == status_get_guild_id(bl)) {
+#endif
 				if( skill_id == GD_RESTORE )
 					clif_skill_nodamage(src,bl,AL_HEAL,status_percent_heal(bl,90,90),1);
 				else
 					sc_start(src,bl,type,100,skill_lv,skill_get_time(skill_id, skill_lv));
 			}
+#ifdef BGEXTENDED
+		} else if (status_get_guild_id(src) || (map_getmapflag(src->m, MF_BATTLEGROUND) && bg_team_get_id(src))) {
+#else
 		} else if (status_get_guild_id(src)) {
+#endif
 			clif_skill_nodamage(src,bl,skill_id,skill_lv,1);
 			map_foreachinallrange(skill_area_sub, src,
 				skill_get_splash(skill_id, skill_lv), BL_PC,
 				src,skill_id,skill_lv,tick, flag|BCT_GUILD|1,
 				skill_castend_nodamage_id);
+#ifdef BGEXTENDED
+			if (sd) {
+				if (sd->bg_id)
+					bg_block_skill_start(sd, skill_id, skill_get_time2(skill_id, skill_lv));
+				else
+					guild_block_skill(sd,skill_get_time2(skill_id,skill_lv));
+			}
+#else
 			if (sd)
 #ifdef RENEWAL
 				skill_blockpc_start(sd, skill_id, skill_get_cooldown(skill_id, skill_lv));
 #else
 				guild_block_skill(sd, skill_get_time2(skill_id, skill_lv));
+#endif
 #endif
 		}
 		break;
@@ -10067,10 +10097,27 @@ int skill_castend_nodamage_id (struct block_list *src, struct block_list *bl, ui
 			int8 dx[9] = {-1, 1, 0, 0,-1, 1,-1, 1, 0};
 			int8 dy[9] = { 0, 0, 1,-1, 1,-1,-1, 1, 0};
 			uint8 j = 0, calls = 0, called = 0;
+#ifdef BGEXTENDED
+			struct guild *g = NULL;
+			std::shared_ptr<s_battleground_data> bg = NULL;
+			int max_member;
+#else
 			struct guild *g;
+#endif
+#ifdef BGEXTENDED
+			if (map_getmapflag(src->m, MF_BATTLEGROUND) && bg_team_get_id(src)) {
+				bg = util::umap_find(bg_team_db, sd->bg_id);
+				max_member = MAX_BG_MEMBERS;
+			} else {
+				g = sd?sd->guild:guild_search(status_get_guild_id(src));
+				max_member = g->max_member;
+			}
+			if (!g && !bg)
+#else
 			// i don't know if it actually summons in a circle, but oh well. ;P
 			g = sd?sd->guild:guild_search(status_get_guild_id(src));
 			if (!g)
+#endif
 				break;
 
 			if (skill_id == GD_ITEMEMERGENCYCALL)
@@ -10082,6 +10129,40 @@ int skill_castend_nodamage_id (struct block_list *src, struct block_list *bl, ui
 				}
 
 			clif_skill_nodamage(src,bl,skill_id,skill_lv,1);
+#ifdef BGEXTENDED
+			if(bg) {
+				for (const auto &member : bg->members) {
+					if (j > 8)
+						j = 0;
+					if ((dstsd = member.sd) != nullptr && sd != dstsd && !dstsd->state.autotrade && !pc_isdead(dstsd)) {
+						if (map_getmapflag(dstsd->bl.m, MF_NOWARP) && !map_flag_gvg2(dstsd->bl.m) && !bg)
+							continue;
+						if (!pc_job_can_entermap((enum e_job)dstsd->status.class_, src->m, pc_get_group_level(dstsd)))
+							continue;
+						if(map_getcell(src->m,src->x+dx[j],src->y+dy[j],CELL_CHKNOREACH))
+							dx[j] = dy[j] = 0;
+						if (!pc_setpos(dstsd, map_id2index(src->m), src->x+dx[j], src->y+dy[j], CLR_RESPAWN))
+							called++;
+					}
+					j++;
+				}
+			} else {
+				for (i = 0; i < max_member && (!calls || (calls && called < calls)); i++, j++) {
+					if (j > 8)
+						j = 0;
+					if ((dstsd = g->member[i].sd) != NULL && sd != dstsd && !dstsd->state.autotrade && !pc_isdead(dstsd)) {
+						if (map_getmapflag(dstsd->bl.m, MF_NOWARP) && !map_flag_gvg2(dstsd->bl.m))
+							continue;
+						if (!pc_job_can_entermap((enum e_job)dstsd->status.class_, src->m, pc_get_group_level(dstsd)))
+							continue;
+						if(map_getcell(src->m,src->x+dx[j],src->y+dy[j],CELL_CHKNOREACH))
+							dx[j] = dy[j] = 0;
+						if (!pc_setpos(dstsd, map_id2index(src->m), src->x+dx[j], src->y+dy[j], CLR_RESPAWN))
+							called++;
+					}
+				}
+			}
+#else
 			for (i = 0; i < g->max_member && (!calls || (calls && called < calls)); i++, j++) {
 				if (j > 8)
 					j = 0;
@@ -10096,11 +10177,21 @@ int skill_castend_nodamage_id (struct block_list *src, struct block_list *bl, ui
 						called++;
 				}
 			}
+#endif
+#ifdef BGEXTENDED
+			if (sd) {
+				if (sd->bg_id)
+					bg_block_skill_start(sd, skill_id, skill_get_time2(skill_id, skill_lv));
+				else
+					guild_block_skill(sd,skill_get_time2(skill_id,skill_lv));
+			}
+#else
 			if (sd)
 #ifdef RENEWAL
 				skill_blockpc_start(sd, skill_id, skill_get_cooldown(skill_id, skill_lv));
 #else
 				guild_block_skill(sd, skill_get_time2(skill_id, skill_lv));
+#endif
 #endif
 		}
 		break;
@@ -17010,14 +17101,26 @@ bool skill_check_condition_castbegin(struct map_session_data* sd, uint16 skill_i
 		case GD_CHARGESHOUT_FLAG:
 		case GD_CHARGESHOUT_BEATING:
 		case GD_EMERGENCY_MOVE:
+#ifdef BGEXTENDED
+			if (!(map_flag_gvg2(sd->bl.m) || map_getmapflag(sd->bl.m, MF_BATTLEGROUND))) {
+#else
 			if (!map_flag_gvg2(sd->bl.m)) {
+#endif
 				clif_skill_fail(sd,skill_id,USESKILL_FAIL_LEVEL,0);
 				return false;
 			}
 		case GD_EMERGENCYCALL:
 		case GD_ITEMEMERGENCYCALL:
 			// other checks were already done in skill_isNotOk()
+#ifdef BGEXTENDED
+			if (map_getmapflag(sd->bl.m, MF_BATTLEGROUND)) {
+				std::shared_ptr<s_battleground_data> bgteam = util::umap_find(bg_team_db, sd->bg_id);
+				if( !sd->bg_id || bgteam->leader_char_id != sd->status.char_id)
+					return false; // Not Team Leader on Battleground
+			} else if (!sd->status.guild_id || (sd->state.gmaster_flag == 0 && skill_id != GD_CHARGESHOUT_BEATING))
+#else
 			if (!sd->status.guild_id || (sd->state.gmaster_flag == 0 && skill_id != GD_CHARGESHOUT_BEATING))
+#endif
 				return false;
 			break;
 
@@ -17830,7 +17933,17 @@ bool skill_check_condition_castend(struct map_session_data* sd, uint16 skill_id,
 		if( !require.itemid[i] )
 			continue;
 		index[i] = pc_search_inventory(sd,require.itemid[i]);
+#ifdef BGEXTENDED
+		if( index[i] < 0 || sd->inventory.u.items_inventory[index[i]].amount < require.amount[i] ||
+			sd->inventory.u.items_inventory[index[i]].card[0] == CARD0_CREATE &&
+			((MakeDWord(sd->inventory.u.items_inventory[index[i]].card[2], sd->inventory.u.items_inventory[index[i]].card[3]) ==
+			battle_config.bg_reserved_char_id && !map_getmapflag(sd->bl.m, MF_BG_CONSUME)) ||
+			(MakeDWord(sd->inventory.u.items_inventory[index[i]].card[2], sd->inventory.u.items_inventory[index[i]].card[3]) ==
+			battle_config.woe_reserved_char_id && !map_getmapflag(sd->bl.m, MF_WOE_CONSUME)))
+		) {
+#else
 		if( index[i] < 0 || sd->inventory.u.items_inventory[index[i]].amount < require.amount[i] ) {
+#endif
 			if( require.itemid[i] == ITEMID_HOLY_WATER )
 				clif_skill_fail(sd,skill_id,USESKILL_FAIL_HOLYWATER,0); //Holy water is required.
 			else if( require.itemid[i] == ITEMID_RED_GEMSTONE )
diff --git a/src/map/storage.cpp b/src/map/storage.cpp
index 3754dd020..d5a40fd69 100644
--- a/src/map/storage.cpp
+++ b/src/map/storage.cpp
@@ -12,6 +12,9 @@
 #include "../common/nullpo.hpp"
 #include "../common/showmsg.hpp"
 #include "../common/utilities.hpp"
+#ifdef BGEXTENDED
+#include "../common/utils.hpp"
+#endif
 
 #include "battle.hpp"
 #include "chrif.hpp"
@@ -751,6 +754,14 @@ bool storage_guild_additem(struct map_session_data* sd, struct s_storage* stor,
 		clif_displaymessage(sd->fd, msg_txt(sd,294));
 		return false;
 	}
+#ifdef BGEXTENDED
+	//Brian Bg Items - updated by [AnubisK]
+	if( item_data->card[0]==CARD0_CREATE && (MakeDWord(item_data->card[2],item_data->card[3]) == (battle_config.bg_reserved_char_id || battle_config.woe_reserved_char_id)  && !battle_config.bg_can_trade))
+	{	// "Battleground's Items"
+		clif_displaymessage (sd->fd, msg_txt(sd,264));
+		return 1;
+	}
+#endif
 
 	if(itemdb_isstackable2(id)) { //Stackable
 		for(i = 0; i < stor->max_amount; i++) {
diff --git a/src/map/trade.cpp b/src/map/trade.cpp
index 7a3efa826..9e0a8169b 100644
--- a/src/map/trade.cpp
+++ b/src/map/trade.cpp
@@ -8,6 +8,9 @@
 
 #include "../common/nullpo.hpp"
 #include "../common/socket.hpp"
+#ifdef BGEXTENDED
+#include "../common/utils.hpp"
+#endif
 
 #include "atcommand.hpp"
 #include "battle.hpp"
@@ -393,6 +396,14 @@ void trade_tradeadditem(struct map_session_data *sd, short index, short amount)
 		clif_tradeitemok(sd, index+2, 1);
 		return;
 	}
+#ifdef BGEXTENDED
+	if( item->card[0]==CARD0_CREATE && (MakeDWord(item->card[2],item->card[3])== (battle_config.bg_reserved_char_id || battle_config.woe_reserved_char_id )&& !battle_config.bg_can_trade) )
+	{	// "Battleground's Items"
+		clif_displaymessage (sd->fd, msg_txt(sd,260));
+		clif_tradeitemok(sd, index+2, 1);
+		return;
+	}
+#endif
 
 	if( ((item->bound == BOUND_ACCOUNT || item->bound > BOUND_GUILD) || (item->bound == BOUND_GUILD && sd->status.guild_id != target_sd->status.guild_id)) && !pc_can_give_bounded_items(sd) ) { // Item Bound
 		clif_displaymessage(sd->fd, msg_txt(sd,293));
diff --git a/src/map/unit.cpp b/src/map/unit.cpp
index a3a10c1ab..0a2441221 100644
--- a/src/map/unit.cpp
+++ b/src/map/unit.cpp
@@ -513,6 +513,10 @@ static TIMER_FUNC(unit_walktoxy_timer)
 			} else
 				sd->areanpc.clear();
 			pc_cell_basilica(sd);
+#ifdef BGEXTENDED
+			if( strcmpi(map_mapid2mapname(bl->m), "bg_bomber") == 0 || strcmpi(map_mapid2mapname(bl->m), "bg_bomber2") == 0 || strcmpi(map_mapid2mapname(bl->m), "bomberman") == 0)
+				clif_soundeffect(sd,bl,"bomberman_walk.wav",1);
+#endif
 			break;
 		case BL_MOB:
 			//Movement was successful, reset walktoxy_fail_count
@@ -779,6 +783,13 @@ int unit_walktoxy( struct block_list *bl, short x, short y, unsigned char flag)
 			unit_check_start_teleport_timer(&sd->hd->bl);
 		if (sd->pd != nullptr)
 			unit_check_start_teleport_timer(&sd->pd->bl);
+#ifdef BGEXTENDED
+		if (sd->ballx) {
+			sd->ballx = x;
+			sd->bally = y;
+			run_script(npc_name2id("TryThrowBall")->u.scr.script,0,sd->bl.id,npc_name2id("TryThrowBall")->bl.id);
+		}
+#endif
 	}
 
 	return unit_walktoxy_sub(bl);
diff --git a/src/map/vending.cpp b/src/map/vending.cpp
index 1e0a5cc7a..b3ee98c08 100644
--- a/src/map/vending.cpp
+++ b/src/map/vending.cpp
@@ -10,6 +10,9 @@
 #include "../common/showmsg.hpp" // ShowInfo
 #include "../common/strlib.hpp"
 #include "../common/timer.hpp"  // DIFF_TICK
+#ifdef BGEXTENDED
+#include "../common/utils.hpp"
+#endif
 
 #include "achievement.hpp"
 #include "atcommand.hpp"
@@ -334,14 +337,26 @@ int8 vending_openvending(struct map_session_data* sd, const char* message, const
 
 		index -= 2; // offset adjustment (client says that the first cart position is 2)
 
+#ifdef BGEXTENDED
 		if( index < 0 || index >= MAX_CART // invalid position
 		||  pc_cartitem_amount(sd, index, amount) < 0 // invalid item or insufficient quantity
 		//NOTE: official server does not do any of the following checks!
 		||  !sd->cart.u.items_cart[index].identify // unidentified item
 		||  sd->cart.u.items_cart[index].attribute == 1 // broken item
 		||  sd->cart.u.items_cart[index].expire_time // It should not be in the cart but just in case
+		||  (sd->cart.u.items_cart[index].card[0]==CARD0_CREATE && (MakeDWord(sd->cart.u.items_cart[index].card[2],sd->cart.u.items_cart[index].card[3]) == (battle_config.bg_reserved_char_id || battle_config.woe_reserved_char_id) && !battle_config.bg_can_trade))
 		||  (sd->cart.u.items_cart[index].bound && !pc_can_give_bounded_items(sd)) // can't trade account bound items and has no permission
 		||  !itemdb_cantrade(&sd->cart.u.items_cart[index], pc_get_group_level(sd), pc_get_group_level(sd)) ) // untradeable item
+#else
+		if( index < 0 || index >= MAX_CART // invalid position
+		||  pc_cartitem_amount(sd, index, amount) < 0 // invalid item or insufficient quantity
+		//NOTE: official server does not do any of the following checks!
+		||  !sd->cart.u.items_cart[index].identify // unidentified item
+		||  sd->cart.u.items_cart[index].attribute == 1 // broken item
+		||  sd->cart.u.items_cart[index].expire_time // It should not be in the cart but just in case
+		||  (sd->cart.u.items_cart[index].bound && !pc_can_give_bounded_items(sd)) // can't trade account bound items and has no permission
+		||  !itemdb_cantrade(&sd->cart.u.items_cart[index], pc_get_group_level(sd), pc_get_group_level(sd)) ) // untradeable item
+#endif
 			continue;
 
 		sd->vending[i].index = index;
-- 
2.26.2.windows.1

